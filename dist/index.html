<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#6366f1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="description" content="Ourdm - Private & Secure Messaging Platform with End-to-End Encryption. By Sameer Shah" />
    <meta name="keywords" content="messaging, chat, secure, encrypted, private, voice call, video call, stories" />
    <meta name="author" content="Sameer Shah" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ourdm.vercel.app/" />
    <meta property="og:title" content="Ourdm - Private & Secure Messaging" />
    <meta property="og:description" content="End-to-end encrypted messaging with voice/video calls, stories, and more." />
    <meta property="og:image" content="./logo.png" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://ourdm.vercel.app/" />
    <meta property="twitter:title" content="Ourdm - Private & Secure Messaging" />
    <meta property="twitter:description" content="End-to-end encrypted messaging with voice/video calls, stories, and more." />
    <meta property="twitter:image" content="/logo.png" />
    
    <!-- PWA -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="Ourdm" />
    <meta name="msapplication-TileColor" content="#6366f1" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    
    <title>Ourdm - Private & Secure Messaging</title>
    <link rel="manifest" href="./manifest.json" />
    <link rel="apple-touch-icon" href="./logo.png" />
    <link rel="icon" type="image/png" href="./logo.png" />
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://api.dicebear.com" />
    <link rel="preconnect" href="https://lskhxlmzfpvcollwflxq.supabase.co" />
    
    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="https://stun.l.google.com" />
    <script type="module" crossorigin>(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ty(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var sh={exports:{}},Lo={};var pp;function gw(){if(pp)return Lo;pp=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(i,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:a,type:i,key:f,ref:l!==void 0?l:null,props:c}}return Lo.Fragment=n,Lo.jsx=r,Lo.jsxs=r,Lo}var yp;function pw(){return yp||(yp=1,sh.exports=gw()),sh.exports}var u=pw(),ih={exports:{}},xt={};var vp;function yw(){if(vp)return xt;vp=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),_=Symbol.iterator;function k(I){return I===null||typeof I!="object"?null:(I=_&&I[_]||I["@@iterator"],typeof I=="function"?I:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,H={};function q(I,B,ue){this.props=I,this.context=B,this.refs=H,this.updater=ue||E}q.prototype.isReactComponent={},q.prototype.setState=function(I,B){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,B,"setState")},q.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function W(){}W.prototype=q.prototype;function L(I,B,ue){this.props=I,this.context=B,this.refs=H,this.updater=ue||E}var z=L.prototype=new W;z.constructor=L,R(z,q.prototype),z.isPureReactComponent=!0;var fe=Array.isArray;function K(){}var X={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function D(I,B,ue){var te=ue.ref;return{$$typeof:a,type:I,key:B,ref:te!==void 0?te:null,props:ue}}function Z(I,B){return D(I.type,B,I.props)}function F(I){return typeof I=="object"&&I!==null&&I.$$typeof===a}function G(I){var B={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ue){return B[ue]})}var ne=/\/+/g;function M(I,B){return typeof I=="object"&&I!==null&&I.key!=null?G(""+I.key):B.toString(36)}function J(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(K,K):(I.status="pending",I.then(function(B){I.status==="pending"&&(I.status="fulfilled",I.value=B)},function(B){I.status==="pending"&&(I.status="rejected",I.reason=B)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function A(I,B,ue,te,he){var Be=typeof I;(Be==="undefined"||Be==="boolean")&&(I=null);var Ee=!1;if(I===null)Ee=!0;else switch(Be){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(I.$$typeof){case a:case n:Ee=!0;break;case v:return Ee=I._init,A(Ee(I._payload),B,ue,te,he)}}if(Ee)return he=he(I),Ee=te===""?"."+M(I,0):te,fe(he)?(ue="",Ee!=null&&(ue=Ee.replace(ne,"$&/")+"/"),A(he,B,ue,"",function(Ue){return Ue})):he!=null&&(F(he)&&(he=Z(he,ue+(he.key==null||I&&I.key===he.key?"":(""+he.key).replace(ne,"$&/")+"/")+Ee)),B.push(he)),1;Ee=0;var lt=te===""?".":te+":";if(fe(I))for(var Me=0;Me<I.length;Me++)te=I[Me],Be=lt+M(te,Me),Ee+=A(te,B,ue,Be,he);else if(Me=k(I),typeof Me=="function")for(I=Me.call(I),Me=0;!(te=I.next()).done;)te=te.value,Be=lt+M(te,Me++),Ee+=A(te,B,ue,Be,he);else if(Be==="object"){if(typeof I.then=="function")return A(J(I),B,ue,te,he);throw B=String(I),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function T(I,B,ue){if(I==null)return I;var te=[],he=0;return A(I,te,"","",function(Be){return B.call(ue,Be,he++)}),te}function Y(I){if(I._status===-1){var B=I._result;B=B(),B.then(function(ue){(I._status===0||I._status===-1)&&(I._status=1,I._result=ue)},function(ue){(I._status===0||I._status===-1)&&(I._status=2,I._result=ue)}),I._status===-1&&(I._status=0,I._result=B)}if(I._status===1)return I._result.default;throw I._result}var $=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},ae={map:T,forEach:function(I,B,ue){T(I,function(){B.apply(this,arguments)},ue)},count:function(I){var B=0;return T(I,function(){B++}),B},toArray:function(I){return T(I,function(B){return B})||[]},only:function(I){if(!F(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return xt.Activity=w,xt.Children=ae,xt.Component=q,xt.Fragment=r,xt.Profiler=l,xt.PureComponent=L,xt.StrictMode=i,xt.Suspense=y,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,xt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return X.H.useMemoCache(I)}},xt.cache=function(I){return function(){return I.apply(null,arguments)}},xt.cacheSignal=function(){return null},xt.cloneElement=function(I,B,ue){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var te=R({},I.props),he=I.key;if(B!=null)for(Be in B.key!==void 0&&(he=""+B.key),B)!O.call(B,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&B.ref===void 0||(te[Be]=B[Be]);var Be=arguments.length-2;if(Be===1)te.children=ue;else if(1<Be){for(var Ee=Array(Be),lt=0;lt<Be;lt++)Ee[lt]=arguments[lt+2];te.children=Ee}return D(I.type,he,te)},xt.createContext=function(I){return I={$$typeof:f,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:c,_context:I},I},xt.createElement=function(I,B,ue){var te,he={},Be=null;if(B!=null)for(te in B.key!==void 0&&(Be=""+B.key),B)O.call(B,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(he[te]=B[te]);var Ee=arguments.length-2;if(Ee===1)he.children=ue;else if(1<Ee){for(var lt=Array(Ee),Me=0;Me<Ee;Me++)lt[Me]=arguments[Me+2];he.children=lt}if(I&&I.defaultProps)for(te in Ee=I.defaultProps,Ee)he[te]===void 0&&(he[te]=Ee[te]);return D(I,Be,he)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(I){return{$$typeof:m,render:I}},xt.isValidElement=F,xt.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:Y}},xt.memo=function(I,B){return{$$typeof:b,type:I,compare:B===void 0?null:B}},xt.startTransition=function(I){var B=X.T,ue={};X.T=ue;try{var te=I(),he=X.S;he!==null&&he(ue,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(K,$)}catch(Be){$(Be)}finally{B!==null&&ue.types!==null&&(B.types=ue.types),X.T=B}},xt.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},xt.use=function(I){return X.H.use(I)},xt.useActionState=function(I,B,ue){return X.H.useActionState(I,B,ue)},xt.useCallback=function(I,B){return X.H.useCallback(I,B)},xt.useContext=function(I){return X.H.useContext(I)},xt.useDebugValue=function(){},xt.useDeferredValue=function(I,B){return X.H.useDeferredValue(I,B)},xt.useEffect=function(I,B){return X.H.useEffect(I,B)},xt.useEffectEvent=function(I){return X.H.useEffectEvent(I)},xt.useId=function(){return X.H.useId()},xt.useImperativeHandle=function(I,B,ue){return X.H.useImperativeHandle(I,B,ue)},xt.useInsertionEffect=function(I,B){return X.H.useInsertionEffect(I,B)},xt.useLayoutEffect=function(I,B){return X.H.useLayoutEffect(I,B)},xt.useMemo=function(I,B){return X.H.useMemo(I,B)},xt.useOptimistic=function(I,B){return X.H.useOptimistic(I,B)},xt.useReducer=function(I,B,ue){return X.H.useReducer(I,B,ue)},xt.useRef=function(I){return X.H.useRef(I)},xt.useState=function(I){return X.H.useState(I)},xt.useSyncExternalStore=function(I,B,ue){return X.H.useSyncExternalStore(I,B,ue)},xt.useTransition=function(){return X.H.useTransition()},xt.version="19.2.3",xt}var bp;function rm(){return bp||(bp=1,ih.exports=yw()),ih.exports}var Se=rm();const Su=Ty(Se);var lh={exports:{}},Io={},oh={exports:{}},ch={};var wp;function vw(){return wp||(wp=1,(function(a){function n(A,T){var Y=A.length;A.push(T);e:for(;0<Y;){var $=Y-1>>>1,ae=A[$];if(0<l(ae,T))A[$]=T,A[Y]=ae,Y=$;else break e}}function r(A){return A.length===0?null:A[0]}function i(A){if(A.length===0)return null;var T=A[0],Y=A.pop();if(Y!==T){A[0]=Y;e:for(var $=0,ae=A.length,I=ae>>>1;$<I;){var B=2*($+1)-1,ue=A[B],te=B+1,he=A[te];if(0>l(ue,Y))te<ae&&0>l(he,ue)?(A[$]=he,A[te]=Y,$=te):(A[$]=ue,A[B]=Y,$=B);else if(te<ae&&0>l(he,Y))A[$]=he,A[te]=Y,$=te;else break e}}return T}function l(A,T){var Y=A.sortIndex-T.sortIndex;return Y!==0?Y:A.id-T.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();a.unstable_now=function(){return f.now()-m}}var y=[],b=[],v=1,w=null,_=3,k=!1,E=!1,R=!1,H=!1,q=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function z(A){for(var T=r(b);T!==null;){if(T.callback===null)i(b);else if(T.startTime<=A)i(b),T.sortIndex=T.expirationTime,n(y,T);else break;T=r(b)}}function fe(A){if(R=!1,z(A),!E)if(r(y)!==null)E=!0,K||(K=!0,G());else{var T=r(b);T!==null&&J(fe,T.startTime-A)}}var K=!1,X=-1,O=5,D=-1;function Z(){return H?!0:!(a.unstable_now()-D<O)}function F(){if(H=!1,K){var A=a.unstable_now();D=A;var T=!0;try{e:{E=!1,R&&(R=!1,W(X),X=-1),k=!0;var Y=_;try{t:{for(z(A),w=r(y);w!==null&&!(w.expirationTime>A&&Z());){var $=w.callback;if(typeof $=="function"){w.callback=null,_=w.priorityLevel;var ae=$(w.expirationTime<=A);if(A=a.unstable_now(),typeof ae=="function"){w.callback=ae,z(A),T=!0;break t}w===r(y)&&i(y),z(A)}else i(y);w=r(y)}if(w!==null)T=!0;else{var I=r(b);I!==null&&J(fe,I.startTime-A),T=!1}}break e}finally{w=null,_=Y,k=!1}T=void 0}}finally{T?G():K=!1}}}var G;if(typeof L=="function")G=function(){L(F)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,M=ne.port2;ne.port1.onmessage=F,G=function(){M.postMessage(null)}}else G=function(){q(F,0)};function J(A,T){X=q(function(){A(a.unstable_now())},T)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(A){A.callback=null},a.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<A?Math.floor(1e3/A):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_next=function(A){switch(_){case 1:case 2:case 3:var T=3;break;default:T=_}var Y=_;_=T;try{return A()}finally{_=Y}},a.unstable_requestPaint=function(){H=!0},a.unstable_runWithPriority=function(A,T){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var Y=_;_=A;try{return T()}finally{_=Y}},a.unstable_scheduleCallback=function(A,T,Y){var $=a.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?$+Y:$):Y=$,A){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Y+ae,A={id:v++,callback:T,priorityLevel:A,startTime:Y,expirationTime:ae,sortIndex:-1},Y>$?(A.sortIndex=Y,n(b,A),r(y)===null&&A===r(b)&&(R?(W(X),X=-1):R=!0,J(fe,Y-$))):(A.sortIndex=ae,n(y,A),E||k||(E=!0,K||(K=!0,G()))),A},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(A){var T=_;return function(){var Y=_;_=T;try{return A.apply(this,arguments)}finally{_=Y}}}})(ch)),ch}var xp;function bw(){return xp||(xp=1,oh.exports=vw()),oh.exports}var uh={exports:{}},ua={};var _p;function ww(){if(_p)return ua;_p=1;var a=rm();function n(y){var b="https://react.dev/errors/"+y;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)b+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,b,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:y,containerInfo:b,implementation:v}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,b){if(y==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return ua.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ua.createPortal=function(y,b){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return c(y,b,null,v)},ua.flushSync=function(y){var b=f.T,v=i.p;try{if(f.T=null,i.p=2,y)return y()}finally{f.T=b,i.p=v,i.d.f()}},ua.preconnect=function(y,b){typeof y=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,i.d.C(y,b))},ua.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},ua.preinit=function(y,b){if(typeof y=="string"&&b&&typeof b.as=="string"){var v=b.as,w=m(v,b.crossOrigin),_=typeof b.integrity=="string"?b.integrity:void 0,k=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;v==="style"?i.d.S(y,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:w,integrity:_,fetchPriority:k}):v==="script"&&i.d.X(y,{crossOrigin:w,integrity:_,fetchPriority:k,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},ua.preinitModule=function(y,b){if(typeof y=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var v=m(b.as,b.crossOrigin);i.d.M(y,{crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&i.d.M(y)},ua.preload=function(y,b){if(typeof y=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var v=b.as,w=m(v,b.crossOrigin);i.d.L(y,v,{crossOrigin:w,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},ua.preloadModule=function(y,b){if(typeof y=="string")if(b){var v=m(b.as,b.crossOrigin);i.d.m(y,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else i.d.m(y)},ua.requestFormReset=function(y){i.d.r(y)},ua.unstable_batchedUpdates=function(y,b){return y(b)},ua.useFormState=function(y,b,v){return f.H.useFormState(y,b,v)},ua.useFormStatus=function(){return f.H.useHostTransitionStatus()},ua.version="19.2.3",ua}var Sp;function xw(){if(Sp)return uh.exports;Sp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),uh.exports=ww(),uh.exports}var kp;function _w(){if(kp)return Io;kp=1;var a=bw(),n=rm(),r=xw();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(c(e)!==e)throw Error(i(188))}function b(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(i(188));return t!==e?null:e}for(var s=e,o=t;;){var h=s.return;if(h===null)break;var g=h.alternate;if(g===null){if(o=h.return,o!==null){s=o;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===s)return y(h),e;if(g===o)return y(h),t;g=g.sibling}throw Error(i(188))}if(s.return!==o.return)s=h,o=g;else{for(var j=!1,U=h.child;U;){if(U===s){j=!0,s=h,o=g;break}if(U===o){j=!0,o=h,s=g;break}U=U.sibling}if(!j){for(U=g.child;U;){if(U===s){j=!0,s=g,o=h;break}if(U===o){j=!0,o=g,s=h;break}U=U.sibling}if(!j)throw Error(i(189))}}if(s.alternate!==o)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,_=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Symbol.for("react.client.reference");function M(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case q:return"Profiler";case H:return"StrictMode";case fe:return"Suspense";case K:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case L:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:M(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return M(e(t))}catch{}}return null}var J=Array.isArray,A=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},$=[],ae=-1;function I(e){return{current:e}}function B(e){0>ae||(e.current=$[ae],$[ae]=null,ae--)}function ue(e,t){ae++,$[ae]=e.current,e.current=t}var te=I(null),he=I(null),Be=I(null),Ee=I(null);function lt(e,t){switch(ue(Be,t),ue(he,e),ue(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ig(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ig(t),e=Bg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(te),ue(te,e)}function Me(){B(te),B(he),B(Be)}function Ue(e){e.memoizedState!==null&&ue(Ee,e);var t=te.current,s=Bg(t,e.type);t!==s&&(ue(he,e),ue(te,s))}function _t(e){he.current===e&&(B(te),B(he)),Ee.current===e&&(B(Ee),Do._currentValue=Y)}var at,yn;function Fe(e){if(at===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);at=t&&t[1]||"",yn=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+at+e+yn}var we=!1;function Pe(e,t){if(!e||we)return"";we=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(Ne){var _e=Ne}Reflect.construct(e,[],De)}else{try{De.call()}catch(Ne){_e=Ne}e.call(De.prototype)}}else{try{throw Error()}catch(Ne){_e=Ne}(De=e())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(Ne){if(Ne&&_e&&typeof Ne.stack=="string")return[Ne.stack,_e.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),j=g[0],U=g[1];if(j&&U){var Q=j.split(`
`),be=U.split(`
`);for(h=o=0;o<Q.length&&!Q[o].includes("DetermineComponentFrameRoot");)o++;for(;h<be.length&&!be[h].includes("DetermineComponentFrameRoot");)h++;if(o===Q.length||h===be.length)for(o=Q.length-1,h=be.length-1;1<=o&&0<=h&&Q[o]!==be[h];)h--;for(;1<=o&&0<=h;o--,h--)if(Q[o]!==be[h]){if(o!==1||h!==1)do if(o--,h--,0>h||Q[o]!==be[h]){var Te=`
`+Q[o].replace(" at new "," at ");return e.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",e.displayName)),Te}while(1<=o&&0<=h);break}}}finally{we=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Fe(s):""}function ke(e,t){switch(e.tag){case 26:case 27:case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return e.child!==t&&t!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return Pe(e.type,!1);case 11:return Pe(e.type.render,!1);case 1:return Pe(e.type,!0);case 31:return Fe("Activity");default:return""}}function ze(e){try{var t="",s=null;do t+=ke(e,s),s=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var We=Object.prototype.hasOwnProperty,yt=a.unstable_scheduleCallback,ct=a.unstable_cancelCallback,Mt=a.unstable_shouldYield,vt=a.unstable_requestPaint,gt=a.unstable_now,hn=a.unstable_getCurrentPriorityLevel,mt=a.unstable_ImmediatePriority,Qt=a.unstable_UserBlockingPriority,Xt=a.unstable_NormalPriority,Qn=a.unstable_LowPriority,an=a.unstable_IdlePriority,Sn=a.log,tn=a.unstable_setDisableYieldValue,vn=null,zt=null;function It(e){if(typeof Sn=="function"&&tn(e),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(vn,e)}catch{}}var $e=Math.clz32?Math.clz32:Ha,ja=Math.log,bn=Math.LN2;function Ha(e){return e>>>=0,e===0?32:31-(ja(e)/bn|0)|0}var He=256,Na=262144,wn=4194304;function xn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Tn(e,t,s){var o=e.pendingLanes;if(o===0)return 0;var h=0,g=e.suspendedLanes,j=e.pingedLanes;e=e.warmLanes;var U=o&134217727;return U!==0?(o=U&~g,o!==0?h=xn(o):(j&=U,j!==0?h=xn(j):s||(s=U&~e,s!==0&&(h=xn(s))))):(U=o&~g,U!==0?h=xn(U):j!==0?h=xn(j):s||(s=o&~e,s!==0&&(h=xn(s)))),h===0?0:t!==0&&t!==h&&(t&g)===0&&(g=h&-h,s=t&-t,g>=s||g===32&&(s&4194048)!==0)?t:h}function Kn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ga(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kn(){var e=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),e}function On(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function sa(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pa(e,t,s,o,h,g){var j=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var U=e.entanglements,Q=e.expirationTimes,be=e.hiddenUpdates;for(s=j&~s;0<s;){var Te=31-$e(s),De=1<<Te;U[Te]=0,Q[Te]=-1;var _e=be[Te];if(_e!==null)for(be[Te]=null,Te=0;Te<_e.length;Te++){var Ne=_e[Te];Ne!==null&&(Ne.lane&=-536870913)}s&=~De}o!==0&&pr(e,o,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(j&~t))}function pr(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-$e(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|s&261930}function Pt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var o=31-$e(s),h=1<<o;h&t|e[o]&t&&(e[o]|=t),s&=~h}}function rn(e,t){var s=t&-t;return s=(s&42)!==0?1:Qs(s),(s&(e.suspendedLanes|t))!==0?0:s}function Qs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Aa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Er(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:cp(e.type))}function Cr(e,t){var s=T.p;try{return T.p=e,t()}finally{T.p=s}}var $a=Math.random().toString(36).slice(2),Vt="__reactFiber$"+$a,mn="__reactProps$"+$a,Xn="__reactContainer$"+$a,Ea="__reactEvents$"+$a,Pl="__reactListeners$"+$a,ya="__reactHandles$"+$a,Xs="__reactResources$"+$a,ia="__reactMarker$"+$a;function ir(e){delete e[Vt],delete e[mn],delete e[Ea],delete e[Pl],delete e[ya]}function Ka(e){var t=e[Vt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Xn]||s[Vt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Gg(e);e!==null;){if(s=e[Vt])return s;e=Gg(e)}return t}e=s,s=e.parentNode}return null}function Ht(e){if(e=e[Vt]||e[Xn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function fa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Vn(e){var t=e[Xs];return t||(t=e[Xs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function on(e){e[ia]=!0}var Ca=new Set,Tr={};function Ta(e,t){Oa(e,t),Oa(e+"Capture",t)}function Oa(e,t){for(Tr[e]=t,e=0;e<t.length;e++)Ca.add(t[e])}var Va=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Js={},Or={};function Ri(e){return We.call(Or,e)?!0:We.call(Js,e)?!1:Va.test(e)?Or[e]=!0:(Js[e]=!0,!1)}function St(e,t,s){if(Ri(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function je(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Qe(e,t,s,o){if(o===null)e.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+o)}}function st(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sn(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $t(e,t,s){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(j){s=""+j,g.call(this,j)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(j){s=""+j},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bt(e){if(!e._valueTracker){var t=sn(e)?"checked":"value";e._valueTracker=$t(e,t,""+e[t])}}function Ln(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),o="";return e&&(o=sn(e)?e.checked?"true":"false":e.value),e=o,e!==s?(t.setValue(e),!0):!1}function kt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var _n=/[\n"\\]/g;function gn(e){return e.replace(_n,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fa(e,t,s,o,h,g,j,U){e.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?e.type=j:e.removeAttribute("type"),t!=null?j==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+st(t)):e.value!==""+st(t)&&(e.value=""+st(t)):j!=="submit"&&j!=="reset"||e.removeAttribute("value"),t!=null?Ws(e,j,st(t)):s!=null?Ws(e,j,st(s)):o!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?e.name=""+st(U):e.removeAttribute("name")}function yr(e,t,s,o,h,g,j,U){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),t!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||t!=null)){bt(e);return}s=s!=null?""+st(s):"",t=t!=null?""+st(t):s,U||t===e.value||(e.value=t),e.defaultValue=t}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=U?e.checked:!!o,e.defaultChecked=!!o,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(e.name=j),bt(e)}function Ws(e,t,s){t==="number"&&kt(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function lr(e,t,s,o){if(e=e.options,t){t={};for(var h=0;h<s.length;h++)t["$"+s[h]]=!0;for(s=0;s<e.length;s++)h=t.hasOwnProperty("$"+e[s].value),e[s].selected!==h&&(e[s].selected=h),h&&o&&(e[s].defaultSelected=!0)}else{for(s=""+st(s),t=null,h=0;h<e.length;h++){if(e[h].value===s){e[h].selected=!0,o&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function Hl(e,t,s){if(t!=null&&(t=""+st(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+st(s):""}function Zs(e,t,s,o){if(t==null){if(o!=null){if(s!=null)throw Error(i(92));if(J(o)){if(1<o.length)throw Error(i(93));o=o[0]}s=o}s==null&&(s=""),t=s}s=st(t),e.defaultValue=s,o=e.textContent,o===s&&o!==""&&o!==null&&(e.value=o),bt(e)}function Rr(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var hd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ut(e,t,s){var o=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,s):typeof s!="number"||s===0||hd.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function $l(e,t,s){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var h in t)o=t[h],t.hasOwnProperty(h)&&s[h]!==o&&Ut(e,h,o)}else for(var g in t)t.hasOwnProperty(g)&&Ut(e,g,t[g])}function Kl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ha=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function or(e){return ha.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function va(){}var Ga=null;function Ui(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ur=null,cn=null;function Ra(e){var t=Ht(e);if(t&&(e=t.stateNode)){var s=e[mn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fa(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+gn(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var o=s[t];if(o!==e&&o.form===e.form){var h=o[mn]||null;if(!h)throw Error(i(90));Fa(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(t=0;t<s.length;t++)o=s[t],o.form===e.form&&Ln(o)}break e;case"textarea":Hl(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&lr(e,!!s.multiple,t,!1)}}}var Dr=!1;function os(e,t,s){if(Dr)return e(t,s);Dr=!0;try{var o=e(t);return o}finally{if(Dr=!1,(Ur!==null||cn!==null)&&(tu(),Ur&&(t=Ur,e=cn,cn=Ur=null,Ra(t),e)))for(t=0;t<e.length;t++)Ra(e[t])}}function Mr(e,t){var s=e.stateNode;if(s===null)return null;var o=s[mn]||null;if(o===null)return null;s=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(i(231,t,typeof s));return s}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vl=!1;if(Fn)try{var la={};Object.defineProperty(la,"passive",{get:function(){Vl=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{Vl=!1}var Ya=null,Di=null,cs=null;function us(){if(cs)return cs;var e,t=Di,s=t.length,o,h="value"in Ya?Ya.value:Ya.textContent,g=h.length;for(e=0;e<s&&t[e]===h[e];e++);var j=s-e;for(o=1;o<=j&&t[s-o]===h[g-o];o++);return cs=h.slice(e,1<o?1-o:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ei(){return!0}function hc(){return!1}function Rn(e){function t(s,o,h,g,j){this._reactName=s,this._targetInst=h,this.type=o,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var U in e)e.hasOwnProperty(U)&&(s=e[U],this[U]=s?s(g):g[U]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ei:hc,this.isPropagationStopped=hc,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ei)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ei)},persist:function(){},isPersistent:ei}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Rn(zr),vr=w({},zr,{view:0,detail:0}),zi=Rn(vr),ti,Fl,ni,qi=w({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ni&&(ni&&e.type==="mousemove"?(ti=e.screenX-ni.screenX,Fl=e.screenY-ni.screenY):Fl=ti=0,ni=e),ti)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),Li=Rn(qi),Gl=w({},qi,{dataTransfer:0}),mc=Rn(Gl),Ii=w({},vr,{relatedTarget:0}),fs=Rn(Ii),Bi=w({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=Rn(Bi),gd=w({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hs=Rn(gd),Yl=w({},zr,{data:0}),Pi=Rn(Yl),Ql={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ai(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gn[e])?!!t[e]:!1}function qr(){return ai}var pc=w({},vr,{key:function(e){if(e.key){var t=Ql[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hi=Rn(pc),yc=w({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=Rn(yc),$i=w({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),Wl=Rn($i),Lr=w({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zl=Rn(Lr),eo=w({},qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ki=Rn(eo),to=w({},zr,{newState:0,oldState:0}),vc=Rn(to),pd=[9,13,27,32],ri=Fn&&"CompositionEvent"in window,br=null;Fn&&"documentMode"in document&&(br=document.documentMode);var yd=Fn&&"TextEvent"in window&&!br,Vi=Fn&&(!ri||br&&8<br&&11>=br),Fi=" ",bc=!1;function no(e,t){switch(e){case"keyup":return pd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ir=!1;function xc(e,t){switch(e){case"compositionend":return wc(t);case"keypress":return t.which!==32?null:(bc=!0,Fi);case"textInput":return e=t.data,e===Fi&&bc?null:e;default:return null}}function vd(e,t){if(Ir)return e==="compositionend"||!ri&&no(e,t)?(e=us(),cs=Di=Ya=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vi&&t.locale!=="ko"?null:t.data;default:return null}}var _c={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_c[e.type]:t==="textarea"}function ao(e,t,s,o){Ur?cn?cn.push(o):cn=[o]:Ur=o,t=ou(t,"onChange"),0<t.length&&(s=new Mi("onChange","change",null,s,o),e.push({event:s,listeners:t}))}var ms=null,si=null;function bd(e){Ug(e,0)}function Yi(e){var t=fa(e);if(Ln(t))return e}function ii(e,t){if(e==="change")return t}var Qa=!1;if(Fn){var un;if(Fn){var gs="oninput"in document;if(!gs){var Br=document.createElement("div");Br.setAttribute("oninput","return;"),gs=typeof Br.oninput=="function"}un=gs}else un=!1;Qa=un&&(!document.documentMode||9<document.documentMode)}function Sc(){ms&&(ms.detachEvent("onpropertychange",Qi),si=ms=null)}function Qi(e){if(e.propertyName==="value"&&Yi(si)){var t=[];ao(t,si,e,Ui(e)),os(bd,t)}}function kc(e,t,s){e==="focusin"?(Sc(),ms=t,si=s,ms.attachEvent("onpropertychange",Qi)):e==="focusout"&&Sc()}function Pr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yi(si)}function ro(e,t){if(e==="click")return Yi(t)}function ps(e,t){if(e==="input"||e==="change")return Yi(t)}function wr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oa=typeof Object.is=="function"?Object.is:wr;function d(e,t){if(oa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var h=s[o];if(!We.call(t,h)||!oa(e[h],t[h]))return!1}return!0}function p(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x(e,t){var s=p(e);e=0;for(var o;s;){if(s.nodeType===3){if(o=e+s.textContent.length,e<=t&&o>=t)return{node:s,offset:t-e};e=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=p(s)}}function S(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function N(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=kt(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=kt(e.document)}return t}function C(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var P=Fn&&"documentMode"in document&&11>=document.documentMode,V=null,re=null,ge=null,se=!1;function ee(e,t,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;se||V==null||V!==kt(o)||(o=V,"selectionStart"in o&&C(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ge&&d(ge,o)||(ge=o,o=ou(re,"onSelect"),0<o.length&&(t=new Mi("onSelect","select",null,t,s),e.push({event:t,listeners:o}),t.target=V)))}function oe(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var de={animationend:oe("Animation","AnimationEnd"),animationiteration:oe("Animation","AnimationIteration"),animationstart:oe("Animation","AnimationStart"),transitionrun:oe("Transition","TransitionRun"),transitionstart:oe("Transition","TransitionStart"),transitioncancel:oe("Transition","TransitionCancel"),transitionend:oe("Transition","TransitionEnd")},ie={},le={};Fn&&(le=document.createElement("div").style,"AnimationEvent"in window||(delete de.animationend.animation,delete de.animationiteration.animation,delete de.animationstart.animation),"TransitionEvent"in window||delete de.transitionend.transition);function ye(e){if(ie[e])return ie[e];if(!de[e])return e;var t=de[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in le)return ie[e]=t[s];return e}var xe=ye("animationend"),pe=ye("animationiteration"),Ce=ye("animationstart"),qe=ye("transitionrun"),Ke=ye("transitionstart"),Ve=ye("transitioncancel"),Le=ye("transitionend"),Xe=new Map,Ge="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ge.push("scrollEnd");function Ie(e,t){Xe.set(e,t),Ta(t,[e])}var Je=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pt=[],At=0,ot=0;function wt(){for(var e=At,t=ot=At=0;t<e;){var s=pt[t];pt[t++]=null;var o=pt[t];pt[t++]=null;var h=pt[t];pt[t++]=null;var g=pt[t];if(pt[t++]=null,o!==null&&h!==null){var j=o.pending;j===null?h.next=h:(h.next=j.next,j.next=h),o.pending=h}g!==0&&xr(s,h,g)}}function Jt(e,t,s,o){pt[At++]=e,pt[At++]=t,pt[At++]=s,pt[At++]=o,ot|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function ca(e,t,s,o){return Jt(e,t,s,o),ys(e)}function Kt(e,t){return Jt(e,null,null,t),ys(e)}function xr(e,t,s){e.lanes|=s;var o=e.alternate;o!==null&&(o.lanes|=s);for(var h=!1,g=e.return;g!==null;)g.childLanes|=s,o=g.alternate,o!==null&&(o.childLanes|=s),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&t!==null&&(h=31-$e(s),e=g.hiddenUpdates,o=e[h],o===null?e[h]=[t]:o.push(t),t.lane=s|536870912),g):null}function ys(e){if(50<Ao)throw Ao=0,Cf=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Xi={};function Jv(e,t,s,o){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(e,t,s,o){return new Jv(e,t,s,o)}function wd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hr(e,t){var s=e.alternate;return s===null?(s=Ua(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function gm(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jc(e,t,s,o,h,g){var j=0;if(o=e,typeof e=="function")wd(e)&&(j=1);else if(typeof e=="string")j=nw(e,s,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case D:return e=Ua(31,s,t,h),e.elementType=D,e.lanes=g,e;case R:return li(s.children,h,g,t);case H:j=8,h|=24;break;case q:return e=Ua(12,s,t,h|2),e.elementType=q,e.lanes=g,e;case fe:return e=Ua(13,s,t,h),e.elementType=fe,e.lanes=g,e;case K:return e=Ua(19,s,t,h),e.elementType=K,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:j=10;break e;case W:j=9;break e;case z:j=11;break e;case X:j=14;break e;case O:j=16,o=null;break e}j=29,s=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=Ua(j,s,t,h),t.elementType=e,t.type=o,t.lanes=g,t}function li(e,t,s,o){return e=Ua(7,e,o,t),e.lanes=s,e}function xd(e,t,s){return e=Ua(6,e,null,t),e.lanes=s,e}function pm(e){var t=Ua(18,null,null,0);return t.stateNode=e,t}function _d(e,t,s){return t=Ua(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ym=new WeakMap;function Xa(e,t){if(typeof e=="object"&&e!==null){var s=ym.get(e);return s!==void 0?s:(t={value:e,source:t,stack:ze(t)},ym.set(e,t),t)}return{value:e,source:t,stack:ze(t)}}var Ji=[],Wi=0,Nc=null,so=0,Ja=[],Wa=0,vs=null,_r=1,Sr="";function $r(e,t){Ji[Wi++]=so,Ji[Wi++]=Nc,Nc=e,so=t}function vm(e,t,s){Ja[Wa++]=_r,Ja[Wa++]=Sr,Ja[Wa++]=vs,vs=e;var o=_r;e=Sr;var h=32-$e(o)-1;o&=~(1<<h),s+=1;var g=32-$e(t)+h;if(30<g){var j=h-h%5;g=(o&(1<<j)-1).toString(32),o>>=j,h-=j,_r=1<<32-$e(t)+h|s<<h|o,Sr=g+e}else _r=1<<g|s<<h|o,Sr=e}function Sd(e){e.return!==null&&($r(e,1),vm(e,1,0))}function kd(e){for(;e===Nc;)Nc=Ji[--Wi],Ji[Wi]=null,so=Ji[--Wi],Ji[Wi]=null;for(;e===vs;)vs=Ja[--Wa],Ja[Wa]=null,Sr=Ja[--Wa],Ja[Wa]=null,_r=Ja[--Wa],Ja[Wa]=null}function bm(e,t){Ja[Wa++]=_r,Ja[Wa++]=Sr,Ja[Wa++]=vs,_r=t.id,Sr=t.overflow,vs=e}var Jn=null,dn=null,Dt=!1,bs=null,Za=!1,jd=Error(i(519));function ws(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw io(Xa(t,e)),jd}function wm(e){var t=e.stateNode,s=e.type,o=e.memoizedProps;switch(t[Vt]=e,t[mn]=o,s){case"dialog":Tt("cancel",t),Tt("close",t);break;case"iframe":case"object":case"embed":Tt("load",t);break;case"video":case"audio":for(s=0;s<Co.length;s++)Tt(Co[s],t);break;case"source":Tt("error",t);break;case"img":case"image":case"link":Tt("error",t),Tt("load",t);break;case"details":Tt("toggle",t);break;case"input":Tt("invalid",t),yr(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Tt("invalid",t);break;case"textarea":Tt("invalid",t),Zs(t,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||o.suppressHydrationWarning===!0||qg(t.textContent,s)?(o.popover!=null&&(Tt("beforetoggle",t),Tt("toggle",t)),o.onScroll!=null&&Tt("scroll",t),o.onScrollEnd!=null&&Tt("scrollend",t),o.onClick!=null&&(t.onclick=va),t=!0):t=!1,t||ws(e,!0)}function xm(e){for(Jn=e.return;Jn;)switch(Jn.tag){case 5:case 31:case 13:Za=!1;return;case 27:case 3:Za=!0;return;default:Jn=Jn.return}}function Zi(e){if(e!==Jn)return!1;if(!Dt)return xm(e),Dt=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Kf(e.type,e.memoizedProps)),s=!s),s&&dn&&ws(e),xm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));dn=Fg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));dn=Fg(e)}else t===27?(t=dn,Ds(e.type)?(e=Qf,Qf=null,dn=e):dn=t):dn=Jn?tr(e.stateNode.nextSibling):null;return!0}function oi(){dn=Jn=null,Dt=!1}function Nd(){var e=bs;return e!==null&&(_a===null?_a=e:_a.push.apply(_a,e),bs=null),e}function io(e){bs===null?bs=[e]:bs.push(e)}var Ad=I(null),ci=null,Kr=null;function xs(e,t,s){ue(Ad,t._currentValue),t._currentValue=s}function Vr(e){e._currentValue=Ad.current,B(Ad)}function Ed(e,t,s){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===s)break;e=e.return}}function Cd(e,t,s,o){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var j=h.child;g=g.firstContext;e:for(;g!==null;){var U=g;g=h;for(var Q=0;Q<t.length;Q++)if(U.context===t[Q]){g.lanes|=s,U=g.alternate,U!==null&&(U.lanes|=s),Ed(g.return,s,e),o||(j=null);break e}g=U.next}}else if(h.tag===18){if(j=h.return,j===null)throw Error(i(341));j.lanes|=s,g=j.alternate,g!==null&&(g.lanes|=s),Ed(j,s,e),j=null}else j=h.child;if(j!==null)j.return=h;else for(j=h;j!==null;){if(j===e){j=null;break}if(h=j.sibling,h!==null){h.return=j.return,j=h;break}j=j.return}h=j}}function el(e,t,s,o){e=null;for(var h=t,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var j=h.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var U=h.type;oa(h.pendingProps.value,j.value)||(e!==null?e.push(U):e=[U])}}else if(h===Ee.current){if(j=h.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Do):e=[Do])}h=h.return}e!==null&&Cd(t,e,s,o),t.flags|=262144}function Ac(e){for(e=e.firstContext;e!==null;){if(!oa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ui(e){ci=e,Kr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wn(e){return _m(ci,e)}function Ec(e,t){return ci===null&&ui(e),_m(e,t)}function _m(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Kr===null){if(e===null)throw Error(i(308));Kr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Kr=Kr.next=t;return s}var Wv=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Zv=a.unstable_scheduleCallback,eb=a.unstable_NormalPriority,Un={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new Wv,data:new Map,refCount:0}}function lo(e){e.refCount--,e.refCount===0&&Zv(eb,function(){e.controller.abort()})}var oo=null,Od=0,tl=0,nl=null;function tb(e,t){if(oo===null){var s=oo=[];Od=0,tl=Mf(),nl={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Od++,t.then(Sm,Sm),t}function Sm(){if(--Od===0&&oo!==null){nl!==null&&(nl.status="fulfilled");var e=oo;oo=null,tl=0,nl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function nb(e,t){var s=[],o={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var h=0;h<s.length;h++)(0,s[h])(t)},function(h){for(o.status="rejected",o.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),o}var km=A.S;A.S=function(e,t){lg=gt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&tb(e,t),km!==null&&km(e,t)};var di=I(null);function Rd(){var e=di.current;return e!==null?e:nn.pooledCache}function Cc(e,t){t===null?ue(di,di.current):ue(di,t.pool)}function jm(){var e=Rd();return e===null?null:{parent:Un._currentValue,pool:e}}var al=Error(i(460)),Ud=Error(i(474)),Tc=Error(i(542)),Oc={then:function(){}};function Nm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Am(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(va,va),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cm(e),e;default:if(typeof t.status=="string")t.then(va,va);else{if(e=nn,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var h=t;h.status="fulfilled",h.value=o}},function(o){if(t.status==="pending"){var h=t;h.status="rejected",h.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Cm(e),e}throw hi=t,al}}function fi(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(hi=s,al):s}}var hi=null;function Em(){if(hi===null)throw Error(i(459));var e=hi;return hi=null,e}function Cm(e){if(e===al||e===Tc)throw Error(i(483))}var rl=null,co=0;function Rc(e){var t=co;return co+=1,rl===null&&(rl=[]),Am(rl,e,t)}function uo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Uc(e,t){throw t.$$typeof===_?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Tm(e){function t(me,ce){if(e){var ve=me.deletions;ve===null?(me.deletions=[ce],me.flags|=16):ve.push(ce)}}function s(me,ce){if(!e)return null;for(;ce!==null;)t(me,ce),ce=ce.sibling;return null}function o(me){for(var ce=new Map;me!==null;)me.key!==null?ce.set(me.key,me):ce.set(me.index,me),me=me.sibling;return ce}function h(me,ce){return me=Hr(me,ce),me.index=0,me.sibling=null,me}function g(me,ce,ve){return me.index=ve,e?(ve=me.alternate,ve!==null?(ve=ve.index,ve<ce?(me.flags|=67108866,ce):ve):(me.flags|=67108866,ce)):(me.flags|=1048576,ce)}function j(me){return e&&me.alternate===null&&(me.flags|=67108866),me}function U(me,ce,ve,Re){return ce===null||ce.tag!==6?(ce=xd(ve,me.mode,Re),ce.return=me,ce):(ce=h(ce,ve),ce.return=me,ce)}function Q(me,ce,ve,Re){var ut=ve.type;return ut===R?Te(me,ce,ve.props.children,Re,ve.key):ce!==null&&(ce.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===O&&fi(ut)===ce.type)?(ce=h(ce,ve.props),uo(ce,ve),ce.return=me,ce):(ce=jc(ve.type,ve.key,ve.props,null,me.mode,Re),uo(ce,ve),ce.return=me,ce)}function be(me,ce,ve,Re){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ve.containerInfo||ce.stateNode.implementation!==ve.implementation?(ce=_d(ve,me.mode,Re),ce.return=me,ce):(ce=h(ce,ve.children||[]),ce.return=me,ce)}function Te(me,ce,ve,Re,ut){return ce===null||ce.tag!==7?(ce=li(ve,me.mode,Re,ut),ce.return=me,ce):(ce=h(ce,ve),ce.return=me,ce)}function De(me,ce,ve){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=xd(""+ce,me.mode,ve),ce.return=me,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case k:return ve=jc(ce.type,ce.key,ce.props,null,me.mode,ve),uo(ve,ce),ve.return=me,ve;case E:return ce=_d(ce,me.mode,ve),ce.return=me,ce;case O:return ce=fi(ce),De(me,ce,ve)}if(J(ce)||G(ce))return ce=li(ce,me.mode,ve,null),ce.return=me,ce;if(typeof ce.then=="function")return De(me,Rc(ce),ve);if(ce.$$typeof===L)return De(me,Ec(me,ce),ve);Uc(me,ce)}return null}function _e(me,ce,ve,Re){var ut=ce!==null?ce.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ut!==null?null:U(me,ce,""+ve,Re);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case k:return ve.key===ut?Q(me,ce,ve,Re):null;case E:return ve.key===ut?be(me,ce,ve,Re):null;case O:return ve=fi(ve),_e(me,ce,ve,Re)}if(J(ve)||G(ve))return ut!==null?null:Te(me,ce,ve,Re,null);if(typeof ve.then=="function")return _e(me,ce,Rc(ve),Re);if(ve.$$typeof===L)return _e(me,ce,Ec(me,ve),Re);Uc(me,ve)}return null}function Ne(me,ce,ve,Re,ut){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return me=me.get(ve)||null,U(ce,me,""+Re,ut);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case k:return me=me.get(Re.key===null?ve:Re.key)||null,Q(ce,me,Re,ut);case E:return me=me.get(Re.key===null?ve:Re.key)||null,be(ce,me,Re,ut);case O:return Re=fi(Re),Ne(me,ce,ve,Re,ut)}if(J(Re)||G(Re))return me=me.get(ve)||null,Te(ce,me,Re,ut,null);if(typeof Re.then=="function")return Ne(me,ce,ve,Rc(Re),ut);if(Re.$$typeof===L)return Ne(me,ce,ve,Ec(ce,Re),ut);Uc(ce,Re)}return null}function et(me,ce,ve,Re){for(var ut=null,qt=null,rt=ce,Nt=ce=0,Rt=null;rt!==null&&Nt<ve.length;Nt++){rt.index>Nt?(Rt=rt,rt=null):Rt=rt.sibling;var Lt=_e(me,rt,ve[Nt],Re);if(Lt===null){rt===null&&(rt=Rt);break}e&&rt&&Lt.alternate===null&&t(me,rt),ce=g(Lt,ce,Nt),qt===null?ut=Lt:qt.sibling=Lt,qt=Lt,rt=Rt}if(Nt===ve.length)return s(me,rt),Dt&&$r(me,Nt),ut;if(rt===null){for(;Nt<ve.length;Nt++)rt=De(me,ve[Nt],Re),rt!==null&&(ce=g(rt,ce,Nt),qt===null?ut=rt:qt.sibling=rt,qt=rt);return Dt&&$r(me,Nt),ut}for(rt=o(rt);Nt<ve.length;Nt++)Rt=Ne(rt,me,Nt,ve[Nt],Re),Rt!==null&&(e&&Rt.alternate!==null&&rt.delete(Rt.key===null?Nt:Rt.key),ce=g(Rt,ce,Nt),qt===null?ut=Rt:qt.sibling=Rt,qt=Rt);return e&&rt.forEach(function(Is){return t(me,Is)}),Dt&&$r(me,Nt),ut}function dt(me,ce,ve,Re){if(ve==null)throw Error(i(151));for(var ut=null,qt=null,rt=ce,Nt=ce=0,Rt=null,Lt=ve.next();rt!==null&&!Lt.done;Nt++,Lt=ve.next()){rt.index>Nt?(Rt=rt,rt=null):Rt=rt.sibling;var Is=_e(me,rt,Lt.value,Re);if(Is===null){rt===null&&(rt=Rt);break}e&&rt&&Is.alternate===null&&t(me,rt),ce=g(Is,ce,Nt),qt===null?ut=Is:qt.sibling=Is,qt=Is,rt=Rt}if(Lt.done)return s(me,rt),Dt&&$r(me,Nt),ut;if(rt===null){for(;!Lt.done;Nt++,Lt=ve.next())Lt=De(me,Lt.value,Re),Lt!==null&&(ce=g(Lt,ce,Nt),qt===null?ut=Lt:qt.sibling=Lt,qt=Lt);return Dt&&$r(me,Nt),ut}for(rt=o(rt);!Lt.done;Nt++,Lt=ve.next())Lt=Ne(rt,me,Nt,Lt.value,Re),Lt!==null&&(e&&Lt.alternate!==null&&rt.delete(Lt.key===null?Nt:Lt.key),ce=g(Lt,ce,Nt),qt===null?ut=Lt:qt.sibling=Lt,qt=Lt);return e&&rt.forEach(function(hw){return t(me,hw)}),Dt&&$r(me,Nt),ut}function en(me,ce,ve,Re){if(typeof ve=="object"&&ve!==null&&ve.type===R&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case k:e:{for(var ut=ve.key;ce!==null;){if(ce.key===ut){if(ut=ve.type,ut===R){if(ce.tag===7){s(me,ce.sibling),Re=h(ce,ve.props.children),Re.return=me,me=Re;break e}}else if(ce.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===O&&fi(ut)===ce.type){s(me,ce.sibling),Re=h(ce,ve.props),uo(Re,ve),Re.return=me,me=Re;break e}s(me,ce);break}else t(me,ce);ce=ce.sibling}ve.type===R?(Re=li(ve.props.children,me.mode,Re,ve.key),Re.return=me,me=Re):(Re=jc(ve.type,ve.key,ve.props,null,me.mode,Re),uo(Re,ve),Re.return=me,me=Re)}return j(me);case E:e:{for(ut=ve.key;ce!==null;){if(ce.key===ut)if(ce.tag===4&&ce.stateNode.containerInfo===ve.containerInfo&&ce.stateNode.implementation===ve.implementation){s(me,ce.sibling),Re=h(ce,ve.children||[]),Re.return=me,me=Re;break e}else{s(me,ce);break}else t(me,ce);ce=ce.sibling}Re=_d(ve,me.mode,Re),Re.return=me,me=Re}return j(me);case O:return ve=fi(ve),en(me,ce,ve,Re)}if(J(ve))return et(me,ce,ve,Re);if(G(ve)){if(ut=G(ve),typeof ut!="function")throw Error(i(150));return ve=ut.call(ve),dt(me,ce,ve,Re)}if(typeof ve.then=="function")return en(me,ce,Rc(ve),Re);if(ve.$$typeof===L)return en(me,ce,Ec(me,ve),Re);Uc(me,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ce!==null&&ce.tag===6?(s(me,ce.sibling),Re=h(ce,ve),Re.return=me,me=Re):(s(me,ce),Re=xd(ve,me.mode,Re),Re.return=me,me=Re),j(me)):s(me,ce)}return function(me,ce,ve,Re){try{co=0;var ut=en(me,ce,ve,Re);return rl=null,ut}catch(rt){if(rt===al||rt===Tc)throw rt;var qt=Ua(29,rt,null,me.mode);return qt.lanes=Re,qt.return=me,qt}finally{}}}var mi=Tm(!0),Om=Tm(!1),_s=!1;function Dd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Md(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ks(e,t,s){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Bt&2)!==0){var h=o.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),o.pending=t,t=ys(e),xr(e,null,s),t}return Jt(e,o,t,s),ys(e)}function fo(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,s|=o,t.lanes=s,Pt(e,s)}}function zd(e,t){var s=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var h=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var j={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?h=g=j:g=g.next=j,s=s.next}while(s!==null);g===null?h=g=t:g=g.next=t}else h=g=t;s={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var qd=!1;function ho(){if(qd){var e=nl;if(e!==null)throw e}}function mo(e,t,s,o){qd=!1;var h=e.updateQueue;_s=!1;var g=h.firstBaseUpdate,j=h.lastBaseUpdate,U=h.shared.pending;if(U!==null){h.shared.pending=null;var Q=U,be=Q.next;Q.next=null,j===null?g=be:j.next=be,j=Q;var Te=e.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==j&&(U===null?Te.firstBaseUpdate=be:U.next=be,Te.lastBaseUpdate=Q))}if(g!==null){var De=h.baseState;j=0,Te=be=Q=null,U=g;do{var _e=U.lane&-536870913,Ne=_e!==U.lane;if(Ne?(Ot&_e)===_e:(o&_e)===_e){_e!==0&&_e===tl&&(qd=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var et=e,dt=U;_e=t;var en=s;switch(dt.tag){case 1:if(et=dt.payload,typeof et=="function"){De=et.call(en,De,_e);break e}De=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=dt.payload,_e=typeof et=="function"?et.call(en,De,_e):et,_e==null)break e;De=w({},De,_e);break e;case 2:_s=!0}}_e=U.callback,_e!==null&&(e.flags|=64,Ne&&(e.flags|=8192),Ne=h.callbacks,Ne===null?h.callbacks=[_e]:Ne.push(_e))}else Ne={lane:_e,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(be=Te=Ne,Q=De):Te=Te.next=Ne,j|=_e;if(U=U.next,U===null){if(U=h.shared.pending,U===null)break;Ne=U,U=Ne.next,Ne.next=null,h.lastBaseUpdate=Ne,h.shared.pending=null}}while(!0);Te===null&&(Q=De),h.baseState=Q,h.firstBaseUpdate=be,h.lastBaseUpdate=Te,g===null&&(h.shared.lanes=0),Cs|=j,e.lanes=j,e.memoizedState=De}}function Rm(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Um(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Rm(s[e],t)}var sl=I(null),Dc=I(0);function Dm(e,t){e=es,ue(Dc,e),ue(sl,t),es=e|t.baseLanes}function Ld(){ue(Dc,es),ue(sl,sl.current)}function Id(){es=Dc.current,B(sl),B(Dc)}var Da=I(null),er=null;function js(e){var t=e.alternate;ue(En,En.current&1),ue(Da,e),er===null&&(t===null||sl.current!==null||t.memoizedState!==null)&&(er=e)}function Bd(e){ue(En,En.current),ue(Da,e),er===null&&(er=e)}function Mm(e){e.tag===22?(ue(En,En.current),ue(Da,e),er===null&&(er=e)):Ns()}function Ns(){ue(En,En.current),ue(Da,Da.current)}function Ma(e){B(Da),er===e&&(er=null),B(En)}var En=I(0);function Mc(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Gf(s)||Yf(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fr=0,jt=null,Wt=null,Dn=null,zc=!1,il=!1,gi=!1,qc=0,go=0,ll=null,ab=0;function jn(){throw Error(i(321))}function Pd(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!oa(e[s],t[s]))return!1;return!0}function Hd(e,t,s,o,h,g){return Fr=g,jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?v0:af,gi=!1,g=s(o,h),gi=!1,il&&(g=qm(t,s,o,h)),zm(e),g}function zm(e){A.H=vo;var t=Wt!==null&&Wt.next!==null;if(Fr=0,Dn=Wt=jt=null,zc=!1,go=0,ll=null,t)throw Error(i(300));e===null||Mn||(e=e.dependencies,e!==null&&Ac(e)&&(Mn=!0))}function qm(e,t,s,o){jt=e;var h=0;do{if(il&&(ll=null),go=0,il=!1,25<=h)throw Error(i(301));if(h+=1,Dn=Wt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}A.H=b0,g=t(s,o)}while(il);return g}function rb(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?po(t):t,e=e.useState()[0],(Wt!==null?Wt.memoizedState:null)!==e&&(jt.flags|=1024),t}function $d(){var e=qc!==0;return qc=0,e}function Kd(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Vd(e){if(zc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}zc=!1}Fr=0,Dn=Wt=jt=null,il=!1,go=qc=0,ll=null}function ma(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?jt.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function Cn(){if(Wt===null){var e=jt.alternate;e=e!==null?e.memoizedState:null}else e=Wt.next;var t=Dn===null?jt.memoizedState:Dn.next;if(t!==null)Dn=t,Wt=e;else{if(e===null)throw jt.alternate===null?Error(i(467)):Error(i(310));Wt=e,e={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Dn===null?jt.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}function Lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function po(e){var t=go;return go+=1,ll===null&&(ll=[]),e=Am(ll,e,t),t=jt,(Dn===null?t.memoizedState:Dn.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?v0:af),e}function Ic(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return po(e);if(e.$$typeof===L)return Wn(e)}throw Error(i(438,String(e)))}function Fd(e){var t=null,s=jt.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var o=jt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(h){return h.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Lc(),jt.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),o=0;o<e;o++)s[o]=Z;return t.index++,s}function Gr(e,t){return typeof t=="function"?t(e):t}function Bc(e){var t=Cn();return Gd(t,Wt,e)}function Gd(e,t,s){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var h=e.baseQueue,g=o.pending;if(g!==null){if(h!==null){var j=h.next;h.next=g.next,g.next=j}t.baseQueue=h=g,o.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{t=h.next;var U=j=null,Q=null,be=t,Te=!1;do{var De=be.lane&-536870913;if(De!==be.lane?(Ot&De)===De:(Fr&De)===De){var _e=be.revertLane;if(_e===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),De===tl&&(Te=!0);else if((Fr&_e)===_e){be=be.next,_e===tl&&(Te=!0);continue}else De={lane:0,revertLane:be.revertLane,gesture:null,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},Q===null?(U=Q=De,j=g):Q=Q.next=De,jt.lanes|=_e,Cs|=_e;De=be.action,gi&&s(g,De),g=be.hasEagerState?be.eagerState:s(g,De)}else _e={lane:De,revertLane:be.revertLane,gesture:be.gesture,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},Q===null?(U=Q=_e,j=g):Q=Q.next=_e,jt.lanes|=De,Cs|=De;be=be.next}while(be!==null&&be!==t);if(Q===null?j=g:Q.next=U,!oa(g,e.memoizedState)&&(Mn=!0,Te&&(s=nl,s!==null)))throw s;e.memoizedState=g,e.baseState=j,e.baseQueue=Q,o.lastRenderedState=g}return h===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Yd(e){var t=Cn(),s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=e;var o=s.dispatch,h=s.pending,g=t.memoizedState;if(h!==null){s.pending=null;var j=h=h.next;do g=e(g,j.action),j=j.next;while(j!==h);oa(g,t.memoizedState)||(Mn=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),s.lastRenderedState=g}return[g,o]}function Lm(e,t,s){var o=jt,h=Cn(),g=Dt;if(g){if(s===void 0)throw Error(i(407));s=s()}else s=t();var j=!oa((Wt||h).memoizedState,s);if(j&&(h.memoizedState=s,Mn=!0),h=h.queue,Jd(Pm.bind(null,o,h,e),[e]),h.getSnapshot!==t||j||Dn!==null&&Dn.memoizedState.tag&1){if(o.flags|=2048,ol(9,{destroy:void 0},Bm.bind(null,o,h,s,t),null),nn===null)throw Error(i(349));g||(Fr&127)!==0||Im(o,t,s)}return s}function Im(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=jt.updateQueue,t===null?(t=Lc(),jt.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Bm(e,t,s,o){t.value=s,t.getSnapshot=o,Hm(t)&&$m(e)}function Pm(e,t,s){return s(function(){Hm(t)&&$m(e)})}function Hm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!oa(e,s)}catch{return!0}}function $m(e){var t=Kt(e,2);t!==null&&Sa(t,e,2)}function Qd(e){var t=ma();if(typeof e=="function"){var s=e;if(e=s(),gi){It(!0);try{s()}finally{It(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:e},t}function Km(e,t,s,o){return e.baseState=s,Gd(e,Wt,typeof o=="function"?o:Gr)}function sb(e,t,s,o,h){if($c(e))throw Error(i(485));if(e=t.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){g.listeners.push(j)}};A.T!==null?s(!0):g.isTransition=!1,o(g),s=t.pending,s===null?(g.next=t.pending=g,Vm(t,g)):(g.next=s.next,t.pending=s.next=g)}}function Vm(e,t){var s=t.action,o=t.payload,h=e.state;if(t.isTransition){var g=A.T,j={};A.T=j;try{var U=s(h,o),Q=A.S;Q!==null&&Q(j,U),Fm(e,t,U)}catch(be){Xd(e,t,be)}finally{g!==null&&j.types!==null&&(g.types=j.types),A.T=g}}else try{g=s(h,o),Fm(e,t,g)}catch(be){Xd(e,t,be)}}function Fm(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){Gm(e,t,o)},function(o){return Xd(e,t,o)}):Gm(e,t,s)}function Gm(e,t,s){t.status="fulfilled",t.value=s,Ym(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Vm(e,s)))}function Xd(e,t,s){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=s,Ym(t),t=t.next;while(t!==o)}e.action=null}function Ym(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qm(e,t){return t}function Xm(e,t){if(Dt){var s=nn.formState;if(s!==null){e:{var o=jt;if(Dt){if(dn){t:{for(var h=dn,g=Za;h.nodeType!==8;){if(!g){h=null;break t}if(h=tr(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){dn=tr(h.nextSibling),o=h.data==="F!";break e}}ws(o)}o=!1}o&&(t=s[0])}}return s=ma(),s.memoizedState=s.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qm,lastRenderedState:t},s.queue=o,s=g0.bind(null,jt,o),o.dispatch=s,o=Qd(!1),g=nf.bind(null,jt,!1,o.queue),o=ma(),h={state:t,dispatch:null,action:e,pending:null},o.queue=h,s=sb.bind(null,jt,h,g,s),h.dispatch=s,o.memoizedState=e,[t,s,!1]}function Jm(e){var t=Cn();return Wm(t,Wt,e)}function Wm(e,t,s){if(t=Gd(e,t,Qm)[0],e=Bc(Gr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=po(t)}catch(j){throw j===al?Tc:j}else o=t;t=Cn();var h=t.queue,g=h.dispatch;return s!==t.memoizedState&&(jt.flags|=2048,ol(9,{destroy:void 0},ib.bind(null,h,s),null)),[o,g,e]}function ib(e,t){e.action=t}function Zm(e){var t=Cn(),s=Wt;if(s!==null)return Wm(t,s,e);Cn(),t=t.memoizedState,s=Cn();var o=s.queue.dispatch;return s.memoizedState=e,[t,o,!1]}function ol(e,t,s,o){return e={tag:e,create:s,deps:o,inst:t,next:null},t=jt.updateQueue,t===null&&(t=Lc(),jt.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(o=s.next,s.next=e,e.next=o,t.lastEffect=e),e}function e0(){return Cn().memoizedState}function Pc(e,t,s,o){var h=ma();jt.flags|=e,h.memoizedState=ol(1|t,{destroy:void 0},s,o===void 0?null:o)}function Hc(e,t,s,o){var h=Cn();o=o===void 0?null:o;var g=h.memoizedState.inst;Wt!==null&&o!==null&&Pd(o,Wt.memoizedState.deps)?h.memoizedState=ol(t,g,s,o):(jt.flags|=e,h.memoizedState=ol(1|t,g,s,o))}function t0(e,t){Pc(8390656,8,e,t)}function Jd(e,t){Hc(2048,8,e,t)}function lb(e){jt.flags|=4;var t=jt.updateQueue;if(t===null)t=Lc(),jt.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function n0(e){var t=Cn().memoizedState;return lb({ref:t,nextImpl:e}),function(){if((Bt&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function a0(e,t){return Hc(4,2,e,t)}function r0(e,t){return Hc(4,4,e,t)}function s0(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function i0(e,t,s){s=s!=null?s.concat([e]):null,Hc(4,4,s0.bind(null,t,e),s)}function Wd(){}function l0(e,t){var s=Cn();t=t===void 0?null:t;var o=s.memoizedState;return t!==null&&Pd(t,o[1])?o[0]:(s.memoizedState=[e,t],e)}function o0(e,t){var s=Cn();t=t===void 0?null:t;var o=s.memoizedState;if(t!==null&&Pd(t,o[1]))return o[0];if(o=e(),gi){It(!0);try{e()}finally{It(!1)}}return s.memoizedState=[o,t],o}function Zd(e,t,s){return s===void 0||(Fr&1073741824)!==0&&(Ot&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=cg(),jt.lanes|=e,Cs|=e,s)}function c0(e,t,s,o){return oa(s,t)?s:sl.current!==null?(e=Zd(e,s,o),oa(e,t)||(Mn=!0),e):(Fr&42)===0||(Fr&1073741824)!==0&&(Ot&261930)===0?(Mn=!0,e.memoizedState=s):(e=cg(),jt.lanes|=e,Cs|=e,t)}function u0(e,t,s,o,h){var g=T.p;T.p=g!==0&&8>g?g:8;var j=A.T,U={};A.T=U,nf(e,!1,t,s);try{var Q=h(),be=A.S;if(be!==null&&be(U,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Te=nb(Q,o);yo(e,t,Te,La(e))}else yo(e,t,o,La(e))}catch(De){yo(e,t,{then:function(){},status:"rejected",reason:De},La())}finally{T.p=g,j!==null&&U.types!==null&&(j.types=U.types),A.T=j}}function ob(){}function ef(e,t,s,o){if(e.tag!==5)throw Error(i(476));var h=d0(e).queue;u0(e,h,t,Y,s===null?ob:function(){return f0(e),s(o)})}function d0(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:Y},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function f0(e){var t=d0(e);t.next===null&&(t=e.alternate.memoizedState),yo(e,t.next.queue,{},La())}function tf(){return Wn(Do)}function h0(){return Cn().memoizedState}function m0(){return Cn().memoizedState}function cb(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=La();e=Ss(s);var o=ks(t,e,s);o!==null&&(Sa(o,t,s),fo(o,t,s)),t={cache:Td()},e.payload=t;return}t=t.return}}function ub(e,t,s){var o=La();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},$c(e)?p0(t,s):(s=ca(e,t,s,o),s!==null&&(Sa(s,e,o),y0(s,t,o)))}function g0(e,t,s){var o=La();yo(e,t,s,o)}function yo(e,t,s,o){var h={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if($c(e))p0(t,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var j=t.lastRenderedState,U=g(j,s);if(h.hasEagerState=!0,h.eagerState=U,oa(U,j))return Jt(e,t,h,0),nn===null&&wt(),!1}catch{}finally{}if(s=ca(e,t,h,o),s!==null)return Sa(s,e,o),y0(s,t,o),!0}return!1}function nf(e,t,s,o){if(o={lane:2,revertLane:Mf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},$c(e)){if(t)throw Error(i(479))}else t=ca(e,s,o,2),t!==null&&Sa(t,e,2)}function $c(e){var t=e.alternate;return e===jt||t!==null&&t===jt}function p0(e,t){il=zc=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function y0(e,t,s){if((s&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,s|=o,t.lanes=s,Pt(e,s)}}var vo={readContext:Wn,use:Ic,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useLayoutEffect:jn,useInsertionEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useSyncExternalStore:jn,useId:jn,useHostTransitionStatus:jn,useFormState:jn,useActionState:jn,useOptimistic:jn,useMemoCache:jn,useCacheRefresh:jn};vo.useEffectEvent=jn;var v0={readContext:Wn,use:Ic,useCallback:function(e,t){return ma().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:t0,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Pc(4194308,4,s0.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Pc(4194308,4,e,t)},useInsertionEffect:function(e,t){Pc(4,2,e,t)},useMemo:function(e,t){var s=ma();t=t===void 0?null:t;var o=e();if(gi){It(!0);try{e()}finally{It(!1)}}return s.memoizedState=[o,t],o},useReducer:function(e,t,s){var o=ma();if(s!==void 0){var h=s(t);if(gi){It(!0);try{s(t)}finally{It(!1)}}}else h=t;return o.memoizedState=o.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},o.queue=e,e=e.dispatch=ub.bind(null,jt,e),[o.memoizedState,e]},useRef:function(e){var t=ma();return e={current:e},t.memoizedState=e},useState:function(e){e=Qd(e);var t=e.queue,s=g0.bind(null,jt,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Wd,useDeferredValue:function(e,t){var s=ma();return Zd(s,e,t)},useTransition:function(){var e=Qd(!1);return e=u0.bind(null,jt,e.queue,!0,!1),ma().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var o=jt,h=ma();if(Dt){if(s===void 0)throw Error(i(407));s=s()}else{if(s=t(),nn===null)throw Error(i(349));(Ot&127)!==0||Im(o,t,s)}h.memoizedState=s;var g={value:s,getSnapshot:t};return h.queue=g,t0(Pm.bind(null,o,g,e),[e]),o.flags|=2048,ol(9,{destroy:void 0},Bm.bind(null,o,g,s,t),null),s},useId:function(){var e=ma(),t=nn.identifierPrefix;if(Dt){var s=Sr,o=_r;s=(o&~(1<<32-$e(o)-1)).toString(32)+s,t="_"+t+"R_"+s,s=qc++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=ab++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:tf,useFormState:Xm,useActionState:Xm,useOptimistic:function(e){var t=ma();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=nf.bind(null,jt,!0,s),s.dispatch=t,[e,t]},useMemoCache:Fd,useCacheRefresh:function(){return ma().memoizedState=cb.bind(null,jt)},useEffectEvent:function(e){var t=ma(),s={impl:e};return t.memoizedState=s,function(){if((Bt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},af={readContext:Wn,use:Ic,useCallback:l0,useContext:Wn,useEffect:Jd,useImperativeHandle:i0,useInsertionEffect:a0,useLayoutEffect:r0,useMemo:o0,useReducer:Bc,useRef:e0,useState:function(){return Bc(Gr)},useDebugValue:Wd,useDeferredValue:function(e,t){var s=Cn();return c0(s,Wt.memoizedState,e,t)},useTransition:function(){var e=Bc(Gr)[0],t=Cn().memoizedState;return[typeof e=="boolean"?e:po(e),t]},useSyncExternalStore:Lm,useId:h0,useHostTransitionStatus:tf,useFormState:Jm,useActionState:Jm,useOptimistic:function(e,t){var s=Cn();return Km(s,Wt,e,t)},useMemoCache:Fd,useCacheRefresh:m0};af.useEffectEvent=n0;var b0={readContext:Wn,use:Ic,useCallback:l0,useContext:Wn,useEffect:Jd,useImperativeHandle:i0,useInsertionEffect:a0,useLayoutEffect:r0,useMemo:o0,useReducer:Yd,useRef:e0,useState:function(){return Yd(Gr)},useDebugValue:Wd,useDeferredValue:function(e,t){var s=Cn();return Wt===null?Zd(s,e,t):c0(s,Wt.memoizedState,e,t)},useTransition:function(){var e=Yd(Gr)[0],t=Cn().memoizedState;return[typeof e=="boolean"?e:po(e),t]},useSyncExternalStore:Lm,useId:h0,useHostTransitionStatus:tf,useFormState:Zm,useActionState:Zm,useOptimistic:function(e,t){var s=Cn();return Wt!==null?Km(s,Wt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:m0};b0.useEffectEvent=n0;function rf(e,t,s,o){t=e.memoizedState,s=s(o,t),s=s==null?t:w({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var sf={enqueueSetState:function(e,t,s){e=e._reactInternals;var o=La(),h=Ss(o);h.payload=t,s!=null&&(h.callback=s),t=ks(e,h,o),t!==null&&(Sa(t,e,o),fo(t,e,o))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var o=La(),h=Ss(o);h.tag=1,h.payload=t,s!=null&&(h.callback=s),t=ks(e,h,o),t!==null&&(Sa(t,e,o),fo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=La(),o=Ss(s);o.tag=2,t!=null&&(o.callback=t),t=ks(e,o,s),t!==null&&(Sa(t,e,s),fo(t,e,s))}};function w0(e,t,s,o,h,g,j){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,j):t.prototype&&t.prototype.isPureReactComponent?!d(s,o)||!d(h,g):!0}function x0(e,t,s,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,o),t.state!==e&&sf.enqueueReplaceState(t,t.state,null)}function pi(e,t){var s=t;if("ref"in t){s={};for(var o in t)o!=="ref"&&(s[o]=t[o])}if(e=e.defaultProps){s===t&&(s=w({},s));for(var h in e)s[h]===void 0&&(s[h]=e[h])}return s}function _0(e){Je(e)}function S0(e){console.error(e)}function k0(e){Je(e)}function Kc(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function j0(e,t,s){try{var o=e.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function lf(e,t,s){return s=Ss(s),s.tag=3,s.payload={element:null},s.callback=function(){Kc(e,t)},s}function N0(e){return e=Ss(e),e.tag=3,e}function A0(e,t,s,o){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var g=o.value;e.payload=function(){return h(g)},e.callback=function(){j0(t,s,o)}}var j=s.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(e.callback=function(){j0(t,s,o),typeof h!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var U=o.stack;this.componentDidCatch(o.value,{componentStack:U!==null?U:""})})}function db(e,t,s,o,h){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=s.alternate,t!==null&&el(t,s,h,!0),s=Da.current,s!==null){switch(s.tag){case 31:case 13:return er===null?nu():s.alternate===null&&Nn===0&&(Nn=3),s.flags&=-257,s.flags|=65536,s.lanes=h,o===Oc?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([o]):t.add(o),Rf(e,o,h)),!1;case 22:return s.flags|=65536,o===Oc?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([o]):s.add(o)),Rf(e,o,h)),!1}throw Error(i(435,s.tag))}return Rf(e,o,h),nu(),!1}if(Dt)return t=Da.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=h,o!==jd&&(e=Error(i(422),{cause:o}),io(Xa(e,s)))):(o!==jd&&(t=Error(i(423),{cause:o}),io(Xa(t,s))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,o=Xa(o,s),h=lf(e.stateNode,o,h),zd(e,h),Nn!==4&&(Nn=2)),!1;var g=Error(i(520),{cause:o});if(g=Xa(g,s),No===null?No=[g]:No.push(g),Nn!==4&&(Nn=2),t===null)return!0;o=Xa(o,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=h&-h,s.lanes|=e,e=lf(s.stateNode,o,e),zd(s,e),!1;case 1:if(t=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ts===null||!Ts.has(g))))return s.flags|=65536,h&=-h,s.lanes|=h,h=N0(h),A0(h,e,s,o),zd(s,h),!1}s=s.return}while(s!==null);return!1}var of=Error(i(461)),Mn=!1;function Zn(e,t,s,o){t.child=e===null?Om(t,null,s,o):mi(t,e.child,s,o)}function E0(e,t,s,o,h){s=s.render;var g=t.ref;if("ref"in o){var j={};for(var U in o)U!=="ref"&&(j[U]=o[U])}else j=o;return ui(t),o=Hd(e,t,s,j,g,h),U=$d(),e!==null&&!Mn?(Kd(e,t,h),Yr(e,t,h)):(Dt&&U&&Sd(t),t.flags|=1,Zn(e,t,o,h),t.child)}function C0(e,t,s,o,h){if(e===null){var g=s.type;return typeof g=="function"&&!wd(g)&&g.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=g,T0(e,t,g,o,h)):(e=jc(s.type,null,o,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!pf(e,h)){var j=g.memoizedProps;if(s=s.compare,s=s!==null?s:d,s(j,o)&&e.ref===t.ref)return Yr(e,t,h)}return t.flags|=1,e=Hr(g,o),e.ref=t.ref,e.return=t,t.child=e}function T0(e,t,s,o,h){if(e!==null){var g=e.memoizedProps;if(d(g,o)&&e.ref===t.ref)if(Mn=!1,t.pendingProps=o=g,pf(e,h))(e.flags&131072)!==0&&(Mn=!0);else return t.lanes=e.lanes,Yr(e,t,h)}return cf(e,t,s,o,h)}function O0(e,t,s,o){var h=o.children,g=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,e!==null){for(o=t.child=e.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~g}else o=0,t.child=null;return R0(e,t,g,s,o)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Cc(t,g!==null?g.cachePool:null),g!==null?Dm(t,g):Ld(),Mm(t);else return o=t.lanes=536870912,R0(e,t,g!==null?g.baseLanes|s:s,s,o)}else g!==null?(Cc(t,g.cachePool),Dm(t,g),Ns(),t.memoizedState=null):(e!==null&&Cc(t,null),Ld(),Ns());return Zn(e,t,h,s),t.child}function bo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function R0(e,t,s,o,h){var g=Rd();return g=g===null?null:{parent:Un._currentValue,pool:g},t.memoizedState={baseLanes:s,cachePool:g},e!==null&&Cc(t,null),Ld(),Mm(t),e!==null&&el(e,t,o,!0),t.childLanes=h,null}function Vc(e,t){return t=Gc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function U0(e,t,s){return mi(t,e.child,null,s),e=Vc(t,t.pendingProps),e.flags|=2,Ma(t),t.memoizedState=null,e}function fb(e,t,s){var o=t.pendingProps,h=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Dt){if(o.mode==="hidden")return e=Vc(t,o),t.lanes=536870912,bo(null,e);if(Bd(t),(e=dn)?(e=Vg(e,Za),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:vs!==null?{id:_r,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},s=pm(e),s.return=t,t.child=s,Jn=t,dn=null)):e=null,e===null)throw ws(t);return t.lanes=536870912,null}return Vc(t,o)}var g=e.memoizedState;if(g!==null){var j=g.dehydrated;if(Bd(t),h)if(t.flags&256)t.flags&=-257,t=U0(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(Mn||el(e,t,s,!1),h=(s&e.childLanes)!==0,Mn||h){if(o=nn,o!==null&&(j=rn(o,s),j!==0&&j!==g.retryLane))throw g.retryLane=j,Kt(e,j),Sa(o,e,j),of;nu(),t=U0(e,t,s)}else e=g.treeContext,dn=tr(j.nextSibling),Jn=t,Dt=!0,bs=null,Za=!1,e!==null&&bm(t,e),t=Vc(t,o),t.flags|=4096;return t}return e=Hr(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Fc(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function cf(e,t,s,o,h){return ui(t),s=Hd(e,t,s,o,void 0,h),o=$d(),e!==null&&!Mn?(Kd(e,t,h),Yr(e,t,h)):(Dt&&o&&Sd(t),t.flags|=1,Zn(e,t,s,h),t.child)}function D0(e,t,s,o,h,g){return ui(t),t.updateQueue=null,s=qm(t,o,s,h),zm(e),o=$d(),e!==null&&!Mn?(Kd(e,t,g),Yr(e,t,g)):(Dt&&o&&Sd(t),t.flags|=1,Zn(e,t,s,g),t.child)}function M0(e,t,s,o,h){if(ui(t),t.stateNode===null){var g=Xi,j=s.contextType;typeof j=="object"&&j!==null&&(g=Wn(j)),g=new s(o,g),t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=sf,t.stateNode=g,g._reactInternals=t,g=t.stateNode,g.props=o,g.state=t.memoizedState,g.refs={},Dd(t),j=s.contextType,g.context=typeof j=="object"&&j!==null?Wn(j):Xi,g.state=t.memoizedState,j=s.getDerivedStateFromProps,typeof j=="function"&&(rf(t,s,j,o),g.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(j=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),j!==g.state&&sf.enqueueReplaceState(g,g.state,null),mo(t,o,g,h),ho(),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){g=t.stateNode;var U=t.memoizedProps,Q=pi(s,U);g.props=Q;var be=g.context,Te=s.contextType;j=Xi,typeof Te=="object"&&Te!==null&&(j=Wn(Te));var De=s.getDerivedStateFromProps;Te=typeof De=="function"||typeof g.getSnapshotBeforeUpdate=="function",U=t.pendingProps!==U,Te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(U||be!==j)&&x0(t,g,o,j),_s=!1;var _e=t.memoizedState;g.state=_e,mo(t,o,g,h),ho(),be=t.memoizedState,U||_e!==be||_s?(typeof De=="function"&&(rf(t,s,De,o),be=t.memoizedState),(Q=_s||w0(t,s,Q,o,_e,be,j))?(Te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=be),g.props=o,g.state=be,g.context=j,o=Q):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,Md(e,t),j=t.memoizedProps,Te=pi(s,j),g.props=Te,De=t.pendingProps,_e=g.context,be=s.contextType,Q=Xi,typeof be=="object"&&be!==null&&(Q=Wn(be)),U=s.getDerivedStateFromProps,(be=typeof U=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==De||_e!==Q)&&x0(t,g,o,Q),_s=!1,_e=t.memoizedState,g.state=_e,mo(t,o,g,h),ho();var Ne=t.memoizedState;j!==De||_e!==Ne||_s||e!==null&&e.dependencies!==null&&Ac(e.dependencies)?(typeof U=="function"&&(rf(t,s,U,o),Ne=t.memoizedState),(Te=_s||w0(t,s,Te,o,_e,Ne,Q)||e!==null&&e.dependencies!==null&&Ac(e.dependencies))?(be||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,Ne,Q),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,Ne,Q)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Ne),g.props=o,g.state=Ne,g.context=Q,o=Te):(typeof g.componentDidUpdate!="function"||j===e.memoizedProps&&_e===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&_e===e.memoizedState||(t.flags|=1024),o=!1)}return g=o,Fc(e,t),o=(t.flags&128)!==0,g||o?(g=t.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:g.render(),t.flags|=1,e!==null&&o?(t.child=mi(t,e.child,null,h),t.child=mi(t,null,s,h)):Zn(e,t,s,h),t.memoizedState=g.state,e=t.child):e=Yr(e,t,h),e}function z0(e,t,s,o){return oi(),t.flags|=256,Zn(e,t,s,o),t.child}var uf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function df(e){return{baseLanes:e,cachePool:jm()}}function ff(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=qa),e}function q0(e,t,s){var o=t.pendingProps,h=!1,g=(t.flags&128)!==0,j;if((j=g)||(j=e!==null&&e.memoizedState===null?!1:(En.current&2)!==0),j&&(h=!0,t.flags&=-129),j=(t.flags&32)!==0,t.flags&=-33,e===null){if(Dt){if(h?js(t):Ns(),(e=dn)?(e=Vg(e,Za),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:vs!==null?{id:_r,overflow:Sr}:null,retryLane:536870912,hydrationErrors:null},s=pm(e),s.return=t,t.child=s,Jn=t,dn=null)):e=null,e===null)throw ws(t);return Yf(e)?t.lanes=32:t.lanes=536870912,null}var U=o.children;return o=o.fallback,h?(Ns(),h=t.mode,U=Gc({mode:"hidden",children:U},h),o=li(o,h,s,null),U.return=t,o.return=t,U.sibling=o,t.child=U,o=t.child,o.memoizedState=df(s),o.childLanes=ff(e,j,s),t.memoizedState=uf,bo(null,o)):(js(t),hf(t,U))}var Q=e.memoizedState;if(Q!==null&&(U=Q.dehydrated,U!==null)){if(g)t.flags&256?(js(t),t.flags&=-257,t=mf(e,t,s)):t.memoizedState!==null?(Ns(),t.child=e.child,t.flags|=128,t=null):(Ns(),U=o.fallback,h=t.mode,o=Gc({mode:"visible",children:o.children},h),U=li(U,h,s,null),U.flags|=2,o.return=t,U.return=t,o.sibling=U,t.child=o,mi(t,e.child,null,s),o=t.child,o.memoizedState=df(s),o.childLanes=ff(e,j,s),t.memoizedState=uf,t=bo(null,o));else if(js(t),Yf(U)){if(j=U.nextSibling&&U.nextSibling.dataset,j)var be=j.dgst;j=be,o=Error(i(419)),o.stack="",o.digest=j,io({value:o,source:null,stack:null}),t=mf(e,t,s)}else if(Mn||el(e,t,s,!1),j=(s&e.childLanes)!==0,Mn||j){if(j=nn,j!==null&&(o=rn(j,s),o!==0&&o!==Q.retryLane))throw Q.retryLane=o,Kt(e,o),Sa(j,e,o),of;Gf(U)||nu(),t=mf(e,t,s)}else Gf(U)?(t.flags|=192,t.child=e.child,t=null):(e=Q.treeContext,dn=tr(U.nextSibling),Jn=t,Dt=!0,bs=null,Za=!1,e!==null&&bm(t,e),t=hf(t,o.children),t.flags|=4096);return t}return h?(Ns(),U=o.fallback,h=t.mode,Q=e.child,be=Q.sibling,o=Hr(Q,{mode:"hidden",children:o.children}),o.subtreeFlags=Q.subtreeFlags&65011712,be!==null?U=Hr(be,U):(U=li(U,h,s,null),U.flags|=2),U.return=t,o.return=t,o.sibling=U,t.child=o,bo(null,o),o=t.child,U=e.child.memoizedState,U===null?U=df(s):(h=U.cachePool,h!==null?(Q=Un._currentValue,h=h.parent!==Q?{parent:Q,pool:Q}:h):h=jm(),U={baseLanes:U.baseLanes|s,cachePool:h}),o.memoizedState=U,o.childLanes=ff(e,j,s),t.memoizedState=uf,bo(e.child,o)):(js(t),s=e.child,e=s.sibling,s=Hr(s,{mode:"visible",children:o.children}),s.return=t,s.sibling=null,e!==null&&(j=t.deletions,j===null?(t.deletions=[e],t.flags|=16):j.push(e)),t.child=s,t.memoizedState=null,s)}function hf(e,t){return t=Gc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Gc(e,t){return e=Ua(22,e,null,t),e.lanes=0,e}function mf(e,t,s){return mi(t,e.child,null,s),e=hf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function L0(e,t,s){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Ed(e.return,t,s)}function gf(e,t,s,o,h,g){var j=e.memoizedState;j===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:h,treeForkCount:g}:(j.isBackwards=t,j.rendering=null,j.renderingStartTime=0,j.last=o,j.tail=s,j.tailMode=h,j.treeForkCount=g)}function I0(e,t,s){var o=t.pendingProps,h=o.revealOrder,g=o.tail;o=o.children;var j=En.current,U=(j&2)!==0;if(U?(j=j&1|2,t.flags|=128):j&=1,ue(En,j),Zn(e,t,o,s),o=Dt?so:0,!U&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L0(e,s,t);else if(e.tag===19)L0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(h){case"forwards":for(s=t.child,h=null;s!==null;)e=s.alternate,e!==null&&Mc(e)===null&&(h=s),s=s.sibling;s=h,s===null?(h=t.child,t.child=null):(h=s.sibling,s.sibling=null),gf(t,!1,h,s,g,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&Mc(e)===null){t.child=h;break}e=h.sibling,h.sibling=s,s=h,h=e}gf(t,!0,s,null,g,o);break;case"together":gf(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Yr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Cs|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(el(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,s=Hr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Hr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function pf(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ac(e)))}function hb(e,t,s){switch(t.tag){case 3:lt(t,t.stateNode.containerInfo),xs(t,Un,e.memoizedState.cache),oi();break;case 27:case 5:Ue(t);break;case 4:lt(t,t.stateNode.containerInfo);break;case 10:xs(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Bd(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(js(t),t.flags|=128,null):(s&t.child.childLanes)!==0?q0(e,t,s):(js(t),e=Yr(e,t,s),e!==null?e.sibling:null);js(t);break;case 19:var h=(e.flags&128)!==0;if(o=(s&t.childLanes)!==0,o||(el(e,t,s,!1),o=(s&t.childLanes)!==0),h){if(o)return I0(e,t,s);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(En,En.current),o)break;return null;case 22:return t.lanes=0,O0(e,t,s,t.pendingProps);case 24:xs(t,Un,e.memoizedState.cache)}return Yr(e,t,s)}function B0(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Mn=!0;else{if(!pf(e,s)&&(t.flags&128)===0)return Mn=!1,hb(e,t,s);Mn=(e.flags&131072)!==0}else Mn=!1,Dt&&(t.flags&1048576)!==0&&vm(t,so,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=fi(t.elementType),t.type=e,typeof e=="function")wd(e)?(o=pi(e,o),t.tag=1,t=M0(null,t,e,o,s)):(t.tag=0,t=cf(null,t,e,o,s));else{if(e!=null){var h=e.$$typeof;if(h===z){t.tag=11,t=E0(null,t,e,o,s);break e}else if(h===X){t.tag=14,t=C0(null,t,e,o,s);break e}}throw t=M(e)||e,Error(i(306,t,""))}}return t;case 0:return cf(e,t,t.type,t.pendingProps,s);case 1:return o=t.type,h=pi(o,t.pendingProps),M0(e,t,o,h,s);case 3:e:{if(lt(t,t.stateNode.containerInfo),e===null)throw Error(i(387));o=t.pendingProps;var g=t.memoizedState;h=g.element,Md(e,t),mo(t,o,null,s);var j=t.memoizedState;if(o=j.cache,xs(t,Un,o),o!==g.cache&&Cd(t,[Un],s,!0),ho(),o=j.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:j.cache},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){t=z0(e,t,o,s);break e}else if(o!==h){h=Xa(Error(i(424)),t),io(h),t=z0(e,t,o,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dn=tr(e.firstChild),Jn=t,Dt=!0,bs=null,Za=!0,s=Om(t,null,o,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(oi(),o===h){t=Yr(e,t,s);break e}Zn(e,t,o,s)}t=t.child}return t;case 26:return Fc(e,t),e===null?(s=Jg(t.type,null,t.pendingProps,null))?t.memoizedState=s:Dt||(s=t.type,e=t.pendingProps,o=cu(Be.current).createElement(s),o[Vt]=t,o[mn]=e,ea(o,s,e),on(o),t.stateNode=o):t.memoizedState=Jg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ue(t),e===null&&Dt&&(o=t.stateNode=Yg(t.type,t.pendingProps,Be.current),Jn=t,Za=!0,h=dn,Ds(t.type)?(Qf=h,dn=tr(o.firstChild)):dn=h),Zn(e,t,t.pendingProps.children,s),Fc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Dt&&((h=o=dn)&&(o=$b(o,t.type,t.pendingProps,Za),o!==null?(t.stateNode=o,Jn=t,dn=tr(o.firstChild),Za=!1,h=!0):h=!1),h||ws(t)),Ue(t),h=t.type,g=t.pendingProps,j=e!==null?e.memoizedProps:null,o=g.children,Kf(h,g)?o=null:j!==null&&Kf(h,j)&&(t.flags|=32),t.memoizedState!==null&&(h=Hd(e,t,rb,null,null,s),Do._currentValue=h),Fc(e,t),Zn(e,t,o,s),t.child;case 6:return e===null&&Dt&&((e=s=dn)&&(s=Kb(s,t.pendingProps,Za),s!==null?(t.stateNode=s,Jn=t,dn=null,e=!0):e=!1),e||ws(t)),null;case 13:return q0(e,t,s);case 4:return lt(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=mi(t,null,o,s):Zn(e,t,o,s),t.child;case 11:return E0(e,t,t.type,t.pendingProps,s);case 7:return Zn(e,t,t.pendingProps,s),t.child;case 8:return Zn(e,t,t.pendingProps.children,s),t.child;case 12:return Zn(e,t,t.pendingProps.children,s),t.child;case 10:return o=t.pendingProps,xs(t,t.type,o.value),Zn(e,t,o.children,s),t.child;case 9:return h=t.type._context,o=t.pendingProps.children,ui(t),h=Wn(h),o=o(h),t.flags|=1,Zn(e,t,o,s),t.child;case 14:return C0(e,t,t.type,t.pendingProps,s);case 15:return T0(e,t,t.type,t.pendingProps,s);case 19:return I0(e,t,s);case 31:return fb(e,t,s);case 22:return O0(e,t,s,t.pendingProps);case 24:return ui(t),o=Wn(Un),e===null?(h=Rd(),h===null&&(h=nn,g=Td(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=s),h=g),t.memoizedState={parent:o,cache:h},Dd(t),xs(t,Un,h)):((e.lanes&s)!==0&&(Md(e,t),mo(t,null,null,s),ho()),h=e.memoizedState,g=t.memoizedState,h.parent!==o?(h={parent:o,cache:o},t.memoizedState=h,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=h),xs(t,Un,o)):(o=g.cache,xs(t,Un,o),o!==h.cache&&Cd(t,[Un],s,!0))),Zn(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Qr(e){e.flags|=4}function yf(e,t,s,o,h){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(h&335544128)===h)if(e.stateNode.complete)e.flags|=8192;else if(hg())e.flags|=8192;else throw hi=Oc,Ud}else e.flags&=-16777217}function P0(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!np(t))if(hg())e.flags|=8192;else throw hi=Oc,Ud}function Yc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?kn():536870912,e.lanes|=t,fl|=t)}function wo(e,t){if(!Dt)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function fn(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,o=0;if(t)for(var h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=o,e.childLanes=s,t}function mb(e,t,s){var o=t.pendingProps;switch(kd(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(t),null;case 1:return fn(t),null;case 3:return s=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Vr(Un),Me(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Zi(t)?Qr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nd())),fn(t),null;case 26:var h=t.type,g=t.memoizedState;return e===null?(Qr(t),g!==null?(fn(t),P0(t,g)):(fn(t),yf(t,h,null,o,s))):g?g!==e.memoizedState?(Qr(t),fn(t),P0(t,g)):(fn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Qr(t),fn(t),yf(t,h,e,o,s)),null;case 27:if(_t(t),s=Be.current,h=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Qr(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return fn(t),null}e=te.current,Zi(t)?wm(t):(e=Yg(h,o,s),t.stateNode=e,Qr(t))}return fn(t),null;case 5:if(_t(t),h=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Qr(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return fn(t),null}if(g=te.current,Zi(t))wm(t);else{var j=cu(Be.current);switch(g){case 1:g=j.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=j.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=j.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=j.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=j.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?j.createElement("select",{is:o.is}):j.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?j.createElement(h,{is:o.is}):j.createElement(h)}}g[Vt]=t,g[mn]=o;e:for(j=t.child;j!==null;){if(j.tag===5||j.tag===6)g.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===t)break e;for(;j.sibling===null;){if(j.return===null||j.return===t)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}t.stateNode=g;e:switch(ea(g,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Qr(t)}}return fn(t),yf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Qr(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=Be.current,Zi(t)){if(e=t.stateNode,s=t.memoizedProps,o=null,h=Jn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}e[Vt]=t,e=!!(e.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||qg(e.nodeValue,s)),e||ws(t,!0)}else e=cu(e).createTextNode(o),e[Vt]=t,t.stateNode=e}return fn(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(o=Zi(t),s!==null){if(e===null){if(!o)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Vt]=t}else oi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;fn(t),e=!1}else s=Nd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Ma(t),t):(Ma(t),null);if((t.flags&128)!==0)throw Error(i(558))}return fn(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=Zi(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(i(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Vt]=t}else oi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;fn(t),h=!1}else h=Nd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return t.flags&256?(Ma(t),t):(Ma(t),null)}return Ma(t),(t.flags&128)!==0?(t.lanes=s,t):(s=o!==null,e=e!==null&&e.memoizedState!==null,s&&(o=t.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==h&&(o.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Yc(t,t.updateQueue),fn(t),null);case 4:return Me(),e===null&&If(t.stateNode.containerInfo),fn(t),null;case 10:return Vr(t.type),fn(t),null;case 19:if(B(En),o=t.memoizedState,o===null)return fn(t),null;if(h=(t.flags&128)!==0,g=o.rendering,g===null)if(h)wo(o,!1);else{if(Nn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Mc(e),g!==null){for(t.flags|=128,wo(o,!1),e=g.updateQueue,t.updateQueue=e,Yc(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)gm(s,e),s=s.sibling;return ue(En,En.current&1|2),Dt&&$r(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&gt()>Zc&&(t.flags|=128,h=!0,wo(o,!1),t.lanes=4194304)}else{if(!h)if(e=Mc(g),e!==null){if(t.flags|=128,h=!0,e=e.updateQueue,t.updateQueue=e,Yc(t,e),wo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Dt)return fn(t),null}else 2*gt()-o.renderingStartTime>Zc&&s!==536870912&&(t.flags|=128,h=!0,wo(o,!1),t.lanes=4194304);o.isBackwards?(g.sibling=t.child,t.child=g):(e=o.last,e!==null?e.sibling=g:t.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=gt(),e.sibling=null,s=En.current,ue(En,h?s&1|2:s&1),Dt&&$r(t,o.treeForkCount),e):(fn(t),null);case 22:case 23:return Ma(t),Id(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(s&536870912)!==0&&(t.flags&128)===0&&(fn(t),t.subtreeFlags&6&&(t.flags|=8192)):fn(t),s=t.updateQueue,s!==null&&Yc(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==s&&(t.flags|=2048),e!==null&&B(di),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Vr(Un),fn(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function gb(e,t){switch(kd(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vr(Un),Me(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _t(t),null;case 31:if(t.memoizedState!==null){if(Ma(t),t.alternate===null)throw Error(i(340));oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ma(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(En),null;case 4:return Me(),null;case 10:return Vr(t.type),null;case 22:case 23:return Ma(t),Id(),e!==null&&B(di),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Vr(Un),null;case 25:return null;default:return null}}function H0(e,t){switch(kd(t),t.tag){case 3:Vr(Un),Me();break;case 26:case 27:case 5:_t(t);break;case 4:Me();break;case 31:t.memoizedState!==null&&Ma(t);break;case 13:Ma(t);break;case 19:B(En);break;case 10:Vr(t.type);break;case 22:case 23:Ma(t),Id(),e!==null&&B(di);break;case 24:Vr(Un)}}function xo(e,t){try{var s=t.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var h=o.next;s=h;do{if((s.tag&e)===e){o=void 0;var g=s.create,j=s.inst;o=g(),j.destroy=o}s=s.next}while(s!==h)}}catch(U){Gt(t,t.return,U)}}function As(e,t,s){try{var o=t.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var g=h.next;o=g;do{if((o.tag&e)===e){var j=o.inst,U=j.destroy;if(U!==void 0){j.destroy=void 0,h=t;var Q=s,be=U;try{be()}catch(Te){Gt(h,Q,Te)}}}o=o.next}while(o!==g)}}catch(Te){Gt(t,t.return,Te)}}function $0(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Um(t,s)}catch(o){Gt(e,e.return,o)}}}function K0(e,t,s){s.props=pi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(o){Gt(e,t,o)}}function _o(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof s=="function"?e.refCleanup=s(o):s.current=o}}catch(h){Gt(e,t,h)}}function kr(e,t){var s=e.ref,o=e.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(h){Gt(e,t,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Gt(e,t,h)}else s.current=null}function V0(e){var t=e.type,s=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(h){Gt(e,e.return,h)}}function vf(e,t,s){try{var o=e.stateNode;qb(o,e.type,s,t),o[mn]=t}catch(h){Gt(e,e.return,h)}}function F0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ds(e.type)||e.tag===4}function bf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||F0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ds(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wf(e,t,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=va));else if(o!==4&&(o===27&&Ds(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(wf(e,t,s),e=e.sibling;e!==null;)wf(e,t,s),e=e.sibling}function Qc(e,t,s){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(o!==4&&(o===27&&Ds(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Qc(e,t,s),e=e.sibling;e!==null;)Qc(e,t,s),e=e.sibling}function G0(e){var t=e.stateNode,s=e.memoizedProps;try{for(var o=e.type,h=t.attributes;h.length;)t.removeAttributeNode(h[0]);ea(t,o,s),t[Vt]=e,t[mn]=s}catch(g){Gt(e,e.return,g)}}var Xr=!1,zn=!1,xf=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function pb(e,t){if(e=e.containerInfo,Hf=pu,e=N(e),C(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var h=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var j=0,U=-1,Q=-1,be=0,Te=0,De=e,_e=null;t:for(;;){for(var Ne;De!==s||h!==0&&De.nodeType!==3||(U=j+h),De!==g||o!==0&&De.nodeType!==3||(Q=j+o),De.nodeType===3&&(j+=De.nodeValue.length),(Ne=De.firstChild)!==null;)_e=De,De=Ne;for(;;){if(De===e)break t;if(_e===s&&++be===h&&(U=j),_e===g&&++Te===o&&(Q=j),(Ne=De.nextSibling)!==null)break;De=_e,_e=De.parentNode}De=Ne}s=U===-1||Q===-1?null:{start:U,end:Q}}else s=null}s=s||{start:0,end:0}}else s=null;for($f={focusedElem:e,selectionRange:s},pu=!1,Yn=t;Yn!==null;)if(t=Yn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Yn=e;else for(;Yn!==null;){switch(t=Yn,g=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)h=e[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,s=t,h=g.memoizedProps,g=g.memoizedState,o=s.stateNode;try{var et=pi(s.type,h);e=o.getSnapshotBeforeUpdate(et,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(dt){Gt(s,s.return,dt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Ff(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ff(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Yn=e;break}Yn=t.return}}function Q0(e,t,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:Wr(e,s),o&4&&xo(5,s);break;case 1:if(Wr(e,s),o&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(j){Gt(s,s.return,j)}else{var h=pi(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(h,t,e.__reactInternalSnapshotBeforeUpdate)}catch(j){Gt(s,s.return,j)}}o&64&&$0(s),o&512&&_o(s,s.return);break;case 3:if(Wr(e,s),o&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Um(e,t)}catch(j){Gt(s,s.return,j)}}break;case 27:t===null&&o&4&&G0(s);case 26:case 5:Wr(e,s),t===null&&o&4&&V0(s),o&512&&_o(s,s.return);break;case 12:Wr(e,s);break;case 31:Wr(e,s),o&4&&W0(e,s);break;case 13:Wr(e,s),o&4&&Z0(e,s),o&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=jb.bind(null,s),Vb(e,s))));break;case 22:if(o=s.memoizedState!==null||Xr,!o){t=t!==null&&t.memoizedState!==null||zn,h=Xr;var g=zn;Xr=o,(zn=t)&&!g?Zr(e,s,(s.subtreeFlags&8772)!==0):Wr(e,s),Xr=h,zn=g}break;case 30:break;default:Wr(e,s)}}function X0(e){var t=e.alternate;t!==null&&(e.alternate=null,X0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ir(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pn=null,ba=!1;function Jr(e,t,s){for(s=s.child;s!==null;)J0(e,t,s),s=s.sibling}function J0(e,t,s){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(vn,s)}catch{}switch(s.tag){case 26:zn||kr(s,t),Jr(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:zn||kr(s,t);var o=pn,h=ba;Ds(s.type)&&(pn=s.stateNode,ba=!1),Jr(e,t,s),Oo(s.stateNode),pn=o,ba=h;break;case 5:zn||kr(s,t);case 6:if(o=pn,h=ba,pn=null,Jr(e,t,s),pn=o,ba=h,pn!==null)if(ba)try{(pn.nodeType===9?pn.body:pn.nodeName==="HTML"?pn.ownerDocument.body:pn).removeChild(s.stateNode)}catch(g){Gt(s,t,g)}else try{pn.removeChild(s.stateNode)}catch(g){Gt(s,t,g)}break;case 18:pn!==null&&(ba?(e=pn,$g(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),wl(e)):$g(pn,s.stateNode));break;case 4:o=pn,h=ba,pn=s.stateNode.containerInfo,ba=!0,Jr(e,t,s),pn=o,ba=h;break;case 0:case 11:case 14:case 15:As(2,s,t),zn||As(4,s,t),Jr(e,t,s);break;case 1:zn||(kr(s,t),o=s.stateNode,typeof o.componentWillUnmount=="function"&&K0(s,t,o)),Jr(e,t,s);break;case 21:Jr(e,t,s);break;case 22:zn=(o=zn)||s.memoizedState!==null,Jr(e,t,s),zn=o;break;default:Jr(e,t,s)}}function W0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{wl(e)}catch(s){Gt(t,t.return,s)}}}function Z0(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{wl(e)}catch(s){Gt(t,t.return,s)}}function yb(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Y0),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Y0),t;default:throw Error(i(435,e.tag))}}function Xc(e,t){var s=yb(e);t.forEach(function(o){if(!s.has(o)){s.add(o);var h=Nb.bind(null,e,o);o.then(h,h)}})}function wa(e,t){var s=t.deletions;if(s!==null)for(var o=0;o<s.length;o++){var h=s[o],g=e,j=t,U=j;e:for(;U!==null;){switch(U.tag){case 27:if(Ds(U.type)){pn=U.stateNode,ba=!1;break e}break;case 5:pn=U.stateNode,ba=!1;break e;case 3:case 4:pn=U.stateNode.containerInfo,ba=!0;break e}U=U.return}if(pn===null)throw Error(i(160));J0(g,j,h),pn=null,ba=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)eg(t,e),t=t.sibling}var cr=null;function eg(e,t){var s=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wa(t,e),xa(e),o&4&&(As(3,e,e.return),xo(3,e),As(5,e,e.return));break;case 1:wa(t,e),xa(e),o&512&&(zn||s===null||kr(s,s.return)),o&64&&Xr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var h=cr;if(wa(t,e),xa(e),o&512&&(zn||s===null||kr(s,s.return)),o&4){var g=s!==null?s.memoizedState:null;if(o=e.memoizedState,s===null)if(o===null)if(e.stateNode===null){e:{o=e.type,s=e.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":g=h.getElementsByTagName("title")[0],(!g||g[ia]||g[Vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(o),h.head.insertBefore(g,h.querySelector("head > title"))),ea(g,o,s),g[Vt]=e,on(g),o=g;break e;case"link":var j=ep("link","href",h).get(o+(s.href||""));if(j){for(var U=0;U<j.length;U++)if(g=j[U],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){j.splice(U,1);break t}}g=h.createElement(o),ea(g,o,s),h.head.appendChild(g);break;case"meta":if(j=ep("meta","content",h).get(o+(s.content||""))){for(U=0;U<j.length;U++)if(g=j[U],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){j.splice(U,1);break t}}g=h.createElement(o),ea(g,o,s),h.head.appendChild(g);break;default:throw Error(i(468,o))}g[Vt]=e,on(g),o=g}e.stateNode=o}else tp(h,e.type,e.stateNode);else e.stateNode=Zg(h,o,e.memoizedProps);else g!==o?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,o===null?tp(h,e.type,e.stateNode):Zg(h,o,e.memoizedProps)):o===null&&e.stateNode!==null&&vf(e,e.memoizedProps,s.memoizedProps)}break;case 27:wa(t,e),xa(e),o&512&&(zn||s===null||kr(s,s.return)),s!==null&&o&4&&vf(e,e.memoizedProps,s.memoizedProps);break;case 5:if(wa(t,e),xa(e),o&512&&(zn||s===null||kr(s,s.return)),e.flags&32){h=e.stateNode;try{Rr(h,"")}catch(et){Gt(e,e.return,et)}}o&4&&e.stateNode!=null&&(h=e.memoizedProps,vf(e,h,s!==null?s.memoizedProps:h)),o&1024&&(xf=!0);break;case 6:if(wa(t,e),xa(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,s=e.stateNode;try{s.nodeValue=o}catch(et){Gt(e,e.return,et)}}break;case 3:if(fu=null,h=cr,cr=uu(t.containerInfo),wa(t,e),cr=h,xa(e),o&4&&s!==null&&s.memoizedState.isDehydrated)try{wl(t.containerInfo)}catch(et){Gt(e,e.return,et)}xf&&(xf=!1,tg(e));break;case 4:o=cr,cr=uu(e.stateNode.containerInfo),wa(t,e),xa(e),cr=o;break;case 12:wa(t,e),xa(e);break;case 31:wa(t,e),xa(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Xc(e,o)));break;case 13:wa(t,e),xa(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Wc=gt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Xc(e,o)));break;case 22:h=e.memoizedState!==null;var Q=s!==null&&s.memoizedState!==null,be=Xr,Te=zn;if(Xr=be||h,zn=Te||Q,wa(t,e),zn=Te,Xr=be,xa(e),o&8192)e:for(t=e.stateNode,t._visibility=h?t._visibility&-2:t._visibility|1,h&&(s===null||Q||Xr||zn||yi(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){Q=s=t;try{if(g=Q.stateNode,h)j=g.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{U=Q.stateNode;var De=Q.memoizedProps.style,_e=De!=null&&De.hasOwnProperty("display")?De.display:null;U.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(et){Gt(Q,Q.return,et)}}}else if(t.tag===6){if(s===null){Q=t;try{Q.stateNode.nodeValue=h?"":Q.memoizedProps}catch(et){Gt(Q,Q.return,et)}}}else if(t.tag===18){if(s===null){Q=t;try{var Ne=Q.stateNode;h?Kg(Ne,!0):Kg(Q.stateNode,!1)}catch(et){Gt(Q,Q.return,et)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Xc(e,s))));break;case 19:wa(t,e),xa(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Xc(e,o)));break;case 30:break;case 21:break;default:wa(t,e),xa(e)}}function xa(e){var t=e.flags;if(t&2){try{for(var s,o=e.return;o!==null;){if(F0(o)){s=o;break}o=o.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var h=s.stateNode,g=bf(e);Qc(e,g,h);break;case 5:var j=s.stateNode;s.flags&32&&(Rr(j,""),s.flags&=-33);var U=bf(e);Qc(e,U,j);break;case 3:case 4:var Q=s.stateNode.containerInfo,be=bf(e);wf(e,be,Q);break;default:throw Error(i(161))}}catch(Te){Gt(e,e.return,Te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;tg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Wr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Q0(e,t.alternate,t),t=t.sibling}function yi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:As(4,t,t.return),yi(t);break;case 1:kr(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&K0(t,t.return,s),yi(t);break;case 27:Oo(t.stateNode);case 26:case 5:kr(t,t.return),yi(t);break;case 22:t.memoizedState===null&&yi(t);break;case 30:yi(t);break;default:yi(t)}e=e.sibling}}function Zr(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,h=e,g=t,j=g.flags;switch(g.tag){case 0:case 11:case 15:Zr(h,g,s),xo(4,g);break;case 1:if(Zr(h,g,s),o=g,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(be){Gt(o,o.return,be)}if(o=g,h=o.updateQueue,h!==null){var U=o.stateNode;try{var Q=h.shared.hiddenCallbacks;if(Q!==null)for(h.shared.hiddenCallbacks=null,h=0;h<Q.length;h++)Rm(Q[h],U)}catch(be){Gt(o,o.return,be)}}s&&j&64&&$0(g),_o(g,g.return);break;case 27:G0(g);case 26:case 5:Zr(h,g,s),s&&o===null&&j&4&&V0(g),_o(g,g.return);break;case 12:Zr(h,g,s);break;case 31:Zr(h,g,s),s&&j&4&&W0(h,g);break;case 13:Zr(h,g,s),s&&j&4&&Z0(h,g);break;case 22:g.memoizedState===null&&Zr(h,g,s),_o(g,g.return);break;case 30:break;default:Zr(h,g,s)}t=t.sibling}}function _f(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&lo(s))}function Sf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&lo(e))}function ur(e,t,s,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ng(e,t,s,o),t=t.sibling}function ng(e,t,s,o){var h=t.flags;switch(t.tag){case 0:case 11:case 15:ur(e,t,s,o),h&2048&&xo(9,t);break;case 1:ur(e,t,s,o);break;case 3:ur(e,t,s,o),h&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&lo(e)));break;case 12:if(h&2048){ur(e,t,s,o),e=t.stateNode;try{var g=t.memoizedProps,j=g.id,U=g.onPostCommit;typeof U=="function"&&U(j,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Q){Gt(t,t.return,Q)}}else ur(e,t,s,o);break;case 31:ur(e,t,s,o);break;case 13:ur(e,t,s,o);break;case 23:break;case 22:g=t.stateNode,j=t.alternate,t.memoizedState!==null?g._visibility&2?ur(e,t,s,o):So(e,t):g._visibility&2?ur(e,t,s,o):(g._visibility|=2,cl(e,t,s,o,(t.subtreeFlags&10256)!==0||!1)),h&2048&&_f(j,t);break;case 24:ur(e,t,s,o),h&2048&&Sf(t.alternate,t);break;default:ur(e,t,s,o)}}function cl(e,t,s,o,h){for(h=h&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var g=e,j=t,U=s,Q=o,be=j.flags;switch(j.tag){case 0:case 11:case 15:cl(g,j,U,Q,h),xo(8,j);break;case 23:break;case 22:var Te=j.stateNode;j.memoizedState!==null?Te._visibility&2?cl(g,j,U,Q,h):So(g,j):(Te._visibility|=2,cl(g,j,U,Q,h)),h&&be&2048&&_f(j.alternate,j);break;case 24:cl(g,j,U,Q,h),h&&be&2048&&Sf(j.alternate,j);break;default:cl(g,j,U,Q,h)}t=t.sibling}}function So(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,o=t,h=o.flags;switch(o.tag){case 22:So(s,o),h&2048&&_f(o.alternate,o);break;case 24:So(s,o),h&2048&&Sf(o.alternate,o);break;default:So(s,o)}t=t.sibling}}var ko=8192;function ul(e,t,s){if(e.subtreeFlags&ko)for(e=e.child;e!==null;)ag(e,t,s),e=e.sibling}function ag(e,t,s){switch(e.tag){case 26:ul(e,t,s),e.flags&ko&&e.memoizedState!==null&&aw(s,cr,e.memoizedState,e.memoizedProps);break;case 5:ul(e,t,s);break;case 3:case 4:var o=cr;cr=uu(e.stateNode.containerInfo),ul(e,t,s),cr=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=ko,ko=16777216,ul(e,t,s),ko=o):ul(e,t,s));break;default:ul(e,t,s)}}function rg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function jo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var o=t[s];Yn=o,ig(o,e)}rg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sg(e),e=e.sibling}function sg(e){switch(e.tag){case 0:case 11:case 15:jo(e),e.flags&2048&&As(9,e,e.return);break;case 3:jo(e);break;case 12:jo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Jc(e)):jo(e);break;default:jo(e)}}function Jc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var o=t[s];Yn=o,ig(o,e)}rg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:As(8,t,t.return),Jc(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Jc(t));break;default:Jc(t)}e=e.sibling}}function ig(e,t){for(;Yn!==null;){var s=Yn;switch(s.tag){case 0:case 11:case 15:As(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:lo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,Yn=o;else e:for(s=e;Yn!==null;){o=Yn;var h=o.sibling,g=o.return;if(X0(o),o===s){Yn=null;break e}if(h!==null){h.return=g,Yn=h;break e}Yn=g}}}var vb={getCacheForType:function(e){var t=Wn(Un),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Wn(Un).controller.signal}},bb=typeof WeakMap=="function"?WeakMap:Map,Bt=0,nn=null,Ct=null,Ot=0,Ft=0,za=null,Es=!1,dl=!1,kf=!1,es=0,Nn=0,Cs=0,vi=0,jf=0,qa=0,fl=0,No=null,_a=null,Nf=!1,Wc=0,lg=0,Zc=1/0,eu=null,Ts=null,In=0,Os=null,hl=null,ts=0,Af=0,Ef=null,og=null,Ao=0,Cf=null;function La(){return(Bt&2)!==0&&Ot!==0?Ot&-Ot:A.T!==null?Mf():Er()}function cg(){if(qa===0)if((Ot&536870912)===0||Dt){var e=Na;Na<<=1,(Na&3932160)===0&&(Na=262144),qa=e}else qa=536870912;return e=Da.current,e!==null&&(e.flags|=32),qa}function Sa(e,t,s){(e===nn&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)&&(ml(e,0),Rs(e,Ot,qa,!1)),sa(e,s),((Bt&2)===0||e!==nn)&&(e===nn&&((Bt&2)===0&&(vi|=s),Nn===4&&Rs(e,Ot,qa,!1)),jr(e))}function ug(e,t,s){if((Bt&6)!==0)throw Error(i(327));var o=!s&&(t&127)===0&&(t&e.expiredLanes)===0||Kn(e,t),h=o?_b(e,t):Of(e,t,!0),g=o;do{if(h===0){dl&&!o&&Rs(e,t,0,!1);break}else{if(s=e.current.alternate,g&&!wb(s)){h=Of(e,t,!1),g=!1;continue}if(h===2){if(g=t,e.errorRecoveryDisabledLanes&g)var j=0;else j=e.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){t=j;e:{var U=e;h=No;var Q=U.current.memoizedState.isDehydrated;if(Q&&(ml(U,j).flags|=256),j=Of(U,j,!1),j!==2){if(kf&&!Q){U.errorRecoveryDisabledLanes|=g,vi|=g,h=4;break e}g=_a,_a=h,g!==null&&(_a===null?_a=g:_a.push.apply(_a,g))}h=j}if(g=!1,h!==2)continue}}if(h===1){ml(e,0),Rs(e,t,0,!0);break}e:{switch(o=e,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Rs(o,t,qa,!Es);break e;case 2:_a=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(h=Wc+300-gt(),10<h)){if(Rs(o,t,qa,!Es),Tn(o,0,!0)!==0)break e;ts=t,o.timeoutHandle=Pg(dg.bind(null,o,s,_a,eu,Nf,t,qa,vi,fl,Es,g,"Throttled",-0,0),h);break e}dg(o,s,_a,eu,Nf,t,qa,vi,fl,Es,g,null,-0,0)}}break}while(!0);jr(e)}function dg(e,t,s,o,h,g,j,U,Q,be,Te,De,_e,Ne){if(e.timeoutHandle=-1,De=t.subtreeFlags,De&8192||(De&16785408)===16785408){De={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:va},ag(t,g,De);var et=(g&62914560)===g?Wc-gt():(g&4194048)===g?lg-gt():0;if(et=rw(De,et),et!==null){ts=g,e.cancelPendingCommit=et(bg.bind(null,e,t,g,s,o,h,j,U,Q,Te,De,null,_e,Ne)),Rs(e,g,j,!be);return}}bg(e,t,g,s,o,h,j,U,Q)}function wb(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var h=s[o],g=h.getSnapshot;h=h.value;try{if(!oa(g(),h))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rs(e,t,s,o){t&=~jf,t&=~vi,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var h=t;0<h;){var g=31-$e(h),j=1<<g;o[g]=-1,h&=~j}s!==0&&pr(e,s,t)}function tu(){return(Bt&6)===0?(Eo(0),!1):!0}function Tf(){if(Ct!==null){if(Ft===0)var e=Ct.return;else e=Ct,Kr=ci=null,Vd(e),rl=null,co=0,e=Ct;for(;e!==null;)H0(e.alternate,e),e=e.return;Ct=null}}function ml(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Bb(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),ts=0,Tf(),nn=e,Ct=s=Hr(e.current,null),Ot=t,Ft=0,za=null,Es=!1,dl=Kn(e,t),kf=!1,fl=qa=jf=vi=Cs=Nn=0,_a=No=null,Nf=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var h=31-$e(o),g=1<<h;t|=e[h],o&=~g}return es=t,wt(),s}function fg(e,t){jt=null,A.H=vo,t===al||t===Tc?(t=Em(),Ft=3):t===Ud?(t=Em(),Ft=4):Ft=t===of?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,za=t,Ct===null&&(Nn=1,Kc(e,Xa(t,e.current)))}function hg(){var e=Da.current;return e===null?!0:(Ot&4194048)===Ot?er===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?e===er:!1}function mg(){var e=A.H;return A.H=vo,e===null?vo:e}function gg(){var e=A.A;return A.A=vb,e}function nu(){Nn=4,Es||(Ot&4194048)!==Ot&&Da.current!==null||(dl=!0),(Cs&134217727)===0&&(vi&134217727)===0||nn===null||Rs(nn,Ot,qa,!1)}function Of(e,t,s){var o=Bt;Bt|=2;var h=mg(),g=gg();(nn!==e||Ot!==t)&&(eu=null,ml(e,t)),t=!1;var j=Nn;e:do try{if(Ft!==0&&Ct!==null){var U=Ct,Q=za;switch(Ft){case 8:Tf(),j=6;break e;case 3:case 2:case 9:case 6:Da.current===null&&(t=!0);var be=Ft;if(Ft=0,za=null,gl(e,U,Q,be),s&&dl){j=0;break e}break;default:be=Ft,Ft=0,za=null,gl(e,U,Q,be)}}xb(),j=Nn;break}catch(Te){fg(e,Te)}while(!0);return t&&e.shellSuspendCounter++,Kr=ci=null,Bt=o,A.H=h,A.A=g,Ct===null&&(nn=null,Ot=0,wt()),j}function xb(){for(;Ct!==null;)pg(Ct)}function _b(e,t){var s=Bt;Bt|=2;var o=mg(),h=gg();nn!==e||Ot!==t?(eu=null,Zc=gt()+500,ml(e,t)):dl=Kn(e,t);e:do try{if(Ft!==0&&Ct!==null){t=Ct;var g=za;t:switch(Ft){case 1:Ft=0,za=null,gl(e,t,g,1);break;case 2:case 9:if(Nm(g)){Ft=0,za=null,yg(t);break}t=function(){Ft!==2&&Ft!==9||nn!==e||(Ft=7),jr(e)},g.then(t,t);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Nm(g)?(Ft=0,za=null,yg(t)):(Ft=0,za=null,gl(e,t,g,7));break;case 5:var j=null;switch(Ct.tag){case 26:j=Ct.memoizedState;case 5:case 27:var U=Ct;if(j?np(j):U.stateNode.complete){Ft=0,za=null;var Q=U.sibling;if(Q!==null)Ct=Q;else{var be=U.return;be!==null?(Ct=be,au(be)):Ct=null}break t}}Ft=0,za=null,gl(e,t,g,5);break;case 6:Ft=0,za=null,gl(e,t,g,6);break;case 8:Tf(),Nn=6;break e;default:throw Error(i(462))}}Sb();break}catch(Te){fg(e,Te)}while(!0);return Kr=ci=null,A.H=o,A.A=h,Bt=s,Ct!==null?0:(nn=null,Ot=0,wt(),Nn)}function Sb(){for(;Ct!==null&&!Mt();)pg(Ct)}function pg(e){var t=B0(e.alternate,e,es);e.memoizedProps=e.pendingProps,t===null?au(e):Ct=t}function yg(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=D0(s,t,t.pendingProps,t.type,void 0,Ot);break;case 11:t=D0(s,t,t.pendingProps,t.type.render,t.ref,Ot);break;case 5:Vd(t);default:H0(s,t),t=Ct=gm(t,es),t=B0(s,t,es)}e.memoizedProps=e.pendingProps,t===null?au(e):Ct=t}function gl(e,t,s,o){Kr=ci=null,Vd(t),rl=null,co=0;var h=t.return;try{if(db(e,h,t,s,Ot)){Nn=1,Kc(e,Xa(s,e.current)),Ct=null;return}}catch(g){if(h!==null)throw Ct=h,g;Nn=1,Kc(e,Xa(s,e.current)),Ct=null;return}t.flags&32768?(Dt||o===1?e=!0:dl||(Ot&536870912)!==0?e=!1:(Es=e=!0,(o===2||o===9||o===3||o===6)&&(o=Da.current,o!==null&&o.tag===13&&(o.flags|=16384))),vg(t,e)):au(t)}function au(e){var t=e;do{if((t.flags&32768)!==0){vg(t,Es);return}e=t.return;var s=mb(t.alternate,t,es);if(s!==null){Ct=s;return}if(t=t.sibling,t!==null){Ct=t;return}Ct=t=e}while(t!==null);Nn===0&&(Nn=5)}function vg(e,t){do{var s=gb(e.alternate,e);if(s!==null){s.flags&=32767,Ct=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ct=e;return}Ct=e=s}while(e!==null);Nn=6,Ct=null}function bg(e,t,s,o,h,g,j,U,Q){e.cancelPendingCommit=null;do ru();while(In!==0);if((Bt&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(g=t.lanes|t.childLanes,g|=ot,pa(e,s,g,j,U,Q),e===nn&&(Ct=nn=null,Ot=0),hl=t,Os=e,ts=s,Af=g,Ef=h,og=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ab(Xt,function(){return kg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=A.T,A.T=null,h=T.p,T.p=2,j=Bt,Bt|=4;try{pb(e,t,s)}finally{Bt=j,T.p=h,A.T=o}}In=1,wg(),xg(),_g()}}function wg(){if(In===1){In=0;var e=Os,t=hl,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=A.T,A.T=null;var o=T.p;T.p=2;var h=Bt;Bt|=4;try{eg(t,e);var g=$f,j=N(e.containerInfo),U=g.focusedElem,Q=g.selectionRange;if(j!==U&&U&&U.ownerDocument&&S(U.ownerDocument.documentElement,U)){if(Q!==null&&C(U)){var be=Q.start,Te=Q.end;if(Te===void 0&&(Te=be),"selectionStart"in U)U.selectionStart=be,U.selectionEnd=Math.min(Te,U.value.length);else{var De=U.ownerDocument||document,_e=De&&De.defaultView||window;if(_e.getSelection){var Ne=_e.getSelection(),et=U.textContent.length,dt=Math.min(Q.start,et),en=Q.end===void 0?dt:Math.min(Q.end,et);!Ne.extend&&dt>en&&(j=en,en=dt,dt=j);var me=x(U,dt),ce=x(U,en);if(me&&ce&&(Ne.rangeCount!==1||Ne.anchorNode!==me.node||Ne.anchorOffset!==me.offset||Ne.focusNode!==ce.node||Ne.focusOffset!==ce.offset)){var ve=De.createRange();ve.setStart(me.node,me.offset),Ne.removeAllRanges(),dt>en?(Ne.addRange(ve),Ne.extend(ce.node,ce.offset)):(ve.setEnd(ce.node,ce.offset),Ne.addRange(ve))}}}}for(De=[],Ne=U;Ne=Ne.parentNode;)Ne.nodeType===1&&De.push({element:Ne,left:Ne.scrollLeft,top:Ne.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<De.length;U++){var Re=De[U];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}pu=!!Hf,$f=Hf=null}finally{Bt=h,T.p=o,A.T=s}}e.current=t,In=2}}function xg(){if(In===2){In=0;var e=Os,t=hl,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=A.T,A.T=null;var o=T.p;T.p=2;var h=Bt;Bt|=4;try{Q0(e,t.alternate,t)}finally{Bt=h,T.p=o,A.T=s}}In=3}}function _g(){if(In===4||In===3){In=0,vt();var e=Os,t=hl,s=ts,o=og;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?In=5:(In=0,hl=Os=null,Sg(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(Ts=null),Aa(s),t=t.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(vn,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=A.T,h=T.p,T.p=2,A.T=null;try{for(var g=e.onRecoverableError,j=0;j<o.length;j++){var U=o[j];g(U.value,{componentStack:U.stack})}}finally{A.T=t,T.p=h}}(ts&3)!==0&&ru(),jr(e),h=e.pendingLanes,(s&261930)!==0&&(h&42)!==0?e===Cf?Ao++:(Ao=0,Cf=e):Ao=0,Eo(0)}}function Sg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,lo(t)))}function ru(){return wg(),xg(),_g(),kg()}function kg(){if(In!==5)return!1;var e=Os,t=Af;Af=0;var s=Aa(ts),o=A.T,h=T.p;try{T.p=32>s?32:s,A.T=null,s=Ef,Ef=null;var g=Os,j=ts;if(In=0,hl=Os=null,ts=0,(Bt&6)!==0)throw Error(i(331));var U=Bt;if(Bt|=4,sg(g.current),ng(g,g.current,j,s),Bt=U,Eo(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(vn,g)}catch{}return!0}finally{T.p=h,A.T=o,Sg(e,t)}}function jg(e,t,s){t=Xa(s,t),t=lf(e.stateNode,t,2),e=ks(e,t,2),e!==null&&(sa(e,2),jr(e))}function Gt(e,t,s){if(e.tag===3)jg(e,e,s);else for(;t!==null;){if(t.tag===3){jg(t,e,s);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ts===null||!Ts.has(o))){e=Xa(s,e),s=N0(2),o=ks(t,s,2),o!==null&&(A0(s,o,t,e),sa(o,2),jr(o));break}}t=t.return}}function Rf(e,t,s){var o=e.pingCache;if(o===null){o=e.pingCache=new bb;var h=new Set;o.set(t,h)}else h=o.get(t),h===void 0&&(h=new Set,o.set(t,h));h.has(s)||(kf=!0,h.add(s),e=kb.bind(null,e,t,s),t.then(e,e))}function kb(e,t,s){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,nn===e&&(Ot&s)===s&&(Nn===4||Nn===3&&(Ot&62914560)===Ot&&300>gt()-Wc?(Bt&2)===0&&ml(e,0):jf|=s,fl===Ot&&(fl=0)),jr(e)}function Ng(e,t){t===0&&(t=kn()),e=Kt(e,t),e!==null&&(sa(e,t),jr(e))}function jb(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Ng(e,s)}function Nb(e,t){var s=0;switch(e.tag){case 31:case 13:var o=e.stateNode,h=e.memoizedState;h!==null&&(s=h.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),Ng(e,s)}function Ab(e,t){return yt(e,t)}var su=null,pl=null,Uf=!1,iu=!1,Df=!1,Us=0;function jr(e){e!==pl&&e.next===null&&(pl===null?su=pl=e:pl=pl.next=e),iu=!0,Uf||(Uf=!0,Cb())}function Eo(e,t){if(!Df&&iu){Df=!0;do for(var s=!1,o=su;o!==null;){if(e!==0){var h=o.pendingLanes;if(h===0)var g=0;else{var j=o.suspendedLanes,U=o.pingedLanes;g=(1<<31-$e(42|e)+1)-1,g&=h&~(j&~U),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,Tg(o,g))}else g=Ot,g=Tn(o,o===nn?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Kn(o,g)||(s=!0,Tg(o,g));o=o.next}while(s);Df=!1}}function Eb(){Ag()}function Ag(){iu=Uf=!1;var e=0;Us!==0&&Ib()&&(e=Us);for(var t=gt(),s=null,o=su;o!==null;){var h=o.next,g=Eg(o,t);g===0?(o.next=null,s===null?su=h:s.next=h,h===null&&(pl=s)):(s=o,(e!==0||(g&3)!==0)&&(iu=!0)),o=h}In!==0&&In!==5||Eo(e),Us!==0&&(Us=0)}function Eg(e,t){for(var s=e.suspendedLanes,o=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var j=31-$e(g),U=1<<j,Q=h[j];Q===-1?((U&s)===0||(U&o)!==0)&&(h[j]=ga(U,t)):Q<=t&&(e.expiredLanes|=U),g&=~U}if(t=nn,s=Ot,s=Tn(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,s===0||e===t&&(Ft===2||Ft===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ct(o),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Kn(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(o!==null&&ct(o),Aa(s)){case 2:case 8:s=Qt;break;case 32:s=Xt;break;case 268435456:s=an;break;default:s=Xt}return o=Cg.bind(null,e),s=yt(s,o),e.callbackPriority=t,e.callbackNode=s,t}return o!==null&&o!==null&&ct(o),e.callbackPriority=2,e.callbackNode=null,2}function Cg(e,t){if(In!==0&&In!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ru()&&e.callbackNode!==s)return null;var o=Ot;return o=Tn(e,e===nn?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(ug(e,o,t),Eg(e,gt()),e.callbackNode!=null&&e.callbackNode===s?Cg.bind(null,e):null)}function Tg(e,t){if(ru())return null;ug(e,t,!0)}function Cb(){Pb(function(){(Bt&6)!==0?yt(mt,Eb):Ag()})}function Mf(){if(Us===0){var e=tl;e===0&&(e=He,He<<=1,(He&261888)===0&&(He=256)),Us=e}return Us}function Og(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:or(""+e)}function Rg(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Tb(e,t,s,o,h){if(t==="submit"&&s&&s.stateNode===h){var g=Og((h[mn]||null).action),j=o.submitter;j&&(t=(t=j[mn]||null)?Og(t.formAction):j.getAttribute("formAction"),t!==null&&(g=t,j=null));var U=new Mi("action","action",null,o,h);e.push({event:U,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Us!==0){var Q=j?Rg(h,j):new FormData(h);ef(s,{pending:!0,data:Q,method:h.method,action:g},null,Q)}}else typeof g=="function"&&(U.preventDefault(),Q=j?Rg(h,j):new FormData(h),ef(s,{pending:!0,data:Q,method:h.method,action:g},g,Q))},currentTarget:h}]})}}for(var zf=0;zf<Ge.length;zf++){var qf=Ge[zf],Ob=qf.toLowerCase(),Rb=qf[0].toUpperCase()+qf.slice(1);Ie(Ob,"on"+Rb)}Ie(xe,"onAnimationEnd"),Ie(pe,"onAnimationIteration"),Ie(Ce,"onAnimationStart"),Ie("dblclick","onDoubleClick"),Ie("focusin","onFocus"),Ie("focusout","onBlur"),Ie(qe,"onTransitionRun"),Ie(Ke,"onTransitionStart"),Ie(Ve,"onTransitionCancel"),Ie(Le,"onTransitionEnd"),Oa("onMouseEnter",["mouseout","mouseover"]),Oa("onMouseLeave",["mouseout","mouseover"]),Oa("onPointerEnter",["pointerout","pointerover"]),Oa("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Co));function Ug(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var o=e[s],h=o.event;o=o.listeners;e:{var g=void 0;if(t)for(var j=o.length-1;0<=j;j--){var U=o[j],Q=U.instance,be=U.currentTarget;if(U=U.listener,Q!==g&&h.isPropagationStopped())break e;g=U,h.currentTarget=be;try{g(h)}catch(Te){Je(Te)}h.currentTarget=null,g=Q}else for(j=0;j<o.length;j++){if(U=o[j],Q=U.instance,be=U.currentTarget,U=U.listener,Q!==g&&h.isPropagationStopped())break e;g=U,h.currentTarget=be;try{g(h)}catch(Te){Je(Te)}h.currentTarget=null,g=Q}}}}function Tt(e,t){var s=t[Ea];s===void 0&&(s=t[Ea]=new Set);var o=e+"__bubble";s.has(o)||(Dg(t,e,2,!1),s.add(o))}function Lf(e,t,s){var o=0;t&&(o|=4),Dg(s,e,o,t)}var lu="_reactListening"+Math.random().toString(36).slice(2);function If(e){if(!e[lu]){e[lu]=!0,Ca.forEach(function(s){s!=="selectionchange"&&(Ub.has(s)||Lf(s,!1,e),Lf(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lu]||(t[lu]=!0,Lf("selectionchange",!1,t))}}function Dg(e,t,s,o){switch(cp(t)){case 2:var h=lw;break;case 8:h=ow;break;default:h=eh}s=h.bind(null,t,s,e),h=void 0,!Vl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),o?h!==void 0?e.addEventListener(t,s,{capture:!0,passive:h}):e.addEventListener(t,s,!0):h!==void 0?e.addEventListener(t,s,{passive:h}):e.addEventListener(t,s,!1)}function Bf(e,t,s,o,h){var g=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var j=o.tag;if(j===3||j===4){var U=o.stateNode.containerInfo;if(U===h)break;if(j===4)for(j=o.return;j!==null;){var Q=j.tag;if((Q===3||Q===4)&&j.stateNode.containerInfo===h)return;j=j.return}for(;U!==null;){if(j=Ka(U),j===null)return;if(Q=j.tag,Q===5||Q===6||Q===26||Q===27){o=g=j;continue e}U=U.parentNode}}o=o.return}os(function(){var be=g,Te=Ui(s),De=[];e:{var _e=Xe.get(e);if(_e!==void 0){var Ne=Mi,et=e;switch(e){case"keypress":if(ds(s)===0)break e;case"keydown":case"keyup":Ne=Hi;break;case"focusin":et="focus",Ne=fs;break;case"focusout":et="blur",Ne=fs;break;case"beforeblur":case"afterblur":Ne=fs;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Li;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=Wl;break;case xe:case pe:case Ce:Ne=gc;break;case Le:Ne=Zl;break;case"scroll":case"scrollend":Ne=zi;break;case"wheel":Ne=Ki;break;case"copy":case"cut":case"paste":Ne=hs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=Jl;break;case"toggle":case"beforetoggle":Ne=vc}var dt=(t&4)!==0,en=!dt&&(e==="scroll"||e==="scrollend"),me=dt?_e!==null?_e+"Capture":null:_e;dt=[];for(var ce=be,ve;ce!==null;){var Re=ce;if(ve=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||ve===null||me===null||(Re=Mr(ce,me),Re!=null&&dt.push(To(ce,Re,ve))),en)break;ce=ce.return}0<dt.length&&(_e=new Ne(_e,et,null,s,Te),De.push({event:_e,listeners:dt}))}}if((t&7)===0){e:{if(_e=e==="mouseover"||e==="pointerover",Ne=e==="mouseout"||e==="pointerout",_e&&s!==Ga&&(et=s.relatedTarget||s.fromElement)&&(Ka(et)||et[Xn]))break e;if((Ne||_e)&&(_e=Te.window===Te?Te:(_e=Te.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ne?(et=s.relatedTarget||s.toElement,Ne=be,et=et?Ka(et):null,et!==null&&(en=c(et),dt=et.tag,et!==en||dt!==5&&dt!==27&&dt!==6)&&(et=null)):(Ne=null,et=be),Ne!==et)){if(dt=Li,Re="onMouseLeave",me="onMouseEnter",ce="mouse",(e==="pointerout"||e==="pointerover")&&(dt=Jl,Re="onPointerLeave",me="onPointerEnter",ce="pointer"),en=Ne==null?_e:fa(Ne),ve=et==null?_e:fa(et),_e=new dt(Re,ce+"leave",Ne,s,Te),_e.target=en,_e.relatedTarget=ve,Re=null,Ka(Te)===be&&(dt=new dt(me,ce+"enter",et,s,Te),dt.target=ve,dt.relatedTarget=en,Re=dt),en=Re,Ne&&et)t:{for(dt=Db,me=Ne,ce=et,ve=0,Re=me;Re;Re=dt(Re))ve++;Re=0;for(var ut=ce;ut;ut=dt(ut))Re++;for(;0<ve-Re;)me=dt(me),ve--;for(;0<Re-ve;)ce=dt(ce),Re--;for(;ve--;){if(me===ce||ce!==null&&me===ce.alternate){dt=me;break t}me=dt(me),ce=dt(ce)}dt=null}else dt=null;Ne!==null&&Mg(De,_e,Ne,dt,!1),et!==null&&en!==null&&Mg(De,en,et,dt,!0)}}e:{if(_e=be?fa(be):window,Ne=_e.nodeName&&_e.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&_e.type==="file")var qt=ii;else if(Gi(_e))if(Qa)qt=ps;else{qt=Pr;var rt=kc}else Ne=_e.nodeName,!Ne||Ne.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?be&&Kl(be.elementType)&&(qt=ii):qt=ro;if(qt&&(qt=qt(e,be))){ao(De,qt,s,Te);break e}rt&&rt(e,_e,be),e==="focusout"&&be&&_e.type==="number"&&be.memoizedProps.value!=null&&Ws(_e,"number",_e.value)}switch(rt=be?fa(be):window,e){case"focusin":(Gi(rt)||rt.contentEditable==="true")&&(V=rt,re=be,ge=null);break;case"focusout":ge=re=V=null;break;case"mousedown":se=!0;break;case"contextmenu":case"mouseup":case"dragend":se=!1,ee(De,s,Te);break;case"selectionchange":if(P)break;case"keydown":case"keyup":ee(De,s,Te)}var Nt;if(ri)e:{switch(e){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else Ir?no(e,s)&&(Rt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Rt="onCompositionStart");Rt&&(Vi&&s.locale!=="ko"&&(Ir||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Ir&&(Nt=us()):(Ya=Te,Di="value"in Ya?Ya.value:Ya.textContent,Ir=!0)),rt=ou(be,Rt),0<rt.length&&(Rt=new Pi(Rt,e,null,s,Te),De.push({event:Rt,listeners:rt}),Nt?Rt.data=Nt:(Nt=wc(s),Nt!==null&&(Rt.data=Nt)))),(Nt=yd?xc(e,s):vd(e,s))&&(Rt=ou(be,"onBeforeInput"),0<Rt.length&&(rt=new Pi("onBeforeInput","beforeinput",null,s,Te),De.push({event:rt,listeners:Rt}),rt.data=Nt)),Tb(De,e,be,s,Te)}Ug(De,t)})}function To(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ou(e,t){for(var s=t+"Capture",o=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Mr(e,s),h!=null&&o.unshift(To(e,h,g)),h=Mr(e,t),h!=null&&o.push(To(e,h,g))),e.tag===3)return o;e=e.return}return[]}function Db(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mg(e,t,s,o,h){for(var g=t._reactName,j=[];s!==null&&s!==o;){var U=s,Q=U.alternate,be=U.stateNode;if(U=U.tag,Q!==null&&Q===o)break;U!==5&&U!==26&&U!==27||be===null||(Q=be,h?(be=Mr(s,g),be!=null&&j.unshift(To(s,be,Q))):h||(be=Mr(s,g),be!=null&&j.push(To(s,be,Q)))),s=s.return}j.length!==0&&e.push({event:t,listeners:j})}var Mb=/\r\n?/g,zb=/\u0000|\uFFFD/g;function zg(e){return(typeof e=="string"?e:""+e).replace(Mb,`
`).replace(zb,"")}function qg(e,t){return t=zg(t),zg(e)===t}function Zt(e,t,s,o,h,g){switch(s){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||Rr(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&Rr(e,""+o);break;case"className":je(e,"class",o);break;case"tabIndex":je(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":je(e,s,o);break;case"style":$l(e,o,g);break;case"data":if(t!=="object"){je(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=or(""+o),e.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(t!=="input"&&Zt(e,t,"name",h.name,h,null),Zt(e,t,"formEncType",h.formEncType,h,null),Zt(e,t,"formMethod",h.formMethod,h,null),Zt(e,t,"formTarget",h.formTarget,h,null)):(Zt(e,t,"encType",h.encType,h,null),Zt(e,t,"method",h.method,h,null),Zt(e,t,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(s);break}o=or(""+o),e.setAttribute(s,o);break;case"onClick":o!=null&&(e.onclick=va);break;case"onScroll":o!=null&&Tt("scroll",e);break;case"onScrollEnd":o!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}s=or(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""+o):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":o===!0?e.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(s,o):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(s,o):e.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(s):e.setAttribute(s,o);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),St(e,"popover",o);break;case"xlinkActuate":Qe(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Qe(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Qe(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Qe(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Qe(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Qe(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Qe(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Qe(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Qe(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":St(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=md.get(s)||s,St(e,s,o))}}function Pf(e,t,s,o,h,g){switch(s){case"style":$l(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(i(60));e.innerHTML=s}}break;case"children":typeof o=="string"?Rr(e,o):(typeof o=="number"||typeof o=="bigint")&&Rr(e,""+o);break;case"onScroll":o!=null&&Tt("scroll",e);break;case"onScrollEnd":o!=null&&Tt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tr.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),t=s.slice(2,h?s.length-7:void 0),g=e[mn]||null,g=g!=null?g[s]:null,typeof g=="function"&&e.removeEventListener(t,g,h),typeof o=="function")){typeof g!="function"&&g!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,o,h);break e}s in e?e[s]=o:o===!0?e.setAttribute(s,""):St(e,s,o)}}}function ea(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var o=!1,h=!1,g;for(g in s)if(s.hasOwnProperty(g)){var j=s[g];if(j!=null)switch(g){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zt(e,t,g,j,s,null)}}h&&Zt(e,t,"srcSet",s.srcSet,s,null),o&&Zt(e,t,"src",s.src,s,null);return;case"input":Tt("invalid",e);var U=g=j=h=null,Q=null,be=null;for(o in s)if(s.hasOwnProperty(o)){var Te=s[o];if(Te!=null)switch(o){case"name":h=Te;break;case"type":j=Te;break;case"checked":Q=Te;break;case"defaultChecked":be=Te;break;case"value":g=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(137,t));break;default:Zt(e,t,o,Te,s,null)}}yr(e,g,U,Q,be,j,h,!1);return;case"select":Tt("invalid",e),o=j=g=null;for(h in s)if(s.hasOwnProperty(h)&&(U=s[h],U!=null))switch(h){case"value":g=U;break;case"defaultValue":j=U;break;case"multiple":o=U;default:Zt(e,t,h,U,s,null)}t=g,s=j,e.multiple=!!o,t!=null?lr(e,!!o,t,!1):s!=null&&lr(e,!!o,s,!0);return;case"textarea":Tt("invalid",e),g=h=o=null;for(j in s)if(s.hasOwnProperty(j)&&(U=s[j],U!=null))switch(j){case"value":o=U;break;case"defaultValue":h=U;break;case"children":g=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:Zt(e,t,j,U,s,null)}Zs(e,o,h,g);return;case"option":for(Q in s)if(s.hasOwnProperty(Q)&&(o=s[Q],o!=null))switch(Q){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,t,Q,o,s,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(o=0;o<Co.length;o++)Tt(Co[o],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in s)if(s.hasOwnProperty(be)&&(o=s[be],o!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zt(e,t,be,o,s,null)}return;default:if(Kl(t)){for(Te in s)s.hasOwnProperty(Te)&&(o=s[Te],o!==void 0&&Pf(e,t,Te,o,s,void 0));return}}for(U in s)s.hasOwnProperty(U)&&(o=s[U],o!=null&&Zt(e,t,U,o,s,null))}function qb(e,t,s,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,j=null,U=null,Q=null,be=null,Te=null;for(Ne in s){var De=s[Ne];if(s.hasOwnProperty(Ne)&&De!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":Q=De;default:o.hasOwnProperty(Ne)||Zt(e,t,Ne,null,o,De)}}for(var _e in o){var Ne=o[_e];if(De=s[_e],o.hasOwnProperty(_e)&&(Ne!=null||De!=null))switch(_e){case"type":g=Ne;break;case"name":h=Ne;break;case"checked":be=Ne;break;case"defaultChecked":Te=Ne;break;case"value":j=Ne;break;case"defaultValue":U=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,t));break;default:Ne!==De&&Zt(e,t,_e,Ne,o,De)}}Fa(e,j,U,Q,be,Te,g,h);return;case"select":Ne=j=U=_e=null;for(g in s)if(Q=s[g],s.hasOwnProperty(g)&&Q!=null)switch(g){case"value":break;case"multiple":Ne=Q;default:o.hasOwnProperty(g)||Zt(e,t,g,null,o,Q)}for(h in o)if(g=o[h],Q=s[h],o.hasOwnProperty(h)&&(g!=null||Q!=null))switch(h){case"value":_e=g;break;case"defaultValue":U=g;break;case"multiple":j=g;default:g!==Q&&Zt(e,t,h,g,o,Q)}t=U,s=j,o=Ne,_e!=null?lr(e,!!s,_e,!1):!!o!=!!s&&(t!=null?lr(e,!!s,t,!0):lr(e,!!s,s?[]:"",!1));return;case"textarea":Ne=_e=null;for(U in s)if(h=s[U],s.hasOwnProperty(U)&&h!=null&&!o.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Zt(e,t,U,null,o,h)}for(j in o)if(h=o[j],g=s[j],o.hasOwnProperty(j)&&(h!=null||g!=null))switch(j){case"value":_e=h;break;case"defaultValue":Ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&Zt(e,t,j,h,o,g)}Hl(e,_e,Ne);return;case"option":for(var et in s)if(_e=s[et],s.hasOwnProperty(et)&&_e!=null&&!o.hasOwnProperty(et))switch(et){case"selected":e.selected=!1;break;default:Zt(e,t,et,null,o,_e)}for(Q in o)if(_e=o[Q],Ne=s[Q],o.hasOwnProperty(Q)&&_e!==Ne&&(_e!=null||Ne!=null))switch(Q){case"selected":e.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Zt(e,t,Q,_e,o,Ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in s)_e=s[dt],s.hasOwnProperty(dt)&&_e!=null&&!o.hasOwnProperty(dt)&&Zt(e,t,dt,null,o,_e);for(be in o)if(_e=o[be],Ne=s[be],o.hasOwnProperty(be)&&_e!==Ne&&(_e!=null||Ne!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,t));break;default:Zt(e,t,be,_e,o,Ne)}return;default:if(Kl(t)){for(var en in s)_e=s[en],s.hasOwnProperty(en)&&_e!==void 0&&!o.hasOwnProperty(en)&&Pf(e,t,en,void 0,o,_e);for(Te in o)_e=o[Te],Ne=s[Te],!o.hasOwnProperty(Te)||_e===Ne||_e===void 0&&Ne===void 0||Pf(e,t,Te,_e,o,Ne);return}}for(var me in s)_e=s[me],s.hasOwnProperty(me)&&_e!=null&&!o.hasOwnProperty(me)&&Zt(e,t,me,null,o,_e);for(De in o)_e=o[De],Ne=s[De],!o.hasOwnProperty(De)||_e===Ne||_e==null&&Ne==null||Zt(e,t,De,_e,o,Ne)}function Lg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var h=s[o],g=h.transferSize,j=h.initiatorType,U=h.duration;if(g&&U&&Lg(j)){for(j=0,U=h.responseEnd,o+=1;o<s.length;o++){var Q=s[o],be=Q.startTime;if(be>U)break;var Te=Q.transferSize,De=Q.initiatorType;Te&&Lg(De)&&(Q=Q.responseEnd,j+=Te*(Q<U?1:(U-be)/(Q-be)))}if(--o,t+=8*(g+j)/(h.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hf=null,$f=null;function cu(e){return e.nodeType===9?e:e.ownerDocument}function Ig(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Kf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vf=null;function Ib(){var e=window.event;return e&&e.type==="popstate"?e===Vf?!1:(Vf=e,!0):(Vf=null,!1)}var Pg=typeof setTimeout=="function"?setTimeout:void 0,Bb=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,Pb=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(e){return Hg.resolve(null).then(e).catch(Hb)}:Pg;function Hb(e){setTimeout(function(){throw e})}function Ds(e){return e==="head"}function $g(e,t){var s=t,o=0;do{var h=s.nextSibling;if(e.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(o===0){e.removeChild(h),wl(t);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")Oo(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Oo(s);for(var g=s.firstChild;g;){var j=g.nextSibling,U=g.nodeName;g[ia]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=j}}else s==="body"&&Oo(e.ownerDocument.body);s=h}while(s);wl(t)}function Kg(e,t){var s=e;e=0;do{var o=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=o}while(s)}function Ff(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Ff(s),ir(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function $b(e,t,s,o){for(;e.nodeType===1;){var h=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ia])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=tr(e.nextSibling),e===null)break}return null}function Kb(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=tr(e.nextSibling),e===null))return null;return e}function Vg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=tr(e.nextSibling),e===null))return null;return e}function Gf(e){return e.data==="$?"||e.data==="$~"}function Yf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Vb(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var o=function(){t(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Qf=null;function Fg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return tr(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Gg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Yg(e,t,s){switch(t=cu(s),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Oo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ir(e)}var nr=new Map,Qg=new Set;function uu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ns=T.d;T.d={f:Fb,r:Gb,D:Yb,C:Qb,L:Xb,m:Jb,X:Zb,S:Wb,M:ew};function Fb(){var e=ns.f(),t=tu();return e||t}function Gb(e){var t=Ht(e);t!==null&&t.tag===5&&t.type==="form"?f0(t):ns.r(e)}var yl=typeof document>"u"?null:document;function Xg(e,t,s){var o=yl;if(o&&typeof t=="string"&&t){var h=gn(t);h='link[rel="'+e+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),Qg.has(h)||(Qg.add(h),e={rel:e,crossOrigin:s,href:t},o.querySelector(h)===null&&(t=o.createElement("link"),ea(t,"link",e),on(t),o.head.appendChild(t)))}}function Yb(e){ns.D(e),Xg("dns-prefetch",e,null)}function Qb(e,t){ns.C(e,t),Xg("preconnect",e,t)}function Xb(e,t,s){ns.L(e,t,s);var o=yl;if(o&&e&&t){var h='link[rel="preload"][as="'+gn(t)+'"]';t==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+gn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+gn(s.imageSizes)+'"]')):h+='[href="'+gn(e)+'"]';var g=h;switch(t){case"style":g=vl(e);break;case"script":g=bl(e)}nr.has(g)||(e=w({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),nr.set(g,e),o.querySelector(h)!==null||t==="style"&&o.querySelector(Ro(g))||t==="script"&&o.querySelector(Uo(g))||(t=o.createElement("link"),ea(t,"link",e),on(t),o.head.appendChild(t)))}}function Jb(e,t){ns.m(e,t);var s=yl;if(s&&e){var o=t&&typeof t.as=="string"?t.as:"script",h='link[rel="modulepreload"][as="'+gn(o)+'"][href="'+gn(e)+'"]',g=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=bl(e)}if(!nr.has(g)&&(e=w({rel:"modulepreload",href:e},t),nr.set(g,e),s.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Uo(g)))return}o=s.createElement("link"),ea(o,"link",e),on(o),s.head.appendChild(o)}}}function Wb(e,t,s){ns.S(e,t,s);var o=yl;if(o&&e){var h=Vn(o).hoistableStyles,g=vl(e);t=t||"default";var j=h.get(g);if(!j){var U={loading:0,preload:null};if(j=o.querySelector(Ro(g)))U.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},s),(s=nr.get(g))&&Xf(e,s);var Q=j=o.createElement("link");on(Q),ea(Q,"link",e),Q._p=new Promise(function(be,Te){Q.onload=be,Q.onerror=Te}),Q.addEventListener("load",function(){U.loading|=1}),Q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,du(j,t,o)}j={type:"stylesheet",instance:j,count:1,state:U},h.set(g,j)}}}function Zb(e,t){ns.X(e,t);var s=yl;if(s&&e){var o=Vn(s).hoistableScripts,h=bl(e),g=o.get(h);g||(g=s.querySelector(Uo(h)),g||(e=w({src:e,async:!0},t),(t=nr.get(h))&&Jf(e,t),g=s.createElement("script"),on(g),ea(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function ew(e,t){ns.M(e,t);var s=yl;if(s&&e){var o=Vn(s).hoistableScripts,h=bl(e),g=o.get(h);g||(g=s.querySelector(Uo(h)),g||(e=w({src:e,async:!0,type:"module"},t),(t=nr.get(h))&&Jf(e,t),g=s.createElement("script"),on(g),ea(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(h,g))}}function Jg(e,t,s,o){var h=(h=Be.current)?uu(h):null;if(!h)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=vl(s.href),s=Vn(h).hoistableStyles,o=s.get(t),o||(o={type:"style",instance:null,count:0,state:null},s.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=vl(s.href);var g=Vn(h).hoistableStyles,j=g.get(e);if(j||(h=h.ownerDocument||h,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,j),(g=h.querySelector(Ro(e)))&&!g._p&&(j.instance=g,j.state.loading=5),nr.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},nr.set(e,s),g||tw(h,e,s,j.state))),t&&o===null)throw Error(i(528,""));return j}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=bl(s),s=Vn(h).hoistableScripts,o=s.get(t),o||(o={type:"script",instance:null,count:0,state:null},s.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function vl(e){return'href="'+gn(e)+'"'}function Ro(e){return'link[rel="stylesheet"]['+e+"]"}function Wg(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function tw(e,t,s,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),ea(t,"link",s),on(t),e.head.appendChild(t))}function bl(e){return'[src="'+gn(e)+'"]'}function Uo(e){return"script[async]"+e}function Zg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+gn(s.href)+'"]');if(o)return t.instance=o,on(o),o;var h=w({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),on(o),ea(o,"style",h),du(o,s.precedence,e),t.instance=o;case"stylesheet":h=vl(s.href);var g=e.querySelector(Ro(h));if(g)return t.state.loading|=4,t.instance=g,on(g),g;o=Wg(s),(h=nr.get(h))&&Xf(o,h),g=(e.ownerDocument||e).createElement("link"),on(g);var j=g;return j._p=new Promise(function(U,Q){j.onload=U,j.onerror=Q}),ea(g,"link",o),t.state.loading|=4,du(g,s.precedence,e),t.instance=g;case"script":return g=bl(s.src),(h=e.querySelector(Uo(g)))?(t.instance=h,on(h),h):(o=s,(h=nr.get(g))&&(o=w({},s),Jf(o,h)),e=e.ownerDocument||e,h=e.createElement("script"),on(h),ea(h,"link",o),e.head.appendChild(h),t.instance=h);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,du(o,s.precedence,e));return t.instance}function du(e,t,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,g=h,j=0;j<o.length;j++){var U=o[j];if(U.dataset.precedence===t)g=U;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Xf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Jf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var fu=null;function ep(e,t,s){if(fu===null){var o=new Map,h=fu=new Map;h.set(s,o)}else h=fu,o=h.get(s),o||(o=new Map,h.set(s,o));if(o.has(e))return o;for(o.set(e,null),s=s.getElementsByTagName(e),h=0;h<s.length;h++){var g=s[h];if(!(g[ia]||g[Vt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var j=g.getAttribute(t)||"";j=e+j;var U=o.get(j);U?U.push(g):o.set(j,[g])}}return o}function tp(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function nw(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function np(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function aw(e,t,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=vl(o.href),g=t.querySelector(Ro(h));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=hu.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=g,on(g);return}g=t.ownerDocument||t,o=Wg(o),(h=nr.get(h))&&Xf(o,h),g=g.createElement("link"),on(g);var j=g;j._p=new Promise(function(U,Q){j.onload=U,j.onerror=Q}),ea(g,"link",o),s.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=hu.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Wf=0;function rw(e,t){return e.stylesheets&&e.count===0&&gu(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var o=setTimeout(function(){if(e.stylesheets&&gu(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+t);0<e.imgBytes&&Wf===0&&(Wf=62500*Lb());var h=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&gu(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Wf?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function hu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mu=null;function gu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mu=new Map,t.forEach(sw,e),mu=null,hu.call(e))}function sw(e,t){if(!(t.state.loading&4)){var s=mu.get(e);if(s)var o=s.get(null);else{s=new Map,mu.set(e,s);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var j=h[g];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(s.set(j.dataset.precedence,j),o=j)}o&&s.set(null,o)}h=t.instance,j=h.getAttribute("data-precedence"),g=s.get(j)||o,g===o&&s.set(null,h),s.set(j,h),this.count++,o=hu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),t.state.loading|=4}}var Do={$$typeof:L,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function iw(e,t,s,o,h,g,j,U,Q){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=On(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.hiddenUpdates=On(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function ap(e,t,s,o,h,g,j,U,Q,be,Te,De){return e=new iw(e,t,s,j,Q,be,Te,De,U),t=1,g===!0&&(t|=24),g=Ua(3,null,null,t),e.current=g,g.stateNode=e,t=Td(),t.refCount++,e.pooledCache=t,t.refCount++,g.memoizedState={element:o,isDehydrated:s,cache:t},Dd(g),e}function rp(e){return e?(e=Xi,e):Xi}function sp(e,t,s,o,h,g){h=rp(h),o.context===null?o.context=h:o.pendingContext=h,o=Ss(t),o.payload={element:s},g=g===void 0?null:g,g!==null&&(o.callback=g),s=ks(e,o,t),s!==null&&(Sa(s,e,t),fo(s,e,t))}function ip(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Zf(e,t){ip(e,t),(e=e.alternate)&&ip(e,t)}function lp(e){if(e.tag===13||e.tag===31){var t=Kt(e,67108864);t!==null&&Sa(t,e,67108864),Zf(e,67108864)}}function op(e){if(e.tag===13||e.tag===31){var t=La();t=Qs(t);var s=Kt(e,t);s!==null&&Sa(s,e,t),Zf(e,t)}}var pu=!0;function lw(e,t,s,o){var h=A.T;A.T=null;var g=T.p;try{T.p=2,eh(e,t,s,o)}finally{T.p=g,A.T=h}}function ow(e,t,s,o){var h=A.T;A.T=null;var g=T.p;try{T.p=8,eh(e,t,s,o)}finally{T.p=g,A.T=h}}function eh(e,t,s,o){if(pu){var h=th(o);if(h===null)Bf(e,t,o,yu,s),up(e,o);else if(uw(h,e,t,s,o))o.stopPropagation();else if(up(e,o),t&4&&-1<cw.indexOf(e)){for(;h!==null;){var g=Ht(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var j=xn(g.pendingLanes);if(j!==0){var U=g;for(U.pendingLanes|=2,U.entangledLanes|=2;j;){var Q=1<<31-$e(j);U.entanglements[1]|=Q,j&=~Q}jr(g),(Bt&6)===0&&(Zc=gt()+500,Eo(0))}}break;case 31:case 13:U=Kt(g,2),U!==null&&Sa(U,g,2),tu(),Zf(g,2)}if(g=th(o),g===null&&Bf(e,t,o,yu,s),g===h)break;h=g}h!==null&&o.stopPropagation()}else Bf(e,t,o,null,s)}}function th(e){return e=Ui(e),nh(e)}var yu=null;function nh(e){if(yu=null,e=Ka(e),e!==null){var t=c(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return yu=e,null}function cp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hn()){case mt:return 2;case Qt:return 8;case Xt:case Qn:return 32;case an:return 268435456;default:return 32}default:return 32}}var ah=!1,Ms=null,zs=null,qs=null,Mo=new Map,zo=new Map,Ls=[],cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function up(e,t){switch(e){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":Mo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zo.delete(t.pointerId)}}function qo(e,t,s,o,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:s,eventSystemFlags:o,nativeEvent:g,targetContainers:[h]},t!==null&&(t=Ht(t),t!==null&&lp(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function uw(e,t,s,o,h){switch(t){case"focusin":return Ms=qo(Ms,e,t,s,o,h),!0;case"dragenter":return zs=qo(zs,e,t,s,o,h),!0;case"mouseover":return qs=qo(qs,e,t,s,o,h),!0;case"pointerover":var g=h.pointerId;return Mo.set(g,qo(Mo.get(g)||null,e,t,s,o,h)),!0;case"gotpointercapture":return g=h.pointerId,zo.set(g,qo(zo.get(g)||null,e,t,s,o,h)),!0}return!1}function dp(e){var t=Ka(e.target);if(t!==null){var s=c(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Cr(e.priority,function(){op(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,Cr(e.priority,function(){op(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=th(e.nativeEvent);if(s===null){s=e.nativeEvent;var o=new s.constructor(s.type,s);Ga=o,s.target.dispatchEvent(o),Ga=null}else return t=Ht(s),t!==null&&lp(t),e.blockedOn=s,!1;t.shift()}return!0}function fp(e,t,s){vu(e)&&s.delete(t)}function dw(){ah=!1,Ms!==null&&vu(Ms)&&(Ms=null),zs!==null&&vu(zs)&&(zs=null),qs!==null&&vu(qs)&&(qs=null),Mo.forEach(fp),zo.forEach(fp)}function bu(e,t){e.blockedOn===t&&(e.blockedOn=null,ah||(ah=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,dw)))}var wu=null;function hp(e){wu!==e&&(wu=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){wu===e&&(wu=null);for(var t=0;t<e.length;t+=3){var s=e[t],o=e[t+1],h=e[t+2];if(typeof o!="function"){if(nh(o||s)===null)continue;break}var g=Ht(s);g!==null&&(e.splice(t,3),t-=3,ef(g,{pending:!0,data:h,method:s.method,action:o},o,h))}}))}function wl(e){function t(Q){return bu(Q,e)}Ms!==null&&bu(Ms,e),zs!==null&&bu(zs,e),qs!==null&&bu(qs,e),Mo.forEach(t),zo.forEach(t);for(var s=0;s<Ls.length;s++){var o=Ls[s];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ls.length&&(s=Ls[0],s.blockedOn===null);)dp(s),s.blockedOn===null&&Ls.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var h=s[o],g=s[o+1],j=h[mn]||null;if(typeof g=="function")j||hp(s);else if(j){var U=null;if(g&&g.hasAttribute("formAction")){if(h=g,j=g[mn]||null)U=j.formAction;else if(nh(h)!==null)continue}else U=j.action;typeof U=="function"?s[o+1]=U:(s.splice(o,3),o-=3),hp(s)}}}function mp(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(j){return h=j})},focusReset:"manual",scroll:"manual"})}function t(){h!==null&&(h(),h=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),h!==null&&(h(),h=null)}}}function rh(e){this._internalRoot=e}xu.prototype.render=rh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var s=t.current,o=La();sp(s,o,e,t,null,null)},xu.prototype.unmount=rh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sp(e.current,2,null,e,null,null),tu(),t[Xn]=null}};function xu(e){this._internalRoot=e}xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Er();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Ls.length&&t!==0&&t<Ls[s].priority;s++);Ls.splice(s,0,e),s===0&&dp(e)}};var gp=n.version;if(gp!=="19.2.3")throw Error(i(527,gp,"19.2.3"));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=b(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var fw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{vn=_u.inject(fw),zt=_u}catch{}}return Io.createRoot=function(e,t){if(!l(e))throw Error(i(299));var s=!1,o="",h=_0,g=S0,j=k0;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(h=t.onUncaughtError),t.onCaughtError!==void 0&&(g=t.onCaughtError),t.onRecoverableError!==void 0&&(j=t.onRecoverableError)),t=ap(e,1,!1,null,null,s,o,null,h,g,j,mp),e[Xn]=t.current,If(e),new rh(t)},Io.hydrateRoot=function(e,t,s){if(!l(e))throw Error(i(299));var o=!1,h="",g=_0,j=S0,U=k0,Q=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(j=s.onCaughtError),s.onRecoverableError!==void 0&&(U=s.onRecoverableError),s.formState!==void 0&&(Q=s.formState)),t=ap(e,1,!0,t,s??null,o,h,Q,g,j,U,mp),t.context=rp(null),s=t.current,o=La(),o=Qs(o),h=Ss(o),h.callback=null,ks(s,h,o),s=o,t.current.lanes=s,sa(t,s),jr(t),e[Xn]=t.current,If(e),new xu(t)},Io.version="19.2.3",Io}var jp;function Sw(){if(jp)return lh.exports;jp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),lh.exports=_w(),lh.exports}var kw=Sw();const jw="modulepreload",Nw=function(a,n){return new URL(a,n).href},Np={},ss=function(n,r,i){let l=Promise.resolve();if(r&&r.length>0){let b=function(v){return Promise.all(v.map(w=>Promise.resolve(w).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};const f=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),y=m?.nonce||m?.getAttribute("nonce");l=b(r.map(v=>{if(v=Nw(v,i),v in Np)return;Np[v]=!0;const w=v.endsWith(".css"),_=w?'[rel="stylesheet"]':"";if(i)for(let E=f.length-1;E>=0;E--){const R=f[E];if(R.href===v&&(!w||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${_}`))return;const k=document.createElement("link");if(k.rel=w?"stylesheet":jw,w||(k.as="script"),k.crossOrigin="",k.href=v,y&&k.setAttribute("nonce",y),document.head.appendChild(k),w)return new Promise((E,R)=>{k.addEventListener("load",E),k.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(f){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=f,window.dispatchEvent(m),!m.defaultPrevented)throw f}return l.then(f=>{for(const m of f||[])m.status==="rejected"&&c(m.reason);return n().catch(c)})},Ap=a=>{let n;const r=new Set,i=(b,v)=>{const w=typeof b=="function"?b(n):b;if(!Object.is(w,n)){const _=n;n=v??(typeof w!="object"||w===null)?w:Object.assign({},n,w),r.forEach(k=>k(n,_))}},l=()=>n,m={setState:i,getState:l,getInitialState:()=>y,subscribe:b=>(r.add(b),()=>r.delete(b))},y=n=a(i,l,m);return m},Aw=(a=>a?Ap(a):Ap),Ew=a=>a;function Cw(a,n=Ew){const r=Su.useSyncExternalStore(a.subscribe,Su.useCallback(()=>n(a.getState()),[a,n]),Su.useCallback(()=>n(a.getInitialState()),[a,n]));return Su.useDebugValue(r),r}const Tw=a=>{const n=Aw(a),r=i=>Cw(n,i);return Object.assign(r,n),r},Ow=(a=>Tw);function Rw(a,n){let r;try{r=a()}catch{return}return{getItem:l=>{var c;const f=y=>y===null?null:JSON.parse(y,void 0),m=(c=r.getItem(l))!=null?c:null;return m instanceof Promise?m.then(f):f(m)},setItem:(l,c)=>r.setItem(l,JSON.stringify(c,void 0)),removeItem:l=>r.removeItem(l)}}const Oh=a=>n=>{try{const r=a(n);return r instanceof Promise?r:{then(i){return Oh(i)(r)},catch(i){return this}}}catch(r){return{then(i){return this},catch(i){return Oh(i)(r)}}}},Uw=(a,n)=>(r,i,l)=>{let c={storage:Rw(()=>window.localStorage),partialize:H=>H,version:0,merge:(H,q)=>({...q,...H}),...n},f=!1,m=0;const y=new Set,b=new Set;let v=c.storage;if(!v)return a((...H)=>{console.warn(`[zustand persist middleware] Unable to update item '${c.name}', the given storage is currently unavailable.`),r(...H)},i,l);const w=()=>{const H=c.partialize({...i()});return v.setItem(c.name,{state:H,version:c.version})},_=l.setState;l.setState=(H,q)=>(_(H,q),w());const k=a((...H)=>(r(...H),w()),i,l);l.getInitialState=()=>k;let E;const R=()=>{var H,q;if(!v)return;const W=++m;f=!1,y.forEach(z=>{var fe;return z((fe=i())!=null?fe:k)});const L=((q=c.onRehydrateStorage)==null?void 0:q.call(c,(H=i())!=null?H:k))||void 0;return Oh(v.getItem.bind(v))(c.name).then(z=>{if(z)if(typeof z.version=="number"&&z.version!==c.version){if(c.migrate){const fe=c.migrate(z.state,z.version);return fe instanceof Promise?fe.then(K=>[!0,K]):[!0,fe]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,z.state];return[!1,void 0]}).then(z=>{var fe;if(W!==m)return;const[K,X]=z;if(E=c.merge(X,(fe=i())!=null?fe:k),r(E,!0),K)return w()}).then(()=>{W===m&&(L?.(E,void 0),E=i(),f=!0,b.forEach(z=>z(E)))}).catch(z=>{W===m&&L?.(void 0,z)})};return l.persist={setOptions:H=>{c={...c,...H},H.storage&&(v=H.storage)},clearStorage:()=>{v?.removeItem(c.name)},getOptions:()=>c,rehydrate:()=>R(),hasHydrated:()=>f,onHydrate:H=>(y.add(H),()=>{y.delete(H)}),onFinishHydration:H=>(b.add(H),()=>{b.delete(H)})},c.skipHydration||R(),E||k},Dw=Uw;function ad(a,n){var r={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&n.indexOf(i)<0&&(r[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(a);l<i.length;l++)n.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(a,i[l])&&(r[i[l]]=a[i[l]]);return r}function Mw(a,n,r,i){function l(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function m(v){try{b(i.next(v))}catch(w){f(w)}}function y(v){try{b(i.throw(v))}catch(w){f(w)}}function b(v){v.done?c(v.value):l(v.value).then(m,y)}b((i=i.apply(a,n||[])).next())})}const zw=a=>a?(...n)=>a(...n):(...n)=>fetch(...n);class sm extends Error{constructor(n,r="FunctionsError",i){super(n),this.name=r,this.context=i}}class qw extends sm{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Ep extends sm{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Cp extends sm{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Rh;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Rh||(Rh={}));class Lw{constructor(n,{headers:r={},customFetch:i,region:l=Rh.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=zw(i)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Mw(this,arguments,void 0,function*(r,i={}){var l;let c,f;try{const{headers:m,method:y,body:b,signal:v,timeout:w}=i;let _={},{region:k}=i;k||(k=this.region);const E=new URL(`${this.url}/${r}`);k&&k!=="any"&&(_["x-region"]=k,E.searchParams.set("forceFunctionRegion",k));let R;b&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",R=b):typeof b=="string"?(_["Content-Type"]="text/plain",R=b):typeof FormData<"u"&&b instanceof FormData?R=b:(_["Content-Type"]="application/json",R=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?R=JSON.stringify(b):R=b;let H=v;w&&(f=new AbortController,c=setTimeout(()=>f.abort(),w),v?(H=f.signal,v.addEventListener("abort",()=>f.abort())):H=f.signal);const q=yield this.fetch(E.toString(),{method:y||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),m),body:R,signal:H}).catch(fe=>{throw new qw(fe)}),W=q.headers.get("x-relay-error");if(W&&W==="true")throw new Ep(q);if(!q.ok)throw new Cp(q);let L=((l=q.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),z;return L==="application/json"?z=yield q.json():L==="application/octet-stream"||L==="application/pdf"?z=yield q.blob():L==="text/event-stream"?z=q:L==="multipart/form-data"?z=yield q.formData():z=yield q.text(),{data:z,error:null,response:q}}catch(m){return{data:null,error:m,response:m instanceof Cp||m instanceof Ep?m.context:void 0}}finally{c&&clearTimeout(c)}})}}var Iw=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},Bw=class{constructor(a){var n,r,i;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(n=a.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=a.signal,this.isMaybeSingle=(r=a.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(i=a.urlLengthLimit)!==null&&i!==void 0?i:8e3,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,n){return this.headers=new Headers(this.headers),this.headers.set(a,n),this}then(a,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let l=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let f=null,m=null,y=null,b=c.status,v=c.statusText;if(c.ok){var w,_;if(r.method!=="HEAD"){var k;const q=await c.text();q===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((k=r.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?m=q:m=JSON.parse(q))}const R=(w=r.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),H=(_=c.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");R&&H&&H.length>1&&(y=parseInt(H[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,b=406,v="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var E;const R=await c.text();try{f=JSON.parse(R),Array.isArray(f)&&c.status===404&&(m=[],f=null,b=200,v="OK")}catch{c.status===404&&R===""?(b=204,v="No Content"):f={message:R}}if(f&&r.isMaybeSingle&&(!(f==null||(E=f.details)===null||E===void 0)&&E.includes("0 rows"))&&(f=null,b=200,v="OK"),f&&r.shouldThrowOnError)throw new Iw(f)}return{error:f,data:m,count:y,status:b,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var f;let m="",y="",b="";const v=c?.cause;if(v){var w,_,k,E;const q=(w=v?.message)!==null&&w!==void 0?w:"",W=(_=v?.code)!==null&&_!==void 0?_:"";m=`${(k=c?.name)!==null&&k!==void 0?k:"FetchError"}: ${c?.message}`,m+=`

Caused by: ${(E=v?.name)!==null&&E!==void 0?E:"Error"}: ${q}`,W&&(m+=` (${W})`),v?.stack&&(m+=`
${v.stack}`)}else{var R;m=(R=c?.stack)!==null&&R!==void 0?R:""}const H=this.url.toString().length;return c?.name==="AbortError"||c?.code==="ABORT_ERR"?(b="",y="Request was aborted (timeout or manual cancellation)",H>this.urlLengthLimit&&(y+=`. Note: Your request URL is ${H} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(v?.name==="HeadersOverflowError"||v?.code==="UND_ERR_HEADERS_OVERFLOW")&&(b="",y="HTTP headers exceeded server limits (typically 16KB)",H>this.urlLengthLimit&&(y+=`. Your request URL is ${H} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(f=c?.name)!==null&&f!==void 0?f:"FetchError"}: ${c?.message}`,details:m,hint:y,code:b},data:null,count:null,status:0,statusText:""}})),l.then(a,n)}returns(){return this}overrideTypes(){return this}},Pw=class extends Bw{select(a){let n=!1;const r=(a??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:l=i}={}){const c=l?`${l}.order`:"order",f=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${f?`${f},`:""}${a}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${a}`),this}range(a,n,{foreignTable:r,referencedTable:i=r}={}){const l=typeof i>"u"?"offset":`${i}.offset`,c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${a}`),this.url.searchParams.set(c,`${n-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:l=!1,format:c="text"}={}){var f;const m=[a?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,l?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${y}"; options=${m};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const Tp=new RegExp("[,()]");var Cl=class extends Pw{eq(a,n){return this.url.searchParams.append(a,`eq.${n}`),this}neq(a,n){return this.url.searchParams.append(a,`neq.${n}`),this}gt(a,n){return this.url.searchParams.append(a,`gt.${n}`),this}gte(a,n){return this.url.searchParams.append(a,`gte.${n}`),this}lt(a,n){return this.url.searchParams.append(a,`lt.${n}`),this}lte(a,n){return this.url.searchParams.append(a,`lte.${n}`),this}like(a,n){return this.url.searchParams.append(a,`like.${n}`),this}likeAllOf(a,n){return this.url.searchParams.append(a,`like(all).{${n.join(",")}}`),this}likeAnyOf(a,n){return this.url.searchParams.append(a,`like(any).{${n.join(",")}}`),this}ilike(a,n){return this.url.searchParams.append(a,`ilike.${n}`),this}ilikeAllOf(a,n){return this.url.searchParams.append(a,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(a,n){return this.url.searchParams.append(a,`ilike(any).{${n.join(",")}}`),this}regexMatch(a,n){return this.url.searchParams.append(a,`match.${n}`),this}regexIMatch(a,n){return this.url.searchParams.append(a,`imatch.${n}`),this}is(a,n){return this.url.searchParams.append(a,`is.${n}`),this}isDistinct(a,n){return this.url.searchParams.append(a,`isdistinct.${n}`),this}in(a,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&Tp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(a,`in.(${r})`),this}notIn(a,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&Tp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(a,`not.in.(${r})`),this}contains(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cs.{${n.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(n)}`),this}containedBy(a,n){return typeof n=="string"?this.url.searchParams.append(a,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(a,`cd.{${n.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(n)}`),this}rangeGt(a,n){return this.url.searchParams.append(a,`sr.${n}`),this}rangeGte(a,n){return this.url.searchParams.append(a,`nxl.${n}`),this}rangeLt(a,n){return this.url.searchParams.append(a,`sl.${n}`),this}rangeLte(a,n){return this.url.searchParams.append(a,`nxr.${n}`),this}rangeAdjacent(a,n){return this.url.searchParams.append(a,`adj.${n}`),this}overlaps(a,n){return typeof n=="string"?this.url.searchParams.append(a,`ov.${n}`):this.url.searchParams.append(a,`ov.{${n.join(",")}}`),this}textSearch(a,n,{config:r,type:i}={}){let l="";i==="plain"?l="pl":i==="phrase"?l="ph":i==="websearch"&&(l="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(a,`${l}fts${c}.${n}`),this}match(a){return Object.entries(a).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(a,n,r){return this.url.searchParams.append(a,`not.${n}.${r}`),this}or(a,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${a})`),this}filter(a,n,r){return this.url.searchParams.append(a,`${n}.${r}`),this}},Hw=class{constructor(a,{headers:n={},schema:r,fetch:i,urlLengthLimit:l=8e3}){this.url=a,this.headers=new Headers(n),this.schema=r,this.fetch=i,this.urlLengthLimit=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,n){const{head:r=!1,count:i}=n??{},l=r?"HEAD":"GET";let c=!1;const f=(a??"*").split("").map(b=>/\s/.test(b)&&!c?"":(b==='"'&&(c=!c),b)).join(""),{url:m,headers:y}=this.cloneRequestState();return m.searchParams.set("select",f),i&&y.append("Prefer",`count=${i}`),new Cl({method:l,url:m,headers:y,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(a,{count:n,defaultToNull:r=!0}={}){var i;const l="POST",{url:c,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(m.length>0){const y=[...new Set(m)].map(b=>`"${b}"`);c.searchParams.set("columns",y.join(","))}}return new Cl({method:l,url:c,headers:f,schema:this.schema,body:a,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(a,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:l=!0}={}){var c;const f="POST",{url:m,headers:y}=this.cloneRequestState();if(y.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&m.searchParams.set("on_conflict",n),i&&y.append("Prefer",`count=${i}`),l||y.append("Prefer","missing=default"),Array.isArray(a)){const b=a.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(b.length>0){const v=[...new Set(b)].map(w=>`"${w}"`);m.searchParams.set("columns",v.join(","))}}return new Cl({method:f,url:m,headers:y,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(a,{count:n}={}){var r;const i="PATCH",{url:l,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Cl({method:i,url:l,headers:c,schema:this.schema,body:a,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:a}={}){var n;const r="DELETE",{url:i,headers:l}=this.cloneRequestState();return a&&l.append("Prefer",`count=${a}`),new Cl({method:r,url:i,headers:l,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function Zo(a){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zo(a)}function $w(a,n){if(Zo(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var i=r.call(a,n);if(Zo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Kw(a){var n=$w(a,"string");return Zo(n)=="symbol"?n:n+""}function Vw(a,n,r){return(n=Kw(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function Op(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,i)}return r}function ku(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Op(Object(r),!0).forEach(function(i){Vw(a,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(r,i))})}return a}var Fw=class Oy{constructor(n,{headers:r={},schema:i,fetch:l,timeout:c,urlLengthLimit:f=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=i,this.urlLengthLimit=f;const m=l??globalThis.fetch;c!==void 0&&c>0?this.fetch=(y,b)=>{const v=new AbortController,w=setTimeout(()=>v.abort(),c),_=b?.signal;if(_){if(_.aborted)return clearTimeout(w),m(y,b);const k=()=>{clearTimeout(w),v.abort()};return _.addEventListener("abort",k,{once:!0}),m(y,ku(ku({},b),{},{signal:v.signal})).finally(()=>{clearTimeout(w),_.removeEventListener("abort",k)})}return m(y,ku(ku({},b),{},{signal:v.signal})).finally(()=>clearTimeout(w))}:this.fetch=m}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Hw(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Oy(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:i=!1,get:l=!1,count:c}={}){var f;let m;const y=new URL(`${this.url}/rpc/${n}`);let b;const v=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(v)),w=i&&Object.values(r).some(v);w?(m="POST",b=r):i||l?(m=i?"HEAD":"GET",Object.entries(r).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{y.searchParams.append(k,E)})):(m="POST",b=r);const _=new Headers(this.headers);return w?_.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&_.set("Prefer",`count=${c}`),new Cl({method:m,url:y,headers:_,schema:this.schemaName,body:b,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch,urlLengthLimit:this.urlLengthLimit})}};class Gw{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const i=r.versions;if(i&&i.node){const l=i.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const i=this.getWebSocketConstructor();return new i(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Yw="2.95.3",Qw=`realtime-js/${Yw}`,Xw="1.0.0",Ry="2.0.0",Rp=Ry,Uh=1e4,Jw=1e3,Ww=100;var Hs;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(Hs||(Hs={}));var Pn;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(Pn||(Pn={}));var mr;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(mr||(mr={}));var Dh;(function(a){a.websocket="websocket"})(Dh||(Dh={}));var ji;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(ji||(ji={}));class Zw{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let i=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,i;const l=(i=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(n){var r,i;const l=(i=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,i){var l,c;const f=n.topic,m=(l=n.ref)!==null&&l!==void 0?l:"",y=(c=n.join_ref)!==null&&c!==void 0?c:"",b=n.payload.event,v=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(y.length>255)throw new Error(`joinRef length ${y.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+y.length+m.length+f.length+b.length+w.length,k=new ArrayBuffer(this.HEADER_LENGTH+_);let E=new DataView(k),R=0;E.setUint8(R++,this.KINDS.userBroadcastPush),E.setUint8(R++,y.length),E.setUint8(R++,m.length),E.setUint8(R++,f.length),E.setUint8(R++,b.length),E.setUint8(R++,w.length),E.setUint8(R++,r),Array.from(y,q=>E.setUint8(R++,q.charCodeAt(0))),Array.from(m,q=>E.setUint8(R++,q.charCodeAt(0))),Array.from(f,q=>E.setUint8(R++,q.charCodeAt(0))),Array.from(b,q=>E.setUint8(R++,q.charCodeAt(0))),Array.from(w,q=>E.setUint8(R++,q.charCodeAt(0)));var H=new Uint8Array(k.byteLength+i.byteLength);return H.set(new Uint8Array(k),0),H.set(new Uint8Array(i),k.byteLength),H.buffer}decode(n,r){if(this._isArrayBuffer(n)){let i=this._binaryDecode(n);return r(i)}if(typeof n=="string"){const i=JSON.parse(n),[l,c,f,m,y]=i;return r({join_ref:l,ref:c,topic:f,event:m,payload:y})}return r({})}_binaryDecode(n){const r=new DataView(n),i=r.getUint8(0),l=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,l)}}_decodeUserBroadcast(n,r,i){const l=r.getUint8(1),c=r.getUint8(2),f=r.getUint8(3),m=r.getUint8(4);let y=this.HEADER_LENGTH+4;const b=i.decode(n.slice(y,y+l));y=y+l;const v=i.decode(n.slice(y,y+c));y=y+c;const w=i.decode(n.slice(y,y+f));y=y+f;const _=n.slice(y,n.byteLength),k=m===this.JSON_ENCODING?JSON.parse(i.decode(_)):_,E={type:this.BROADCAST_EVENT,event:v,payload:k};return f>0&&(E.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([i])=>r.includes(i)))}}class Uy{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ln;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(ln||(ln={}));const Up=(a,n,r={})=>{var i;const l=(i=r.skipTypes)!==null&&i!==void 0?i:[];return n?Object.keys(n).reduce((c,f)=>(c[f]=ex(f,a,n,l),c),{}):{}},ex=(a,n,r,i)=>{const l=n.find(m=>m.name===a),c=l?.type,f=r[a];return c&&!i.includes(c)?Dy(c,f):Mh(f)},Dy=(a,n)=>{if(a.charAt(0)==="_"){const r=a.slice(1,a.length);return rx(n,r)}switch(a){case ln.bool:return tx(n);case ln.float4:case ln.float8:case ln.int2:case ln.int4:case ln.int8:case ln.numeric:case ln.oid:return nx(n);case ln.json:case ln.jsonb:return ax(n);case ln.timestamp:return sx(n);case ln.abstime:case ln.date:case ln.daterange:case ln.int4range:case ln.int8range:case ln.money:case ln.reltime:case ln.text:case ln.time:case ln.timestamptz:case ln.timetz:case ln.tsrange:case ln.tstzrange:return Mh(n);default:return Mh(n)}},Mh=a=>a,tx=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},nx=a=>{if(typeof a=="string"){const n=parseFloat(a);if(!Number.isNaN(n))return n}return a},ax=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},rx=(a,n)=>{if(typeof a!="string")return a;const r=a.length-1,i=a[r];if(a[0]==="{"&&i==="}"){let c;const f=a.slice(1,r);try{c=JSON.parse("["+f+"]")}catch{c=f?f.split(","):[]}return c.map(m=>Dy(n,m))}return a},sx=a=>typeof a=="string"?a.replace(" ","T"):a,My=a=>{const n=new URL(a);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class dh{constructor(n,r,i={},l=Uh){this.channel=n,this.event=r,this.payload=i,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var i;return this._hasReceived(n)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(i=>i.status===n).forEach(i=>i.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Dp;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Dp||(Dp={}));class Go{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},l=>{const{onJoin:c,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Go.syncState(this.state,l,c,f),this.pendingDiffs.forEach(y=>{this.state=Go.syncDiff(this.state,y,c,f)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},l=>{const{onJoin:c,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Go.syncDiff(this.state,l,c,f),m())}),this.onJoin((l,c,f)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:f})}),this.onLeave((l,c,f)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,i,l){const c=this.cloneDeep(n),f=this.transformState(r),m={},y={};return this.map(c,(b,v)=>{f[b]||(y[b]=v)}),this.map(f,(b,v)=>{const w=c[b];if(w){const _=v.map(H=>H.presence_ref),k=w.map(H=>H.presence_ref),E=v.filter(H=>k.indexOf(H.presence_ref)<0),R=w.filter(H=>_.indexOf(H.presence_ref)<0);E.length>0&&(m[b]=E),R.length>0&&(y[b]=R)}else m[b]=v}),this.syncDiff(c,{joins:m,leaves:y},i,l)}static syncDiff(n,r,i,l){const{joins:c,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),l||(l=()=>{}),this.map(c,(m,y)=>{var b;const v=(b=n[m])!==null&&b!==void 0?b:[];if(n[m]=this.cloneDeep(y),v.length>0){const w=n[m].map(k=>k.presence_ref),_=v.filter(k=>w.indexOf(k.presence_ref)<0);n[m].unshift(..._)}i(m,v,y)}),this.map(f,(m,y)=>{let b=n[m];if(!b)return;const v=y.map(w=>w.presence_ref);b=b.filter(w=>v.indexOf(w.presence_ref)<0),n[m]=b,l(m,b,y),b.length===0&&delete n[m]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(i=>r(i,n[i]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,i)=>{const l=n[i];return"metas"in l?r[i]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[i]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mp;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(Mp||(Mp={}));var Yo;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Yo||(Yo={}));var rs;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(rs||(rs={}));class Rl{constructor(n,r={config:{}},i){var l,c;if(this.topic=n,this.params=r,this.socket=i,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new dh(this,mr.join,this.params,this.timeout),this.rejoinTimer=new Uy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Go(this),this.broadcastEndpointURL=My(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var i,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Pn.closed){const{config:{broadcast:f,presence:m,private:y}}=this.params,b=(l=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(k=>k.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[Yo.PRESENCE]&&this.bindings[Yo.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,w={},_={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:b,private:y};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(k=>n?.(rs.CHANNEL_ERROR,k)),this._onClose(()=>n?.(rs.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:k})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){n?.(rs.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,H=(E=R?.length)!==null&&E!==void 0?E:0,q=[];for(let W=0;W<H;W++){const L=R[W],{filter:{event:z,schema:fe,table:K,filter:X}}=L,O=k&&k[W];if(O&&O.event===z&&Rl.isFilterValueEqual(O.schema,fe)&&Rl.isFilterValueEqual(O.table,K)&&Rl.isFilterValueEqual(O.filter,X))q.push(Object.assign(Object.assign({},L),{id:O.id}));else{this.unsubscribe(),this.state=Pn.errored,n?.(rs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,n&&n(rs.SUBSCRIBED);return}}).receive("error",k=>{this.state=Pn.errored,n?.(rs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{n?.(rs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,i){return this.state===Pn.joined&&n===Yo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,i)}async httpSend(n,r,i={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);if(m.status===202)return{success:!0};let y=m.statusText;try{const b=await m.json();y=b.error||b.message||y}catch{}return Promise.reject(new Error(y))}async send(n,r={}){var i,l;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:f}=n,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const y={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:f,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((l=b.body)===null||l===void 0?void 0:l.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var f,m,y;const b=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((y=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||y===void 0)&&y.ack)&&c("ok"),b.receive("ok",()=>c("ok")),b.receive("error",()=>c("error")),b.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Pn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(l=>{i=new dh(this,mr.leave,{},n),i.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pn.closed,this.bindings={}}async _fetchWithTimeout(n,r,i){const l=new AbortController,c=setTimeout(()=>l.abort(),i),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),f}_push(n,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new dh(this,n,r,i);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ww){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,i){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,i){var l,c;const f=n.toLocaleLowerCase(),{close:m,error:y,leave:b,join:v}=mr;if(i&&[m,y,b,v].indexOf(f)>=0&&i!==this._joinRef())return;let _=this._onMessage(f,r,i);if(r&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(k=>{var E,R,H;return((E=k.filter)===null||E===void 0?void 0:E.event)==="*"||((H=(R=k.filter)===null||R===void 0?void 0:R.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===f}).map(k=>k.callback(_,i)):(c=this.bindings[f])===null||c===void 0||c.filter(k=>{var E,R,H,q,W,L;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in k){const z=k.id,fe=(E=k.filter)===null||E===void 0?void 0:E.event;return z&&((R=r.ids)===null||R===void 0?void 0:R.includes(z))&&(fe==="*"||fe?.toLocaleLowerCase()===((H=r.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const z=(W=(q=k?.filter)===null||q===void 0?void 0:q.event)===null||W===void 0?void 0:W.toLocaleLowerCase();return z==="*"||z===((L=r?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===f}).map(k=>{if(typeof _=="object"&&"ids"in _){const E=_.data,{schema:R,table:H,commit_timestamp:q,type:W,errors:L}=E;_=Object.assign(Object.assign({},{schema:R,table:H,commit_timestamp:q,eventType:W,new:{},old:{},errors:L}),this._getPayloadRecords(E))}k.callback(_,i)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,i){const l=n.toLocaleLowerCase(),c={type:l,filter:r,callback:i};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,r){const i=n.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&Rl.isEqual(l.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const i in n)if(n[i]!==r[i])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(mr.close,{},n)}_onError(n){this._on(mr.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Up(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Up(n.columns,n.old_record)),r}}const fh=()=>{},ju={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ix=[1e3,2e3,5e3,1e4],lx=1e4,ox=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cx{constructor(n,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Uh,this.transport=null,this.heartbeatIntervalMs=ju.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fh,this.ref=0,this.reconnectTimer=null,this.vsn=Rp,this.logger=fh,this.conn=null,this.sendBuffer=[],this.serializer=new Zw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((i=r?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Dh.websocket}`,this.httpEndpoint=My(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gw.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return r==="ok"&&this._remove(n),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,i){this.logger(n,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Hs.connecting:return ji.Connecting;case Hs.open:return ji.Open;case Hs.closing:return ji.Closing;default:return ji.Closed}}isConnected(){return this.connectionState()===ji.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const i=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===i);if(l)return l;{const c=new Rl(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:i,payload:l,ref:c}=n,f=()=>{this.encode(n,m=>{var y;(y=this.conn)===null||y===void 0||y.send(m)})};this.log("push",`${r} ${i} (${c})`,l),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Jw,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ju.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(i=>i.topic===n&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",b)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:l,payload:c,ref:f}=r,m=f?`(${f})`:"",y=c.status||"";this.log("receive",`${y} ${i} ${l} ${m}`.trim(),c),this.channels.filter(b=>b._isMember(i)).forEach(b=>b._trigger(l,c,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Hs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Hs.open||this.conn.readyState===Hs.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(mr.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const i=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${i}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const i=new Blob([ox],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,i=!1;if(n)r=n,i=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const c={access_token:r,version:Qw};r&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(mr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(i=>{try{i(r)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(i){this.log("error",`error triggering ${n} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Uy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ju.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,i,l,c,f,m,y,b,v,w,_,k;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(i=n?.timeout)!==null&&i!==void 0?i:Uh,this.heartbeatIntervalMs=(l=n?.heartbeatIntervalMs)!==null&&l!==void 0?l:ju.HEARTBEAT_INTERVAL,this.worker=(c=n?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=n?.heartbeatCallback)!==null&&m!==void 0?m:fh,this.vsn=(y=n?.vsn)!==null&&y!==void 0?y:Rp,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=n?.reconnectAfterMs)!==null&&b!==void 0?b:(E=>ix[E-1]||lx),this.vsn){case Xw:this.encode=(v=n?.encode)!==null&&v!==void 0?v:((E,R)=>R(JSON.stringify(E))),this.decode=(w=n?.decode)!==null&&w!==void 0?w:((E,R)=>R(JSON.parse(E)));break;case Ry:this.encode=(_=n?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(k=n?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var ec=class extends Error{constructor(a,n){super(a),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ux(a,n,r){const i=new URL(n,a);if(r)for(const[l,c]of Object.entries(r))c!==void 0&&i.searchParams.set(l,c);return i.toString()}async function dx(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function fx(a){const n=a.fetchImpl??globalThis.fetch;return{async request({method:r,path:i,query:l,body:c,headers:f}){const m=ux(a.baseUrl,i,l),y=await dx(a.auth),b=await n(m,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...y,...f},body:c?JSON.stringify(c):void 0}),v=await b.text(),w=(b.headers.get("content-type")||"").includes("application/json"),_=w&&v?JSON.parse(v):v;if(!b.ok){const k=w?_:void 0,E=k?.error;throw new ec(E?.message??`Request failed with status ${b.status}`,{status:b.status,icebergType:E?.type,icebergCode:E?.code,details:k})}return{status:b.status,headers:b.headers,data:_}}}}function Nu(a){return a.join("")}var hx=class{constructor(a,n=""){this.client=a,this.prefix=n}async listNamespaces(a){const n=a?{parent:Nu(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(a,n){const r={namespace:a.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nu(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nu(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nu(a.namespace)}`}),!0}catch(n){if(n instanceof ec&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(a,n){try{return await this.createNamespace(a,n)}catch(r){if(r instanceof ec&&r.status===409)return;throw r}}};function xl(a){return a.join("")}var mx=class{constructor(a,n="",r){this.client=a,this.prefix=n,this.accessDelegation=r}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xl(a.namespace)}/tables`})).data.identifiers}async createTable(a,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xl(a.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(a,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xl(a.namespace)}/tables/${a.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(a,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xl(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xl(a.namespace)}/tables/${a.name}`,headers:n})).data.metadata}async tableExists(a){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xl(a.namespace)}/tables/${a.name}`,headers:n}),!0}catch(r){if(r instanceof ec&&r.status===404)return!1;throw r}}async createTableIfNotExists(a,n){try{return await this.createTable(a,n)}catch(r){if(r instanceof ec&&r.status===409)return await this.loadTable({namespace:a.namespace,name:n.name});throw r}}},gx=class{constructor(a){let n="v1";a.catalogName&&(n+=`/${a.catalogName}`);const r=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=fx({baseUrl:r,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=a.accessDelegation?.join(","),this.namespaceOps=new hx(this.client,n),this.tableOps=new mx(this.client,n,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,n){return this.namespaceOps.createNamespace(a,n)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,n){return this.tableOps.createTable(a,n)}async updateTable(a,n){return this.tableOps.updateTable(a,n)}async dropTable(a,n){await this.tableOps.dropTable(a,n)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,n){return this.namespaceOps.createNamespaceIfNotExists(a,n)}async createTableIfNotExists(a,n){return this.tableOps.createTableIfNotExists(a,n)}},rd=class extends Error{constructor(a,n="storage",r,i){super(a),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=i}};function sd(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var Au=class extends rd{constructor(a,n,r,i="storage"){super(a,i,n,r),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zy=class extends rd{constructor(a,n,r="storage"){super(a,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const px=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),yx=a=>{if(typeof a!="object"||a===null)return!1;const n=Object.getPrototypeOf(a);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},zh=a=>{if(Array.isArray(a))return a.map(r=>zh(r));if(typeof a=="function"||a!==Object(a))return a;const n={};return Object.entries(a).forEach(([r,i])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=zh(i)}),n},vx=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function tc(a){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tc(a)}function bx(a,n){if(tc(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var i=r.call(a,n);if(tc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function wx(a){var n=bx(a,"string");return tc(n)=="symbol"?n:n+""}function xx(a,n,r){return(n=wx(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function zp(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,i)}return r}function ht(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?zp(Object(r),!0).forEach(function(i){xx(a,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):zp(Object(r)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(r,i))})}return a}const qp=a=>{var n;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(n=a.error)===null||n===void 0?void 0:n.message)||JSON.stringify(a)},_x=async(a,n,r,i)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!r?.noResolveJson){const l=a,c=l.status||500;if(typeof l.json=="function")l.json().then(f=>{const m=f?.statusCode||f?.code||c+"";n(new Au(qp(f),c,m,i))}).catch(()=>{if(i==="vectors"){const f=c+"";n(new Au(l.statusText||`HTTP ${c} error`,c,f,i))}else{const f=c+"";n(new Au(l.statusText||`HTTP ${c} error`,c,f,i))}});else{const f=c+"";n(new Au(l.statusText||`HTTP ${c} error`,c,f,i))}}else n(new zy(qp(a),a,i))},Sx=(a,n,r,i)=>{const l={method:a,headers:n?.headers||{}};return a==="GET"||a==="HEAD"||!i?ht(ht({},l),r):(yx(i)?(l.headers=ht({"Content-Type":"application/json"},n?.headers),l.body=JSON.stringify(i)):l.body=i,n?.duplex&&(l.duplex=n.duplex),ht(ht({},l),r))};async function Bo(a,n,r,i,l,c,f){return new Promise((m,y)=>{a(r,Sx(n,i,l,c)).then(b=>{if(!b.ok)throw b;if(i?.noResolveJson)return b;if(f==="vectors"){const v=b.headers.get("content-type");if(b.headers.get("content-length")==="0"||b.status===204)return{};if(!v||!v.includes("application/json"))return{}}return b.json()}).then(b=>m(b)).catch(b=>_x(b,y,i,f))})}function qy(a="storage"){return{get:async(n,r,i,l)=>Bo(n,"GET",r,i,l,void 0,a),post:async(n,r,i,l,c)=>Bo(n,"POST",r,l,c,i,a),put:async(n,r,i,l,c)=>Bo(n,"PUT",r,l,c,i,a),head:async(n,r,i,l)=>Bo(n,"HEAD",r,ht(ht({},i),{},{noResolveJson:!0}),l,void 0,a),remove:async(n,r,i,l,c)=>Bo(n,"DELETE",r,l,c,i,a)}}const kx=qy("storage"),{get:nc,post:hr,put:qh,head:jx,remove:im}=kx,Ba=qy("vectors");var ql=class{constructor(a,n={},r,i="storage"){this.shouldThrowOnError=!1,this.url=a,this.headers=n,this.fetch=px(r),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(a){var n=this;try{return{data:await a(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(sd(r))return{data:null,error:r};throw r}}},Nx=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n}then(a,n){return this.execute().then(a,n)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(sd(n))return{data:null,error:n};throw n}}};let Ly;Ly=Symbol.toStringTag;var Ax=class{constructor(a,n){this.downloadFn=a,this.shouldThrowOnError=n,this[Ly]="BlobDownloadBuilder",this.promise=null}asStream(){return new Nx(this.downloadFn,this.shouldThrowOnError)}then(a,n){return this.getPromise().then(a,n)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(sd(n))return{data:null,error:n};throw n}}};const Ex={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Cx=class extends ql{constructor(a,n={},r,i){super(a,n,i,"storage"),this.bucketId=r}async uploadOrUpdate(a,n,r,i){var l=this;return l.handleOperation(async()=>{let c;const f=ht(ht({},Lp),i);let m=ht(ht({},l.headers),a==="POST"&&{"x-upsert":String(f.upsert)});const y=f.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),y&&c.append("metadata",l.encodeMetadata(y)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",f.cacheControl),y&&!c.has("metadata")&&c.append("metadata",l.encodeMetadata(y))):(c=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,y&&(m["x-metadata"]=l.toBase64(l.encodeMetadata(y))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!f.duplex&&(f.duplex="half")),i?.headers&&(m=ht(ht({},m),i.headers));const b=l._removeEmptyFolders(n),v=l._getFinalPath(b),w=await(a=="PUT"?qh:hr)(l.fetch,`${l.url}/object/${v}`,c,ht({headers:m},f?.duplex?{duplex:f.duplex}:{}));return{path:b,id:w.Id,fullPath:w.Key}})}async upload(a,n,r){return this.uploadOrUpdate("POST",a,n,r)}async uploadToSignedUrl(a,n,r,i){var l=this;const c=l._removeEmptyFolders(a),f=l._getFinalPath(c),m=new URL(l.url+`/object/upload/sign/${f}`);return m.searchParams.set("token",n),l.handleOperation(async()=>{let y;const b=ht({upsert:Lp.upsert},i),v=ht(ht({},l.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&r instanceof Blob?(y=new FormData,y.append("cacheControl",b.cacheControl),y.append("",r)):typeof FormData<"u"&&r instanceof FormData?(y=r,y.append("cacheControl",b.cacheControl)):(y=r,v["cache-control"]=`max-age=${b.cacheControl}`,v["content-type"]=b.contentType),{path:c,fullPath:(await qh(l.fetch,m.toString(),y,{headers:v})).Key}})}async createSignedUploadUrl(a,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(a);const l=ht({},r.headers);n?.upsert&&(l["x-upsert"]="true");const c=await hr(r.fetch,`${r.url}/object/upload/sign/${i}`,{},{headers:l}),f=new URL(r.url+c.url),m=f.searchParams.get("token");if(!m)throw new rd("No token returned by API");return{signedUrl:f.toString(),path:a,token:m}})}async update(a,n,r){return this.uploadOrUpdate("PUT",a,n,r)}async move(a,n,r){var i=this;return i.handleOperation(async()=>await hr(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:a,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:i.headers}))}async copy(a,n,r){var i=this;return i.handleOperation(async()=>({path:(await hr(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:a,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(a,n,r){var i=this;return i.handleOperation(async()=>{let l=i._getFinalPath(a),c=await hr(i.fetch,`${i.url}/object/sign/${l}`,ht({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:i.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${i.url}${c.signedURL}${f}`)}})}async createSignedUrls(a,n,r){var i=this;return i.handleOperation(async()=>{const l=await hr(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:n,paths:a},{headers:i.headers}),c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l.map(f=>ht(ht({},f),{},{signedUrl:f.signedURL?encodeURI(`${i.url}${f.signedURL}${c}`):null}))})}download(a,n,r){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),c=l?`?${l}`:"",f=this._getFinalPath(a),m=()=>nc(this.fetch,`${this.url}/${i}/${f}${c}`,{headers:this.headers,noResolveJson:!0},r);return new Ax(m,this.shouldThrowOnError)}async info(a){var n=this;const r=n._getFinalPath(a);return n.handleOperation(async()=>zh(await nc(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(a){var n=this;const r=n._getFinalPath(a);try{return await jx(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(sd(i)&&i instanceof zy){const l=i.originalError;if([400,404].includes(l?.status))return{data:!1,error:i}}throw i}}getPublicUrl(a,n){const r=this._getFinalPath(a),i=[],l=n?.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&i.push(l);const c=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&i.push(f);let m=i.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${m}`)}}}async remove(a){var n=this;return n.handleOperation(async()=>await im(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:a},{headers:n.headers}))}async list(a,n,r){var i=this;return i.handleOperation(async()=>{const l=ht(ht(ht({},Ex),n),{},{prefix:a||""});return await hr(i.fetch,`${i.url}/object/list/${i.bucketId}`,l,{headers:i.headers},r)})}async listV2(a,n){var r=this;return r.handleOperation(async()=>{const i=ht({},a);return await hr(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,i,{headers:r.headers},n)})}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const n=[];return a.width&&n.push(`width=${a.width}`),a.height&&n.push(`height=${a.height}`),a.resize&&n.push(`resize=${a.resize}`),a.format&&n.push(`format=${a.format}`),a.quality&&n.push(`quality=${a.quality}`),n.join("&")}};const Tx="2.95.3",cc={"X-Client-Info":`storage-js/${Tx}`};var Ox=class extends ql{constructor(a,n={},r,i){const l=new URL(a);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const c=l.href.replace(/\/$/,""),f=ht(ht({},cc),n);super(c,f,r,"storage")}async listBuckets(a){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(a);return await nc(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(a){var n=this;return n.handleOperation(async()=>await nc(n.fetch,`${n.url}/bucket/${a}`,{headers:n.headers}))}async createBucket(a,n={public:!1}){var r=this;return r.handleOperation(async()=>await hr(r.fetch,`${r.url}/bucket`,{id:a,name:a,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(a,n){var r=this;return r.handleOperation(async()=>await qh(r.fetch,`${r.url}/bucket/${a}`,{id:a,name:a,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(a){var n=this;return n.handleOperation(async()=>await hr(n.fetch,`${n.url}/bucket/${a}/empty`,{},{headers:n.headers}))}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await im(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(a){const n={};return a&&("limit"in a&&(n.limit=String(a.limit)),"offset"in a&&(n.offset=String(a.offset)),a.search&&(n.search=a.search),a.sortColumn&&(n.sortColumn=a.sortColumn),a.sortOrder&&(n.sortOrder=a.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Rx=class extends ql{constructor(a,n={},r){const i=a.replace(/\/$/,""),l=ht(ht({},cc),n);super(i,l,r,"storage")}async createBucket(a){var n=this;return n.handleOperation(async()=>await hr(n.fetch,`${n.url}/bucket`,{name:a},{headers:n.headers}))}async listBuckets(a){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;a?.limit!==void 0&&r.set("limit",a.limit.toString()),a?.offset!==void 0&&r.set("offset",a.offset.toString()),a?.sortColumn&&r.set("sortColumn",a.sortColumn),a?.sortOrder&&r.set("sortOrder",a.sortOrder),a?.search&&r.set("search",a.search);const i=r.toString(),l=i?`${n.url}/bucket?${i}`:`${n.url}/bucket`;return await nc(n.fetch,l,{headers:n.headers})})}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await im(n.fetch,`${n.url}/bucket/${a}`,{},{headers:n.headers}))}from(a){var n=this;if(!vx(a))throw new rd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new gx({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(r,{get(l,c){const f=l[c];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(l,m),error:null}}catch(y){if(i)throw y;return{data:null,error:y}}}}})}},Ux=class extends ql{constructor(a,n={},r){const i=a.replace(/\/$/,""),l=ht(ht({},cc),{},{"Content-Type":"application/json"},n);super(i,l,r,"vectors")}async createIndex(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/CreateIndex`,a,{headers:n.headers})||{})}async getIndex(a,n){var r=this;return r.handleOperation(async()=>await Ba.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:a,indexName:n},{headers:r.headers}))}async listIndexes(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/ListIndexes`,a,{headers:n.headers}))}async deleteIndex(a,n){var r=this;return r.handleOperation(async()=>await Ba.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:a,indexName:n},{headers:r.headers})||{})}},Dx=class extends ql{constructor(a,n={},r){const i=a.replace(/\/$/,""),l=ht(ht({},cc),{},{"Content-Type":"application/json"},n);super(i,l,r,"vectors")}async putVectors(a){var n=this;if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/PutVectors`,a,{headers:n.headers})||{})}async getVectors(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/GetVectors`,a,{headers:n.headers}))}async listVectors(a){var n=this;if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/ListVectors`,a,{headers:n.headers}))}async queryVectors(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/QueryVectors`,a,{headers:n.headers}))}async deleteVectors(a){var n=this;if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/DeleteVectors`,a,{headers:n.headers})||{})}},Mx=class extends ql{constructor(a,n={},r){const i=a.replace(/\/$/,""),l=ht(ht({},cc),{},{"Content-Type":"application/json"},n);super(i,l,r,"vectors")}async createBucket(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{})}async getBucket(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:a},{headers:n.headers}))}async listBuckets(a={}){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/ListVectorBuckets`,a,{headers:n.headers}))}async deleteBucket(a){var n=this;return n.handleOperation(async()=>await Ba.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:n.headers})||{})}},zx=class extends Mx{constructor(a,n={}){super(a,n.headers||{},n.fetch)}from(a){return new qx(this.url,this.headers,a,this.fetch)}async createBucket(a){var n=()=>super.createBucket,r=this;return n().call(r,a)}async getBucket(a){var n=()=>super.getBucket,r=this;return n().call(r,a)}async listBuckets(a={}){var n=()=>super.listBuckets,r=this;return n().call(r,a)}async deleteBucket(a){var n=()=>super.deleteBucket,r=this;return n().call(r,a)}},qx=class extends Ux{constructor(a,n,r,i){super(a,n,i),this.vectorBucketName=r}async createIndex(a){var n=()=>super.createIndex,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(a={}){var n=()=>super.listIndexes,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(a){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,a)}async deleteIndex(a){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,a)}index(a){return new Lx(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},Lx=class extends Dx{constructor(a,n,r,i,l){super(a,n,l),this.vectorBucketName=r,this.indexName=i}async putVectors(a){var n=()=>super.putVectors,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(a){var n=()=>super.getVectors,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(a={}){var n=()=>super.listVectors,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(a){var n=()=>super.queryVectors,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(a){var n=()=>super.deleteVectors,r=this;return n().call(r,ht(ht({},a),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Ix=class extends Ox{constructor(a,n={},r,i){super(a,n,r,i)}from(a){return new Cx(this.url,this.headers,a,this.fetch)}get vectors(){return new zx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Rx(this.url+"/iceberg",this.headers,this.fetch)}};const Iy="2.95.3",Tl=30*1e3,Lh=3,hh=Lh*Tl,Bx="http://localhost:9999",Px="supabase.auth.token",Hx={"X-Client-Info":`gotrue-js/${Iy}`},Ih="X-Supabase-Api-Version",By={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$x=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kx=600*1e3;class ac extends Error{constructor(n,r,i){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function it(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class Vx extends ac{constructor(n,r,i){super(n,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function Fx(a){return it(a)&&a.name==="AuthApiError"}class Ni extends ac{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class ls extends ac{constructor(n,r,i,l){super(n,i,l),this.name=r,this.status=i}}class Ia extends ls{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mh(a){return it(a)&&a.name==="AuthSessionMissingError"}class _l extends ls{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Eu extends ls{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Cu extends ls{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gx(a){return it(a)&&a.name==="AuthImplicitGrantRedirectError"}class Ip extends ls{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yx extends ls{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Bh extends ls{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function gh(a){return it(a)&&a.name==="AuthRetryableFetchError"}class Bp extends ls{constructor(n,r,i){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class Ph extends ls{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pp=` 	
\r=`.split(""),Qx=(()=>{const a=new Array(128);for(let n=0;n<a.length;n+=1)a[n]=-1;for(let n=0;n<Pp.length;n+=1)a[Pp[n].charCodeAt(0)]=-2;for(let n=0;n<Bu.length;n+=1)a[Bu[n].charCodeAt(0)]=n;return a})();function Hp(a,n,r){if(a!==null)for(n.queue=n.queue<<8|a,n.queuedBits+=8;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(Bu[i]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const i=n.queue>>n.queuedBits-6&63;r(Bu[i]),n.queuedBits-=6}}function Py(a,n,r){const i=Qx[a];if(i>-1)for(n.queue=n.queue<<6|i,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function $p(a){const n=[],r=f=>{n.push(String.fromCodePoint(f))},i={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=f=>{Wx(f,i,r)};for(let f=0;f<a.length;f+=1)Py(a.charCodeAt(f),l,c);return n.join("")}function Xx(a,n){if(a<=127){n(a);return}else if(a<=2047){n(192|a>>6),n(128|a&63);return}else if(a<=65535){n(224|a>>12),n(128|a>>6&63),n(128|a&63);return}else if(a<=1114111){n(240|a>>18),n(128|a>>12&63),n(128|a>>6&63),n(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function Jx(a,n){for(let r=0;r<a.length;r+=1){let i=a.charCodeAt(r);if(i>55295&&i<=56319){const l=(i-55296)*1024&65535;i=(a.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}Xx(i,n)}}function Wx(a,n,r){if(n.utf8seq===0){if(a<=127){r(a);return}for(let i=1;i<6;i+=1)if((a>>7-i&1)===0){n.utf8seq=i;break}if(n.utf8seq===2)n.codepoint=a&31;else if(n.utf8seq===3)n.codepoint=a&15;else if(n.utf8seq===4)n.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|a&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Dl(a){const n=[],r={queue:0,queuedBits:0},i=l=>{n.push(l)};for(let l=0;l<a.length;l+=1)Py(a.charCodeAt(l),r,i);return new Uint8Array(n)}function Zx(a){const n=[];return Jx(a,r=>n.push(r)),new Uint8Array(n)}function Ai(a){const n=[],r={queue:0,queuedBits:0},i=l=>{n.push(l)};return a.forEach(l=>Hp(l,r,i)),Hp(null,r,i),n.join("")}function e1(a){return Math.round(Date.now()/1e3)+a}function t1(){return Symbol("auth-callback")}const aa=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},Hy=()=>{if(!aa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function n1(a){const n={},r=new URL(a);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return r.searchParams.forEach((i,l)=>{n[l]=i}),n}const $y=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),a1=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Ol=async(a,n,r)=>{await a.setItem(n,JSON.stringify(r))},wi=async(a,n)=>{const r=await a.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ta=async(a,n)=>{await a.removeItem(n)};class id{constructor(){this.promise=new id.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}id.promiseConstructor=Promise;function Tu(a){const n=a.split(".");if(n.length!==3)throw new Ph("Invalid JWT structure");for(let i=0;i<n.length;i++)if(!$x.test(n[i]))throw new Ph("JWT not in base64url format");return{header:JSON.parse($p(n[0])),payload:JSON.parse($p(n[1])),signature:Dl(n[2]),raw:{header:n[0],payload:n[1]}}}async function r1(a){return await new Promise(n=>{setTimeout(()=>n(null),a)})}function s1(a,n){return new Promise((i,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const f=await a(c);if(!n(c,null,f)){i(f);return}}catch(f){if(!n(c,f)){l(f);return}}})()})}function i1(a){return("0"+a.toString(16)).substr(-2)}function l1(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*i));return l}return crypto.getRandomValues(n),Array.from(n,i1).join("")}async function o1(a){const r=new TextEncoder().encode(a),i=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(i);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function c1(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const r=await o1(a);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sl(a,n,r=!1){const i=l1();let l=i;r&&(l+="/PASSWORD_RECOVERY"),await Ol(a,`${n}-code-verifier`,l);const c=await c1(i);return[c,i===c?"plain":"s256"]}const u1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function d1(a){const n=a.headers.get(Ih);if(!n||!n.match(u1))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function f1(a){if(!a)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(a<=n)throw new Error("JWT has expired")}function h1(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kl(a){if(!m1.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ph(){const a={};return new Proxy(a,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function g1(a,n){return new Proxy(a,{get:(r,i,l)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,l)}return!n.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,i,l)}})}function Kp(a){return JSON.parse(JSON.stringify(a))}const _i=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),p1=[502,503,504];async function Vp(a){var n;if(!a1(a))throw new Bh(_i(a),0);if(p1.includes(a.status))throw new Bh(_i(a),a.status);let r;try{r=await a.json()}catch(c){throw new Ni(_i(c),c)}let i;const l=d1(a);if(l&&l.getTime()>=By["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new Bp(_i(r),a.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(i==="session_not_found")throw new Ia}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,f)=>c&&typeof f=="string",!0))throw new Bp(_i(r),a.status,r.weak_password.reasons);throw new Vx(_i(r),a.status||500,i)}const y1=(a,n,r,i)=>{const l={method:a,headers:n?.headers||{}};return a==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),l.body=JSON.stringify(i),Object.assign(Object.assign({},l),r))};async function ft(a,n,r,i){var l;const c=Object.assign({},i?.headers);c[Ih]||(c[Ih]=By["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const f=(l=i?.query)!==null&&l!==void 0?l:{};i?.redirectTo&&(f.redirect_to=i.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",y=await v1(a,n,r+m,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(y):{data:Object.assign({},y),error:null}}async function v1(a,n,r,i,l,c){const f=y1(n,i,l,c);let m;try{m=await a(r,Object.assign({},f))}catch(y){throw console.error(y),new Bh(_i(y),0)}if(m.ok||await Vp(m),i?.noResolveJson)return m;try{return await m.json()}catch(y){await Vp(y)}}function dr(a){var n;let r=null;x1(a)&&(r=Object.assign({},a),a.expires_at||(r.expires_at=e1(a.expires_in)));const i=(n=a.user)!==null&&n!==void 0?n:a;return{data:{session:r,user:i},error:null}}function Fp(a){const n=dr(a);return!n.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(n.data.weak_password=a.weak_password),n}function Vs(a){var n;return{data:{user:(n=a.user)!==null&&n!==void 0?n:a},error:null}}function b1(a){return{data:a,error:null}}function w1(a){const{action_link:n,email_otp:r,hashed_token:i,redirect_to:l,verification_type:c}=a,f=ad(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:n,email_otp:r,hashed_token:i,redirect_to:l,verification_type:c},y=Object.assign({},f);return{data:{properties:m,user:y},error:null}}function Gp(a){return a}function x1(a){return a.access_token&&a.refresh_token&&a.expires_in}const yh=["global","local","others"];class _1{constructor({url:n="",headers:r={},fetch:i}){this.url=n,this.headers=r,this.fetch=$y(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=yh[0]){if(yh.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yh.join(", ")}`);try{return await ft(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(i){if(it(i))return{data:null,error:i};throw i}}async inviteUserByEmail(n,r={}){try{return await ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vs})}catch(i){if(it(i))return{data:{user:null},error:i};throw i}}async generateLink(n){try{const{options:r}=n,i=ad(n,["options"]),l=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(l.new_email=i?.newEmail,delete l.newEmail),await ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:w1,redirectTo:r?.redirectTo})}catch(r){if(it(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await ft(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Vs})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,i,l,c,f,m,y;try{const b={nextPage:null,lastPage:0,total:0},v=await ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Gp});if(v.error)throw v.error;const w=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(y=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&y!==void 0?y:[];return k.length>0&&(k.forEach(E=>{const R=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(E.split(";")[1].split("=")[1]);b[`${H}Page`]=R}),b.total=parseInt(_)),{data:Object.assign(Object.assign({},w),b),error:null}}catch(b){if(it(b))return{data:{users:[]},error:b};throw b}}async getUserById(n){kl(n);try{return await ft(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Vs})}catch(r){if(it(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){kl(n);try{return await ft(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Vs})}catch(i){if(it(i))return{data:{user:null},error:i};throw i}}async deleteUser(n,r=!1){kl(n);try{return await ft(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vs})}catch(i){if(it(i))return{data:{user:null},error:i};throw i}}async _listFactors(n){kl(n.userId);try{const{data:r,error:i}=await ft(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:i}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _deleteFactor(n){kl(n.userId),kl(n.id);try{return{data:await ft(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,i,l,c,f,m,y;try{const b={nextPage:null,lastPage:0,total:0},v=await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(c=(l=n?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:Gp});if(v.error)throw v.error;const w=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,k=(y=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&y!==void 0?y:[];return k.length>0&&(k.forEach(E=>{const R=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(E.split(";")[1].split("=")[1]);b[`${H}Page`]=R}),b.total=parseInt(_)),{data:Object.assign(Object.assign({},w),b),error:null}}catch(b){if(it(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(n){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await ft(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await ft(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(it(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(n){try{return await ft(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await ft(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(it(r))return{data:null,error:r};throw r}}}function Yp(a={}){return{getItem:n=>a[n]||null,setItem:(n,r)=>{a[n]=r},removeItem:n=>{delete a[n]}}}const jl={debug:!!(globalThis&&Hy()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ky extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class S1 extends Ky{}async function k1(a,n,r){jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,n);const i=new globalThis.AbortController;return n>0&&setTimeout(()=>{i.abort(),jl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async l=>{if(l){jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,l.name);try{return await r()}finally{jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,l.name)}}else{if(n===0)throw jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new S1(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(jl.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function j1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Vy(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function N1(a){return parseInt(a,16)}function A1(a){const n=new TextEncoder().encode(a);return"0x"+Array.from(n,i=>i.toString(16).padStart(2,"0")).join("")}function E1(a){var n;const{chainId:r,domain:i,expirationTime:l,issuedAt:c=new Date,nonce:f,notBefore:m,requestId:y,resources:b,scheme:v,uri:w,version:_}=a;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((n=a.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const k=Vy(a.address),E=v?`${v}://${i}`:i,R=a.statement?`${a.statement}
`:"",H=`${E} wants you to sign in with your Ethereum account:
${k}

${R}`;let q=`URI: ${w}
Version: ${_}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${c.toISOString()}`;if(l&&(q+=`
Expiration Time: ${l.toISOString()}`),m&&(q+=`
Not Before: ${m.toISOString()}`),y&&(q+=`
Request ID: ${y}`),b){let W=`
Resources:`;for(const L of b){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);W+=`
- ${L}`}q+=W}return`${H}
${q}`}class qn extends Error{constructor({message:n,code:r,cause:i,name:l}){var c;super(n,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=l??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class Pu extends qn{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function C1({error:a,options:n}){var r,i,l;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new qn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new qn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(n.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new qn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new qn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new qn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new qn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return c.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new qn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new qn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const f=window.location.hostname;if(Fy(f)){if(c.rp.id!==f)return new qn({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new qn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new qn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new qn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new qn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function T1({error:a,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(n.signal instanceof AbortSignal)return new qn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new qn({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const i=window.location.hostname;if(Fy(i)){if(r.rpId!==i)return new qn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new qn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new qn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new qn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class O1{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const R1=new O1;function U1(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:n,user:r,excludeCredentials:i}=a,l=ad(a,["challenge","user","excludeCredentials"]),c=Dl(n).buffer,f=Object.assign(Object.assign({},r),{id:Dl(r.id).buffer}),m=Object.assign(Object.assign({},l),{challenge:c,user:f});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let y=0;y<i.length;y++){const b=i[y];m.excludeCredentials[y]=Object.assign(Object.assign({},b),{id:Dl(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return m}function D1(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:n,allowCredentials:r}=a,i=ad(a,["challenge","allowCredentials"]),l=Dl(n).buffer,c=Object.assign(Object.assign({},i),{challenge:l});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const m=r[f];c.allowCredentials[f]=Object.assign(Object.assign({},m),{id:Dl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return c}function M1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a;return{id:a.id,rawId:a.id,response:{attestationObject:Ai(new Uint8Array(a.response.attestationObject)),clientDataJSON:Ai(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function z1(a){var n;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const r=a,i=a.getClientExtensionResults(),l=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:Ai(new Uint8Array(l.authenticatorData)),clientDataJSON:Ai(new Uint8Array(l.clientDataJSON)),signature:Ai(new Uint8Array(l.signature)),userHandle:l.userHandle?Ai(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Fy(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function Qp(){var a,n;return!!(aa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function q1(a){try{const n=await navigator.credentials.create(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Pu("Browser returned unexpected credential type",n)}:{data:null,error:new Pu("Empty credential response",n)}}catch(n){return{data:null,error:C1({error:n,options:a})}}}async function L1(a){try{const n=await navigator.credentials.get(a);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Pu("Browser returned unexpected credential type",n)}:{data:null,error:new Pu("Empty credential response",n)}}catch(n){return{data:null,error:T1({error:n,options:a})}}}const I1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},B1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hu(...a){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),i={};for(const l of a)if(l)for(const c in l){const f=l[c];if(f!==void 0)if(Array.isArray(f))i[c]=f;else if(r(f))i[c]=f;else if(n(f)){const m=i[c];n(m)?i[c]=Hu(m,f):i[c]=Hu(f)}else i[c]=f}return i}function P1(a,n){return Hu(I1,a,n||{})}function H1(a,n){return Hu(B1,a,n||{})}class $1{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:i,signal:l},c){var f;try{const{data:m,error:y}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!m)return{data:null,error:y};const b=l??R1.createNewAbortSignal();if(m.webauthn.type==="create"){const{user:v}=m.webauthn.credential_options.publicKey;if(!v.name){const w=i;if(w)v.name=`${v.id}:${w}`;else{const k=(await this.client.getUser()).data.user,E=((f=k?.user_metadata)===null||f===void 0?void 0:f.name)||k?.email||k?.id||"User";v.name=`${v.id}:${E}`}}v.displayName||(v.displayName=v.name)}switch(m.webauthn.type){case"create":{const v=P1(m.webauthn.credential_options.publicKey,c?.create),{data:w,error:_}=await q1({publicKey:v,signal:b});return w?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}case"request":{const v=H1(m.webauthn.credential_options.publicKey,c?.request),{data:w,error:_}=await L1(Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:v,signal:b}));return w?{data:{factorId:n,challengeId:m.id,webauthn:{type:m.webauthn.type,credential_response:w}},error:null}:{data:null,error:_}}}}catch(m){return it(m)?{data:null,error:m}:{data:null,error:new Ni("Unexpected error in challenge",m)}}}async _verify({challengeId:n,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:i})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new ac("rpId is required for WebAuthn authentication")};try{if(!Qp())return{data:null,error:new Ni("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:i},signal:l},{request:c});if(!f)return{data:null,error:m};const{webauthn:y}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:i,credential_response:y.credential_response}})}catch(f){return it(f)?{data:null,error:f}:{data:null,error:new Ni("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new ac("rpId is required for WebAuthn registration")};try{if(!Qp())return{data:null,error:new Ni("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===n&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:m};const{data:y,error:b}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:l},{create:c});return y?this._verify({factorId:f.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:i,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:b}}catch(f){return it(f)?{data:null,error:f}:{data:null,error:new Ni("Unexpected error in register",f)}}}}j1();const K1={url:Bx,storageKey:Px,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Xp(a,n,r){return await r()}const Nl={};class rc{get jwks(){var n,r;return(r=(n=Nl[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Nl[this.storageKey]=Object.assign(Object.assign({},Nl[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Nl[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Nl[this.storageKey]=Object.assign(Object.assign({},Nl[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},K1),n);if(this.storageKey=c.storageKey,this.instanceID=(r=rc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,rc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&aa()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new _1({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=$y(c.fetch),this.lock=c.lock||Xp,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&aa()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=k1:this.lock=Xp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Hy()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yp(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=Yp(this.memoryStorage)),aa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f);try{await this._notifyAllSubscribers(f.data.event,f.data.session,!1)}catch(m){this._debug("#broadcastChannel","error",m)}})}this.initialize().catch(f=>{this._debug("#initialize()","error",f)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Iy}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(aa()&&(r=n1(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),aa()&&this.detectSessionInUrl&&i!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),Gx(c)){const y=(n=c.details)===null||n===void 0?void 0:n.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:f,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return it(r)?this._returnResult({error:r}):this._returnResult({error:new Ni("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,l;try{const c=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(l=n?.options)===null||l===void 0?void 0:l.captchaToken}},xform:dr}),{data:f,error:m}=c;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const y=f.session,b=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:b,session:y},error:null})}catch(c){if(it(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var r,i,l;try{let c;if("email"in n){const{email:v,password:w,options:_}=n;let k=null,E=null;this.flowType==="pkce"&&([k,E]=await Sl(this.storage,this.storageKey)),c=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:w,data:(r=_?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:k,code_challenge_method:E},xform:dr})}else if("phone"in n){const{phone:v,password:w,options:_}=n;c=await ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(l=_?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:dr})}else throw new Eu("You must provide either an email or phone number and a password");const{data:f,error:m}=c;if(m||!f)return await ta(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const y=f.session,b=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:b,session:y},error:null})}catch(c){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:f,options:m}=n;r=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Fp})}else if("phone"in n){const{phone:c,password:f,options:m}=n;r=await ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:f,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Fp})}else throw new Eu("You must provide either an email or phone number and a password");const{data:i,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!i||!i.session||!i.user){const c=new _l;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:l})}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,l,c,f,m,y,b,v,w,_;let k,E;if("message"in n)k=n.message,E=n.signature;else{const{chain:R,wallet:H,statement:q,options:W}=n;let L;if(aa())if(typeof H=="object")L=H;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")L=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!W?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=H}const z=new URL((r=W?.url)!==null&&r!==void 0?r:window.location.href),fe=await L.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!fe||fe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=Vy(fe[0]);let X=(i=W?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!X){const D=await L.request({method:"eth_chainId"});X=N1(D)}const O={domain:z.host,address:K,statement:q,uri:z.href,version:"1",chainId:X,nonce:(l=W?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(f=(c=W?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=W?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(y=W?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(b=W?.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(v=W?.signInWithEthereum)===null||v===void 0?void 0:v.resources};k=E1(O),E=await L.request({method:"personal_sign",params:[A1(k),K]})}try{const{data:R,error:H}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:E},!((w=n.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=n.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:dr});if(H)throw H;if(!R||!R.session||!R.user){const q=new _l;return this._returnResult({data:{user:null,session:null},error:q})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:H})}catch(R){if(it(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(n){var r,i,l,c,f,m,y,b,v,w,_,k;let E,R;if("message"in n)E=n.message,R=n.signature;else{const{chain:H,wallet:q,statement:W,options:L}=n;let z;if(aa())if(typeof q=="object")z=q;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))z=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=q}const fe=new URL((r=L?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in z&&z.signIn){const K=await z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:fe.host,uri:fe.href}),W?{statement:W}:null));let X;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")X=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)X=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)E=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),R=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in z)||typeof z.signMessage!="function"||!("publicKey"in z)||typeof z!="object"||!z.publicKey||!("toBase58"in z.publicKey)||typeof z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${fe.host} wants you to sign in with your Solana account:`,z.publicKey.toBase58(),...W?["",W,""]:[""],"Version: 1",`URI: ${fe.href}`,`Issued At: ${(l=(i=L?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=L?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((f=L?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((m=L?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((y=L?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((b=L?.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((w=(v=L?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...L.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const K=await z.signMessage(new TextEncoder().encode(E),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=K}}try{const{data:H,error:q}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Ai(R)},!((_=n.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:dr});if(q)throw q;if(!H||!H.session||!H.user){const W=new _l;return this._returnResult({data:{user:null,session:null},error:W})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:q})}catch(H){if(it(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async _exchangeCodeForSession(n){const r=await wi(this.storage,`${this.storageKey}-code-verifier`),[i,l]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Yx;const{data:c,error:f}=await ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:dr});if(await ta(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!c||!c.session||!c.user){const m=new _l;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:f})}catch(c){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:r,provider:i,token:l,access_token:c,nonce:f}=n,m=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:l,access_token:c,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:dr}),{data:y,error:b}=m;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!y||!y.session||!y.user){const v=new _l;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:y,error:b})}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,l,c,f;try{if("email"in n){const{email:m,options:y}=n;let b=null,v=null;this.flowType==="pkce"&&([b,v]=await Sl(this.storage,this.storageKey));const{error:w}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(r=y?.data)!==null&&r!==void 0?r:{},create_user:(i=y?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:b,code_challenge_method:v},redirectTo:y?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in n){const{phone:m,options:y}=n,{data:b,error:v}=await ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=y?.data)!==null&&l!==void 0?l:{},create_user:(c=y?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(f=y?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:v})}throw new Eu("You must provide either an email or phone number.")}catch(m){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(n){var r,i;try{let l,c;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(i=n.options)===null||i===void 0?void 0:i.captchaToken);const{data:f,error:m}=await ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:dr});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const y=f.session,b=f.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),this._returnResult({data:{user:b,session:y},error:null})}catch(l){if(it(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(n){var r,i,l,c,f;try{let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Sl(this.storage,this.storageKey));const b=await ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((l=n?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:y}),headers:this.headers,xform:b1});return!((c=b.data)===null||c===void 0)&&c.url&&aa()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(m){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Ia;const{error:l}=await ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(n){if(it(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:i,type:l,options:c}=n,{error:f}=await ft(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:i,type:l,options:c}=n,{data:f,error:m}=await ft(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new Eu("You must provide either an email or phone number and a type")}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await wi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const i=n.expires_at?n.expires_at*1e3-Date.now()<hh:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){const f=await wi(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=ph()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=g1(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Vs}):await this._useSession(async r=>{var i,l,c;const{data:f,error:m}=r;if(m)throw m;return!(!((i=f.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ia}:await ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:Vs})})}catch(r){if(it(r))return mh(r)&&(await this._removeSession(),await ta(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{const{data:l,error:c}=i;if(c)throw c;if(!l.session)throw new Ia;const f=l.session;let m=null,y=null;this.flowType==="pkce"&&n.email!=null&&([m,y]=await Sl(this.storage,this.storageKey));const{data:b,error:v}=await ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:m,code_challenge_method:y}),jwt:f.access_token,xform:Vs});if(v)throw v;return f.user=b.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(i){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ia;const r=Date.now()/1e3;let i=r,l=!0,c=null;const{payload:f}=Tu(n.access_token);if(f.exp&&(i=f.exp,l=i<=r),l){const{data:m,error:y}=await this._callRefreshToken(n.refresh_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!m)return{data:{user:null,session:null},error:null};c=m}else{const{data:m,error:y}=await this._getUser(n.access_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});c={access_token:n.access_token,refresh_token:n.refresh_token,user:m.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(it(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){const{data:f,error:m}=r;if(m)throw m;n=(i=f.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Ia;const{data:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(it(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!aa())throw new Cu("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Cu(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ip("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Ip("No code detected.");const{data:W,error:L}=await this._exchangeCodeForSession(n.code);if(L)throw L;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:W.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:l,access_token:c,refresh_token:f,expires_in:m,expires_at:y,token_type:b}=n;if(!c||!m||!f||!b)throw new Cu("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(m);let _=v+w;y&&(_=parseInt(y));const k=_-v;k*1e3<=Tl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${w}s`);const E=_-w;v-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,_,v):v-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,_,v);const{data:R,error:H}=await this._getUser(c);if(H)throw H;const q={provider_token:i,provider_refresh_token:l,access_token:c,expires_in:w,expires_at:_,refresh_token:f,token_type:b,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:n.type},error:null})}catch(i){if(it(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await wi(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c&&!mh(c))return this._returnResult({error:c});const f=(i=l.session)===null||i===void 0?void 0:i.access_token;if(f){const{error:m}=await this.admin.signOut(f,n);if(m&&!(Fx(m)&&(m.status===404||m.status===401||m.status===403)||mh(m)))return this._returnResult({error:m})}return n!=="others"&&(await this._removeSession(),await ta(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=t1(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,l;try{const{data:{session:c},error:f}=r;if(f)throw f;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let i=null,l=null;this.flowType==="pkce"&&([i,l]=await Sl(this.storage,this.storageKey,!0));try{return await ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:i,error:l}=await this._useSession(async c=>{var f,m,y,b,v;const{data:w,error:_}=c;if(_)throw _;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=n.options)===null||m===void 0?void 0:m.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await ft(this.fetch,"GET",k,{headers:this.headers,jwt:(v=(b=w.session)===null||b===void 0?void 0:b.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return aa()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(it(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{const{error:l,data:{session:c}}=r;if(l)throw l;const{options:f,provider:m,token:y,access_token:b,nonce:v}=n,w=await ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:y,access_token:b,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:dr}),{data:_,error:k}=w;return k?this._returnResult({data:{user:null,session:null},error:k}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new _l}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:k}))}catch(l){if(await ta(this.storage,`${this.storageKey}-code-verifier`),it(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,l;const{data:c,error:f}=r;if(f)throw f;return await ft(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await s1(async l=>(l>0&&await r1(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:dr})),(l,c)=>{const f=200*Math.pow(2,l);return c&&gh(c)&&Date.now()+f-i<Tl})}catch(i){if(this._debug(r,"error",i),it(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),aa()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const l=await wi(this.storage,this.storageKey);if(l&&this.userStorage){let f=await wi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:l.user},await Ol(this.userStorage,this.storageKey+"-user",f)),l.user=(n=f?.user)!==null&&n!==void 0?n:ph()}else if(l&&!l.user&&!l.user){const f=await wi(this.storage,this.storageKey+"-user");f&&f?.user?(l.user=f.user,await ta(this.storage,this.storageKey+"-user"),await Ol(this.storage,this.storageKey,l)):l.user=ph()}if(this._debug(i,"session from storage",l),!this._isValidSession(l)){this._debug(i,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<hh;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${hh}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:f}=await this._callRefreshToken(l.refresh_token);f&&(console.error(f),gh(f)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(l.access_token);!m&&f?.user?(l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(i,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(i,"error",l),console.error(l);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Ia;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new id;const{data:c,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!c.session)throw new Ia;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const m={data:c.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(c){if(this._debug(l,"error",c),it(c)){const f={data:null,error:c};return gh(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,i=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(n,r)}catch(y){c.push(y)}});if(await Promise.all(f),c.length>0){for(let m=0;m<c.length;m+=1)console.error(c[m]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await ta(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Ol(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=Kp(l);await Ol(this.storage,this.storageKey,c)}else{const l=Kp(r);await Ol(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ta(this.storage,this.storageKey),await ta(this.storage,this.storageKey+"-code-verifier"),await ta(this.storage,this.storageKey+"-user"),this.userStorage&&await ta(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&aa()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Tl);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((i.expires_at*1e3-n)/Tl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Tl}ms, refresh threshold is ${Lh} ticks`),l<=Lh&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ky)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!aa()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){const l=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&l.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,f]=await Sl(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(f)}`});l.push(m.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);l.push(c.toString())}return i?.skipBrowserRedirect&&l.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;return c?this._returnResult({data:null,error:c}):await ft(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,l;const{data:c,error:f}=r;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:y,error:b}=await ft(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return b?this._returnResult({data:null,error:b}):(n.factorType==="totp"&&y.type==="totp"&&(!((l=y?.totp)===null||l===void 0)&&l.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),this._returnResult({data:y,error:null}))})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?M1(n.webauthn.credential_response):z1(n.webauthn.credential_response)})}:{code:n.code}),{data:m,error:y}=await ft(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});return y?this._returnResult({data:null,error:y}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:y}))})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const f=await ft(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=l?.session)===null||i===void 0?void 0:i.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:U1(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:D1(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r?.factors)!==null&&n!==void 0?n:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,l,c;if(n)try{const{payload:k}=Tu(n);let E=null;k.aal&&(E=k.aal);let R=E;const{data:{user:H},error:q}=await this.getUser(n);if(q)return this._returnResult({data:null,error:q});((i=(r=H?.factors)===null||r===void 0?void 0:r.filter(z=>z.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(R="aal2");const L=k.amr||[];return{data:{currentLevel:E,nextLevel:R,currentAuthenticationMethods:L},error:null}}catch(k){if(it(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:f},error:m}=await this.getSession();if(m)return this._returnResult({data:null,error:m});if(!f)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:y}=Tu(f.access_token);let b=null;y.aal&&(b=y.aal);let v=b;((c=(l=f.user.factors)===null||l===void 0?void 0:l.filter(k=>k.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(v="aal2");const _=y.amr||[];return{data:{currentLevel:b,nextLevel:v,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:i},error:l}=r;return l?this._returnResult({data:null,error:l}):i?await ft(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Ia})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new Ia});const f=await ft(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&aa()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(i){if(it(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new Ia});const f=await ft(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&aa()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(i){if(it(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ft(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ia})})}catch(n){if(it(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:i},error:l}=r;return l?this._returnResult({data:null,error:l}):i?(await ft(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ia})})}catch(r){if(it(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(m=>m.kid===n);if(i)return i;const l=Date.now();if(i=this.jwks.keys.find(m=>m.kid===n),i&&this.jwks_cached_at+Kx>l)return i;const{data:c,error:f}=await ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,i=c.keys.find(m=>m.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){const{data:k,error:E}=await this.getSession();if(E||!k.session)return this._returnResult({data:null,error:E});i=k.session.access_token}const{header:l,payload:c,signature:f,raw:{header:m,payload:y}}=Tu(i);r?.allowExpired||f1(c.exp);const b=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!b){const{error:k}=await this.getUser(i);if(k)throw k;return{data:{claims:c,header:l,signature:f},error:null}}const v=h1(l.alg),w=await crypto.subtle.importKey("jwk",b,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,f,Zx(`${m}.${y}`)))throw new Ph("Invalid JWT signature");return{data:{claims:c,header:l,signature:f},error:null}}catch(i){if(it(i))return this._returnResult({data:null,error:i});throw i}}}rc.nextInstanceID={};const V1=rc,F1="2.95.3";let Fo="";typeof Deno<"u"?Fo="deno":typeof document<"u"?Fo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fo="react-native":Fo="node";const G1={"X-Client-Info":`supabase-js-${Fo}/${F1}`},Y1={headers:G1},Q1={schema:"public"},X1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},J1={};function sc(a){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sc(a)}function W1(a,n){if(sc(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var i=r.call(a,n);if(sc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}function Z1(a){var n=W1(a,"string");return sc(n)=="symbol"?n:n+""}function e_(a,n,r){return(n=Z1(n))in a?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a}function Jp(a,n){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);n&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,i)}return r}function An(a){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Jp(Object(r),!0).forEach(function(i){e_(a,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Jp(Object(r)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(r,i))})}return a}const t_=a=>a?(...n)=>a(...n):(...n)=>fetch(...n),n_=()=>Headers,a_=(a,n,r)=>{const i=t_(r),l=n_();return async(c,f)=>{var m;const y=(m=await n())!==null&&m!==void 0?m:a;let b=new l(f?.headers);return b.has("apikey")||b.set("apikey",a),b.has("Authorization")||b.set("Authorization",`Bearer ${y}`),i(c,An(An({},f),{},{headers:b}))}};function r_(a){return a.endsWith("/")?a:a+"/"}function s_(a,n){var r,i;const{db:l,auth:c,realtime:f,global:m}=a,{db:y,auth:b,realtime:v,global:w}=n,_={db:An(An({},y),l),auth:An(An({},b),c),realtime:An(An({},v),f),storage:{},global:An(An(An({},w),m),{},{headers:An(An({},(r=w?.headers)!==null&&r!==void 0?r:{}),(i=m?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return a.accessToken?_.accessToken=a.accessToken:delete _.accessToken,_}function i_(a){const n=a?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(r_(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var l_=class extends V1{constructor(a){super(a)}},o_=class{constructor(a,n,r){var i,l;this.supabaseUrl=a,this.supabaseKey=n;const c=i_(a);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const f=`sb-${c.hostname.split(".")[0]}-auth-token`,m={db:Q1,realtime:J1,auth:An(An({},X1),{},{storageKey:f}),global:Y1},y=s_(r??{},m);if(this.storageKey=(i=y.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken)this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=y.auth)!==null&&b!==void 0?b:{},this.headers,y.global.fetch)}this.fetch=a_(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(An({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new Fw(new URL("rest/v1",c).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch,timeout:y.db.timeout,urlLengthLimit:y.db.urlLengthLimit}),this.storage=new Ix(this.storageUrl.href,this.headers,this.fetch,r?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Lw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,n,r)}channel(a,n={config:{}}){return this.realtime.channel(a,n)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,n,r;if(a.accessToken)return await a.accessToken();const{data:i}=await a.auth.getSession();return(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:l,storageKey:c,flowType:f,lock:m,debug:y,throwOnError:b},v,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l_({url:this.authUrl.href,headers:An(An({},_),v),storageKey:c,autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:l,flowType:f,lock:m,debug:y,throwOnError:b,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new cx(this.realtimeUrl.href,An(An({},a),{},{params:An(An({},{apikey:this.supabaseKey}),a?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,n)=>{this._handleTokenChanged(a,"CLIENT",n?.access_token)})}_handleTokenChanged(a,n,r){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const c_=(a,n,r)=>new o_(a,n,r);function u_(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const n=a.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}u_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const d_="https://lskhxlmzfpvcollwflxq.supabase.co",f_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxza2h4bG16ZnB2Y29sbHdmbHhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA3ODM1MzQsImV4cCI6MjA4NjM1OTUzNH0.GOHTXs87TjjukqXh1NHC8T98Pgzyrqq9dDoPJ8_JB6I",Oe=c_(d_,f_,{realtime:{params:{eventsPerSecond:10}}}),h_="721c866ff0333b031f3703962619c0dba4bd",m_="https://ourdm.metered.live/api/v1/turn/credentials",g_=[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"},{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.services.mozilla.com:3478"},{urls:"stun:stun.voipbuster.com:3478"},{urls:"stun:stun.sipgate.net:3478"},{urls:"stun:stun.voxgratia.org:3478"},{urls:"stun:stun.ekiga.net:3478"},{urls:"stun:stun.ideasip.com:3478"},{urls:"stun:stun.schlund.de:3478"},{urls:"stun:stun.voipgate.com:3478"},{urls:"stun:stun.1und1.de:3478"},{urls:"stun:stun.gmx.net:3478"},{urls:"stun:stun.netappel.com:3478"},{urls:"stun:stun.rynga.com:3478"},{urls:"stun:stun.nonoh.net:3478"},{urls:"stun:stun.webcalldirect.com:3478"}],p_=[{urls:"turn:openrelay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:openrelay.metered.ca:443?transport=tcp",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:a.relay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:a.relay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:b.relay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:b.relay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:c.relay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:c.relay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:d.relay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:d.relay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:e.relay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:e.relay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:global.relay.metered.ca:80",username:"openrelayproject",credential:"openrelayproject"},{urls:"turn:global.relay.metered.ca:443",username:"openrelayproject",credential:"openrelayproject"}];async function y_(){try{const a=await fetch(`${m_}?apiKey=${h_}`);if(a.ok){const n=await a.json();return console.log(" Metered TURN servers fetched successfully:",n.length,"servers"),n}console.warn(" Metered API returned non-OK status, using static fallback")}catch(a){console.error(" Failed to fetch Metered TURN servers:",a)}return p_}const v_={voice_calls_enabled:!0,video_calls_enabled:!0,stun_enabled:!0,turn_enabled:!0,stories_enabled:!0,max_file_size_mb:25,max_message_length:5e3,max_friends:500,disappearing_messages_hours:0,registration_enabled:!0,maintenance_mode:!1,calls_enabled:!0},b_={theme:"light",appLockPin:null,lockedChats:[],hiddenChats:[],pinnedChats:[],mutedChats:[],archivedChats:[],adminSettings:v_,chatWallpapers:{},notificationSettings:{enabled:!0,sound:!0,vibrate:!0,preview:!0,groupEnabled:!0,callEnabled:!0},privacySettings:{lastSeen:"everyone",profilePhoto:"everyone",onlineStatus:"everyone",stories:"everyone",readReceipts:!0,typingIndicator:!0},storageSettings:{autoDownloadPhotos:"wifi",autoDownloadVideos:"never",autoDownloadDocs:"never",uploadQuality:"standard"},accessibilitySettings:{fontSize:100,hapticFeedback:!0,reduceMotion:!1,highContrast:!1}},Wp={...b_,user:null,profile:null,isAdmin:!1,isAuthenticated:!1,activeTab:"chats",chats:[],activeChat:null,messages:{},typingUsers:{},friends:[],friendRequests:[],blockedUsers:[],stories:[],myStories:[],callLogs:[],activeCall:null,isAppLocked:!1,showHiddenChats:!1,allUsers:[],broadcasts:[],showInstallPrompt:!1,isOnline:!0,isSyncing:!1},rr=Ow()(Dw((a,n)=>({...Wp,setUser:r=>a({user:r}),setProfile:r=>a({profile:r}),setIsAdmin:r=>a({isAdmin:r}),setIsAuthenticated:r=>a({isAuthenticated:r}),setActiveTab:r=>a({activeTab:r}),setChats:r=>a({chats:r}),setActiveChat:r=>a({activeChat:r}),addMessage:(r,i)=>a(l=>{const c=l.messages[r]||[];if(c.some(y=>y.id===i.id))return l;const f=[...c,i].sort((y,b)=>new Date(y.created_at).getTime()-new Date(b.created_at).getTime()),m=l.chats.map(y=>y.id===r?{...y,last_message:i}:y);return{messages:{...l.messages,[r]:f},chats:m}}),updateMessage:(r,i,l)=>a(c=>({messages:{...c.messages,[r]:(c.messages[r]||[]).map(f=>f.id===i?{...f,...l}:f)}})),deleteMessage:(r,i,l=!1)=>a(c=>l?{messages:{...c.messages,[r]:(c.messages[r]||[]).map(f=>f.id===i?{...f,is_deleted:!0,deleted_for_everyone:!0,content:"",file_url:void 0}:f)}}:{messages:{...c.messages,[r]:(c.messages[r]||[]).filter(f=>f.id!==i)}}),setMessages:(r,i)=>a(l=>({messages:{...l.messages,[r]:i}})),setTypingUser:(r,i)=>a(l=>({typingUsers:{...l.typingUsers,[r]:i}})),clearUnreadCount:r=>a(i=>({chats:i.chats.map(l=>l.id===r?{...l,unread_count:0}:l)})),incrementUnreadCount:r=>a(i=>({chats:i.chats.map(l=>l.id===r?{...l,unread_count:(l.unread_count||0)+1}:l)})),setFriends:r=>a({friends:r}),addFriend:r=>a(i=>({friends:[...i.friends,r]})),removeFriend:r=>a(i=>({friends:i.friends.filter(l=>l.id!==r)})),setFriendRequests:r=>a({friendRequests:r}),addFriendRequest:r=>a(i=>({friendRequests:[...i.friendRequests,r]})),updateFriendRequest:(r,i)=>a(l=>({friendRequests:l.friendRequests.map(c=>c.id===r?{...c,status:i}:c).filter(c=>c.status==="pending")})),setBlockedUsers:r=>a({blockedUsers:r}),blockUser:r=>a(i=>({blockedUsers:[...i.blockedUsers,r],friends:i.friends.filter(l=>l.id!==r)})),unblockUser:r=>a(i=>({blockedUsers:i.blockedUsers.filter(l=>l!==r)})),setStories:r=>a({stories:r}),addStory:r=>a(i=>({stories:[r,...i.stories],myStories:r.user_id===i.profile?.id?[r,...i.myStories]:i.myStories})),deleteStory:r=>a(i=>({stories:i.stories.filter(l=>l.id!==r),myStories:i.myStories.filter(l=>l.id!==r)})),setMyStories:r=>a({myStories:r}),setCallLogs:r=>a({callLogs:r}),addCallLog:r=>a(i=>({callLogs:[r,...i.callLogs]})),setActiveCall:r=>a({activeCall:r}),setIsAppLocked:r=>a({isAppLocked:r}),setAppLockPin:r=>a({appLockPin:r}),toggleChatLock:r=>a(i=>({lockedChats:i.lockedChats.includes(r)?i.lockedChats.filter(l=>l!==r):[...i.lockedChats,r]})),toggleChatHide:r=>a(i=>({hiddenChats:i.hiddenChats.includes(r)?i.hiddenChats.filter(l=>l!==r):[...i.hiddenChats,r]})),toggleChatPin:r=>a(i=>({pinnedChats:i.pinnedChats.includes(r)?i.pinnedChats.filter(l=>l!==r):[...i.pinnedChats,r]})),toggleChatMute:r=>a(i=>({mutedChats:i.mutedChats.includes(r)?i.mutedChats.filter(l=>l!==r):[...i.mutedChats,r]})),toggleChatArchive:r=>a(i=>({archivedChats:i.archivedChats.includes(r)?i.archivedChats.filter(l=>l!==r):[...i.archivedChats,r]})),setShowHiddenChats:r=>a({showHiddenChats:r}),setChatWallpaper:(r,i)=>a(l=>{const c={...l.chatWallpapers};return i?c[r]=i:delete c[r],{chatWallpapers:c}}),setAdminSettings:r=>a(i=>({adminSettings:{...i.adminSettings,...r}})),setAllUsers:r=>a({allUsers:r}),updateUser:(r,i)=>a(l=>({allUsers:l.allUsers.map(c=>c.id===r?{...c,...i}:c),friends:l.friends.map(c=>c.id===r?{...c,...i}:c)})),setBroadcasts:r=>a({broadcasts:r}),addBroadcast:r=>a(i=>({broadcasts:[r,...i.broadcasts]})),markBroadcastRead:r=>a(i=>({broadcasts:i.broadcasts.map(l=>l.id===r&&i.profile?{...l,read_by:[...l.read_by,i.profile.id]}:l)})),setTheme:r=>{document.documentElement.classList.toggle("dark",r==="dark"),a({theme:r})},setShowInstallPrompt:r=>a({showInstallPrompt:r}),setIsOnline:r=>a({isOnline:r}),setIsSyncing:r=>a({isSyncing:r}),setNotificationSettings:r=>a(i=>({notificationSettings:{...i.notificationSettings,...r}})),setPrivacySettings:r=>a(i=>({privacySettings:{...i.privacySettings,...r}})),setStorageSettings:r=>a(i=>({storageSettings:{...i.storageSettings,...r}})),setAccessibilitySettings:r=>a(i=>({accessibilitySettings:{...i.accessibilitySettings,...r}})),logout:async()=>{try{await Oe.auth.signOut()}catch(r){console.error("Logout error:",r)}a({...Wp,theme:n().theme,adminSettings:n().adminSettings,notificationSettings:n().notificationSettings})}}),{name:"ourdm-storage-v2",partialize:a=>({theme:a.theme,appLockPin:a.appLockPin,lockedChats:a.lockedChats,hiddenChats:a.hiddenChats,pinnedChats:a.pinnedChats,mutedChats:a.mutedChats,archivedChats:a.archivedChats,adminSettings:a.adminSettings,chatWallpapers:a.chatWallpapers,notificationSettings:a.notificationSettings,privacySettings:a.privacySettings,storageSettings:a.storageSettings,accessibilitySettings:a.accessibilitySettings})}));var Mu={exports:{}},w_=Mu.exports,Zp;function x_(){return Zp||(Zp=1,(function(a,n){((r,i)=>{a.exports=i()})(w_,function(){var r=function(d,p){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(x,S){x.__proto__=S}:function(x,S){for(var N in S)Object.prototype.hasOwnProperty.call(S,N)&&(x[N]=S[N])}))(d,p)},i=function(){return(i=Object.assign||function(d){for(var p,x=1,S=arguments.length;x<S;x++)for(var N in p=arguments[x])Object.prototype.hasOwnProperty.call(p,N)&&(d[N]=p[N]);return d}).apply(this,arguments)};function l(d,p,x){for(var S,N=0,C=p.length;N<C;N++)!S&&N in p||((S=S||Array.prototype.slice.call(p,0,N))[N]=p[N]);return d.concat(S||Array.prototype.slice.call(p))}var c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:mw,f=Object.keys,m=Array.isArray;function y(d,p){return typeof p=="object"&&f(p).forEach(function(x){d[x]=p[x]}),d}typeof Promise>"u"||c.Promise||(c.Promise=Promise);var b=Object.getPrototypeOf,v={}.hasOwnProperty;function w(d,p){return v.call(d,p)}function _(d,p){typeof p=="function"&&(p=p(b(d))),(typeof Reflect>"u"?f:Reflect.ownKeys)(p).forEach(function(x){E(d,x,p[x])})}var k=Object.defineProperty;function E(d,p,x,S){k(d,p,y(x&&w(x,"get")&&typeof x.get=="function"?{get:x.get,set:x.set,configurable:!0}:{value:x,configurable:!0,writable:!0},S))}function R(d){return{from:function(p){return d.prototype=Object.create(p.prototype),E(d.prototype,"constructor",d),{extend:_.bind(null,d.prototype)}}}}var H=Object.getOwnPropertyDescriptor,q=[].slice;function W(d,p,x){return q.call(d,p,x)}function L(d,p){return p(d)}function z(d){if(!d)throw new Error("Assertion Failed")}function fe(d){c.setImmediate?setImmediate(d):setTimeout(d,0)}function K(d,p){if(typeof p=="string"&&w(d,p))return d[p];if(!p)return d;if(typeof p!="string"){for(var x=[],S=0,N=p.length;S<N;++S){var C=K(d,p[S]);x.push(C)}return x}var P,V=p.indexOf(".");return V===-1||(P=d[p.substr(0,V)])==null?void 0:K(P,p.substr(V+1))}function X(d,p,x){if(d&&p!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof p!="string"&&"length"in p){z(typeof x!="string"&&"length"in x);for(var S=0,N=p.length;S<N;++S)X(d,p[S],x[S])}else{var C,P,V=p.indexOf(".");V!==-1?(C=p.substr(0,V),(V=p.substr(V+1))===""?x===void 0?m(d)&&!isNaN(parseInt(C))?d.splice(C,1):delete d[C]:d[C]=x:X(P=(P=d[C])&&w(d,C)?P:d[C]={},V,x)):x===void 0?m(d)&&!isNaN(parseInt(p))?d.splice(p,1):delete d[p]:d[p]=x}}function O(d){var p,x={};for(p in d)w(d,p)&&(x[p]=d[p]);return x}var D=[].concat;function Z(d){return D.apply([],d)}var B="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(p){return p+d+"Array"})}))).filter(function(d){return c[d]}),F=new Set(B.map(function(d){return c[d]})),G=null;function ne(d){return G=new WeakMap,d=(function p(x){if(!x||typeof x!="object")return x;var S=G.get(x);if(S)return S;if(m(x)){S=[],G.set(x,S);for(var N=0,C=x.length;N<C;++N)S.push(p(x[N]))}else if(F.has(x.constructor))S=x;else{var P,V=b(x);for(P in S=V===Object.prototype?{}:Object.create(V),G.set(x,S),x)w(x,P)&&(S[P]=p(x[P]))}return S})(d),G=null,d}var M={}.toString;function J(d){return M.call(d).slice(8,-1)}var A=typeof Symbol<"u"?Symbol.iterator:"@@iterator",T=typeof A=="symbol"?function(d){var p;return d!=null&&(p=d[A])&&p.apply(d)}:function(){return null};function Y(d,p){p=d.indexOf(p),0<=p&&d.splice(p,1)}var $={};function ae(d){var p,x,S,N;if(arguments.length===1){if(m(d))return d.slice();if(this===$&&typeof d=="string")return[d];if(N=T(d))for(x=[];!(S=N.next()).done;)x.push(S.value);else{if(d==null)return[d];if(typeof(p=d.length)!="number")return[d];for(x=new Array(p);p--;)x[p]=d[p]}}else for(p=arguments.length,x=new Array(p);p--;)x[p]=arguments[p];return x}var I=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},B=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],mt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(B),ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function te(d,p){this.name=d,this.message=p}function he(d,p){return d+". Errors: "+Object.keys(p).map(function(x){return p[x].toString()}).filter(function(x,S,N){return N.indexOf(x)===S}).join(`
`)}function Be(d,p,x,S){this.failures=p,this.failedKeys=S,this.successCount=x,this.message=he(d,p)}function Ee(d,p){this.name="BulkError",this.failures=Object.keys(p).map(function(x){return p[x]}),this.failuresByPos=p,this.message=he(d,this.failures)}R(te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),R(Be).from(te),R(Ee).from(te);var lt=mt.reduce(function(d,p){return d[p]=p+"Error",d},{}),Me=te,Ue=mt.reduce(function(d,p){var x=p+"Error";function S(N,C){this.name=x,N?typeof N=="string"?(this.message="".concat(N).concat(C?`
 `+C:""),this.inner=C||null):typeof N=="object"&&(this.message="".concat(N.name," ").concat(N.message),this.inner=N):(this.message=ue[p]||x,this.inner=null)}return R(S).from(Me),d[p]=S,d},{}),_t=(Ue.Syntax=SyntaxError,Ue.Type=TypeError,Ue.Range=RangeError,B.reduce(function(d,p){return d[p+"Error"]=Ue[p],d},{}));B=mt.reduce(function(d,p){return["Syntax","Type","Range"].indexOf(p)===-1&&(d[p+"Error"]=Ue[p]),d},{});function at(){}function yn(d){return d}function Fe(d,p){return d==null||d===yn?p:function(x){return p(d(x))}}function we(d,p){return function(){d.apply(this,arguments),p.apply(this,arguments)}}function Pe(d,p){return d===at?p:function(){var x=d.apply(this,arguments),S=(x!==void 0&&(arguments[0]=x),this.onsuccess),N=this.onerror,C=(this.onsuccess=null,this.onerror=null,p.apply(this,arguments));return S&&(this.onsuccess=this.onsuccess?we(S,this.onsuccess):S),N&&(this.onerror=this.onerror?we(N,this.onerror):N),C!==void 0?C:x}}function ke(d,p){return d===at?p:function(){d.apply(this,arguments);var x=this.onsuccess,S=this.onerror;this.onsuccess=this.onerror=null,p.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?we(x,this.onsuccess):x),S&&(this.onerror=this.onerror?we(S,this.onerror):S)}}function ze(d,p){return d===at?p:function(N){var S=d.apply(this,arguments),N=(y(N,S),this.onsuccess),C=this.onerror,P=(this.onsuccess=null,this.onerror=null,p.apply(this,arguments));return N&&(this.onsuccess=this.onsuccess?we(N,this.onsuccess):N),C&&(this.onerror=this.onerror?we(C,this.onerror):C),S===void 0?P===void 0?void 0:P:y(S,P)}}function We(d,p){return d===at?p:function(){return p.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function yt(d,p){return d===at?p:function(){var x=d.apply(this,arguments);if(x&&typeof x.then=="function"){for(var S=this,N=arguments.length,C=new Array(N);N--;)C[N]=arguments[N];return x.then(function(){return p.apply(S,C)})}return p.apply(this,arguments)}}B.ModifyError=Be,B.DexieError=te,B.BulkError=Ee;var ct=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mt(d){ct=d}var vt={},gt=100,hn=typeof Promise>"u"?[]:(mt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[hn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),b(hn),mt]:[mt,b(mt),mt]),mt=hn[0],Br=hn[1],Br=Br&&Br.then,Qt=mt&&mt.constructor,Xt=!!hn[2],Qn=function(d,p){ja.push([d,p]),Sn&&(queueMicrotask(kn),Sn=!1)},an=!0,Sn=!0,tn=[],vn=[],zt=yn,It={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:at,pgp:!1,env:{},finalize:at},$e=It,ja=[],bn=0,Ha=[];function He(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var p=this._PSD=$e;if(typeof d!="function"){if(d!==vt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&xn(this,this._value)}else this._state=null,this._value=null,++p.ref,(function x(S,N){try{N(function(C){if(S._state===null){if(C===S)throw new TypeError("A promise cannot be resolved with itself.");var P=S._lib&&On();C&&typeof C.then=="function"?x(S,function(V,re){C instanceof He?C._then(V,re):C.then(V,re)}):(S._state=!0,S._value=C,Tn(S)),P&&sa()}},xn.bind(null,S))}catch(C){xn(S,C)}})(this,d)}var Na={get:function(){var d=$e,p=Cr;function x(S,N){var C=this,P=!d.global&&(d!==$e||p!==Cr),V=P&&!Xn(),re=new He(function(ge,se){Kn(C,new wn(ir(S,d,P,V),ir(N,d,P,V),ge,se,d))});return this._consoleTask&&(re._consoleTask=this._consoleTask),re}return x.prototype=vt,x},set:function(d){E(this,"then",d&&d.prototype===vt?Na:{get:function(){return d},set:Na.set})}};function wn(d,p,x,S,N){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof p=="function"?p:null,this.resolve=x,this.reject=S,this.psd=N}function xn(d,p){var x,S;vn.push(p),d._state===null&&(x=d._lib&&On(),p=zt(p),d._state=!1,d._value=p,S=d,tn.some(function(N){return N._value===S._value})||tn.push(S),Tn(d),x)&&sa()}function Tn(d){var p=d._listeners;d._listeners=[];for(var x=0,S=p.length;x<S;++x)Kn(d,p[x]);var N=d._PSD;--N.ref||N.finalize(),bn===0&&(++bn,Qn(function(){--bn==0&&pa()},[]))}function Kn(d,p){if(d._state===null)d._listeners.push(p);else{var x=d._state?p.onFulfilled:p.onRejected;if(x===null)return(d._state?p.resolve:p.reject)(d._value);++p.psd.ref,++bn,Qn(ga,[x,d,p])}}function ga(d,p,x){try{var S,N=p._value;!p._state&&vn.length&&(vn=[]),S=ct&&p._consoleTask?p._consoleTask.run(function(){return d(N)}):d(N),p._state||vn.indexOf(N)!==-1||(C=>{for(var P=tn.length;P;)if(tn[--P]._value===C._value)return tn.splice(P,1)})(p),x.resolve(S)}catch(C){x.reject(C)}finally{--bn==0&&pa(),--x.psd.ref||x.psd.finalize()}}function kn(){ia(It,function(){On()&&sa()})}function On(){var d=an;return Sn=an=!1,d}function sa(){var d,p,x;do for(;0<ja.length;)for(d=ja,ja=[],x=d.length,p=0;p<x;++p){var S=d[p];S[0].apply(null,S[1])}while(0<ja.length);Sn=an=!0}function pa(){for(var d=tn,p=(tn=[],d.forEach(function(S){S._PSD.onunhandled.call(null,S._value,S)}),Ha.slice(0)),x=p.length;x;)p[--x]()}function pr(d){return new He(vt,!1,d)}function Pt(d,p){var x=$e;return function(){var S=On(),N=$e;try{return ya(x,!0),d.apply(this,arguments)}catch(C){p&&p(C)}finally{ya(N,!1),S&&sa()}}}_(He.prototype,{then:Na,_then:function(d,p){Kn(this,new wn(null,null,d,p,$e))},catch:function(d){var p,x;return arguments.length===1?this.then(null,d):(p=d,x=arguments[1],typeof p=="function"?this.then(null,function(S){return(S instanceof p?x:pr)(S)}):this.then(null,function(S){return(S&&S.name===p?x:pr)(S)}))},finally:function(d){return this.then(function(p){return He.resolve(d()).then(function(){return p})},function(p){return He.resolve(d()).then(function(){return pr(p)})})},timeout:function(d,p){var x=this;return d<1/0?new He(function(S,N){var C=setTimeout(function(){return N(new Ue.Timeout(p))},d);x.then(S,N).finally(clearTimeout.bind(null,C))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&E(He.prototype,Symbol.toStringTag,"Dexie.Promise"),It.env=Xs(),_(He,{all:function(){var d=ae.apply(null,arguments).map(Ea);return new He(function(p,x){d.length===0&&p([]);var S=d.length;d.forEach(function(N,C){return He.resolve(N).then(function(P){d[C]=P,--S||p(d)},x)})})},resolve:function(d){return d instanceof He?d:d&&typeof d.then=="function"?new He(function(p,x){d.then(p,x)}):new He(vt,!0,d)},reject:pr,race:function(){var d=ae.apply(null,arguments).map(Ea);return new He(function(p,x){d.map(function(S){return He.resolve(S).then(p,x)})})},PSD:{get:function(){return $e},set:function(d){return $e=d}},totalEchoes:{get:function(){return Cr}},newPSD:Vt,usePSD:ia,scheduler:{get:function(){return Qn},set:function(d){Qn=d}},rejectionMapper:{get:function(){return zt},set:function(d){zt=d}},follow:function(d,p){return new He(function(x,S){return Vt(function(N,C){var P=$e;P.unhandleds=[],P.onunhandled=C,P.finalize=we(function(){var V,re=this;V=function(){re.unhandleds.length===0?N():C(re.unhandleds[0])},Ha.push(function ge(){V(),Ha.splice(Ha.indexOf(ge),1)}),++bn,Qn(function(){--bn==0&&pa()},[])},P.finalize),d()},p,x,S)})}}),Qt&&(Qt.allSettled&&E(He,"allSettled",function(){var d=ae.apply(null,arguments).map(Ea);return new He(function(p){d.length===0&&p([]);var x=d.length,S=new Array(x);d.forEach(function(N,C){return He.resolve(N).then(function(P){return S[C]={status:"fulfilled",value:P}},function(P){return S[C]={status:"rejected",reason:P}}).then(function(){return--x||p(S)})})})}),Qt.any&&typeof AggregateError<"u"&&E(He,"any",function(){var d=ae.apply(null,arguments).map(Ea);return new He(function(p,x){d.length===0&&x(new AggregateError([]));var S=d.length,N=new Array(S);d.forEach(function(C,P){return He.resolve(C).then(function(V){return p(V)},function(V){N[P]=V,--S||x(new AggregateError(N))})})})}),Qt.withResolvers)&&(He.withResolvers=Qt.withResolvers);var rn={awaits:0,echoes:0,id:0},Qs=0,Aa=[],Er=0,Cr=0,$a=0;function Vt(d,P,x,S){var N=$e,C=Object.create(N),P=(C.parent=N,C.ref=0,C.global=!1,C.id=++$a,It.env,C.env=Xt?{Promise:He,PromiseProp:{value:He,configurable:!0,writable:!0},all:He.all,race:He.race,allSettled:He.allSettled,any:He.any,resolve:He.resolve,reject:He.reject}:{},P&&y(C,P),++N.ref,C.finalize=function(){--this.parent.ref||this.parent.finalize()},ia(C,d,x,S));return C.ref===0&&C.finalize(),P}function mn(){return rn.id||(rn.id=++Qs),++rn.awaits,rn.echoes+=gt,rn.id}function Xn(){return!!rn.awaits&&(--rn.awaits==0&&(rn.id=0),rn.echoes=rn.awaits*gt,!0)}function Ea(d){return rn.echoes&&d&&d.constructor===Qt?(mn(),d.then(function(p){return Xn(),p},function(p){return Xn(),Ht(p)})):d}function Pl(){var d=Aa[Aa.length-1];Aa.pop(),ya(d,!1)}function ya(d,p){var x,S,N=$e;(p?!rn.echoes||Er++&&d===$e:!Er||--Er&&d===$e)||queueMicrotask(p?(function(C){++Cr,rn.echoes&&--rn.echoes!=0||(rn.echoes=rn.awaits=rn.id=0),Aa.push($e),ya(C,!0)}).bind(null,d):Pl),d!==$e&&($e=d,N===It&&(It.env=Xs()),Xt)&&(x=It.env.Promise,S=d.env,N.global||d.global)&&(Object.defineProperty(c,"Promise",S.PromiseProp),x.all=S.all,x.race=S.race,x.resolve=S.resolve,x.reject=S.reject,S.allSettled&&(x.allSettled=S.allSettled),S.any)&&(x.any=S.any)}function Xs(){var d=c.Promise;return Xt?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(c,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function ia(d,p,x,S,N){var C=$e;try{return ya(d,!0),p(x,S,N)}finally{ya(C,!1)}}function ir(d,p,x,S){return typeof d!="function"?d:function(){var N=$e;x&&mn(),ya(p,!0);try{return d.apply(this,arguments)}finally{ya(N,!1),S&&queueMicrotask(Xn)}}}function Ka(d){Promise===Qt&&rn.echoes===0?Er===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Br).indexOf("[native code]")===-1&&(mn=Xn=at);var Ht=He.reject,fa="",Vn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",on="String expected.",Ca=[],Tr="__dbnames",Ta="readonly",Oa="readwrite";function Va(d,p){return d?p?function(){return d.apply(this,arguments)&&p.apply(this,arguments)}:d:p}var Js={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Or(d){return typeof d!="string"||/\./.test(d)?function(p){return p}:function(p){return p[d]===void 0&&d in p&&delete(p=ne(p))[d],p}}function Ri(){throw Ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function St(d,p){try{var x=je(d),S=je(p);if(x!==S)return x==="Array"?1:S==="Array"?-1:x==="binary"?1:S==="binary"?-1:x==="string"?1:S==="string"?-1:x==="Date"?1:S!=="Date"?NaN:-1;switch(x){case"number":case"Date":case"string":return p<d?1:d<p?-1:0;case"binary":for(var N=Qe(d),C=Qe(p),P=N.length,V=C.length,re=P<V?P:V,ge=0;ge<re;++ge)if(N[ge]!==C[ge])return N[ge]<C[ge]?-1:1;return P===V?0:P<V?-1:1;case"Array":for(var se=d,ee=p,oe=se.length,de=ee.length,ie=oe<de?oe:de,le=0;le<ie;++le){var ye=St(se[le],ee[le]);if(ye!==0)return ye}return oe===de?0:oe<de?-1:1}}catch{}return NaN}function je(d){var p=typeof d;return p=="object"&&(ArrayBuffer.isView(d)||(p=J(d))==="ArrayBuffer")?"binary":p}function Qe(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function st(d,p,x){var S=d.schema.yProps;return S?(p&&0<x.numFailures&&(p=p.filter(function(N,C){return!x.failures[C]})),Promise.all(S.map(function(N){return N=N.updatesTable,p?d.db.table(N).where("k").anyOf(p).delete():d.db.table(N).clear()})).then(function(){return x})):x}$t.prototype.execute=function(d){var p=this["@@propmod"];if(p.add!==void 0){var x=p.add;if(m(x))return l(l([],m(d)?d:[],!0),x).sort();if(typeof x=="number")return(Number(d)||0)+x;if(typeof x=="bigint")try{return BigInt(d)+x}catch{return BigInt(0)+x}throw new TypeError("Invalid term ".concat(x))}if(p.remove!==void 0){var S=p.remove;if(m(S))return m(d)?d.filter(function(N){return!S.includes(N)}).sort():[];if(typeof S=="number")return Number(d)-S;if(typeof S=="bigint")try{return BigInt(d)-S}catch{return BigInt(0)-S}throw new TypeError("Invalid subtrahend ".concat(S))}return x=(x=p.replacePrefix)==null?void 0:x[0],x&&typeof d=="string"&&d.startsWith(x)?p.replacePrefix[1]+d.substring(x.length):d};var sn=$t;function $t(d){this["@@propmod"]=d}function bt(d,p){for(var x=f(p),S=x.length,N=!1,C=0;C<S;++C){var P=x[C],V=p[P],re=K(d,P);V instanceof sn?(X(d,P,V.execute(re)),N=!0):re!==V&&(X(d,P,V),N=!0)}return N}kt.prototype._trans=function(d,p,x){var S=this._tx||$e.trans,N=this.name,C=ct&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function P(ge,se,ee){if(ee.schema[N])return p(ee.idbtrans,ee);throw new Ue.NotFound("Table "+N+" not part of transaction")}var V=On();try{var re=S&&S.db._novip===this.db._novip?S===$e.trans?S._promise(d,P,x):Vt(function(){return S._promise(d,P,x)},{trans:S,transless:$e.transless||$e}):(function ge(se,ee,oe,de){if(se.idbdb&&(se._state.openComplete||$e.letThrough||se._vip)){var ie=se._createTransaction(ee,oe,se._dbSchema);try{ie.create(),se._state.PR1398_maxLoop=3}catch(le){return le.name===lt.InvalidState&&se.isOpen()&&0<--se._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),se.close({disableAutoOpen:!1}),se.open().then(function(){return ge(se,ee,oe,de)})):Ht(le)}return ie._promise(ee,function(le,ye){return Vt(function(){return $e.trans=ie,de(le,ye,ie)})}).then(function(le){if(ee==="readwrite")try{ie.idbtrans.commit()}catch{}return ee==="readonly"?le:ie._completion.then(function(){return le})})}if(se._state.openComplete)return Ht(new Ue.DatabaseClosed(se._state.dbOpenError));if(!se._state.isBeingOpened){if(!se._state.autoOpen)return Ht(new Ue.DatabaseClosed);se.open().catch(at)}return se._state.dbReadyPromise.then(function(){return ge(se,ee,oe,de)})})(this.db,d,[this.name],P);return C&&(re._consoleTask=C,re=re.catch(function(ge){return console.trace(ge),Ht(ge)})),re}finally{V&&sa()}},kt.prototype.get=function(d,p){var x=this;return d&&d.constructor===Object?this.where(d).first(p):d==null?Ht(new Ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(S){return x.core.get({trans:S,key:d}).then(function(N){return x.hook.reading.fire(N)})}).then(p)},kt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(m(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var p=f(d);if(p.length===1)return this.where(p[0]).equals(d[p[0]]);var x=this.schema.indexes.concat(this.schema.primKey).filter(function(V){if(V.compound&&p.every(function(ge){return 0<=V.keyPath.indexOf(ge)})){for(var re=0;re<p.length;++re)if(p.indexOf(V.keyPath[re])===-1)return!1;return!0}return!1}).sort(function(V,re){return V.keyPath.length-re.keyPath.length})[0];if(x&&this.db._maxKey!==fa)return P=x.keyPath.slice(0,p.length),this.where(P).equals(P.map(function(V){return d[V]}));!x&&ct&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(p.join("+"),"]"));var S=this.schema.idxByName;function N(V,re){return St(V,re)===0}var P=p.reduce(function(se,re){var ge=se[0],se=se[1],ee=S[re],oe=d[re];return[ge||ee,ge||!ee?Va(se,ee&&ee.multi?function(de){return de=K(de,re),m(de)&&de.some(function(ie){return N(oe,ie)})}:function(de){return N(oe,K(de,re))}):se]},[null,null]),C=P[0],P=P[1];return C?this.where(C.name).equals(d[C.keyPath]).filter(P):x?this.filter(P):this.where(p).equals("")},kt.prototype.filter=function(d){return this.toCollection().and(d)},kt.prototype.count=function(d){return this.toCollection().count(d)},kt.prototype.offset=function(d){return this.toCollection().offset(d)},kt.prototype.limit=function(d){return this.toCollection().limit(d)},kt.prototype.each=function(d){return this.toCollection().each(d)},kt.prototype.toArray=function(d){return this.toCollection().toArray(d)},kt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,m(d)?"[".concat(d.join("+"),"]"):d))},kt.prototype.reverse=function(){return this.toCollection().reverse()},kt.prototype.mapToClass=function(d){for(var p=this.db,x=this.name,S=((this.schema.mappedClass=d).prototype instanceof Ri&&(d=(P=>{var V=se,re=P;if(typeof re!="function"&&re!==null)throw new TypeError("Class extends value "+String(re)+" is not a constructor or null");function ge(){this.constructor=V}function se(){return P!==null&&P.apply(this,arguments)||this}return r(V,re),V.prototype=re===null?Object.create(re):(ge.prototype=re.prototype,new ge),Object.defineProperty(se.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),se.prototype.table=function(){return x},se})(d)),new Set),N=d.prototype;N;N=b(N))Object.getOwnPropertyNames(N).forEach(function(P){return S.add(P)});function C(P){if(!P)return P;var V,re=Object.create(d.prototype);for(V in P)if(!S.has(V))try{re[V]=P[V]}catch{}return re}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=C,this.hook("reading",C),d},kt.prototype.defineClass=function(){return this.mapToClass(function(d){y(this,d)})},kt.prototype.add=function(d,p){var x=this,S=this.schema.primKey,N=S.auto,C=S.keyPath,P=d;return C&&N&&(P=Or(C)(d)),this._trans("readwrite",function(V){return x.core.mutate({trans:V,type:"add",keys:p!=null?[p]:null,values:[P]})}).then(function(V){return V.numFailures?He.reject(V.failures[0]):V.lastResult}).then(function(V){if(C)try{X(d,C,V)}catch{}return V})},kt.prototype.upsert=function(d,p){var x=this,S=this.schema.primKey.keyPath;return this._trans("readwrite",function(N){return x.core.get({trans:N,key:d}).then(function(C){var P=C??{};return bt(P,p),S&&X(P,S,d),x.core.mutate({trans:N,type:"put",values:[P],keys:[d],upsert:!0,updates:{keys:[d],changeSpecs:[p]}}).then(function(V){return V.numFailures?He.reject(V.failures[0]):!!C})})})},kt.prototype.update=function(d,p){return typeof d!="object"||m(d)?this.where(":id").equals(d).modify(p):(d=K(d,this.schema.primKey.keyPath))===void 0?Ht(new Ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(p)},kt.prototype.put=function(d,p){var x=this,S=this.schema.primKey,N=S.auto,C=S.keyPath,P=d;return C&&N&&(P=Or(C)(d)),this._trans("readwrite",function(V){return x.core.mutate({trans:V,type:"put",values:[P],keys:p!=null?[p]:null})}).then(function(V){return V.numFailures?He.reject(V.failures[0]):V.lastResult}).then(function(V){if(C)try{X(d,C,V)}catch{}return V})},kt.prototype.delete=function(d){var p=this;return this._trans("readwrite",function(x){return p.core.mutate({trans:x,type:"delete",keys:[d]}).then(function(S){return st(p,[d],S)}).then(function(S){return S.numFailures?He.reject(S.failures[0]):void 0})})},kt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(p){return d.core.mutate({trans:p,type:"deleteRange",range:Js}).then(function(x){return st(d,null,x)})}).then(function(p){return p.numFailures?He.reject(p.failures[0]):void 0})},kt.prototype.bulkGet=function(d){var p=this;return this._trans("readonly",function(x){return p.core.getMany({keys:d,trans:x}).then(function(S){return S.map(function(N){return p.hook.reading.fire(N)})})})},kt.prototype.bulkAdd=function(d,p,x){var S=this,N=Array.isArray(p)?p:void 0,C=(x=x||(N?void 0:p))?x.allKeys:void 0;return this._trans("readwrite",function(P){var V=S.schema.primKey,ge=V.auto,V=V.keyPath;if(V&&N)throw new Ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(N&&N.length!==d.length)throw new Ue.InvalidArgument("Arguments objects and keys must have the same length");var re=d.length,ge=V&&ge?d.map(Or(V)):d;return S.core.mutate({trans:P,type:"add",keys:N,values:ge,wantResults:C}).then(function(se){var ee=se.numFailures,oe=se.failures;if(ee===0)return C?se.results:se.lastResult;throw new Ee("".concat(S.name,".bulkAdd(): ").concat(ee," of ").concat(re," operations failed"),oe)})})},kt.prototype.bulkPut=function(d,p,x){var S=this,N=Array.isArray(p)?p:void 0,C=(x=x||(N?void 0:p))?x.allKeys:void 0;return this._trans("readwrite",function(P){var V=S.schema.primKey,ge=V.auto,V=V.keyPath;if(V&&N)throw new Ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(N&&N.length!==d.length)throw new Ue.InvalidArgument("Arguments objects and keys must have the same length");var re=d.length,ge=V&&ge?d.map(Or(V)):d;return S.core.mutate({trans:P,type:"put",keys:N,values:ge,wantResults:C}).then(function(se){var ee=se.numFailures,oe=se.failures;if(ee===0)return C?se.results:se.lastResult;throw new Ee("".concat(S.name,".bulkPut(): ").concat(ee," of ").concat(re," operations failed"),oe)})})},kt.prototype.bulkUpdate=function(d){var p=this,x=this.core,S=d.map(function(P){return P.key}),N=d.map(function(P){return P.changes}),C=[];return this._trans("readwrite",function(P){return x.getMany({trans:P,keys:S,cache:"clone"}).then(function(V){var re=[],ge=[],se=(d.forEach(function(ee,oe){var de=ee.key,ie=ee.changes,le=V[oe];if(le){for(var ye=0,xe=Object.keys(ie);ye<xe.length;ye++){var pe=xe[ye],Ce=ie[pe];if(pe===p.schema.primKey.keyPath){if(St(Ce,de)!==0)throw new Ue.Constraint("Cannot update primary key in bulkUpdate()")}else X(le,pe,Ce)}C.push(oe),re.push(de),ge.push(le)}}),re.length);return x.mutate({trans:P,type:"put",keys:re,values:ge,updates:{keys:S,changeSpecs:N}}).then(function(ee){var oe=ee.numFailures,de=ee.failures;if(oe===0)return se;for(var ie=0,le=Object.keys(de);ie<le.length;ie++){var ye,xe=le[ie],pe=C[Number(xe)];pe!=null&&(ye=de[xe],delete de[xe],de[pe]=ye)}throw new Ee("".concat(p.name,".bulkUpdate(): ").concat(oe," of ").concat(se," operations failed"),de)})})})},kt.prototype.bulkDelete=function(d){var p=this,x=d.length;return this._trans("readwrite",function(S){return p.core.mutate({trans:S,type:"delete",keys:d}).then(function(N){return st(p,d,N)})}).then(function(S){var N=S.numFailures,C=S.failures;if(N===0)return S.lastResult;throw new Ee("".concat(p.name,".bulkDelete(): ").concat(N," of ").concat(x," operations failed"),C)})};var Ln=kt;function kt(){}function _n(d){function p(P,V){if(V){for(var re=arguments.length,ge=new Array(re-1);--re;)ge[re-1]=arguments[re];return x[P].subscribe.apply(null,ge),d}if(typeof P=="string")return x[P]}var x={};p.addEventType=C;for(var S=1,N=arguments.length;S<N;++S)C(arguments[S]);return p;function C(P,V,re){var ge,se;if(typeof P!="object")return V=V||We,se={subscribers:[],fire:re=re||at,subscribe:function(ee){se.subscribers.indexOf(ee)===-1&&(se.subscribers.push(ee),se.fire=V(se.fire,ee))},unsubscribe:function(ee){se.subscribers=se.subscribers.filter(function(oe){return oe!==ee}),se.fire=se.subscribers.reduce(V,re)}},x[P]=p[P]=se;f(ge=P).forEach(function(ee){var oe=ge[ee];if(m(oe))C(ee,ge[ee][0],ge[ee][1]);else{if(oe!=="asap")throw new Ue.InvalidArgument("Invalid event config");var de=C(ee,yn,function(){for(var ie=arguments.length,le=new Array(ie);ie--;)le[ie]=arguments[ie];de.subscribers.forEach(function(ye){fe(function(){ye.apply(null,le)})})})}})}}function gn(d,p){return R(p).from({prototype:d}),p}function Fa(d,p){return!(d.filter||d.algorithm||d.or)&&(p?d.justLimit:!d.replayFilter)}function yr(d,p){d.filter=Va(d.filter,p)}function Ws(d,p,x){var S=d.replayFilter;d.replayFilter=S?function(){return Va(S(),p())}:p,d.justLimit=x&&!S}function lr(d,p){if(d.isPrimKey)return p.primaryKey;var x=p.getIndexByKeyPath(d.index);if(x)return x;throw new Ue.Schema("KeyPath "+d.index+" on object store "+p.name+" is not indexed")}function Hl(d,p,x){var S=lr(d,p.schema);return p.openCursor({trans:x,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:S,range:d.range}})}function Zs(d,p,x,S){var N,C,P=d.replayFilter?Va(d.filter,d.replayFilter()):d.filter;return d.or?(N={},C=function(V,re,ge){var se,ee;P&&!P(re,ge,function(oe){return re.stop(oe)},function(oe){return re.fail(oe)})||((ee=""+(se=re.primaryKey))=="[object ArrayBuffer]"&&(ee=""+new Uint8Array(se)),w(N,ee))||(N[ee]=!0,p(V,re,ge))},Promise.all([d.or._iterate(C,x),Rr(Hl(d,S,x),d.algorithm,C,!d.keysOnly&&d.valueMapper)])):Rr(Hl(d,S,x),Va(d.algorithm,P),p,!d.keysOnly&&d.valueMapper)}function Rr(d,p,x,S){var N=Pt(S?function(C,P,V){return x(S(C),P,V)}:x);return d.then(function(C){if(C)return C.start(function(){var P=function(){return C.continue()};p&&!p(C,function(V){return P=V},function(V){C.stop(V),P=at},function(V){C.fail(V),P=at})||N(C.value,C,function(V){return P=V}),P()})})}Ut.prototype._read=function(d,p){var x=this._ctx;return x.error?x.table._trans(null,Ht.bind(null,x.error)):x.table._trans("readonly",d).then(p)},Ut.prototype._write=function(d){var p=this._ctx;return p.error?p.table._trans(null,Ht.bind(null,p.error)):p.table._trans("readwrite",d,"locked")},Ut.prototype._addAlgorithm=function(d){var p=this._ctx;p.algorithm=Va(p.algorithm,d)},Ut.prototype._iterate=function(d,p){return Zs(this._ctx,d,p,this._ctx.table.core)},Ut.prototype.clone=function(d){var p=Object.create(this.constructor.prototype),x=Object.create(this._ctx);return d&&y(x,d),p._ctx=x,p},Ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ut.prototype.each=function(d){var p=this._ctx;return this._read(function(x){return Zs(p,d,x,p.table.core)})},Ut.prototype.count=function(d){var p=this;return this._read(function(x){var S,N=p._ctx,C=N.table.core;return Fa(N,!0)?C.count({trans:x,query:{index:lr(N,C.schema),range:N.range}}).then(function(P){return Math.min(P,N.limit)}):(S=0,Zs(N,function(){return++S,!1},x,C).then(function(){return S}))}).then(d)},Ut.prototype.sortBy=function(d,p){var x=d.split(".").reverse(),S=x[0],N=x.length-1;function C(re,ge){return ge?C(re[x[ge]],ge-1):re[S]}var P=this._ctx.dir==="next"?1:-1;function V(re,ge){return St(C(re,N),C(ge,N))*P}return this.toArray(function(re){return re.sort(V)}).then(p)},Ut.prototype.toArray=function(d){var p=this;return this._read(function(x){var S,N,C,P=p._ctx;return P.dir==="next"&&Fa(P,!0)&&0<P.limit?(S=P.valueMapper,N=lr(P,P.table.core.schema),P.table.core.query({trans:x,limit:P.limit,values:!0,query:{index:N,range:P.range}}).then(function(V){return V=V.result,S?V.map(S):V})):(C=[],Zs(P,function(V){return C.push(V)},x,P.table.core).then(function(){return C}))},d)},Ut.prototype.offset=function(d){var p=this._ctx;return d<=0||(p.offset+=d,Fa(p)?Ws(p,function(){var x=d;return function(S,N){return x===0||(x===1?--x:N(function(){S.advance(x),x=0}),!1)}}):Ws(p,function(){var x=d;return function(){return--x<0}})),this},Ut.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Ws(this._ctx,function(){var p=d;return function(x,S,N){return--p<=0&&S(N),0<=p}},!0),this},Ut.prototype.until=function(d,p){return yr(this._ctx,function(x,S,N){return!d(x.value)||(S(N),p)}),this},Ut.prototype.first=function(d){return this.limit(1).toArray(function(p){return p[0]}).then(d)},Ut.prototype.last=function(d){return this.reverse().first(d)},Ut.prototype.filter=function(d){var p;return yr(this._ctx,function(x){return d(x.value)}),(p=this._ctx).isMatch=Va(p.isMatch,d),this},Ut.prototype.and=function(d){return this.filter(d)},Ut.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},Ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ut.prototype.desc=function(){return this.reverse()},Ut.prototype.eachKey=function(d){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(x,S){d(S.key,S)})},Ut.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},Ut.prototype.eachPrimaryKey=function(d){var p=this._ctx;return p.keysOnly=!p.isMatch,this.each(function(x,S){d(S.primaryKey,S)})},Ut.prototype.keys=function(d){var p=this._ctx,x=(p.keysOnly=!p.isMatch,[]);return this.each(function(S,N){x.push(N.key)}).then(function(){return x}).then(d)},Ut.prototype.primaryKeys=function(d){var p=this._ctx;if(p.dir==="next"&&Fa(p,!0)&&0<p.limit)return this._read(function(S){var N=lr(p,p.table.core.schema);return p.table.core.query({trans:S,values:!1,limit:p.limit,query:{index:N,range:p.range}})}).then(function(S){return S.result}).then(d);p.keysOnly=!p.isMatch;var x=[];return this.each(function(S,N){x.push(N.primaryKey)}).then(function(){return x}).then(d)},Ut.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},Ut.prototype.firstKey=function(d){return this.limit(1).keys(function(p){return p[0]}).then(d)},Ut.prototype.lastKey=function(d){return this.reverse().firstKey(d)},Ut.prototype.distinct=function(){var d,p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];return p&&p.multi&&(d={},yr(this._ctx,function(S){var S=S.primaryKey.toString(),N=w(d,S);return d[S]=!0,!N})),this},Ut.prototype.modify=function(d){var p=this,x=this._ctx;return this._write(function(S){function N(le,ye){var xe=ye.failures;oe+=le-ye.numFailures;for(var pe=0,Ce=f(xe);pe<Ce.length;pe++){var qe=Ce[pe];ee.push(xe[qe])}}var C=typeof d=="function"?d:function(le){return bt(le,d)},P=x.table.core,se=P.schema.primaryKey,V=se.outbound,re=se.extractKey,ge=200,se=p.db._options.modifyChunkSize,ee=(se&&(ge=typeof se=="object"?se[P.name]||se["*"]||200:se),[]),oe=0,de=[],ie=d===$l;return p.clone().primaryKeys().then(function(le){function ye(pe){var Ce=Math.min(ge,le.length-pe),qe=le.slice(pe,pe+Ce);return(ie?Promise.resolve([]):P.getMany({trans:S,keys:qe,cache:"immutable"})).then(function(Ke){var Ve=[],Le=[],Xe=V?[]:null,Ge=ie?qe:[];if(!ie)for(var Ie=0;Ie<Ce;++Ie){var Je=Ke[Ie],pt={value:ne(Je),primKey:le[pe+Ie]};C.call(pt,pt.value,pt)!==!1&&(pt.value==null?Ge.push(le[pe+Ie]):V||St(re(Je),re(pt.value))===0?(Le.push(pt.value),V&&Xe.push(le[pe+Ie])):(Ge.push(le[pe+Ie]),Ve.push(pt.value)))}return Promise.resolve(0<Ve.length&&P.mutate({trans:S,type:"add",values:Ve}).then(function(At){for(var ot in At.failures)Ge.splice(parseInt(ot),1);N(Ve.length,At)})).then(function(){return(0<Le.length||xe&&typeof d=="object")&&P.mutate({trans:S,type:"put",keys:Xe,values:Le,criteria:xe,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<pe}).then(function(At){return N(Le.length,At)})}).then(function(){return(0<Ge.length||xe&&ie)&&P.mutate({trans:S,type:"delete",keys:Ge,criteria:xe,isAdditionalChunk:0<pe}).then(function(At){return st(x.table,Ge,At)}).then(function(At){return N(Ge.length,At)})}).then(function(){return le.length>pe+Ce&&ye(pe+ge)})})}var xe=Fa(x)&&x.limit===1/0&&(typeof d!="function"||ie)&&{index:x.index,range:x.range};return ye(0).then(function(){if(0<ee.length)throw new Be("Error modifying one or more objects",ee,oe,de);return le.length})})})},Ut.prototype.delete=function(){var d=this._ctx,p=d.range;return!Fa(d)||d.table.schema.yProps||!d.isPrimKey&&p.type!==3?this.modify($l):this._write(function(x){var S=d.table.core.schema.primaryKey,N=p;return d.table.core.count({trans:x,query:{index:S,range:N}}).then(function(C){return d.table.core.mutate({trans:x,type:"deleteRange",range:N}).then(function(re){var V=re.failures,re=re.numFailures;if(re)throw new Be("Could not delete some values",Object.keys(V).map(function(ge){return V[ge]}),C-re);return C-re})})})};var hd=Ut;function Ut(){}var $l=function(d,p){return p.value=null};function Kl(d,p){return d<p?-1:d===p?0:1}function md(d,p){return p<d?-1:d===p?0:1}function ha(d,p,x){return d=d instanceof Ur?new d.Collection(d):d,d._ctx.error=new(x||TypeError)(p),d}function or(d){return new d.Collection(d,function(){return Ui("")}).limit(0)}function va(de,p,x,S){var N,C,P,V,re,ge,se,ee=x.length;if(!x.every(function(le){return typeof le=="string"}))return ha(de,on);function oe(le){N=le==="next"?function(xe){return xe.toUpperCase()}:function(xe){return xe.toLowerCase()},C=le==="next"?function(xe){return xe.toLowerCase()}:function(xe){return xe.toUpperCase()},P=le==="next"?Kl:md;var ye=x.map(function(xe){return{lower:C(xe),upper:N(xe)}}).sort(function(xe,pe){return P(xe.lower,pe.lower)});V=ye.map(function(xe){return xe.upper}),re=ye.map(function(xe){return xe.lower}),se=(ge=le)==="next"?"":S}oe("next");var de=new de.Collection(de,function(){return Ga(V[0],re[ee-1]+S)}),ie=(de._ondirectionchange=function(le){oe(le)},0);return de._addAlgorithm(function(le,ye,xe){var pe=le.key;if(typeof pe=="string"){var Ce=C(pe);if(p(Ce,re,ie))return!0;for(var qe=null,Ke=ie;Ke<ee;++Ke){var Ve=((Le,Xe,Ge,Ie,Je,pt)=>{for(var At=Math.min(Le.length,Ie.length),ot=-1,wt=0;wt<At;++wt){var Jt=Xe[wt];if(Jt!==Ie[wt])return Je(Le[wt],Ge[wt])<0?Le.substr(0,wt)+Ge[wt]+Ge.substr(wt+1):Je(Le[wt],Ie[wt])<0?Le.substr(0,wt)+Ie[wt]+Ge.substr(wt+1):0<=ot?Le.substr(0,ot)+Xe[ot]+Ge.substr(ot+1):null;Je(Le[wt],Jt)<0&&(ot=wt)}return At<Ie.length&&pt==="next"?Le+Ge.substr(Le.length):At<Le.length&&pt==="prev"?Le.substr(0,Ge.length):ot<0?null:Le.substr(0,ot)+Ie[ot]+Ge.substr(ot+1)})(pe,Ce,V[Ke],re[Ke],P,ge);Ve===null&&qe===null?ie=Ke+1:(qe===null||0<P(qe,Ve))&&(qe=Ve)}ye(qe!==null?function(){le.continue(qe+se)}:xe)}return!1}),de}function Ga(d,p,x,S){return{type:2,lower:d,upper:p,lowerOpen:x,upperOpen:S}}function Ui(d){return{type:1,lower:d,upper:d}}Object.defineProperty(cn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),cn.prototype.between=function(d,p,x,S){x=x!==!1,S=S===!0;try{return 0<this._cmp(d,p)||this._cmp(d,p)===0&&(x||S)&&(!x||!S)?or(this):new this.Collection(this,function(){return Ga(d,p,!x,!S)})}catch{return ha(this,Vn)}},cn.prototype.equals=function(d){return d==null?ha(this,Vn):new this.Collection(this,function(){return Ui(d)})},cn.prototype.above=function(d){return d==null?ha(this,Vn):new this.Collection(this,function(){return Ga(d,void 0,!0)})},cn.prototype.aboveOrEqual=function(d){return d==null?ha(this,Vn):new this.Collection(this,function(){return Ga(d,void 0,!1)})},cn.prototype.below=function(d){return d==null?ha(this,Vn):new this.Collection(this,function(){return Ga(void 0,d,!1,!0)})},cn.prototype.belowOrEqual=function(d){return d==null?ha(this,Vn):new this.Collection(this,function(){return Ga(void 0,d)})},cn.prototype.startsWith=function(d){return typeof d!="string"?ha(this,on):this.between(d,d+fa,!0,!0)},cn.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):va(this,function(p,x){return p.indexOf(x[0])===0},[d],fa)},cn.prototype.equalsIgnoreCase=function(d){return va(this,function(p,x){return p===x[0]},[d],"")},cn.prototype.anyOfIgnoreCase=function(){var d=ae.apply($,arguments);return d.length===0?or(this):va(this,function(p,x){return x.indexOf(p)!==-1},d,"")},cn.prototype.startsWithAnyOfIgnoreCase=function(){var d=ae.apply($,arguments);return d.length===0?or(this):va(this,function(p,x){return x.some(function(S){return p.indexOf(S)===0})},d,fa)},cn.prototype.anyOf=function(){var d,p,x=this,S=ae.apply($,arguments),N=this._cmp;try{S.sort(N)}catch{return ha(this,Vn)}return S.length===0?or(this):((d=new this.Collection(this,function(){return Ga(S[0],S[S.length-1])}))._ondirectionchange=function(C){N=C==="next"?x._ascending:x._descending,S.sort(N)},p=0,d._addAlgorithm(function(C,P,V){for(var re=C.key;0<N(re,S[p]);)if(++p===S.length)return P(V),!1;return N(re,S[p])===0||(P(function(){C.continue(S[p])}),!1)}),d)},cn.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},cn.prototype.noneOf=function(){var d=ae.apply($,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return ha(this,Vn)}var p=d.reduce(function(x,S){return x?x.concat([[x[x.length-1][1],S]]):[[-1/0,S]]},null);return p.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(p,{includeLowers:!1,includeUppers:!1})},cn.prototype.inAnyRange=function(d,xe){var x=this,S=this._cmp,N=this._ascending,C=this._descending,P=this._min,V=this._max;if(d.length===0)return or(this);if(!d.every(function(pe){return pe[0]!==void 0&&pe[1]!==void 0&&N(pe[0],pe[1])<=0}))return ha(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ue.InvalidArgument);var re=!xe||xe.includeLowers!==!1,ge=xe&&xe.includeUppers===!0,se,ee=N;function oe(pe,Ce){return ee(pe[0],Ce[0])}try{(se=d.reduce(function(pe,Ce){for(var qe=0,Ke=pe.length;qe<Ke;++qe){var Ve=pe[qe];if(S(Ce[0],Ve[1])<0&&0<S(Ce[1],Ve[0])){Ve[0]=P(Ve[0],Ce[0]),Ve[1]=V(Ve[1],Ce[1]);break}}return qe===Ke&&pe.push(Ce),pe},[])).sort(oe)}catch{return ha(this,Vn)}var de=0,ie=ge?function(pe){return 0<N(pe,se[de][1])}:function(pe){return 0<=N(pe,se[de][1])},le=re?function(pe){return 0<C(pe,se[de][0])}:function(pe){return 0<=C(pe,se[de][0])},ye=ie,xe=new this.Collection(this,function(){return Ga(se[0][0],se[se.length-1][1],!re,!ge)});return xe._ondirectionchange=function(pe){ee=pe==="next"?(ye=ie,N):(ye=le,C),se.sort(oe)},xe._addAlgorithm(function(pe,Ce,qe){for(var Ke,Ve=pe.key;ye(Ve);)if(++de===se.length)return Ce(qe),!1;return!ie(Ke=Ve)&&!le(Ke)||(x._cmp(Ve,se[de][1])===0||x._cmp(Ve,se[de][0])===0||Ce(function(){ee===N?pe.continue(se[de][0]):pe.continue(se[de][1])}),!1)}),xe},cn.prototype.startsWithAnyOf=function(){var d=ae.apply($,arguments);return d.every(function(p){return typeof p=="string"})?d.length===0?or(this):this.inAnyRange(d.map(function(p){return[p,p+fa]})):ha(this,"startsWithAnyOf() only works with strings")};var Ur=cn;function cn(){}function Ra(d){return Pt(function(p){return Dr(p),d(p.target.error),!1})}function Dr(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var os="storagemutated",Mr="x-storagemutated-1",Fn=_n(null,os),Vl=(la.prototype._lock=function(){return z(!$e.global),++this._reculock,this._reculock!==1||$e.global||($e.lockOwnerFor=this),this},la.prototype._unlock=function(){if(z(!$e.global),--this._reculock==0)for($e.global||($e.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{ia(d[1],d[0])}catch{}}return this},la.prototype._locked=function(){return this._reculock&&$e.lockOwnerFor!==this},la.prototype.create=function(d){var p=this;if(this.mode){var x=this.db.idbdb,S=this.db._state.dbOpenError;if(z(!this.idbtrans),!d&&!x)switch(S&&S.name){case"DatabaseClosedError":throw new Ue.DatabaseClosed(S);case"MissingAPIError":throw new Ue.MissingAPI(S.message,S);default:throw new Ue.OpenFailed(S)}if(!this.active)throw new Ue.TransactionInactive;z(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||x).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(N){Dr(N),p._reject(d.error)}),d.onabort=Pt(function(N){Dr(N),p.active&&p._reject(new Ue.Abort(d.error)),p.active=!1,p.on("abort").fire(N)}),d.oncomplete=Pt(function(){p.active=!1,p._resolve(),"mutatedParts"in d&&Fn.storagemutated.fire(d.mutatedParts)})}return this},la.prototype._promise=function(d,p,x){var S,N=this;return d==="readwrite"&&this.mode!=="readwrite"?Ht(new Ue.ReadOnly("Transaction is readonly")):this.active?this._locked()?new He(function(C,P){N._blockedFuncs.push([function(){N._promise(d,p,x).then(C,P)},$e])}):x?Vt(function(){var C=new He(function(P,V){N._lock();var re=p(P,V,N);re&&re.then&&re.then(P,V)});return C.finally(function(){return N._unlock()}),C._lib=!0,C}):((S=new He(function(C,P){var V=p(C,P,N);V&&V.then&&V.then(C,P)}))._lib=!0,S):Ht(new Ue.TransactionInactive)},la.prototype._root=function(){return this.parent?this.parent._root():this},la.prototype.waitFor=function(d){var p,x=this._root(),S=He.resolve(d),N=(x._waitingFor?x._waitingFor=x._waitingFor.then(function(){return S}):(x._waitingFor=S,x._waitingQueue=[],p=x.idbtrans.objectStore(x.storeNames[0]),(function C(){for(++x._spinCount;x._waitingQueue.length;)x._waitingQueue.shift()();x._waitingFor&&(p.get(-1/0).onsuccess=C)})()),x._waitingFor);return new He(function(C,P){S.then(function(V){return x._waitingQueue.push(Pt(C.bind(null,V)))},function(V){return x._waitingQueue.push(Pt(P.bind(null,V)))}).finally(function(){x._waitingFor===N&&(x._waitingFor=null)})})},la.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ue.Abort))},la.prototype.table=function(d){var p=this._memoizedTables||(this._memoizedTables={});if(w(p,d))return p[d];var x=this.schema[d];if(x)return(x=new this.db.Table(d,x,this)).core=this.db.core.table(d),p[d]=x;throw new Ue.NotFound("Table "+d+" not part of transaction")},la);function la(){}function Ya(d,p,x,S,N,C,P,V){return{name:d,keyPath:p,unique:x,multi:S,auto:N,compound:C,src:(x&&!P?"&":"")+(S?"*":"")+(N?"++":"")+Di(p),type:V}}function Di(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function cs(d,p,x){return{name:d,primKey:p,indexes:x,mappedClass:null,idxByName:(S=function(N){return[N.name,N]},x.reduce(function(N,C,P){return C=S(C,P),C&&(N[C[0]]=C[1]),N},{}))};var S}var us=function(d){try{return d.only([[]]),us=function(){return[[]]},[[]]}catch{return us=function(){return fa},fa}};function ds(d){return d==null?function(){}:typeof d=="string"?(p=d).split(".").length===1?function(x){return x[p]}:function(x){return K(x,p)}:function(x){return K(x,d)};var p}function ei(d){return[].slice.call(d)}var hc=0;function Rn(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function zr(d,p,re){function S(ie){if(ie.type===3)return null;if(ie.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ee=ie.lower,oe=ie.upper,de=ie.lowerOpen,ie=ie.upperOpen;return ee===void 0?oe===void 0?null:p.upperBound(oe,!!ie):oe===void 0?p.lowerBound(ee,!!de):p.bound(ee,oe,!!de,!!ie)}function N(se){var ee,oe=se.name;return{name:oe,schema:se,mutate:function(de){var ie=de.trans,le=de.type,ye=de.keys,xe=de.values,pe=de.range;return new Promise(function(Ce,qe){Ce=Pt(Ce);var Ke=ie.objectStore(oe),Ve=Ke.keyPath==null,Le=le==="put"||le==="add";if(!Le&&le!=="delete"&&le!=="deleteRange")throw new Error("Invalid operation type: "+le);var Xe,Ge=(ye||xe||{length:1}).length;if(ye&&xe&&ye.length!==xe.length)throw new Error("Given keys array must have same length as given values array.");if(Ge===0)return Ce({numFailures:0,failures:{},results:[],lastResult:void 0});function Ie(Kt){++At,Dr(Kt)}var Je=[],pt=[],At=0;if(le==="deleteRange"){if(pe.type===4)return Ce({numFailures:At,failures:pt,results:[],lastResult:void 0});pe.type===3?Je.push(Xe=Ke.clear()):Je.push(Xe=Ke.delete(S(pe)))}else{var Ve=Le?Ve?[xe,ye]:[xe,null]:[ye,null],ot=Ve[0],wt=Ve[1];if(Le)for(var Jt=0;Jt<Ge;++Jt)Je.push(Xe=wt&&wt[Jt]!==void 0?Ke[le](ot[Jt],wt[Jt]):Ke[le](ot[Jt])),Xe.onerror=Ie;else for(Jt=0;Jt<Ge;++Jt)Je.push(Xe=Ke[le](ot[Jt])),Xe.onerror=Ie}function ca(Kt){Kt=Kt.target.result,Je.forEach(function(xr,ys){return xr.error!=null&&(pt[ys]=xr.error)}),Ce({numFailures:At,failures:pt,results:le==="delete"?ye:Je.map(function(xr){return xr.result}),lastResult:Kt})}Xe.onerror=function(Kt){Ie(Kt),ca(Kt)},Xe.onsuccess=ca})},getMany:function(de){var ie=de.trans,le=de.keys;return new Promise(function(ye,xe){ye=Pt(ye);for(var pe,Ce=ie.objectStore(oe),qe=le.length,Ke=new Array(qe),Ve=0,Le=0,Xe=function(Je){Je=Je.target,Ke[Je._pos]=Je.result,++Le===Ve&&ye(Ke)},Ge=Ra(xe),Ie=0;Ie<qe;++Ie)le[Ie]!=null&&((pe=Ce.get(le[Ie]))._pos=Ie,pe.onsuccess=Xe,pe.onerror=Ge,++Ve);Ve===0&&ye(Ke)})},get:function(de){var ie=de.trans,le=de.key;return new Promise(function(ye,xe){ye=Pt(ye);var pe=ie.objectStore(oe).get(le);pe.onsuccess=function(Ce){return ye(Ce.target.result)},pe.onerror=Ra(xe)})},query:(ee=V,function(de){return new Promise(function(ie,le){ie=Pt(ie);var ye,xe,pe,Le=de.trans,Ce=de.values,qe=de.limit,Ve=de.query,Ke=qe===1/0?void 0:qe,Xe=Ve.index,Ve=Ve.range,Le=Le.objectStore(oe),Le=Xe.isPrimaryKey?Le:Le.index(Xe.name),Xe=S(Ve);if(qe===0)return ie({result:[]});ee?((Ve=Ce?Le.getAll(Xe,Ke):Le.getAllKeys(Xe,Ke)).onsuccess=function(Ge){return ie({result:Ge.target.result})},Ve.onerror=Ra(le)):(ye=0,xe=!Ce&&"openKeyCursor"in Le?Le.openKeyCursor(Xe):Le.openCursor(Xe),pe=[],xe.onsuccess=function(Ge){var Ie=xe.result;return!Ie||(pe.push(Ce?Ie.value:Ie.primaryKey),++ye===qe)?ie({result:pe}):void Ie.continue()},xe.onerror=Ra(le))})}),openCursor:function(de){var ie=de.trans,le=de.values,ye=de.query,xe=de.reverse,pe=de.unique;return new Promise(function(Ce,qe){Ce=Pt(Ce);var Le=ye.index,Ke=ye.range,Ve=ie.objectStore(oe),Ve=Le.isPrimaryKey?Ve:Ve.index(Le.name),Le=xe?pe?"prevunique":"prev":pe?"nextunique":"next",Xe=!le&&"openKeyCursor"in Ve?Ve.openKeyCursor(S(Ke),Le):Ve.openCursor(S(Ke),Le);Xe.onerror=Ra(qe),Xe.onsuccess=Pt(function(Ge){var Ie,Je,pt,At,ot=Xe.result;ot?(ot.___id=++hc,ot.done=!1,Ie=ot.continue.bind(ot),Je=(Je=ot.continuePrimaryKey)&&Je.bind(ot),pt=ot.advance.bind(ot),At=function(){throw new Error("Cursor not stopped")},ot.trans=ie,ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=function(){throw new Error("Cursor not started")},ot.fail=Pt(qe),ot.next=function(){var wt=this,Jt=1;return this.start(function(){return Jt--?wt.continue():wt.stop()}).then(function(){return wt})},ot.start=function(wt){function Jt(){if(Xe.result)try{wt()}catch(Kt){ot.fail(Kt)}else ot.done=!0,ot.start=function(){throw new Error("Cursor behind last entry")},ot.stop()}var ca=new Promise(function(Kt,xr){Kt=Pt(Kt),Xe.onerror=Ra(xr),ot.fail=xr,ot.stop=function(ys){ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=At,Kt(ys)}});return Xe.onsuccess=Pt(function(Kt){Xe.onsuccess=Jt,Jt()}),ot.continue=Ie,ot.continuePrimaryKey=Je,ot.advance=pt,Jt(),ca},Ce(ot)):Ce(null)},qe)})},count:function(de){var ie=de.query,le=de.trans,ye=ie.index,xe=ie.range;return new Promise(function(pe,Ce){var qe=le.objectStore(oe),qe=ye.isPrimaryKey?qe:qe.index(ye.name),Ke=S(xe),Ke=Ke?qe.count(Ke):qe.count();Ke.onsuccess=Pt(function(Ve){return pe(Ve.target.result)}),Ke.onerror=Ra(Ce)})}}}C=re,P=ei((re=d).objectStoreNames);var C,re={schema:{name:re.name,tables:P.map(function(se){return C.objectStore(se)}).map(function(se){var ee=se.keyPath,oe=se.autoIncrement,ie=m(ee),de={},ie={name:se.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ee==null,compound:ie,keyPath:ee,autoIncrement:oe,unique:!0,extractKey:ds(ee)},indexes:ei(se.indexNames).map(function(le){return se.index(le)}).map(function(pe){var Ce=pe.name,ye=pe.unique,xe=pe.multiEntry,pe=pe.keyPath,Ce={name:Ce,compound:m(pe),keyPath:pe,unique:ye,multiEntry:xe,extractKey:ds(pe)};return de[Rn(pe)]=Ce}),getIndexByKeyPath:function(le){return de[Rn(le)]}};return de[":id"]=ie.primaryKey,ee!=null&&(de[Rn(ee)]=ie.primaryKey),ie})},hasGetAll:0<P.length&&"getAll"in C.objectStore(P[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},P=re.schema,V=re.hasGetAll,re=P.tables.map(N),ge={};return re.forEach(function(se){return ge[se.name]=se}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(se){if(ge[se])return ge[se];throw new Error("Table '".concat(se,"' not found"))},MIN_KEY:-1/0,MAX_KEY:us(p),schema:P}}function Mi(d,p,x,S){return x=x.IDBKeyRange,p=zr(p,x,S),{dbcore:d.dbcore.reduce(function(N,C){return C=C.create,i(i({},N),C(N))},p)}}function vr(d,p){var x=p.db,x=Mi(d._middlewares,x,d._deps,p);d.core=x.dbcore,d.tables.forEach(function(S){var N=S.name;d.core.schema.tables.some(function(C){return C.name===N})&&(S.core=d.core.table(N),d[N]instanceof d.Table)&&(d[N].core=S.core)})}function zi(d,p,x,S){x.forEach(function(N){var C=S[N];p.forEach(function(P){var V=(function re(ge,se){return H(ge,se)||(ge=b(ge))&&re(ge,se)})(P,N);(!V||"value"in V&&V.value===void 0)&&(P===d.Transaction.prototype||P instanceof d.Transaction?E(P,N,{get:function(){return this.table(N)},set:function(re){k(this,N,{value:re,writable:!0,configurable:!0,enumerable:!0})}}):P[N]=new d.Table(N,C))})})}function ti(d,p){p.forEach(function(x){for(var S in x)x[S]instanceof d.Table&&delete x[S]})}function Fl(d,p){return d._cfg.version-p._cfg.version}function ni(d,p,x,S){var N=d._dbSchema,C=(x.objectStoreNames.contains("$meta")&&!N.$meta&&(N.$meta=cs("$meta",gc("")[0],[]),d._storeNames.push("$meta")),d._createTransaction("readwrite",d._storeNames,N)),P=(C.create(x),C._completion.catch(S),C._reject.bind(C)),V=$e.transless||$e;Vt(function(){if($e.trans=C,$e.transless=V,p!==0)return vr(d,x),ge=p,((re=C).storeNames.includes("$meta")?re.table("$meta").get("version").then(function(se){return se??ge}):He.resolve(ge)).then(function(ye){var ee=d,oe=ye,de=C,ie=x,le=[],ye=ee._versions,xe=ee._dbSchema=fs(0,ee.idbdb,ie);return(ye=ye.filter(function(pe){return pe._cfg.version>=oe})).length===0?He.resolve():(ye.forEach(function(pe){le.push(function(){var Ce,qe,Ke,Ve=xe,Le=pe._cfg.dbschema,Xe=(Bi(ee,Ve,ie),Bi(ee,Le,ie),xe=ee._dbSchema=Le,Li(Ve,Le)),Ge=(Xe.add.forEach(function(Ie){Gl(ie,Ie[0],Ie[1].primKey,Ie[1].indexes)}),Xe.change.forEach(function(Ie){if(Ie.recreate)throw new Ue.Upgrade("Not yet support for changing primary key");var Je=ie.objectStore(Ie.name);Ie.add.forEach(function(pt){return Ii(Je,pt)}),Ie.change.forEach(function(pt){Je.deleteIndex(pt.name),Ii(Je,pt)}),Ie.del.forEach(function(pt){return Je.deleteIndex(pt)})}),pe._cfg.contentUpgrade);if(Ge&&pe._cfg.version>oe)return vr(ee,ie),de._memoizedTables={},Ce=O(Le),Xe.del.forEach(function(Ie){Ce[Ie]=Ve[Ie]}),ti(ee,[ee.Transaction.prototype]),zi(ee,[ee.Transaction.prototype],f(Ce),Ce),de.schema=Ce,(qe=I(Ge))&&mn(),Le=He.follow(function(){var Ie;(Ke=Ge(de))&&qe&&(Ie=Xn.bind(null,null),Ke.then(Ie,Ie))}),Ke&&typeof Ke.then=="function"?He.resolve(Ke):Le.then(function(){return Ke})}),le.push(function(Ce){var qe,Ke,Ve=pe._cfg.dbschema;qe=Ve,Ke=Ce,[].slice.call(Ke.db.objectStoreNames).forEach(function(Le){return qe[Le]==null&&Ke.db.deleteObjectStore(Le)}),ti(ee,[ee.Transaction.prototype]),zi(ee,[ee.Transaction.prototype],ee._storeNames,ee._dbSchema),de.schema=ee._dbSchema}),le.push(function(Ce){ee.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ee.idbdb.version/10)===pe._cfg.version?(ee.idbdb.deleteObjectStore("$meta"),delete ee._dbSchema.$meta,ee._storeNames=ee._storeNames.filter(function(qe){return qe!=="$meta"})):Ce.objectStore("$meta").put(pe._cfg.version,"version"))})}),(function pe(){return le.length?He.resolve(le.shift()(de.idbtrans)).then(pe):He.resolve()})().then(function(){mc(xe,ie)}))}).catch(P);var re,ge;f(N).forEach(function(se){Gl(x,se,N[se].primKey,N[se].indexes)}),vr(d,x),He.follow(function(){return d.on.populate.fire(C)}).catch(P)})}function qi(d,p){mc(d._dbSchema,p),p.db.version%10!=0||p.objectStoreNames.contains("$meta")||p.db.createObjectStore("$meta").add(Math.ceil(p.db.version/10-1),"version");var x=fs(0,d.idbdb,p);Bi(d,d._dbSchema,p);for(var S=0,N=Li(x,d._dbSchema).change;S<N.length;S++){var C=(P=>{if(P.change.length||P.recreate)return console.warn("Unable to patch indexes of table ".concat(P.name," because it has changes on the type of index or primary key.")),{value:void 0};var V=p.objectStore(P.name);P.add.forEach(function(re){ct&&console.debug("Dexie upgrade patch: Creating missing index ".concat(P.name,".").concat(re.src)),Ii(V,re)})})(N[S]);if(typeof C=="object")return C.value}}function Li(d,p){var x,S={del:[],add:[],change:[]};for(x in d)p[x]||S.del.push(x);for(x in p){var N=d[x],C=p[x];if(N){var P={name:x,def:C,recreate:!1,del:[],add:[],change:[]};if(""+(N.primKey.keyPath||"")!=""+(C.primKey.keyPath||"")||N.primKey.auto!==C.primKey.auto)P.recreate=!0,S.change.push(P);else{var V=N.idxByName,re=C.idxByName,ge=void 0;for(ge in V)re[ge]||P.del.push(ge);for(ge in re){var se=V[ge],ee=re[ge];se?se.src!==ee.src&&P.change.push(ee):P.add.push(ee)}(0<P.del.length||0<P.add.length||0<P.change.length)&&S.change.push(P)}}else S.add.push([x,C])}return S}function Gl(d,p,x,S){var N=d.db.createObjectStore(p,x.keyPath?{keyPath:x.keyPath,autoIncrement:x.auto}:{autoIncrement:x.auto});S.forEach(function(C){return Ii(N,C)})}function mc(d,p){f(d).forEach(function(x){p.db.objectStoreNames.contains(x)||(ct&&console.debug("Dexie: Creating missing table",x),Gl(p,x,d[x].primKey,d[x].indexes))})}function Ii(d,p){d.createIndex(p.name,p.keyPath,{unique:p.unique,multiEntry:p.multi})}function fs(d,p,x){var S={};return W(p.objectStoreNames,0).forEach(function(N){for(var C=x.objectStore(N),P=Ya(Di(ge=C.keyPath),ge||"",!0,!1,!!C.autoIncrement,ge&&typeof ge!="string",!0),V=[],re=0;re<C.indexNames.length;++re){var se=C.index(C.indexNames[re]),ge=se.keyPath,se=Ya(se.name,ge,!!se.unique,!!se.multiEntry,!1,ge&&typeof ge!="string",!1);V.push(se)}S[N]=cs(N,P,V)}),S}function Bi(d,p,x){for(var S=x.db.objectStoreNames,N=0;N<S.length;++N){var C=S[N],P=x.objectStore(C);d._hasGetAll="getAll"in P;for(var V=0;V<P.indexNames.length;++V){var re,ge=P.indexNames[V],se=P.index(ge).keyPath,se=typeof se=="string"?se:"["+W(se).join("+")+"]";p[C]&&(re=p[C].idxByName[se])&&(re.name=ge,delete p[C].idxByName[se],p[C].idxByName[ge]=re)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&c.WorkerGlobalScope&&c instanceof c.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function gc(d){return d.split(",").map(function(p,x){var N=p.split(":"),S=(S=N[1])==null?void 0:S.trim(),N=(p=N[0].trim()).replace(/([&*]|\+\+)/g,""),C=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Ya(N,C||null,/\&/.test(p),/\*/.test(p),/\+\+/.test(p),m(C),x===0,S)})}hs.prototype._createTableSchema=cs,hs.prototype._parseIndexSyntax=gc,hs.prototype._parseStoresSpec=function(d,p){var x=this;f(d).forEach(function(S){if(d[S]!==null){var N=x._parseIndexSyntax(d[S]),C=N.shift();if(!C)throw new Ue.Schema("Invalid schema for table "+S+": "+d[S]);if(C.unique=!0,C.multi)throw new Ue.Schema("Primary key cannot be multiEntry*");N.forEach(function(P){if(P.auto)throw new Ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!P.keyPath)throw new Ue.Schema("Index must have a name and cannot be an empty string")}),C=x._createTableSchema(S,C,N),p[S]=C}})},hs.prototype.stores=function(x){var p=this.db,x=(this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,x):x,p._versions),S={},N={};return x.forEach(function(C){y(S,C._cfg.storesSource),N=C._cfg.dbschema={},C._parseStoresSpec(S,N)}),p._dbSchema=N,ti(p,[p._allTables,p,p.Transaction.prototype]),zi(p,[p._allTables,p,p.Transaction.prototype,this._cfg.tables],f(N),N),p._storeNames=f(N),this},hs.prototype.upgrade=function(d){return this._cfg.contentUpgrade=yt(this._cfg.contentUpgrade||at,d),this};var gd=hs;function hs(){}function Yl(d,p){var x=d._dbNamesDB;return x||(x=d._dbNamesDB=new Qa(Tr,{addons:[],indexedDB:d,IDBKeyRange:p})).version(1).stores({dbnames:"name"}),x.table("dbnames")}function Pi(d){return d&&typeof d.databases=="function"}function Ql(d){return Vt(function(){return $e.letThrough=!0,d()})}function Xl(d){return!("from"in d)}var Gn=function(d,p){var x;if(!this)return x=new Gn,d&&"d"in d&&y(x,d),x;y(this,arguments.length?{d:1,from:d,to:1<arguments.length?p:d}:{d:0})};function ai(d,p,x){var S=St(p,x);if(!isNaN(S)){if(0<S)throw RangeError();if(Xl(d))return y(d,{from:p,to:x,d:1});var S=d.l,N=d.r;if(St(x,d.from)<0)return S?ai(S,p,x):d.l={from:p,to:x,d:1,l:null,r:null},yc(d);if(0<St(p,d.to))return N?ai(N,p,x):d.r={from:p,to:x,d:1,l:null,r:null},yc(d);St(p,d.from)<0&&(d.from=p,d.l=null,d.d=N?N.d+1:1),0<St(x,d.to)&&(d.to=x,d.r=null,d.d=d.l?d.l.d+1:1),p=!d.r,S&&!d.l&&qr(d,S),N&&p&&qr(d,N)}}function qr(d,p){Xl(p)||(function x(S,N){var C=N.from,P=N.l,V=N.r;ai(S,C,N.to),P&&x(S,P),V&&x(S,V)})(d,p)}function pc(d,p){var x=Hi(p),S=x.next();if(!S.done)for(var N=S.value,C=Hi(d),P=C.next(N.from),V=P.value;!S.done&&!P.done;){if(St(V.from,N.to)<=0&&0<=St(V.to,N.from))return!0;St(N.from,V.from)<0?N=(S=x.next(V.from)).value:V=(P=C.next(N.from)).value}return!1}function Hi(d){var p=Xl(d)?null:{s:0,n:d};return{next:function(x){for(var S=0<arguments.length;p;)switch(p.s){case 0:if(p.s=1,S)for(;p.n.l&&St(x,p.n.from)<0;)p={up:p,n:p.n.l,s:1};else for(;p.n.l;)p={up:p,n:p.n.l,s:1};case 1:if(p.s=2,!S||St(x,p.n.to)<=0)return{value:p.n,done:!1};case 2:if(p.n.r){p.s=3,p={up:p,n:p.n.r,s:0};continue}case 3:p=p.up}return{done:!0}}}}function yc(d){var p,x,S,N=(((N=d.r)==null?void 0:N.d)||0)-(((N=d.l)==null?void 0:N.d)||0),N=1<N?"r":N<-1?"l":"";N&&(p=N=="r"?"l":"r",x=i({},d),S=d[N],d.from=S.from,d.to=S.to,d[N]=S[N],x[N]=S[p],(d[p]=x).d=Jl(x)),d.d=Jl(d)}function Jl(x){var p=x.r,x=x.l;return(p?x?Math.max(p.d,x.d):p.d:x?x.d:0)+1}function $i(d,p){return f(p).forEach(function(x){d[x]?qr(d[x],p[x]):d[x]=(function S(N){var C,P,V={};for(C in N)w(N,C)&&(P=N[C],V[C]=!P||typeof P!="object"||F.has(P.constructor)?P:S(P));return V})(p[x])}),d}function Wl(d,p){return d.all||p.all||Object.keys(d).some(function(x){return p[x]&&pc(p[x],d[x])})}_(Gn.prototype,((mt={add:function(d){return qr(this,d),this},addKey:function(d){return ai(this,d,d),this},addKeys:function(d){var p=this;return d.forEach(function(x){return ai(p,x,x)}),this},hasKey:function(d){var p=Hi(this).next(d).value;return p&&St(p.from,d)<=0&&0<=St(p.to,d)}})[A]=function(){return Hi(this)},mt));var Lr={},Zl={},eo=!1;function Ki(d){$i(Zl,d),eo||(eo=!0,setTimeout(function(){eo=!1,to(Zl,!(Zl={}))},0))}function to(d,p){p===void 0&&(p=!1);var x=new Set;if(d.all)for(var S=0,N=Object.values(Lr);S<N.length;S++)vc(V=N[S],d,x,p);else for(var C in d){var P,V,C=/^idb\:\/\/(.*)\/(.*)\//.exec(C);C&&(P=C[1],C=C[2],V=Lr["idb://".concat(P,"/").concat(C)])&&vc(V,d,x,p)}x.forEach(function(re){return re()})}function vc(d,p,x,S){for(var N=[],C=0,P=Object.entries(d.queries.query);C<P.length;C++){for(var V=P[C],re=V[0],ge=[],se=0,ee=V[1];se<ee.length;se++){var oe=ee[se];Wl(p,oe.obsSet)?oe.subscribers.forEach(function(ye){return x.add(ye)}):S&&ge.push(oe)}S&&N.push([re,ge])}if(S)for(var de=0,ie=N;de<ie.length;de++){var le=ie[de],re=le[0],ge=le[1];d.queries.query[re]=ge}}function pd(d){var p=d._state,x=d._deps.indexedDB;if(p.isBeingOpened||d.idbdb)return p.dbReadyPromise.then(function(){return p.dbOpenError?Ht(p.dbOpenError):d});p.isBeingOpened=!0,p.dbOpenError=null,p.openComplete=!1;var S=p.openCanceller,N=Math.round(10*d.verno),C=!1;function P(){if(p.openCanceller!==S)throw new Ue.DatabaseClosed("db.open() was cancelled")}function V(){return new He(function(oe,de){if(P(),!x)throw new Ue.MissingAPI;var ie=d.name,le=p.autoSchema||!N?x.open(ie):x.open(ie,N);if(!le)throw new Ue.MissingAPI;le.onerror=Ra(de),le.onblocked=Pt(d._fireOnBlocked),le.onupgradeneeded=Pt(function(ye){var xe;se=le.transaction,p.autoSchema&&!d._options.allowEmptyDB?(le.onerror=Dr,se.abort(),le.result.close(),(xe=x.deleteDatabase(ie)).onsuccess=xe.onerror=Pt(function(){de(new Ue.NoSuchDatabase("Database ".concat(ie," doesnt exist")))})):(se.onerror=Ra(de),xe=ye.oldVersion>Math.pow(2,62)?0:ye.oldVersion,ee=xe<1,d.idbdb=le.result,C&&qi(d,se),ni(d,xe/10,se,de))},de),le.onsuccess=Pt(function(){se=null;var ye,xe,pe,Ce,qe,Ke,Ve=d.idbdb=le.result,Le=W(Ve.objectStoreNames);if(0<Le.length)try{var Xe=Ve.transaction((qe=Le).length===1?qe[0]:qe,"readonly");if(p.autoSchema)Ke=Ve,Ce=Xe,(pe=d).verno=Ke.version/10,Ce=pe._dbSchema=fs(0,Ke,Ce),pe._storeNames=W(Ke.objectStoreNames,0),zi(pe,[pe._allTables],f(Ce),Ce);else if(Bi(d,d._dbSchema,Xe),xe=Xe,((xe=Li(fs(0,(ye=d).idbdb,xe),ye._dbSchema)).add.length||xe.change.some(function(Ge){return Ge.add.length||Ge.change.length}))&&!C)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ve.close(),N=Ve.version+1,C=!0,oe(V());vr(d,Xe)}catch{}Ca.push(d),Ve.onversionchange=Pt(function(Ge){p.vcFired=!0,d.on("versionchange").fire(Ge)}),Ve.onclose=Pt(function(){d.close({disableAutoOpen:!1})}),ee&&(Le=d._deps,qe=ie,Pi(Ke=Le.indexedDB)||qe===Tr||Yl(Ke,Le.IDBKeyRange).put({name:qe}).catch(at)),oe()},de)}).catch(function(oe){switch(oe?.name){case"UnknownError":if(0<p.PR1398_maxLoop)return p.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),V();break;case"VersionError":if(0<N)return N=0,V()}return He.reject(oe)})}var re,ge=p.dbReadyResolve,se=null,ee=!1;return He.race([S,(typeof navigator>"u"?He.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(oe){function de(){return indexedDB.databases().finally(oe)}re=setInterval(de,100),de()}).finally(function(){return clearInterval(re)}):Promise.resolve()).then(V)]).then(function(){return P(),p.onReadyBeingFired=[],He.resolve(Ql(function(){return d.on.ready.fire(d.vip)})).then(function oe(){var de;if(0<p.onReadyBeingFired.length)return de=p.onReadyBeingFired.reduce(yt,at),p.onReadyBeingFired=[],He.resolve(Ql(function(){return de(d.vip)})).then(oe)})}).finally(function(){p.openCanceller===S&&(p.onReadyBeingFired=null,p.isBeingOpened=!1)}).catch(function(oe){p.dbOpenError=oe;try{se&&se.abort()}catch{}return S===p.openCanceller&&d._close(),Ht(oe)}).finally(function(){p.openComplete=!0,ge()}).then(function(){var oe;return ee&&(oe={},d.tables.forEach(function(de){de.schema.indexes.forEach(function(ie){ie.name&&(oe["idb://".concat(d.name,"/").concat(de.name,"/").concat(ie.name)]=new Gn(-1/0,[[[]]]))}),oe["idb://".concat(d.name,"/").concat(de.name,"/")]=oe["idb://".concat(d.name,"/").concat(de.name,"/:dels")]=new Gn(-1/0,[[[]]])}),Fn(os).fire(oe),to(oe,!0)),d})}function ri(d){function p(C){return d.next(C)}var x=N(p),S=N(function(C){return d.throw(C)});function N(C){return function(V){var V=C(V),re=V.value;return V.done?re:re&&typeof re.then=="function"?re.then(x,S):m(re)?Promise.all(re).then(x,S):x(re)}}return N(p)()}function br(d,p,x){for(var S=m(d)?d.slice():[d],N=0;N<x;++N)S.push(p);return S}var yd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return i(i({},d),{table:function(S){var x=d.table(S),S=x.schema,N={},C=[];function P(oe,de,ie){var pe=Rn(oe),le=N[pe]=N[pe]||[],ye=oe==null?0:typeof oe=="string"?1:oe.length,xe=0<de,pe=i(i({},ie),{name:xe?"".concat(pe,"(virtual-from:").concat(ie.name,")"):ie.name,lowLevelIndex:ie,isVirtual:xe,keyTail:de,keyLength:ye,extractKey:ds(oe),unique:!xe&&ie.unique});return le.push(pe),pe.isPrimaryKey||C.push(pe),1<ye&&P(ye===2?oe[0]:oe.slice(0,ye-1),de+1,ie),le.sort(function(Ce,qe){return Ce.keyTail-qe.keyTail}),pe}var V=P(S.primaryKey.keyPath,0,S.primaryKey);N[":id"]=[V];for(var re=0,ge=S.indexes;re<ge.length;re++){var se=ge[re];P(se.keyPath,0,se)}function ee(oe){var de,ie=oe.query.index;return ie.isVirtual?i(i({},oe),{query:{index:ie.lowLevelIndex,range:(de=oe.query.range,ie=ie.keyTail,{type:de.type===1?2:de.type,lower:br(de.lower,de.lowerOpen?d.MAX_KEY:d.MIN_KEY,ie),lowerOpen:!0,upper:br(de.upper,de.upperOpen?d.MIN_KEY:d.MAX_KEY,ie),upperOpen:!0})}}):oe}return i(i({},x),{schema:i(i({},S),{primaryKey:V,indexes:C,getIndexByKeyPath:function(oe){return(oe=N[Rn(oe)])&&oe[0]}}),count:function(oe){return x.count(ee(oe))},query:function(oe){return x.query(ee(oe))},openCursor:function(oe){var de=oe.query.index,ie=de.keyTail,le=de.keyLength;return de.isVirtual?x.openCursor(ee(oe)).then(function(xe){return xe&&ye(xe)}):x.openCursor(oe);function ye(xe){return Object.create(xe,{continue:{value:function(pe){pe!=null?xe.continue(br(pe,oe.reverse?d.MAX_KEY:d.MIN_KEY,ie)):oe.unique?xe.continue(xe.key.slice(0,le).concat(oe.reverse?d.MIN_KEY:d.MAX_KEY,ie)):xe.continue()}},continuePrimaryKey:{value:function(pe,Ce){xe.continuePrimaryKey(br(pe,d.MAX_KEY,ie),Ce)}},primaryKey:{get:function(){return xe.primaryKey}},key:{get:function(){var pe=xe.key;return le===1?pe[0]:pe.slice(0,le)}},value:{get:function(){return xe.value}}})}}})}})}};function Vi(d,p,x,S){return x=x||{},S=S||"",f(d).forEach(function(N){var C,P,V;w(p,N)?(C=d[N],P=p[N],typeof C=="object"&&typeof P=="object"&&C&&P?(V=J(C))!==J(P)?x[S+N]=p[N]:V==="Object"?Vi(C,P,x,S+N+"."):C!==P&&(x[S+N]=p[N]):C!==P&&(x[S+N]=p[N])):x[S+N]=void 0}),f(p).forEach(function(N){w(d,N)||(x[S+N]=p[N])}),x}function Fi(d,p){return p.type==="delete"?p.keys:p.keys||p.values.map(d.extractKey)}var bc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return i(i({},d),{table:function(p){var x=d.table(p),S=x.schema.primaryKey;return i(i({},x),{mutate:function(N){var C=$e.trans,P=C.table(p).hook,V=P.deleting,re=P.creating,ge=P.updating;switch(N.type){case"add":if(re.fire===at)break;return C._promise("readwrite",function(){return se(N)},!0);case"put":if(re.fire===at&&ge.fire===at)break;return C._promise("readwrite",function(){return se(N)},!0);case"delete":if(V.fire===at)break;return C._promise("readwrite",function(){return se(N)},!0);case"deleteRange":if(V.fire===at)break;return C._promise("readwrite",function(){return(function ee(oe,de,ie){return x.query({trans:oe,values:!1,query:{index:S,range:de},limit:ie}).then(function(le){var ye=le.result;return se({type:"delete",keys:ye,trans:oe}).then(function(xe){return 0<xe.numFailures?Promise.reject(xe.failures[0]):ye.length<ie?{failures:[],numFailures:0,lastResult:void 0}:ee(oe,i(i({},de),{lower:ye[ye.length-1],lowerOpen:!0}),ie)})})})(N.trans,N.range,1e4)},!0)}return x.mutate(N);function se(ee){var oe,de,ie,le=$e.trans,ye=ee.keys||Fi(S,ee);if(ye)return(ee=ee.type==="add"||ee.type==="put"?i(i({},ee),{keys:ye}):i({},ee)).type!=="delete"&&(ee.values=l([],ee.values)),ee.keys&&(ee.keys=l([],ee.keys)),oe=x,ie=ye,((de=ee).type==="add"?Promise.resolve([]):oe.getMany({trans:de.trans,keys:ie,cache:"immutable"})).then(function(xe){var pe=ye.map(function(Ce,qe){var Ke,Ve,Le,Xe=xe[qe],Ge={onerror:null,onsuccess:null};return ee.type==="delete"?V.fire.call(Ge,Ce,Xe,le):ee.type==="add"||Xe===void 0?(Ke=re.fire.call(Ge,Ce,ee.values[qe],le),Ce==null&&Ke!=null&&(ee.keys[qe]=Ce=Ke,S.outbound||X(ee.values[qe],S.keyPath,Ce))):(Ke=Vi(Xe,ee.values[qe]),(Ve=ge.fire.call(Ge,Ke,Ce,Xe,le))&&(Le=ee.values[qe],Object.keys(Ve).forEach(function(Ie){w(Le,Ie)?Le[Ie]=Ve[Ie]:X(Le,Ie,Ve[Ie])}))),Ge});return x.mutate(ee).then(function(Ce){for(var qe=Ce.failures,Ke=Ce.results,Ve=Ce.numFailures,Ce=Ce.lastResult,Le=0;Le<ye.length;++Le){var Xe=(Ke||ye)[Le],Ge=pe[Le];Xe==null?Ge.onerror&&Ge.onerror(qe[Le]):Ge.onsuccess&&Ge.onsuccess(ee.type==="put"&&xe[Le]?ee.values[Le]:Xe)}return{failures:qe,results:Ke,numFailures:Ve,lastResult:Ce}}).catch(function(Ce){return pe.forEach(function(qe){return qe.onerror&&qe.onerror(Ce)}),Promise.reject(Ce)})});throw new Error("Keys missing")}}})}})}};function no(d,p,x){try{if(!p||p.keys.length<d.length)return null;for(var S=[],N=0,C=0;N<p.keys.length&&C<d.length;++N)St(p.keys[N],d[C])===0&&(S.push(x?ne(p.values[N]):p.values[N]),++C);return S.length===d.length?S:null}catch{return null}}var wc={stack:"dbcore",level:-1,create:function(d){return{table:function(p){var x=d.table(p);return i(i({},x),{getMany:function(S){var N;return S.cache?(N=no(S.keys,S.trans._cache,S.cache==="clone"))?He.resolve(N):x.getMany(S).then(function(C){return S.trans._cache={keys:S.keys,values:S.cache==="clone"?ne(C):C},C}):x.getMany(S)},mutate:function(S){return S.type!=="add"&&(S.trans._cache=null),x.mutate(S)}})}}}};function Ir(d,p){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!p.schema.primaryKey.outbound}function xc(d,p){switch(d){case"query":return p.values&&!p.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vd={stack:"dbcore",level:0,name:"Observability",create:function(d){var p=d.schema.name,x=new Gn(d.MIN_KEY,d.MAX_KEY);return i(i({},d),{transaction:function(S,N,C){if($e.subscr&&N!=="readonly")throw new Ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($e.querier));return d.transaction(S,N,C)},table:function(S){function N(ye){var le,ye=ye.query;return[le=ye.index,new Gn((le=(ye=ye.range).lower)!=null?le:d.MIN_KEY,(le=ye.upper)!=null?le:d.MAX_KEY)]}var C=d.table(S),P=C.schema,V=P.primaryKey,re=P.indexes,ge=V.extractKey,se=V.outbound,ee=V.autoIncrement&&re.filter(function(ie){return ie.compound&&ie.keyPath.includes(V.keyPath)}),oe=i(i({},C),{mutate:function(ie){function le(Je){return Je="idb://".concat(p,"/").concat(S,"/").concat(Je),qe[Je]||(qe[Je]=new Gn)}var ye,xe,pe,Ce=ie.trans,qe=ie.mutatedParts||(ie.mutatedParts={}),Ke=le(""),Ve=le(":dels"),Le=ie.type,Ge=ie.type==="deleteRange"?[ie.range]:ie.type==="delete"?[ie.keys]:ie.values.length<50?[Fi(V,ie).filter(function(Je){return Je}),ie.values]:[],Xe=Ge[0],Ge=Ge[1],Ie=ie.trans._cache;return m(Xe)?(Ke.addKeys(Xe),(Le=Le==="delete"||Xe.length===Ge.length?no(Xe,Ie):null)||Ve.addKeys(Xe),(Le||Ge)&&(ye=le,xe=Le,pe=Ge,P.indexes.forEach(function(Je){var pt=ye(Je.name||"");function At(wt){return wt!=null?Je.extractKey(wt):null}function ot(wt){Je.multiEntry&&m(wt)?wt.forEach(function(Jt){return pt.addKey(Jt)}):pt.addKey(wt)}(xe||pe).forEach(function(wt,Kt){var ca=xe&&At(xe[Kt]),Kt=pe&&At(pe[Kt]);St(ca,Kt)!==0&&(ca!=null&&ot(ca),Kt!=null)&&ot(Kt)})}))):Xe?(Ge={from:(Ie=Xe.lower)!=null?Ie:d.MIN_KEY,to:(Le=Xe.upper)!=null?Le:d.MAX_KEY},Ve.add(Ge),Ke.add(Ge)):(Ke.add(x),Ve.add(x),P.indexes.forEach(function(Je){return le(Je.name).add(x)})),C.mutate(ie).then(function(Je){return!Xe||ie.type!=="add"&&ie.type!=="put"||(Ke.addKeys(Je.results),ee&&ee.forEach(function(pt){for(var At=ie.values.map(function(ca){return pt.extractKey(ca)}),ot=pt.keyPath.findIndex(function(ca){return ca===V.keyPath}),wt=0,Jt=Je.results.length;wt<Jt;++wt)At[wt][ot]=Je.results[wt];le(pt.name).addKeys(At)})),Ce.mutatedParts=$i(Ce.mutatedParts||{},qe),Je})}}),de={get:function(ie){return[V,new Gn(ie.key)]},getMany:function(ie){return[V,new Gn().addKeys(ie.keys)]},count:N,query:N,openCursor:N};return f(de).forEach(function(ie){oe[ie]=function(le){var ye=$e.subscr,xe=!!ye,pe=Ir($e,C)&&xc(ie,le)?le.obsSet={}:ye;if(xe){var Ce,ye=function(Ge){return Ge="idb://".concat(p,"/").concat(S,"/").concat(Ge),pe[Ge]||(pe[Ge]=new Gn)},qe=ye(""),Ke=ye(":dels"),xe=de[ie](le),Ve=xe[0],xe=xe[1];if((ie==="query"&&Ve.isPrimaryKey&&!le.values?Ke:ye(Ve.name||"")).add(xe),!Ve.isPrimaryKey){if(ie!=="count")return Ce=ie==="query"&&se&&le.values&&C.query(i(i({},le),{values:!1})),C[ie].apply(this,arguments).then(function(Ge){if(ie==="query"){if(se&&le.values)return Ce.then(function(At){return At=At.result,qe.addKeys(At),Ge});var Ie=le.values?Ge.result.map(ge):Ge.result;(le.values?qe:Ke).addKeys(Ie)}else{var Je,pt;if(ie==="openCursor")return pt=le.values,(Je=Ge)&&Object.create(Je,{key:{get:function(){return Ke.addKey(Je.primaryKey),Je.key}},primaryKey:{get:function(){var At=Je.primaryKey;return Ke.addKey(At),At}},value:{get:function(){return pt&&qe.addKey(Je.primaryKey),Je.value}}})}return Ge});Ke.add(x)}}return C[ie].apply(this,arguments)}}),oe}})}};function _c(d,p,x){var S;return x.numFailures===0?p:p.type==="deleteRange"||(S=p.keys?p.keys.length:"values"in p&&p.values?p.values.length:1,x.numFailures===S)?null:(S=i({},p),m(S.keys)&&(S.keys=S.keys.filter(function(N,C){return!(C in x.failures)})),"values"in S&&m(S.values)&&(S.values=S.values.filter(function(N,C){return!(C in x.failures)})),S)}function Gi(d,p){return x=d,((S=p).lower===void 0||(S.lowerOpen?0<St(x,S.lower):0<=St(x,S.lower)))&&(x=d,(S=p).upper===void 0||(S.upperOpen?St(x,S.upper)<0:St(x,S.upper)<=0));var x,S}function ao(d,p,x,S,N,C){var P,V,re,ge,se,ee;return!x||x.length===0||(P=p.query.index,V=P.multiEntry,re=p.query.range,ge=S.schema.primaryKey.extractKey,se=P.extractKey,ee=(P.lowLevelIndex||P).extractKey,(S=x.reduce(function(oe,de){var ie=oe,le=[];if(de.type==="add"||de.type==="put")for(var ye=new Gn,xe=de.values.length-1;0<=xe;--xe){var pe,Ce=de.values[xe],qe=ge(Ce);!ye.hasKey(qe)&&(pe=se(Ce),V&&m(pe)?pe.some(function(Ge){return Gi(Ge,re)}):Gi(pe,re))&&(ye.addKey(qe),le.push(Ce))}switch(de.type){case"add":var Ke=new Gn().addKeys(p.values?oe.map(function(Ie){return ge(Ie)}):oe),ie=oe.concat(p.values?le.filter(function(Ie){return Ie=ge(Ie),!Ke.hasKey(Ie)&&(Ke.addKey(Ie),!0)}):le.map(function(Ie){return ge(Ie)}).filter(function(Ie){return!Ke.hasKey(Ie)&&(Ke.addKey(Ie),!0)}));break;case"put":var Ve=new Gn().addKeys(de.values.map(function(Ie){return ge(Ie)}));ie=oe.filter(function(Ie){return!Ve.hasKey(p.values?ge(Ie):Ie)}).concat(p.values?le:le.map(function(Ie){return ge(Ie)}));break;case"delete":var Le=new Gn().addKeys(de.keys);ie=oe.filter(function(Ie){return!Le.hasKey(p.values?ge(Ie):Ie)});break;case"deleteRange":var Xe=de.range;ie=oe.filter(function(Ie){return!Gi(ge(Ie),Xe)})}return ie},d))===d)?d:(S.sort(function(oe,de){return St(ee(oe),ee(de))||St(ge(oe),ge(de))}),p.limit&&p.limit<1/0&&(S.length>p.limit?S.length=p.limit:d.length===p.limit&&S.length<p.limit&&(N.dirty=!0)),C?Object.freeze(S):S)}function ms(d,p){return St(d.lower,p.lower)===0&&St(d.upper,p.upper)===0&&!!d.lowerOpen==!!p.lowerOpen&&!!d.upperOpen==!!p.upperOpen}function si(d,p){return((x,S,N,C)=>{if(x===void 0)return S!==void 0?-1:0;if(S===void 0)return 1;if((x=St(x,S))===0){if(N&&C)return 0;if(N)return 1;if(C)return-1}return x})(d.lower,p.lower,d.lowerOpen,p.lowerOpen)<=0&&0<=((x,S,N,C)=>{if(x===void 0)return S!==void 0?1:0;if(S===void 0)return-1;if((x=St(x,S))===0){if(N&&C)return 0;if(N)return-1;if(C)return 1}return x})(d.upper,p.upper,d.upperOpen,p.upperOpen)}function bd(d,p,x,S){d.subscribers.add(x),S.addEventListener("abort",function(){var N,C;d.subscribers.delete(x),d.subscribers.size===0&&(N=d,C=p,setTimeout(function(){N.subscribers.size===0&&Y(C,N)},3e3))})}var Yi={stack:"dbcore",level:0,name:"Cache",create:function(d){var p=d.schema.name;return i(i({},d),{transaction:function(x,S,N){var C,P,V=d.transaction(x,S,N);return S==="readwrite"&&(N=(C=new AbortController).signal,V.addEventListener("abort",(P=function(re){return function(){if(C.abort(),S==="readwrite"){for(var ge=new Set,se=0,ee=x;se<ee.length;se++){var oe=ee[se],de=Lr["idb://".concat(p,"/").concat(oe)];if(de){var ie=d.table(oe),le=de.optimisticOps.filter(function(Je){return Je.trans===V});if(V._explicit&&re&&V.mutatedParts)for(var ye=0,xe=Object.values(de.queries.query);ye<xe.length;ye++)for(var pe=0,Ce=(Ve=xe[ye]).slice();pe<Ce.length;pe++)Wl((Le=Ce[pe]).obsSet,V.mutatedParts)&&(Y(Ve,Le),Le.subscribers.forEach(function(Je){return ge.add(Je)}));else if(0<le.length){de.optimisticOps=de.optimisticOps.filter(function(Je){return Je.trans!==V});for(var qe=0,Ke=Object.values(de.queries.query);qe<Ke.length;qe++)for(var Ve,Le,Xe,Ge=0,Ie=(Ve=Ke[qe]).slice();Ge<Ie.length;Ge++)(Le=Ie[Ge]).res!=null&&V.mutatedParts&&(re&&!Le.dirty?(Xe=Object.isFrozen(Le.res),Xe=ao(Le.res,Le.req,le,ie,Le,Xe),Le.dirty?(Y(Ve,Le),Le.subscribers.forEach(function(Je){return ge.add(Je)})):Xe!==Le.res&&(Le.res=Xe,Le.promise=He.resolve({result:Xe}))):(Le.dirty&&Y(Ve,Le),Le.subscribers.forEach(function(Je){return ge.add(Je)})))}}}ge.forEach(function(Je){return Je()})}}})(!1),{signal:N}),V.addEventListener("error",P(!1),{signal:N}),V.addEventListener("complete",P(!0),{signal:N})),V},table:function(x){var S=d.table(x),N=S.schema.primaryKey;return i(i({},S),{mutate:function(C){var P,V=$e.trans;return!N.outbound&&V.db._options.cache!=="disabled"&&!V.explicit&&V.idbtrans.mode==="readwrite"&&(P=Lr["idb://".concat(p,"/").concat(x)])?(V=S.mutate(C),C.type!=="add"&&C.type!=="put"||!(50<=C.values.length||Fi(N,C).some(function(re){return re==null}))?(P.optimisticOps.push(C),C.mutatedParts&&Ki(C.mutatedParts),V.then(function(re){0<re.numFailures&&(Y(P.optimisticOps,C),(re=_c(0,C,re))&&P.optimisticOps.push(re),C.mutatedParts)&&Ki(C.mutatedParts)}),V.catch(function(){Y(P.optimisticOps,C),C.mutatedParts&&Ki(C.mutatedParts)})):V.then(function(re){var ge=_c(0,i(i({},C),{values:C.values.map(function(se,ee){var oe;return re.failures[ee]?se:(X(oe=(oe=N.keyPath)!=null&&oe.includes(".")?ne(se):i({},se),N.keyPath,re.results[ee]),oe)})}),re);P.optimisticOps.push(ge),queueMicrotask(function(){return C.mutatedParts&&Ki(C.mutatedParts)})}),V):S.mutate(C)},query:function(C){var P,V,re,ge,se,ee,oe;return Ir($e,S)&&xc("query",C)?(P=((re=$e.trans)==null?void 0:re.db._options.cache)==="immutable",V=(re=$e).requery,re=re.signal,ee=((de,ie,le,ye)=>{var xe=Lr["idb://".concat(de,"/").concat(ie)];if(!xe)return[];if(!(de=xe.queries[le]))return[null,!1,xe,null];var pe=de[(ye.query?ye.query.index.name:null)||""];if(!pe)return[null,!1,xe,null];switch(le){case"query":var Ce=pe.find(function(qe){return qe.req.limit===ye.limit&&qe.req.values===ye.values&&ms(qe.req.query.range,ye.query.range)});return Ce?[Ce,!0,xe,pe]:[pe.find(function(qe){return("limit"in qe.req?qe.req.limit:1/0)>=ye.limit&&(!ye.values||qe.req.values)&&si(qe.req.query.range,ye.query.range)}),!1,xe,pe];case"count":return Ce=pe.find(function(qe){return ms(qe.req.query.range,ye.query.range)}),[Ce,!!Ce,xe,pe]}})(p,x,"query",C),oe=ee[0],ge=ee[2],se=ee[3],oe&&ee[1]?oe.obsSet=C.obsSet:(ee=S.query(C).then(function(de){var ie=de.result;if(oe&&(oe.res=ie),P){for(var le=0,ye=ie.length;le<ye;++le)Object.freeze(ie[le]);Object.freeze(ie)}else de.result=ne(ie);return de}).catch(function(de){return se&&oe&&Y(se,oe),Promise.reject(de)}),oe={obsSet:C.obsSet,promise:ee,subscribers:new Set,type:"query",req:C,dirty:!1},se?se.push(oe):(se=[oe],(ge=ge||(Lr["idb://".concat(p,"/").concat(x)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[C.query.index.name||""]=se)),bd(oe,se,V,re),oe.promise.then(function(de){return{result:ao(de.result,C,ge?.optimisticOps,S,oe,P)}})):S.query(C)}})}})}};function ii(d,p){return new Proxy(d,{get:function(x,S,N){return S==="db"?p:Reflect.get(x,S,N)}})}un.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Ue.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var p=this._versions,x=p.filter(function(S){return S._cfg.version===d})[0];return x||(x=new this.Version(d),p.push(x),p.sort(Fl),x.stores({}),this._state.autoSchema=!1),x},un.prototype._whenReady=function(d){var p=this;return this.idbdb&&(this._state.openComplete||$e.letThrough||this._vip)?d():new He(function(x,S){if(p._state.openComplete)return S(new Ue.DatabaseClosed(p._state.dbOpenError));if(!p._state.isBeingOpened){if(!p._state.autoOpen)return void S(new Ue.DatabaseClosed);p.open().catch(at)}p._state.dbReadyPromise.then(x,S)}).then(d)},un.prototype.use=function(N){var p=N.stack,x=N.create,S=N.level,N=N.name,C=(N&&this.unuse({stack:p,name:N}),this._middlewares[p]||(this._middlewares[p]=[]));return C.push({stack:p,create:x,level:S??10,name:N}),C.sort(function(P,V){return P.level-V.level}),this},un.prototype.unuse=function(d){var p=d.stack,x=d.name,S=d.create;return p&&this._middlewares[p]&&(this._middlewares[p]=this._middlewares[p].filter(function(N){return S?N.create!==S:!!x&&N.name!==x})),this},un.prototype.open=function(){var d=this;return ia(It,function(){return pd(d)})},un.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,p=Ca.indexOf(this);if(0<=p&&Ca.splice(p,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new He(function(x){d.dbReadyResolve=x}),d.openCanceller=new He(function(x,S){d.cancelOpen=S}))},un.prototype.close=function(p){var p=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,x=this._state;p?(x.isBeingOpened&&x.cancelOpen(new Ue.DatabaseClosed),this._close(),x.autoOpen=!1,x.dbOpenError=new Ue.DatabaseClosed):(this._close(),x.autoOpen=this._options.autoOpen||x.isBeingOpened,x.openComplete=!1,x.dbOpenError=null)},un.prototype.delete=function(d){var p=this,x=(d===void 0&&(d={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),S=this._state;return new He(function(N,C){function P(){p.close(d);var V=p._deps.indexedDB.deleteDatabase(p.name);V.onsuccess=Pt(function(){var re,ge,se;re=p._deps,ge=p.name,Pi(se=re.indexedDB)||ge===Tr||Yl(se,re.IDBKeyRange).delete(ge).catch(at),N()}),V.onerror=Ra(C),V.onblocked=p._fireOnBlocked}if(x)throw new Ue.InvalidArgument("Invalid closeOptions argument to db.delete()");S.isBeingOpened?S.dbReadyPromise.then(P):P()})},un.prototype.backendDB=function(){return this.idbdb},un.prototype.isOpen=function(){return this.idbdb!==null},un.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},un.prototype.hasFailed=function(){return this._state.dbOpenError!==null},un.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(un.prototype,"tables",{get:function(){var d=this;return f(this._allTables).map(function(p){return d._allTables[p]})},enumerable:!1,configurable:!0}),un.prototype.transaction=function(){var d=(function(p,x,S){var N=arguments.length;if(N<2)throw new Ue.InvalidArgument("Too few arguments");for(var C=new Array(N-1);--N;)C[N-1]=arguments[N];return S=C.pop(),[p,Z(C),S]}).apply(this,arguments);return this._transaction.apply(this,d)},un.prototype._transaction=function(d,p,x){var S,N,C=this,P=$e.trans,V=(P&&P.db===this&&d.indexOf("!")===-1||(P=null),d.indexOf("?")!==-1);d=d.replace("!","").replace("?","");try{if(N=p.map(function(ge){if(ge=ge instanceof C.Table?ge.name:ge,typeof ge!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ge}),d=="r"||d===Ta)S=Ta;else{if(d!="rw"&&d!=Oa)throw new Ue.InvalidArgument("Invalid transaction mode: "+d);S=Oa}if(P){if(P.mode===Ta&&S===Oa){if(!V)throw new Ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");P=null}P&&N.forEach(function(ge){if(P&&P.storeNames.indexOf(ge)===-1){if(!V)throw new Ue.SubTransaction("Table "+ge+" not included in parent transaction.");P=null}}),V&&P&&!P.active&&(P=null)}}catch(ge){return P?P._promise(null,function(se,ee){ee(ge)}):Ht(ge)}var re=(function ge(se,ee,oe,de,ie){return He.resolve().then(function(){var pe=$e.transless||$e,le=se._createTransaction(ee,oe,se._dbSchema,de),pe=(le.explicit=!0,{trans:le,transless:pe});if(de)le.idbtrans=de.idbtrans;else try{le.create(),le.idbtrans._explicit=!0,se._state.PR1398_maxLoop=3}catch(Ce){return Ce.name===lt.InvalidState&&se.isOpen()&&0<--se._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),se.close({disableAutoOpen:!1}),se.open().then(function(){return ge(se,ee,oe,null,ie)})):Ht(Ce)}var ye,xe=I(ie),pe=(xe&&mn(),He.follow(function(){var Ce;(ye=ie.call(le,le))&&(xe?(Ce=Xn.bind(null,null),ye.then(Ce,Ce)):typeof ye.next=="function"&&typeof ye.throw=="function"&&(ye=ri(ye)))},pe));return(ye&&typeof ye.then=="function"?He.resolve(ye).then(function(Ce){return le.active?Ce:Ht(new Ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):pe.then(function(){return ye})).then(function(Ce){return de&&le._resolve(),le._completion.then(function(){return Ce})}).catch(function(Ce){return le._reject(Ce),Ht(Ce)})})}).bind(null,this,S,N,P,x);return P?P._promise(S,re,"lock"):$e.trans?ia($e.transless,function(){return C._whenReady(re)}):this._whenReady(re)},un.prototype.table=function(d){if(w(this._allTables,d))return this._allTables[d];throw new Ue.InvalidTable("Table ".concat(d," does not exist"))};var Qa=un;function un(d,p){var x,S,N,C,P,V=this,re=(this._middlewares={},this.verno=0,un.dependencies),re=(this._options=p=i({addons:un.addons,autoOpen:!0,indexedDB:re.indexedDB,IDBKeyRange:re.IDBKeyRange,cache:"cloned"},p),this._deps={indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},p.addons),ge=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:at,dbReadyPromise:null,cancelOpen:at,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:p.autoOpen}),se=(ge.dbReadyPromise=new He(function(ee){ge.dbReadyResolve=ee}),ge.openCanceller=new He(function(ee,oe){ge.cancelOpen=oe}),this._state=ge,this.name=d,this.on=_n(this,"populate","blocked","versionchange","close",{ready:[yt,at]}),this.once=function(ee,oe){var de=function(){for(var ie=[],le=0;le<arguments.length;le++)ie[le]=arguments[le];V.on(ee).unsubscribe(de),oe.apply(V,ie)};return V.on(ee,de)},this.on.ready.subscribe=L(this.on.ready.subscribe,function(ee){return function(oe,de){un.vip(function(){var ie,le=V._state;le.openComplete?(le.dbOpenError||He.resolve().then(oe),de&&ee(oe)):le.onReadyBeingFired?(le.onReadyBeingFired.push(oe),de&&ee(oe)):(ee(oe),ie=V,de||ee(function ye(){ie.on.ready.unsubscribe(oe),ie.on.ready.unsubscribe(ye)}))})}}),this.Collection=(x=this,gn(hd.prototype,function(ye,le){this.db=x;var de=Js,ie=null;if(le)try{de=le()}catch(pe){ie=pe}var le=ye._ctx,ye=le.table,xe=ye.hook.reading.fire;this._ctx={table:ye,index:le.index,isPrimKey:!le.index||ye.schema.primKey.keyPath&&le.index===ye.schema.primKey.name,range:de,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ie,or:le.or,valueMapper:xe!==yn?xe:null}})),this.Table=(S=this,gn(Ln.prototype,function(ee,oe,de){this.db=S,this._tx=de,this.name=ee,this.schema=oe,this.hook=S._allTables[ee]?S._allTables[ee].hook:_n(null,{creating:[Pe,at],reading:[Fe,yn],updating:[ze,at],deleting:[ke,at]})})),this.Transaction=(N=this,gn(Vl.prototype,function(ee,oe,de,ie,le){var ye=this;ee!=="readonly"&&oe.forEach(function(xe){xe=(xe=de[xe])==null?void 0:xe.yProps,xe&&(oe=oe.concat(xe.map(function(pe){return pe.updatesTable})))}),this.db=N,this.mode=ee,this.storeNames=oe,this.schema=de,this.chromeTransactionDurability=ie,this.idbtrans=null,this.on=_n(this,"complete","error","abort"),this.parent=le||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new He(function(xe,pe){ye._resolve=xe,ye._reject=pe}),this._completion.then(function(){ye.active=!1,ye.on.complete.fire()},function(xe){var pe=ye.active;return ye.active=!1,ye.on.error.fire(xe),ye.parent?ye.parent._reject(xe):pe&&ye.idbtrans&&ye.idbtrans.abort(),Ht(xe)})})),this.Version=(C=this,gn(gd.prototype,function(ee){this.db=C,this._cfg={version:ee,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(P=this,gn(Ur.prototype,function(ee,oe,de){if(this.db=P,this._ctx={table:ee,index:oe===":id"?null:oe,or:de},this._cmp=this._ascending=St,this._descending=function(ie,le){return St(le,ie)},this._max=function(ie,le){return 0<St(ie,le)?ie:le},this._min=function(ie,le){return St(ie,le)<0?ie:le},this._IDBKeyRange=P._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ue.MissingAPI})),this.on("versionchange",function(ee){0<ee.newVersion?console.warn("Another connection wants to upgrade database '".concat(V.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(V.name,"'. Closing db now to resume the delete request.")),V.close({disableAutoOpen:!1})}),this.on("blocked",function(ee){!ee.newVersion||ee.newVersion<ee.oldVersion?console.warn("Dexie.delete('".concat(V.name,"') was blocked")):console.warn("Upgrade '".concat(V.name,"' blocked by other connection holding version ").concat(ee.oldVersion/10))}),this._maxKey=us(p.IDBKeyRange),this._createTransaction=function(ee,oe,de,ie){return new V.Transaction(ee,oe,de,V._options.chromeTransactionDurability,ie)},this._fireOnBlocked=function(ee){V.on("blocked").fire(ee),Ca.filter(function(oe){return oe.name===V.name&&oe!==V&&!oe._state.vcFired}).map(function(oe){return oe.on("versionchange").fire(ee)})},this.use(wc),this.use(Yi),this.use(vd),this.use(yd),this.use(bc),new Proxy(this,{get:function(ee,oe,de){var ie;return oe==="_vip"||(oe==="table"?function(le){return ii(V.table(le),se)}:(ie=Reflect.get(ee,oe,de))instanceof Ln?ii(ie,se):oe==="tables"?ie.map(function(le){return ii(le,se)}):oe==="_createTransaction"?function(){return ii(ie.apply(this,arguments),se)}:ie)}}));this.vip=se,re.forEach(function(ee){return ee(V)})}var gs,Br=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Sc=(Qi.prototype.subscribe=function(d,p,x){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:p,complete:x})},Qi.prototype[Br]=function(){return this},Qi);function Qi(d){this._subscribe=d}try{gs={indexedDB:c.indexedDB||c.mozIndexedDB||c.webkitIndexedDB||c.msIndexedDB,IDBKeyRange:c.IDBKeyRange||c.webkitIDBKeyRange}}catch{gs={indexedDB:null,IDBKeyRange:null}}function kc(d){var p,x=!1,S=new Sc(function(N){var C=I(d),P,V=!1,re={},ge={},se={get closed(){return V},unsubscribe:function(){V||(V=!0,P&&P.abort(),ee&&Fn.storagemutated.unsubscribe(de))}},ee=(N.start&&N.start(se),!1),oe=function(){return Ka(ie)},de=function(le){$i(re,le),Wl(ge,re)&&oe()},ie=function(){var le,ye,xe;!V&&gs.indexedDB&&(re={},le={},P&&P.abort(),P=new AbortController,xe=(pe=>{var Ce=On();try{C&&mn();var qe=Vt(d,pe);return qe=C?qe.finally(Xn):qe}finally{Ce&&sa()}})(ye={subscr:le,signal:P.signal,requery:oe,querier:d,trans:null}),Promise.resolve(xe).then(function(pe){x=!0,p=pe,V||ye.signal.aborted||(re={},(Ce=>{for(var qe in Ce)if(w(Ce,qe))return;return 1})(ge=le)||ee||(Fn(os,de),ee=!0),Ka(function(){return!V&&N.next&&N.next(pe)}))},function(pe){x=!1,["DatabaseClosedError","AbortError"].includes(pe?.name)||V||Ka(function(){V||N.error&&N.error(pe)})}))};return setTimeout(oe,0),se});return S.hasValue=function(){return x},S.getValue=function(){return p},S}var Pr=Qa;function ro(d){var p=wr;try{wr=!0,Fn.storagemutated.fire(d),to(d,!0)}finally{wr=p}}_(Pr,i(i({},B),{delete:function(d){return new Pr(d,{addons:[]}).delete()},exists:function(d){return new Pr(d,{addons:[]}).open().then(function(p){return p.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return p=Pr.dependencies,x=p.indexedDB,p=p.IDBKeyRange,(Pi(x)?Promise.resolve(x.databases()).then(function(S){return S.map(function(N){return N.name}).filter(function(N){return N!==Tr})}):Yl(x,p).toCollection().primaryKeys()).then(d)}catch{return Ht(new Ue.MissingAPI)}var p,x},defineClass:function(){return function(d){y(this,d)}},ignoreTransaction:function(d){return $e.trans?ia($e.transless,d):d()},vip:Ql,async:function(d){return function(){try{var p=ri(d.apply(this,arguments));return p&&typeof p.then=="function"?p:He.resolve(p)}catch(x){return Ht(x)}}},spawn:function(d,p,x){try{var S=ri(d.apply(x,p||[]));return S&&typeof S.then=="function"?S:He.resolve(S)}catch(N){return Ht(N)}},currentTransaction:{get:function(){return $e.trans||null}},waitFor:function(d,p){return d=He.resolve(typeof d=="function"?Pr.ignoreTransaction(d):d).timeout(p||6e4),$e.trans?$e.trans.waitFor(d):d},Promise:He,debug:{get:function(){return ct},set:function(d){Mt(d)}},derive:R,extend:y,props:_,override:L,Events:_n,on:Fn,liveQuery:kc,extendObservabilitySet:$i,getByKeyPath:K,setByKeyPath:X,delByKeyPath:function(d,p){typeof p=="string"?X(d,p,void 0):"length"in p&&[].map.call(p,function(x){X(d,x,void 0)})},shallowClone:O,deepClone:ne,getObjectDiff:Vi,cmp:St,asap:fe,minKey:-1/0,addons:[],connections:Ca,errnames:lt,dependencies:gs,cache:Lr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,p,x){return d+p/Math.pow(10,2*x)})})),Pr.maxKey=us(Pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Fn(os,function(d){wr||(d=new CustomEvent(Mr,{detail:d}),wr=!0,dispatchEvent(d),wr=!1)}),addEventListener(Mr,function(d){d=d.detail,wr||ro(d)}));var ps,wr=!1,oa=function(){};return typeof BroadcastChannel<"u"&&((oa=function(){(ps=new BroadcastChannel(Mr)).onmessage=function(d){return d.data&&ro(d.data)}})(),typeof ps.unref=="function"&&ps.unref(),Fn(os,function(d){wr||ps.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Qa.disableBfCache&&d.persisted){ct&&console.debug("Dexie: handling persisted pagehide"),ps?.close();for(var p=0,x=Ca;p<x.length;p++)x[p].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Qa.disableBfCache&&d.persisted&&(ct&&console.debug("Dexie: handling persisted pageshow"),oa(),ro({all:new Gn(-1/0,[[]])}))})),He.rejectionMapper=function(d,p){return!d||d instanceof te||d instanceof TypeError||d instanceof SyntaxError||!d.name||!_t[d.name]?d:(p=new _t[d.name](p||d.message,d),"stack"in d&&E(p,"stack",{get:function(){return this.inner.stack}}),p)},Mt(ct),i(Qa,Object.freeze({__proto__:null,Dexie:Qa,Entity:Ri,PropModification:sn,RangeSet:Gn,add:function(d){return new sn({add:d})},cmp:St,default:Qa,liveQuery:kc,mergeRanges:qr,rangesOverlap:pc,remove:function(d){return new sn({remove:d})},replacePrefix:function(d,p){return new sn({replacePrefix:[d,p]})}}),{default:Qa}),Qa})})(Mu)),Mu.exports}var __=x_();const Hh=Ty(__),ey=Symbol.for("Dexie"),$u=globalThis[ey]||(globalThis[ey]=Hh);if(Hh.semVer!==$u.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Hh.semVer} and ${$u.semVer}`);const{liveQuery:f4,mergeRanges:h4,rangesOverlap:m4,RangeSet:g4,cmp:p4,Entity:y4,PropModification:v4,replacePrefix:b4,add:w4,remove:x4,DexieYProvider:_4}=$u;class S_ extends $u{messages;chats;contacts;stories;callLogs;mediaFiles;pendingUploads;groups;groupMessages;syncQueue;settings;friends;friendRequests;blockedUsers;constructor(){super("OurdmDB"),this.version(5).stores({messages:"id, chat_id, sender_id, receiver_id, status, synced_to_server, created_at, [chat_id+created_at], [chat_id+status]",chats:"id, order_id, last_message_time, is_pinned, is_hidden, is_archived, updated_at",contacts:"id, username, is_friend, friend_status, is_blocked, odm",stories:"id, order_id, expires_at, created_at",callLogs:"id, order_id, created_at",mediaFiles:"id, message_id, story_id, is_downloaded, type",pendingUploads:"id, status, created_at",groups:"id, updatedAt, isPinned, isArchived",groupMessages:"id, groupId, senderId, createdAt, status, [groupId+createdAt]",syncQueue:"id, priority, created_at, type",settings:"id, key",friends:"id, odm_odm_userId, friendId, is_best_friend, is_close_friend, friendship_date",friendRequests:"id, sender_id, receiver_id, status, created_at",blockedUsers:"id, odm_user_id, blocked_user_id, blocked_at"})}}const Ae=new S_;async function k_(a){return await Ae.messages.add(a)}async function j_(a){return await Ae.messages.get(a)}async function Si(a,n){await Ae.messages.update(a,{...n,updated_at:Date.now()})}async function N_(a,n=50,r=0){return await Ae.messages.where("chat_id").equals(a).reverse().offset(r).limit(n).sortBy("created_at")}async function A_(){return await Ae.messages.filter(a=>!(a.synced_to_server??!1)&&a.status==="pending").toArray()}async function E_(a){await Ae.messages.update(a,{synced_to_server:!0,status:"sent",updated_at:Date.now()})}async function C_(a,n){await Ae.messages.update(a,{status:n,updated_at:Date.now()})}async function $h(a,n=!1){n?await Ae.messages.update(a,{is_deleted:!0,deleted_for_everyone:!0,content:"",file_url:void 0,thumbnail:void 0,updated_at:Date.now()}):await Ae.messages.delete(a)}async function T_(a,n,r){await Ae.messages.update(a,{content:n,iv:r,edited_at:Date.now(),updated_at:Date.now()})}async function O_(a){return await Ae.chats.add(a)}async function R_(a){return await Ae.chats.get(a)}async function U_(a,n){await Ae.chats.update(a,{...n,updated_at:Date.now()})}async function D_(){return await Ae.chats.orderBy("last_message_time").reverse().toArray()}async function M_(){return await Ae.chats.filter(a=>!(a.is_hidden??!1)&&!(a.is_archived??!1)).reverse().sortBy("last_message_time")}async function z_(){return await Ae.chats.filter(a=>a.is_hidden??!1).toArray()}async function q_(){return await Ae.chats.filter(a=>a.is_archived??!1).toArray()}async function L_(){return await Ae.chats.filter(a=>(a.is_pinned??!1)&&!(a.is_hidden??!1)&&!(a.is_archived??!1)).toArray()}async function I_(a){return await Ae.contacts.add(a)}async function B_(a){return await Ae.contacts.get(a)}async function P_(a,n){await Ae.contacts.update(a,{...n,updated_at:Date.now()})}async function H_(){return await Ae.contacts.filter(a=>a.friend_status==="accepted"||(a.is_friend??!1)).toArray()}async function $_(){return await Ae.contacts.filter(a=>a.is_blocked??!1).toArray()}async function K_(){return await Ae.contacts.filter(a=>a.friend_status==="pending_received").toArray()}async function uc(a){await Ae.syncQueue.add({...a,id:crypto.randomUUID(),created_at:Date.now()})}async function Gy(){return await Ae.syncQueue.filter(a=>a.retry_count<a.max_retries).sortBy("priority").then(a=>a.reverse().slice(0,50))}async function Yy(a,n){await Ae.syncQueue.update(a,n)}async function Kh(a){await Ae.syncQueue.delete(a)}async function V_(a){return await Ae.stories.add(a)}async function F_(){const a=Date.now();return await Ae.stories.filter(n=>n.expires_at>a).sortBy("created_at")}async function G_(a,n){const r=await Ae.stories.get(a);r&&!r.viewers.includes(n)&&await Ae.stories.update(a,{viewers:[...r.viewers,n]})}async function Qy(){const a=Date.now(),n=await Ae.messages.filter(r=>r.expires_at!==void 0&&r.expires_at<a).toArray();return await Ae.messages.bulkDelete(n.map(r=>r.id)),n.length}async function Xy(){const a=Date.now(),n=await Ae.stories.filter(r=>r.expires_at<a).toArray();return await Ae.stories.bulkDelete(n.map(r=>r.id)),n.length}async function Jy(){const a=Date.now()-36e5,n=await Ae.syncQueue.filter(r=>r.created_at<a&&r.retry_count>=r.max_retries).toArray();return await Ae.syncQueue.bulkDelete(n.map(r=>r.id)),n.length}async function Wy(){const[a,n,r,i,l,c,f]=await Promise.all([Ae.messages.count(),Ae.chats.count(),Ae.mediaFiles.count(),Ae.stories.count(),Ae.callLogs.count(),Ae.pendingUploads.count(),Ae.syncQueue.count()]),m=await navigator.storage.estimate();return{messagesCount:a,chatsCount:n,mediaFilesCount:r,storiesCount:i,callLogsCount:l,pendingUploadsCount:c,syncQueueCount:f,estimatedSize:m.usage||0}}async function Zy(){await Promise.all([Ae.messages.clear(),Ae.chats.clear(),Ae.contacts.clear(),Ae.stories.clear(),Ae.callLogs.clear(),Ae.mediaFiles.clear(),Ae.pendingUploads.clear(),Ae.syncQueue.clear(),Ae.settings.clear()])}async function Y_(a){return(await Ae.settings.where("key").equals(a).first())?.value??null}async function Q_(a,n){const r=await Ae.settings.where("key").equals(a).first();r?await Ae.settings.update(r.id,{value:n,updated_at:Date.now()}):await Ae.settings.add({id:crypto.randomUUID(),key:a,value:n,updated_at:Date.now()})}async function lm(){return navigator.storage&&navigator.storage.persist?await navigator.storage.persist():!1}async function ev(){try{await Ae.open(),await lm();const[a,n,r]=await Promise.all([Qy(),Xy(),Jy()]);console.log(`Cleaned up: ${a} messages, ${n} stories, ${r} sync items`)}catch(a){throw console.error("Database initialization failed:",a),a}}const X_=Object.freeze(Object.defineProperty({__proto__:null,addChat:O_,addContact:I_,addMessage:k_,addStory:V_,addToSyncQueue:uc,clearAllData:Zy,clearExpiredMessages:Qy,clearExpiredStories:Xy,clearOldSyncItems:Jy,db:Ae,deleteMessage:$h,editMessage:T_,getActiveStories:F_,getAllChats:D_,getArchivedChats:q_,getBlockedContacts:$_,getChat:R_,getContact:B_,getFriends:H_,getHiddenChats:z_,getMessage:j_,getMessagesByChatId:N_,getPendingRequests:K_,getPendingSyncItems:Gy,getPinnedChats:L_,getSetting:Y_,getStorageStats:Wy,getUnsentMessages:A_,getVisibleChats:M_,initializeDatabase:ev,markMessageSynced:E_,markStoryViewed:G_,removeSyncItem:Kh,requestPersistentStorage:lm,setSetting:Q_,updateChat:U_,updateContact:P_,updateMessage:Si,updateMessageStatus:C_,updateSyncItem:Yy},Symbol.toStringTag,{value:"Module"}));function J_(a,n){return n.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(i){if(i!=="default"&&!(i in a)){var l=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(a,i,l.get?l:{enumerable:!0,get:function(){return r[i]}})}}))})),Object.freeze(a)}function tv(a,n){return new Promise((function(r,i){let l;return W_(a).then((function(c){try{return l=c,r(new Blob([n.slice(0,2),l,n.slice(2)],{type:"image/jpeg"}))}catch(f){return i(f)}}),i)}))}const W_=a=>new Promise(((n,r)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:l}})=>{const c=new DataView(l);let f=0;if(c.getUint16(f)!==65496)return r("not a valid JPEG");for(f+=2;;){const m=c.getUint16(f);if(m===65498)break;const y=c.getUint16(f+2);if(m===65505&&c.getUint32(f+4)===1165519206){const b=f+10;let v;switch(c.getUint16(b)){case 18761:v=!0;break;case 19789:v=!1;break;default:return r("TIFF header contains invalid endian")}if(c.getUint16(b+2,v)!==42)return r("TIFF header contains invalid version");const w=c.getUint32(b+4,v),_=b+w+2+12*c.getUint16(b+w,v);for(let k=b+w+2;k<_;k+=12)if(c.getUint16(k,v)==274){if(c.getUint16(k+2,v)!==3)return r("Orientation data type is invalid");if(c.getUint32(k+4,v)!==1)return r("Orientation data count is invalid");c.setUint16(k+8,1,v);break}return n(l.slice(f,f+2+y))}f+=2+y}return n(new Blob)})),i.readAsArrayBuffer(a)}));var Ku={},Z_={get exports(){return Ku},set exports(a){Ku=a}};(function(a){var n,r,i={};Z_.exports=i,i.parse=function(l,c){for(var f=i.bin.readUshort,m=i.bin.readUint,y=0,b={},v=new Uint8Array(l),w=v.length-4;m(v,w)!=101010256;)w--;y=w,y+=4;var _=f(v,y+=4);f(v,y+=2);var k=m(v,y+=2),E=m(v,y+=4);y+=4,y=E;for(var R=0;R<_;R++){m(v,y),y+=4,y+=4,y+=4,m(v,y+=4),k=m(v,y+=4);var H=m(v,y+=4),q=f(v,y+=4),W=f(v,y+2),L=f(v,y+4);y+=6;var z=m(v,y+=8);y+=4,y+=q+W+L,i._readLocal(v,z,b,k,H,c)}return b},i._readLocal=function(l,c,f,m,y,b){var v=i.bin.readUshort,w=i.bin.readUint;w(l,c),v(l,c+=4),v(l,c+=2);var _=v(l,c+=2);w(l,c+=2),w(l,c+=4),c+=4;var k=v(l,c+=8),E=v(l,c+=2);c+=2;var R=i.bin.readUTF8(l,c,k);if(c+=k,c+=E,b)f[R]={size:y,csize:m};else{var H=new Uint8Array(l.buffer,c);if(_==0)f[R]=new Uint8Array(H.buffer.slice(c,c+m));else{if(_!=8)throw"unknown compression method: "+_;var q=new Uint8Array(y);i.inflateRaw(H,q),f[R]=q}}},i.inflateRaw=function(l,c){return i.F.inflate(l,c)},i.inflate=function(l,c){return l[0],l[1],i.inflateRaw(new Uint8Array(l.buffer,l.byteOffset+2,l.length-6),c)},i.deflate=function(l,c){c==null&&(c={level:6});var f=0,m=new Uint8Array(50+Math.floor(1.1*l.length));m[f]=120,m[f+1]=156,f+=2,f=i.F.deflateRaw(l,m,f,c.level);var y=i.adler(l,0,l.length);return m[f+0]=y>>>24&255,m[f+1]=y>>>16&255,m[f+2]=y>>>8&255,m[f+3]=y>>>0&255,new Uint8Array(m.buffer,0,f+4)},i.deflateRaw=function(l,c){c==null&&(c={level:6});var f=new Uint8Array(50+Math.floor(1.1*l.length)),m=i.F.deflateRaw(l,f,m,c.level);return new Uint8Array(f.buffer,0,m)},i.encode=function(l,c){c==null&&(c=!1);var f=0,m=i.bin.writeUint,y=i.bin.writeUshort,b={};for(var v in l){var w=!i._noNeed(v)&&!c,_=l[v],k=i.crc.crc(_,0,_.length);b[v]={cpr:w,usize:_.length,crc:k,file:w?i.deflateRaw(_):_}}for(var v in b)f+=b[v].file.length+30+46+2*i.bin.sizeUTF8(v);f+=22;var E=new Uint8Array(f),R=0,H=[];for(var v in b){var q=b[v];H.push(R),R=i._writeHeader(E,R,v,q,0)}var W=0,L=R;for(var v in b)q=b[v],H.push(R),R=i._writeHeader(E,R,v,q,1,H[W++]);var z=R-L;return m(E,R,101010256),R+=4,y(E,R+=4,W),y(E,R+=2,W),m(E,R+=2,z),m(E,R+=4,L),R+=4,R+=2,E.buffer},i._noNeed=function(l){var c=l.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(c)!=-1},i._writeHeader=function(l,c,f,m,y,b){var v=i.bin.writeUint,w=i.bin.writeUshort,_=m.file;return v(l,c,y==0?67324752:33639248),c+=4,y==1&&(c+=2),w(l,c,20),w(l,c+=2,0),w(l,c+=2,m.cpr?8:0),v(l,c+=2,0),v(l,c+=4,m.crc),v(l,c+=4,_.length),v(l,c+=4,m.usize),w(l,c+=4,i.bin.sizeUTF8(f)),w(l,c+=2,0),c+=2,y==1&&(c+=2,c+=2,v(l,c+=6,b),c+=4),c+=i.bin.writeUTF8(l,c,f),y==0&&(l.set(_,c),c+=_.length),c},i.crc={table:(function(){for(var l=new Uint32Array(256),c=0;c<256;c++){for(var f=c,m=0;m<8;m++)1&f?f=3988292384^f>>>1:f>>>=1;l[c]=f}return l})(),update:function(l,c,f,m){for(var y=0;y<m;y++)l=i.crc.table[255&(l^c[f+y])]^l>>>8;return l},crc:function(l,c,f){return 4294967295^i.crc.update(4294967295,l,c,f)}},i.adler=function(l,c,f){for(var m=1,y=0,b=c,v=c+f;b<v;){for(var w=Math.min(b+5552,v);b<w;)y+=m+=l[b++];m%=65521,y%=65521}return y<<16|m},i.bin={readUshort:function(l,c){return l[c]|l[c+1]<<8},writeUshort:function(l,c,f){l[c]=255&f,l[c+1]=f>>8&255},readUint:function(l,c){return 16777216*l[c+3]+(l[c+2]<<16|l[c+1]<<8|l[c])},writeUint:function(l,c,f){l[c]=255&f,l[c+1]=f>>8&255,l[c+2]=f>>16&255,l[c+3]=f>>24&255},readASCII:function(l,c,f){for(var m="",y=0;y<f;y++)m+=String.fromCharCode(l[c+y]);return m},writeASCII:function(l,c,f){for(var m=0;m<f.length;m++)l[c+m]=f.charCodeAt(m)},pad:function(l){return l.length<2?"0"+l:l},readUTF8:function(l,c,f){for(var m,y="",b=0;b<f;b++)y+="%"+i.bin.pad(l[c+b].toString(16));try{m=decodeURIComponent(y)}catch{return i.bin.readASCII(l,c,f)}return m},writeUTF8:function(l,c,f){for(var m=f.length,y=0,b=0;b<m;b++){var v=f.charCodeAt(b);if((4294967168&v)==0)l[c+y]=v,y++;else if((4294965248&v)==0)l[c+y]=192|v>>6,l[c+y+1]=128|v>>0&63,y+=2;else if((4294901760&v)==0)l[c+y]=224|v>>12,l[c+y+1]=128|v>>6&63,l[c+y+2]=128|v>>0&63,y+=3;else{if((4292870144&v)!=0)throw"e";l[c+y]=240|v>>18,l[c+y+1]=128|v>>12&63,l[c+y+2]=128|v>>6&63,l[c+y+3]=128|v>>0&63,y+=4}}return y},sizeUTF8:function(l){for(var c=l.length,f=0,m=0;m<c;m++){var y=l.charCodeAt(m);if((4294967168&y)==0)f++;else if((4294965248&y)==0)f+=2;else if((4294901760&y)==0)f+=3;else{if((4292870144&y)!=0)throw"e";f+=4}}return f}},i.F={},i.F.deflateRaw=function(l,c,f,m){var y=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][m],b=i.F.U,v=i.F._goodIndex;i.F._hash;var w=i.F._putsE,_=0,k=f<<3,E=0,R=l.length;if(m==0){for(;_<R;)w(c,k,_+(F=Math.min(65535,R-_))==R?1:0),k=i.F._copyExact(l,_,F,c,k+8),_+=F;return k>>>3}var H=b.lits,q=b.strt,W=b.prev,L=0,z=0,fe=0,K=0,X=0,O=0;for(R>2&&(q[O=i.F._hash(l,0)]=0),_=0;_<R;_++){if(X=O,_+1<R-2){O=i.F._hash(l,_+1);var D=_+1&32767;W[D]=q[O],q[O]=D}if(E<=_){(L>14e3||z>26697)&&R-_>100&&(E<_&&(H[L]=_-E,L+=2,E=_),k=i.F._writeBlock(_==R-1||E==R?1:0,H,L,K,l,fe,_-fe,c,k),L=z=K=0,fe=_);var Z=0;_<R-2&&(Z=i.F._bestMatch(l,_,W,X,Math.min(y[2],R-_),y[3]));var F=Z>>>16,G=65535&Z;if(Z!=0){G=65535&Z;var ne=v(F=Z>>>16,b.of0);b.lhst[257+ne]++;var M=v(G,b.df0);b.dhst[M]++,K+=b.exb[ne]+b.dxb[M],H[L]=F<<23|_-E,H[L+1]=G<<16|ne<<8|M,L+=2,E=_+F}else b.lhst[l[_]]++;z++}}for(fe==_&&l.length!=0||(E<_&&(H[L]=_-E,L+=2,E=_),k=i.F._writeBlock(1,H,L,K,l,fe,_-fe,c,k),L=0,z=0,L=z=K=0,fe=_);(7&k)!=0;)k++;return k>>>3},i.F._bestMatch=function(l,c,f,m,y,b){var v=32767&c,w=f[v],_=v-w+32768&32767;if(w==v||m!=i.F._hash(l,c-_))return 0;for(var k=0,E=0,R=Math.min(32767,c);_<=R&&--b!=0&&w!=v;){if(k==0||l[c+k]==l[c+k-_]){var H=i.F._howLong(l,c,_);if(H>k){if(E=_,(k=H)>=y)break;_+2<H&&(H=_+2);for(var q=0,W=0;W<H-2;W++){var L=c-_+W+32768&32767,z=L-f[L]+32768&32767;z>q&&(q=z,w=L)}}}_+=(v=w)-(w=f[v])+32768&32767}return k<<16|E},i.F._howLong=function(l,c,f){if(l[c]!=l[c-f]||l[c+1]!=l[c+1-f]||l[c+2]!=l[c+2-f])return 0;var m=c,y=Math.min(l.length,c+258);for(c+=3;c<y&&l[c]==l[c-f];)c++;return c-m},i.F._hash=function(l,c){return(l[c]<<8|l[c+1])+(l[c+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(l,c,f,m,y,b,v,w,_){var k,E,R,H,q,W,L,z,fe,K=i.F.U,X=i.F._putsF,O=i.F._putsE;K.lhst[256]++,E=(k=i.F.getTrees())[0],R=k[1],H=k[2],q=k[3],W=k[4],L=k[5],z=k[6],fe=k[7];var D=32+((_+3&7)==0?0:8-(_+3&7))+(v<<3),Z=m+i.F.contSize(K.fltree,K.lhst)+i.F.contSize(K.fdtree,K.dhst),F=m+i.F.contSize(K.ltree,K.lhst)+i.F.contSize(K.dtree,K.dhst);F+=14+3*L+i.F.contSize(K.itree,K.ihst)+(2*K.ihst[16]+3*K.ihst[17]+7*K.ihst[18]);for(var G=0;G<286;G++)K.lhst[G]=0;for(G=0;G<30;G++)K.dhst[G]=0;for(G=0;G<19;G++)K.ihst[G]=0;var ne=D<Z&&D<F?0:Z<F?1:2;if(X(w,_,l),X(w,_+1,ne),_+=3,ne==0){for(;(7&_)!=0;)_++;_=i.F._copyExact(y,b,v,w,_)}else{var M,J;if(ne==1&&(M=K.fltree,J=K.fdtree),ne==2){i.F.makeCodes(K.ltree,E),i.F.revCodes(K.ltree,E),i.F.makeCodes(K.dtree,R),i.F.revCodes(K.dtree,R),i.F.makeCodes(K.itree,H),i.F.revCodes(K.itree,H),M=K.ltree,J=K.dtree,O(w,_,q-257),O(w,_+=5,W-1),O(w,_+=5,L-4),_+=4;for(var A=0;A<L;A++)O(w,_+3*A,K.itree[1+(K.ordr[A]<<1)]);_+=3*L,_=i.F._codeTiny(z,K.itree,w,_),_=i.F._codeTiny(fe,K.itree,w,_)}for(var T=b,Y=0;Y<f;Y+=2){for(var $=c[Y],ae=$>>>23,I=T+(8388607&$);T<I;)_=i.F._writeLit(y[T++],M,w,_);if(ae!=0){var B=c[Y+1],ue=B>>16,te=B>>8&255,he=255&B;O(w,_=i.F._writeLit(257+te,M,w,_),ae-K.of0[te]),_+=K.exb[te],X(w,_=i.F._writeLit(he,J,w,_),ue-K.df0[he]),_+=K.dxb[he],T+=ae}}_=i.F._writeLit(256,M,w,_)}return _},i.F._copyExact=function(l,c,f,m,y){var b=y>>>3;return m[b]=f,m[b+1]=f>>>8,m[b+2]=255-m[b],m[b+3]=255-m[b+1],b+=4,m.set(new Uint8Array(l.buffer,c,f),b),y+(f+4<<3)},i.F.getTrees=function(){for(var l=i.F.U,c=i.F._hufTree(l.lhst,l.ltree,15),f=i.F._hufTree(l.dhst,l.dtree,15),m=[],y=i.F._lenCodes(l.ltree,m),b=[],v=i.F._lenCodes(l.dtree,b),w=0;w<m.length;w+=2)l.ihst[m[w]]++;for(w=0;w<b.length;w+=2)l.ihst[b[w]]++;for(var _=i.F._hufTree(l.ihst,l.itree,7),k=19;k>4&&l.itree[1+(l.ordr[k-1]<<1)]==0;)k--;return[c,f,_,y,v,k,m,b]},i.F.getSecond=function(l){for(var c=[],f=0;f<l.length;f+=2)c.push(l[f+1]);return c},i.F.nonZero=function(l){for(var c="",f=0;f<l.length;f+=2)l[f+1]!=0&&(c+=(f>>1)+",");return c},i.F.contSize=function(l,c){for(var f=0,m=0;m<c.length;m++)f+=c[m]*l[1+(m<<1)];return f},i.F._codeTiny=function(l,c,f,m){for(var y=0;y<l.length;y+=2){var b=l[y],v=l[y+1];m=i.F._writeLit(b,c,f,m);var w=b==16?2:b==17?3:7;b>15&&(i.F._putsE(f,m,v,w),m+=w)}return m},i.F._lenCodes=function(l,c){for(var f=l.length;f!=2&&l[f-1]==0;)f-=2;for(var m=0;m<f;m+=2){var y=l[m+1],b=m+3<f?l[m+3]:-1,v=m+5<f?l[m+5]:-1,w=m==0?-1:l[m-1];if(y==0&&b==y&&v==y){for(var _=m+5;_+2<f&&l[_+2]==y;)_+=2;(k=Math.min(_+1-m>>>1,138))<11?c.push(17,k-3):c.push(18,k-11),m+=2*k-2}else if(y==w&&b==y&&v==y){for(_=m+5;_+2<f&&l[_+2]==y;)_+=2;var k=Math.min(_+1-m>>>1,6);c.push(16,k-3),m+=2*k-2}else c.push(y,0)}return f>>>1},i.F._hufTree=function(l,c,f){var m=[],y=l.length,b=c.length,v=0;for(v=0;v<b;v+=2)c[v]=0,c[v+1]=0;for(v=0;v<y;v++)l[v]!=0&&m.push({lit:v,f:l[v]});var w=m.length,_=m.slice(0);if(w==0)return 0;if(w==1){var k=m[0].lit;return _=k==0?1:0,c[1+(k<<1)]=1,c[1+(_<<1)]=1,1}m.sort((function(z,fe){return z.f-fe.f}));var E=m[0],R=m[1],H=0,q=1,W=2;for(m[0]={lit:-1,f:E.f+R.f,l:E,r:R,d:0};q!=w-1;)E=H!=q&&(W==w||m[H].f<m[W].f)?m[H++]:m[W++],R=H!=q&&(W==w||m[H].f<m[W].f)?m[H++]:m[W++],m[q++]={lit:-1,f:E.f+R.f,l:E,r:R};var L=i.F.setDepth(m[q-1],0);for(L>f&&(i.F.restrictDepth(_,f,L),L=f),v=0;v<w;v++)c[1+(_[v].lit<<1)]=_[v].d;return L},i.F.setDepth=function(l,c){return l.lit!=-1?(l.d=c,c):Math.max(i.F.setDepth(l.l,c+1),i.F.setDepth(l.r,c+1))},i.F.restrictDepth=function(l,c,f){var m=0,y=1<<f-c,b=0;for(l.sort((function(w,_){return _.d==w.d?w.f-_.f:_.d-w.d})),m=0;m<l.length&&l[m].d>c;m++){var v=l[m].d;l[m].d=c,b+=y-(1<<f-v)}for(b>>>=f-c;b>0;)(v=l[m].d)<c?(l[m].d++,b-=1<<c-v-1):m++;for(;m>=0;m--)l[m].d==c&&b<0&&(l[m].d--,b++);b!=0&&console.log("debt left")},i.F._goodIndex=function(l,c){var f=0;return c[16|f]<=l&&(f|=16),c[8|f]<=l&&(f|=8),c[4|f]<=l&&(f|=4),c[2|f]<=l&&(f|=2),c[1|f]<=l&&(f|=1),f},i.F._writeLit=function(l,c,f,m){return i.F._putsF(f,m,c[l<<1]),m+c[1+(l<<1)]},i.F.inflate=function(l,c){var f=Uint8Array;if(l[0]==3&&l[1]==0)return c||new f(0);var m=i.F,y=m._bitsF,b=m._bitsE,v=m._decodeTiny,w=m.makeCodes,_=m.codes2map,k=m._get17,E=m.U,R=c==null;R&&(c=new f(l.length>>>2<<3));for(var H,q,W=0,L=0,z=0,fe=0,K=0,X=0,O=0,D=0,Z=0;W==0;)if(W=y(l,Z,1),L=y(l,Z+1,2),Z+=3,L!=0){if(R&&(c=i.F._check(c,D+(1<<17))),L==1&&(H=E.flmap,q=E.fdmap,X=511,O=31),L==2){z=b(l,Z,5)+257,fe=b(l,Z+5,5)+1,K=b(l,Z+10,4)+4,Z+=14;for(var F=0;F<38;F+=2)E.itree[F]=0,E.itree[F+1]=0;var G=1;for(F=0;F<K;F++){var ne=b(l,Z+3*F,3);E.itree[1+(E.ordr[F]<<1)]=ne,ne>G&&(G=ne)}Z+=3*K,w(E.itree,G),_(E.itree,G,E.imap),H=E.lmap,q=E.dmap,Z=v(E.imap,(1<<G)-1,z+fe,l,Z,E.ttree);var M=m._copyOut(E.ttree,0,z,E.ltree);X=(1<<M)-1;var J=m._copyOut(E.ttree,z,fe,E.dtree);O=(1<<J)-1,w(E.ltree,M),_(E.ltree,M,H),w(E.dtree,J),_(E.dtree,J,q)}for(;;){var A=H[k(l,Z)&X];Z+=15&A;var T=A>>>4;if(!(T>>>8))c[D++]=T;else{if(T==256)break;var Y=D+T-254;if(T>264){var $=E.ldef[T-257];Y=D+($>>>3)+b(l,Z,7&$),Z+=7&$}var ae=q[k(l,Z)&O];Z+=15&ae;var I=ae>>>4,B=E.ddef[I],ue=(B>>>4)+y(l,Z,15&B);for(Z+=15&B,R&&(c=i.F._check(c,D+(1<<17)));D<Y;)c[D]=c[D++-ue],c[D]=c[D++-ue],c[D]=c[D++-ue],c[D]=c[D++-ue];D=Y}}}else{(7&Z)!=0&&(Z+=8-(7&Z));var te=4+(Z>>>3),he=l[te-4]|l[te-3]<<8;R&&(c=i.F._check(c,D+he)),c.set(new f(l.buffer,l.byteOffset+te,he),D),Z=te+he<<3,D+=he}return c.length==D?c:c.slice(0,D)},i.F._check=function(l,c){var f=l.length;if(c<=f)return l;var m=new Uint8Array(Math.max(f<<1,c));return m.set(l,0),m},i.F._decodeTiny=function(l,c,f,m,y,b){for(var v=i.F._bitsE,w=i.F._get17,_=0;_<f;){var k=l[w(m,y)&c];y+=15&k;var E=k>>>4;if(E<=15)b[_]=E,_++;else{var R=0,H=0;E==16?(H=3+v(m,y,2),y+=2,R=b[_-1]):E==17?(H=3+v(m,y,3),y+=3):E==18&&(H=11+v(m,y,7),y+=7);for(var q=_+H;_<q;)b[_]=R,_++}}return y},i.F._copyOut=function(l,c,f,m){for(var y=0,b=0,v=m.length>>>1;b<f;){var w=l[b+c];m[b<<1]=0,m[1+(b<<1)]=w,w>y&&(y=w),b++}for(;b<v;)m[b<<1]=0,m[1+(b<<1)]=0,b++;return y},i.F.makeCodes=function(l,c){for(var f,m,y,b,v=i.F.U,w=l.length,_=v.bl_count,k=0;k<=c;k++)_[k]=0;for(k=1;k<w;k+=2)_[l[k]]++;var E=v.next_code;for(f=0,_[0]=0,m=1;m<=c;m++)f=f+_[m-1]<<1,E[m]=f;for(y=0;y<w;y+=2)(b=l[y+1])!=0&&(l[y]=E[b],E[b]++)},i.F.codes2map=function(l,c,f){for(var m=l.length,y=i.F.U.rev15,b=0;b<m;b+=2)if(l[b+1]!=0)for(var v=b>>1,w=l[b+1],_=v<<4|w,k=c-w,E=l[b]<<k,R=E+(1<<k);E!=R;)f[y[E]>>>15-c]=_,E++},i.F.revCodes=function(l,c){for(var f=i.F.U.rev15,m=15-c,y=0;y<l.length;y+=2){var b=l[y]<<c-l[y+1];l[y]=f[b]>>>m}},i.F._putsE=function(l,c,f){f<<=7&c;var m=c>>>3;l[m]|=f,l[m+1]|=f>>>8},i.F._putsF=function(l,c,f){f<<=7&c;var m=c>>>3;l[m]|=f,l[m+1]|=f>>>8,l[m+2]|=f>>>16},i.F._bitsE=function(l,c,f){return(l[c>>>3]|l[1+(c>>>3)]<<8)>>>(7&c)&(1<<f)-1},i.F._bitsF=function(l,c,f){return(l[c>>>3]|l[1+(c>>>3)]<<8|l[2+(c>>>3)]<<16)>>>(7&c)&(1<<f)-1},i.F._get17=function(l,c){return(l[c>>>3]|l[1+(c>>>3)]<<8|l[2+(c>>>3)]<<16)>>>(7&c)},i.F._get25=function(l,c){return(l[c>>>3]|l[1+(c>>>3)]<<8|l[2+(c>>>3)]<<16|l[3+(c>>>3)]<<24)>>>(7&c)},i.F.U=(n=Uint16Array,r=Uint32Array,{next_code:new n(16),bl_count:new n(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new n(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new n(512),fltree:[],fdmap:new n(32),fdtree:[],lmap:new n(32768),ltree:[],ttree:[],dmap:new n(32768),dtree:[],imap:new n(512),itree:[],rev15:new n(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new n(65536),prev:new n(32768)}),(function(){for(var l=i.F.U,c=0;c<32768;c++){var f=c;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,l.rev15[c]=(f>>>16|f<<16)>>>17}function m(y,b,v){for(;b--!=0;)y.push(0,v)}for(c=0;c<32;c++)l.ldef[c]=l.of0[c]<<3|l.exb[c],l.ddef[c]=l.df0[c]<<4|l.dxb[c];m(l.fltree,144,8),m(l.fltree,112,9),m(l.fltree,24,7),m(l.fltree,8,8),i.F.makeCodes(l.fltree,9),i.F.codes2map(l.fltree,9,l.flmap),i.F.revCodes(l.fltree,9),m(l.fdtree,32,5),i.F.makeCodes(l.fdtree,5),i.F.codes2map(l.fdtree,5,l.fdmap),i.F.revCodes(l.fdtree,5),m(l.itree,19,0),m(l.ltree,286,0),m(l.dtree,30,0),m(l.ttree,320,0)})()})();var e2=J_({__proto__:null,default:Ku},[Ku]);const fr=(function(){var a={nextZero(v,w){for(;v[w]!=0;)w++;return w},readUshort:(v,w)=>v[w]<<8|v[w+1],writeUshort(v,w,_){v[w]=_>>8&255,v[w+1]=255&_},readUint:(v,w)=>16777216*v[w]+(v[w+1]<<16|v[w+2]<<8|v[w+3]),writeUint(v,w,_){v[w]=_>>24&255,v[w+1]=_>>16&255,v[w+2]=_>>8&255,v[w+3]=255&_},readASCII(v,w,_){let k="";for(let E=0;E<_;E++)k+=String.fromCharCode(v[w+E]);return k},writeASCII(v,w,_){for(let k=0;k<_.length;k++)v[w+k]=_.charCodeAt(k)},readBytes(v,w,_){const k=[];for(let E=0;E<_;E++)k.push(v[w+E]);return k},pad:v=>v.length<2?`0${v}`:v,readUTF8(v,w,_){let k,E="";for(let R=0;R<_;R++)E+=`%${a.pad(v[w+R].toString(16))}`;try{k=decodeURIComponent(E)}catch{return a.readASCII(v,w,_)}return k}};function n(v,w,_,k){const E=w*_,R=c(k),H=Math.ceil(w*R/8),q=new Uint8Array(4*E),W=new Uint32Array(q.buffer),{ctype:L}=k,{depth:z}=k,fe=a.readUshort;if(L==6){const $=E<<2;if(z==8)for(var K=0;K<$;K+=4)q[K]=v[K],q[K+1]=v[K+1],q[K+2]=v[K+2],q[K+3]=v[K+3];if(z==16)for(K=0;K<$;K++)q[K]=v[K<<1]}else if(L==2){const $=k.tabs.tRNS;if($==null){if(z==8)for(K=0;K<E;K++){var X=3*K;W[K]=255<<24|v[X+2]<<16|v[X+1]<<8|v[X]}if(z==16)for(K=0;K<E;K++)X=6*K,W[K]=255<<24|v[X+4]<<16|v[X+2]<<8|v[X]}else{var O=$[0];const ae=$[1],I=$[2];if(z==8)for(K=0;K<E;K++){var D=K<<2;X=3*K,W[K]=255<<24|v[X+2]<<16|v[X+1]<<8|v[X],v[X]==O&&v[X+1]==ae&&v[X+2]==I&&(q[D+3]=0)}if(z==16)for(K=0;K<E;K++)D=K<<2,X=6*K,W[K]=255<<24|v[X+4]<<16|v[X+2]<<8|v[X],fe(v,X)==O&&fe(v,X+2)==ae&&fe(v,X+4)==I&&(q[D+3]=0)}}else if(L==3){const $=k.tabs.PLTE,ae=k.tabs.tRNS,I=ae?ae.length:0;if(z==1)for(var Z=0;Z<_;Z++){var F=Z*H,G=Z*w;for(K=0;K<w;K++){D=G+K<<2;var ne=3*(M=v[F+(K>>3)]>>7-((7&K)<<0)&1);q[D]=$[ne],q[D+1]=$[ne+1],q[D+2]=$[ne+2],q[D+3]=M<I?ae[M]:255}}if(z==2)for(Z=0;Z<_;Z++)for(F=Z*H,G=Z*w,K=0;K<w;K++)D=G+K<<2,ne=3*(M=v[F+(K>>2)]>>6-((3&K)<<1)&3),q[D]=$[ne],q[D+1]=$[ne+1],q[D+2]=$[ne+2],q[D+3]=M<I?ae[M]:255;if(z==4)for(Z=0;Z<_;Z++)for(F=Z*H,G=Z*w,K=0;K<w;K++)D=G+K<<2,ne=3*(M=v[F+(K>>1)]>>4-((1&K)<<2)&15),q[D]=$[ne],q[D+1]=$[ne+1],q[D+2]=$[ne+2],q[D+3]=M<I?ae[M]:255;if(z==8)for(K=0;K<E;K++){var M;D=K<<2,ne=3*(M=v[K]),q[D]=$[ne],q[D+1]=$[ne+1],q[D+2]=$[ne+2],q[D+3]=M<I?ae[M]:255}}else if(L==4){if(z==8)for(K=0;K<E;K++){D=K<<2;var J=v[A=K<<1];q[D]=J,q[D+1]=J,q[D+2]=J,q[D+3]=v[A+1]}if(z==16)for(K=0;K<E;K++){var A;D=K<<2,J=v[A=K<<2],q[D]=J,q[D+1]=J,q[D+2]=J,q[D+3]=v[A+2]}}else if(L==0)for(O=k.tabs.tRNS?k.tabs.tRNS:-1,Z=0;Z<_;Z++){const $=Z*H,ae=Z*w;if(z==1)for(var T=0;T<w;T++){var Y=(J=255*(v[$+(T>>>3)]>>>7-(7&T)&1))==255*O?0:255;W[ae+T]=Y<<24|J<<16|J<<8|J}else if(z==2)for(T=0;T<w;T++)Y=(J=85*(v[$+(T>>>2)]>>>6-((3&T)<<1)&3))==85*O?0:255,W[ae+T]=Y<<24|J<<16|J<<8|J;else if(z==4)for(T=0;T<w;T++)Y=(J=17*(v[$+(T>>>1)]>>>4-((1&T)<<2)&15))==17*O?0:255,W[ae+T]=Y<<24|J<<16|J<<8|J;else if(z==8)for(T=0;T<w;T++)Y=(J=v[$+T])==O?0:255,W[ae+T]=Y<<24|J<<16|J<<8|J;else if(z==16)for(T=0;T<w;T++)J=v[$+(T<<1)],Y=fe(v,$+(T<<1))==O?0:255,W[ae+T]=Y<<24|J<<16|J<<8|J}return q}function r(v,w,_,k){const E=c(v),R=Math.ceil(_*E/8),H=new Uint8Array((R+1+v.interlace)*k);return w=v.tabs.CgBI?l(w,H):i(w,H),v.interlace==0?w=f(w,v,0,_,k):v.interlace==1&&(w=(function(W,L){const z=L.width,fe=L.height,K=c(L),X=K>>3,O=Math.ceil(z*K/8),D=new Uint8Array(fe*O);let Z=0;const F=[0,0,4,0,2,0,1],G=[0,4,0,2,0,1,0],ne=[8,8,8,4,4,2,2],M=[8,8,4,4,2,2,1];let J=0;for(;J<7;){const T=ne[J],Y=M[J];let $=0,ae=0,I=F[J];for(;I<fe;)I+=T,ae++;let B=G[J];for(;B<z;)B+=Y,$++;const ue=Math.ceil($*K/8);f(W,L,Z,$,ae);let te=0,he=F[J];for(;he<fe;){let Be=G[J],Ee=Z+te*ue<<3;for(;Be<z;){var A;if(K==1&&(A=(A=W[Ee>>3])>>7-(7&Ee)&1,D[he*O+(Be>>3)]|=A<<7-((7&Be)<<0)),K==2&&(A=(A=W[Ee>>3])>>6-(7&Ee)&3,D[he*O+(Be>>2)]|=A<<6-((3&Be)<<1)),K==4&&(A=(A=W[Ee>>3])>>4-(7&Ee)&15,D[he*O+(Be>>1)]|=A<<4-((1&Be)<<2)),K>=8){const lt=he*O+Be*X;for(let Me=0;Me<X;Me++)D[lt+Me]=W[(Ee>>3)+Me]}Ee+=K,Be+=Y}te++,he+=T}$*ae!=0&&(Z+=ae*(1+ue)),J+=1}return D})(w,v)),w}function i(v,w){return l(new Uint8Array(v.buffer,2,v.length-6),w)}var l=(function(){const v={H:{}};return v.H.N=function(w,_){const k=Uint8Array;let E,R,H=0,q=0,W=0,L=0,z=0,fe=0,K=0,X=0,O=0;if(w[0]==3&&w[1]==0)return _||new k(0);const D=v.H,Z=D.b,F=D.e,G=D.R,ne=D.n,M=D.A,J=D.Z,A=D.m,T=_==null;for(T&&(_=new k(w.length>>>2<<5));H==0;)if(H=Z(w,O,1),q=Z(w,O+1,2),O+=3,q!=0){if(T&&(_=v.H.W(_,X+(1<<17))),q==1&&(E=A.J,R=A.h,fe=511,K=31),q==2){W=F(w,O,5)+257,L=F(w,O+5,5)+1,z=F(w,O+10,4)+4,O+=14;let $=1;for(var Y=0;Y<38;Y+=2)A.Q[Y]=0,A.Q[Y+1]=0;for(Y=0;Y<z;Y++){const B=F(w,O+3*Y,3);A.Q[1+(A.X[Y]<<1)]=B,B>$&&($=B)}O+=3*z,ne(A.Q,$),M(A.Q,$,A.u),E=A.w,R=A.d,O=G(A.u,(1<<$)-1,W+L,w,O,A.v);const ae=D.V(A.v,0,W,A.C);fe=(1<<ae)-1;const I=D.V(A.v,W,L,A.D);K=(1<<I)-1,ne(A.C,ae),M(A.C,ae,E),ne(A.D,I),M(A.D,I,R)}for(;;){const $=E[J(w,O)&fe];O+=15&$;const ae=$>>>4;if(!(ae>>>8))_[X++]=ae;else{if(ae==256)break;{let I=X+ae-254;if(ae>264){const Be=A.q[ae-257];I=X+(Be>>>3)+F(w,O,7&Be),O+=7&Be}const B=R[J(w,O)&K];O+=15&B;const ue=B>>>4,te=A.c[ue],he=(te>>>4)+Z(w,O,15&te);for(O+=15&te;X<I;)_[X]=_[X++-he],_[X]=_[X++-he],_[X]=_[X++-he],_[X]=_[X++-he];X=I}}}}else{(7&O)!=0&&(O+=8-(7&O));const $=4+(O>>>3),ae=w[$-4]|w[$-3]<<8;T&&(_=v.H.W(_,X+ae)),_.set(new k(w.buffer,w.byteOffset+$,ae),X),O=$+ae<<3,X+=ae}return _.length==X?_:_.slice(0,X)},v.H.W=function(w,_){const k=w.length;if(_<=k)return w;const E=new Uint8Array(k<<1);return E.set(w,0),E},v.H.R=function(w,_,k,E,R,H){const q=v.H.e,W=v.H.Z;let L=0;for(;L<k;){const z=w[W(E,R)&_];R+=15&z;const fe=z>>>4;if(fe<=15)H[L]=fe,L++;else{let K=0,X=0;fe==16?(X=3+q(E,R,2),R+=2,K=H[L-1]):fe==17?(X=3+q(E,R,3),R+=3):fe==18&&(X=11+q(E,R,7),R+=7);const O=L+X;for(;L<O;)H[L]=K,L++}}return R},v.H.V=function(w,_,k,E){let R=0,H=0;const q=E.length>>>1;for(;H<k;){const W=w[H+_];E[H<<1]=0,E[1+(H<<1)]=W,W>R&&(R=W),H++}for(;H<q;)E[H<<1]=0,E[1+(H<<1)]=0,H++;return R},v.H.n=function(w,_){const k=v.H.m,E=w.length;let R,H,q,W;const L=k.j;for(var z=0;z<=_;z++)L[z]=0;for(z=1;z<E;z+=2)L[w[z]]++;const fe=k.K;for(R=0,L[0]=0,H=1;H<=_;H++)R=R+L[H-1]<<1,fe[H]=R;for(q=0;q<E;q+=2)W=w[q+1],W!=0&&(w[q]=fe[W],fe[W]++)},v.H.A=function(w,_,k){const E=w.length,R=v.H.m.r;for(let H=0;H<E;H+=2)if(w[H+1]!=0){const q=H>>1,W=w[H+1],L=q<<4|W,z=_-W;let fe=w[H]<<z;const K=fe+(1<<z);for(;fe!=K;)k[R[fe]>>>15-_]=L,fe++}},v.H.l=function(w,_){const k=v.H.m.r,E=15-_;for(let R=0;R<w.length;R+=2){const H=w[R]<<_-w[R+1];w[R]=k[H]>>>E}},v.H.M=function(w,_,k){k<<=7&_;const E=_>>>3;w[E]|=k,w[E+1]|=k>>>8},v.H.I=function(w,_,k){k<<=7&_;const E=_>>>3;w[E]|=k,w[E+1]|=k>>>8,w[E+2]|=k>>>16},v.H.e=function(w,_,k){return(w[_>>>3]|w[1+(_>>>3)]<<8)>>>(7&_)&(1<<k)-1},v.H.b=function(w,_,k){return(w[_>>>3]|w[1+(_>>>3)]<<8|w[2+(_>>>3)]<<16)>>>(7&_)&(1<<k)-1},v.H.Z=function(w,_){return(w[_>>>3]|w[1+(_>>>3)]<<8|w[2+(_>>>3)]<<16)>>>(7&_)},v.H.i=function(w,_){return(w[_>>>3]|w[1+(_>>>3)]<<8|w[2+(_>>>3)]<<16|w[3+(_>>>3)]<<24)>>>(7&_)},v.H.m=(function(){const w=Uint16Array,_=Uint32Array;return{K:new w(16),j:new w(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new w(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new _(32),J:new w(512),_:[],h:new w(32),$:[],w:new w(32768),C:[],v:[],d:new w(32768),D:[],u:new w(512),Q:[],r:new w(32768),s:new _(286),Y:new _(30),a:new _(19),t:new _(15e3),k:new w(65536),g:new w(32768)}})(),(function(){const w=v.H.m;for(var _=0;_<32768;_++){let E=_;E=(2863311530&E)>>>1|(1431655765&E)<<1,E=(3435973836&E)>>>2|(858993459&E)<<2,E=(4042322160&E)>>>4|(252645135&E)<<4,E=(4278255360&E)>>>8|(16711935&E)<<8,w.r[_]=(E>>>16|E<<16)>>>17}function k(E,R,H){for(;R--!=0;)E.push(0,H)}for(_=0;_<32;_++)w.q[_]=w.S[_]<<3|w.T[_],w.c[_]=w.p[_]<<4|w.z[_];k(w._,144,8),k(w._,112,9),k(w._,24,7),k(w._,8,8),v.H.n(w._,9),v.H.A(w._,9,w.J),v.H.l(w._,9),k(w.$,32,5),v.H.n(w.$,5),v.H.A(w.$,5,w.h),v.H.l(w.$,5),k(w.Q,19,0),k(w.C,286,0),k(w.D,30,0),k(w.v,320,0)})(),v.H.N})();function c(v){return[1,null,3,1,2,null,4][v.ctype]*v.depth}function f(v,w,_,k,E){let R=c(w);const H=Math.ceil(k*R/8);let q,W;R=Math.ceil(R/8);let L=v[_],z=0;if(L>1&&(v[_]=[0,0,1][L-2]),L==3)for(z=R;z<H;z++)v[z+1]=v[z+1]+(v[z+1-R]>>>1)&255;for(let fe=0;fe<E;fe++)if(q=_+fe*H,W=q+fe+1,L=v[W-1],z=0,L==0)for(;z<H;z++)v[q+z]=v[W+z];else if(L==1){for(;z<R;z++)v[q+z]=v[W+z];for(;z<H;z++)v[q+z]=v[W+z]+v[q+z-R]}else if(L==2)for(;z<H;z++)v[q+z]=v[W+z]+v[q+z-H];else if(L==3){for(;z<R;z++)v[q+z]=v[W+z]+(v[q+z-H]>>>1);for(;z<H;z++)v[q+z]=v[W+z]+(v[q+z-H]+v[q+z-R]>>>1)}else{for(;z<R;z++)v[q+z]=v[W+z]+m(0,v[q+z-H],0);for(;z<H;z++)v[q+z]=v[W+z]+m(v[q+z-R],v[q+z-H],v[q+z-R-H])}return v}function m(v,w,_){const k=v+w-_,E=k-v,R=k-w,H=k-_;return E*E<=R*R&&E*E<=H*H?v:R*R<=H*H?w:_}function y(v,w,_){_.width=a.readUint(v,w),w+=4,_.height=a.readUint(v,w),w+=4,_.depth=v[w],w++,_.ctype=v[w],w++,_.compress=v[w],w++,_.filter=v[w],w++,_.interlace=v[w],w++}function b(v,w,_,k,E,R,H,q,W){const L=Math.min(w,E),z=Math.min(_,R);let fe=0,K=0;for(let J=0;J<z;J++)for(let A=0;A<L;A++)if(H>=0&&q>=0?(fe=J*w+A<<2,K=(q+J)*E+H+A<<2):(fe=(-q+J)*w-H+A<<2,K=J*E+A<<2),W==0)k[K]=v[fe],k[K+1]=v[fe+1],k[K+2]=v[fe+2],k[K+3]=v[fe+3];else if(W==1){var X=v[fe+3]*.00392156862745098,O=v[fe]*X,D=v[fe+1]*X,Z=v[fe+2]*X,F=k[K+3]*(1/255),G=k[K]*F,ne=k[K+1]*F,M=k[K+2]*F;const T=1-X,Y=X+F*T,$=Y==0?0:1/Y;k[K+3]=255*Y,k[K+0]=(O+G*T)*$,k[K+1]=(D+ne*T)*$,k[K+2]=(Z+M*T)*$}else if(W==2)X=v[fe+3],O=v[fe],D=v[fe+1],Z=v[fe+2],F=k[K+3],G=k[K],ne=k[K+1],M=k[K+2],X==F&&O==G&&D==ne&&Z==M?(k[K]=0,k[K+1]=0,k[K+2]=0,k[K+3]=0):(k[K]=O,k[K+1]=D,k[K+2]=Z,k[K+3]=X);else if(W==3){if(X=v[fe+3],O=v[fe],D=v[fe+1],Z=v[fe+2],F=k[K+3],G=k[K],ne=k[K+1],M=k[K+2],X==F&&O==G&&D==ne&&Z==M)continue;if(X<220&&F>20)return!1}return!0}return{decode:function(w){const _=new Uint8Array(w);let k=8;const E=a,R=E.readUshort,H=E.readUint,q={tabs:{},frames:[]},W=new Uint8Array(_.length);let L,z=0,fe=0;const K=[137,80,78,71,13,10,26,10];for(var X=0;X<8;X++)if(_[X]!=K[X])throw"The input is not a PNG file!";for(;k<_.length;){const J=E.readUint(_,k);k+=4;const A=E.readASCII(_,k,4);if(k+=4,A=="IHDR")y(_,k,q);else if(A=="iCCP"){for(var O=k;_[O]!=0;)O++;E.readASCII(_,k,O-k),_[O+1];const T=_.slice(O+2,k+J);let Y=null;try{Y=i(T)}catch{Y=l(T)}q.tabs[A]=Y}else if(A=="CgBI")q.tabs[A]=_.slice(k,k+4);else if(A=="IDAT"){for(X=0;X<J;X++)W[z+X]=_[k+X];z+=J}else if(A=="acTL")q.tabs[A]={num_frames:H(_,k),num_plays:H(_,k+4)},L=new Uint8Array(_.length);else if(A=="fcTL"){fe!=0&&((M=q.frames[q.frames.length-1]).data=r(q,L.slice(0,fe),M.rect.width,M.rect.height),fe=0);const T={x:H(_,k+12),y:H(_,k+16),width:H(_,k+4),height:H(_,k+8)};let Y=R(_,k+22);Y=R(_,k+20)/(Y==0?100:Y);const $={rect:T,delay:Math.round(1e3*Y),dispose:_[k+24],blend:_[k+25]};q.frames.push($)}else if(A=="fdAT"){for(X=0;X<J-4;X++)L[fe+X]=_[k+X+4];fe+=J-4}else if(A=="pHYs")q.tabs[A]=[E.readUint(_,k),E.readUint(_,k+4),_[k+8]];else if(A=="cHRM")for(q.tabs[A]=[],X=0;X<8;X++)q.tabs[A].push(E.readUint(_,k+4*X));else if(A=="tEXt"||A=="zTXt"){q.tabs[A]==null&&(q.tabs[A]={});var D=E.nextZero(_,k),Z=E.readASCII(_,k,D-k),F=k+J-D-1;if(A=="tEXt")ne=E.readASCII(_,D+1,F);else{var G=i(_.slice(D+2,D+2+F));ne=E.readUTF8(G,0,G.length)}q.tabs[A][Z]=ne}else if(A=="iTXt"){q.tabs[A]==null&&(q.tabs[A]={}),D=0,O=k,D=E.nextZero(_,O),Z=E.readASCII(_,O,D-O);const T=_[O=D+1];var ne;_[O+1],O+=2,D=E.nextZero(_,O),E.readASCII(_,O,D-O),O=D+1,D=E.nextZero(_,O),E.readUTF8(_,O,D-O),F=J-((O=D+1)-k),T==0?ne=E.readUTF8(_,O,F):(G=i(_.slice(O,O+F)),ne=E.readUTF8(G,0,G.length)),q.tabs[A][Z]=ne}else if(A=="PLTE")q.tabs[A]=E.readBytes(_,k,J);else if(A=="hIST"){const T=q.tabs.PLTE.length/3;for(q.tabs[A]=[],X=0;X<T;X++)q.tabs[A].push(R(_,k+2*X))}else if(A=="tRNS")q.ctype==3?q.tabs[A]=E.readBytes(_,k,J):q.ctype==0?q.tabs[A]=R(_,k):q.ctype==2&&(q.tabs[A]=[R(_,k),R(_,k+2),R(_,k+4)]);else if(A=="gAMA")q.tabs[A]=E.readUint(_,k)/1e5;else if(A=="sRGB")q.tabs[A]=_[k];else if(A=="bKGD")q.ctype==0||q.ctype==4?q.tabs[A]=[R(_,k)]:q.ctype==2||q.ctype==6?q.tabs[A]=[R(_,k),R(_,k+2),R(_,k+4)]:q.ctype==3&&(q.tabs[A]=_[k]);else if(A=="IEND")break;k+=J,E.readUint(_,k),k+=4}var M;return fe!=0&&((M=q.frames[q.frames.length-1]).data=r(q,L.slice(0,fe),M.rect.width,M.rect.height)),q.data=r(q,W,q.width,q.height),delete q.compress,delete q.interlace,delete q.filter,q},toRGBA8:function(w){const _=w.width,k=w.height;if(w.tabs.acTL==null)return[n(w.data,_,k,w).buffer];const E=[];w.frames[0].data==null&&(w.frames[0].data=w.data);const R=_*k*4,H=new Uint8Array(R),q=new Uint8Array(R),W=new Uint8Array(R);for(let z=0;z<w.frames.length;z++){const fe=w.frames[z],K=fe.rect.x,X=fe.rect.y,O=fe.rect.width,D=fe.rect.height,Z=n(fe.data,O,D,w);if(z!=0)for(var L=0;L<R;L++)W[L]=H[L];if(fe.blend==0?b(Z,O,D,H,_,k,K,X,0):fe.blend==1&&b(Z,O,D,H,_,k,K,X,1),E.push(H.buffer.slice(0)),fe.dispose!=0){if(fe.dispose==1)b(q,O,D,H,_,k,K,X,0);else if(fe.dispose==2)for(L=0;L<R;L++)H[L]=W[L]}}return E},_paeth:m,_copyTile:b,_bin:a}})();(function(){const{_copyTile:a}=fr,{_bin:n}=fr,r=fr._paeth;var i={table:(function(){const O=new Uint32Array(256);for(let D=0;D<256;D++){let Z=D;for(let F=0;F<8;F++)1&Z?Z=3988292384^Z>>>1:Z>>>=1;O[D]=Z}return O})(),update(O,D,Z,F){for(let G=0;G<F;G++)O=i.table[255&(O^D[Z+G])]^O>>>8;return O},crc:(O,D,Z)=>4294967295^i.update(4294967295,O,D,Z)};function l(O,D,Z,F){D[Z]+=O[0]*F>>4,D[Z+1]+=O[1]*F>>4,D[Z+2]+=O[2]*F>>4,D[Z+3]+=O[3]*F>>4}function c(O){return Math.max(0,Math.min(255,O))}function f(O,D){const Z=O[0]-D[0],F=O[1]-D[1],G=O[2]-D[2],ne=O[3]-D[3];return Z*Z+F*F+G*G+ne*ne}function m(O,D,Z,F,G,ne,M){M==null&&(M=1);const J=F.length,A=[];for(var T=0;T<J;T++){const he=F[T];A.push([he>>>0&255,he>>>8&255,he>>>16&255,he>>>24&255])}for(T=0;T<J;T++){let he=4294967295;for(var Y=0,$=0;$<J;$++){var ae=f(A[T],A[$]);$!=T&&ae<he&&(he=ae,Y=$)}}const I=new Uint32Array(G.buffer),B=new Int16Array(D*Z*4),ue=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(T=0;T<ue.length;T++)ue[T]=255*((ue[T]+.5)/16-.5);for(let he=0;he<Z;he++)for(let Be=0;Be<D;Be++){var te;T=4*(he*D+Be),M!=2?te=[c(O[T]+B[T]),c(O[T+1]+B[T+1]),c(O[T+2]+B[T+2]),c(O[T+3]+B[T+3])]:(ae=ue[4*(3&he)+(3&Be)],te=[c(O[T]+ae),c(O[T+1]+ae),c(O[T+2]+ae),c(O[T+3]+ae)]),Y=0;let Ee=16777215;for($=0;$<J;$++){const Ue=f(te,A[$]);Ue<Ee&&(Ee=Ue,Y=$)}const lt=A[Y],Me=[te[0]-lt[0],te[1]-lt[1],te[2]-lt[2],te[3]-lt[3]];M==1&&(Be!=D-1&&l(Me,B,T+4,7),he!=Z-1&&(Be!=0&&l(Me,B,T+4*D-4,3),l(Me,B,T+4*D,5),Be!=D-1&&l(Me,B,T+4*D+4,1))),ne[T>>2]=Y,I[T>>2]=F[Y]}}function y(O,D,Z,F,G){G==null&&(G={});const{crc:ne}=i,M=n.writeUint,J=n.writeUshort,A=n.writeASCII;let T=8;const Y=O.frames.length>1;let $,ae=!1,I=33+(Y?20:0);if(G.sRGB!=null&&(I+=13),G.pHYs!=null&&(I+=21),G.iCCP!=null&&($=pako.deflate(G.iCCP),I+=21+$.length+4),O.ctype==3){for(var B=O.plte.length,ue=0;ue<B;ue++)O.plte[ue]>>>24!=255&&(ae=!0);I+=8+3*B+4+(ae?8+1*B+4:0)}for(var te=0;te<O.frames.length;te++)Y&&(I+=38),I+=(lt=O.frames[te]).cimg.length+12,te!=0&&(I+=4);I+=12;const he=new Uint8Array(I),Be=[137,80,78,71,13,10,26,10];for(ue=0;ue<8;ue++)he[ue]=Be[ue];if(M(he,T,13),T+=4,A(he,T,"IHDR"),T+=4,M(he,T,D),T+=4,M(he,T,Z),T+=4,he[T]=O.depth,T++,he[T]=O.ctype,T++,he[T]=0,T++,he[T]=0,T++,he[T]=0,T++,M(he,T,ne(he,T-17,17)),T+=4,G.sRGB!=null&&(M(he,T,1),T+=4,A(he,T,"sRGB"),T+=4,he[T]=G.sRGB,T++,M(he,T,ne(he,T-5,5)),T+=4),G.iCCP!=null){const Me=13+$.length;M(he,T,Me),T+=4,A(he,T,"iCCP"),T+=4,A(he,T,"ICC profile"),T+=11,T+=2,he.set($,T),T+=$.length,M(he,T,ne(he,T-(Me+4),Me+4)),T+=4}if(G.pHYs!=null&&(M(he,T,9),T+=4,A(he,T,"pHYs"),T+=4,M(he,T,G.pHYs[0]),T+=4,M(he,T,G.pHYs[1]),T+=4,he[T]=G.pHYs[2],T++,M(he,T,ne(he,T-13,13)),T+=4),Y&&(M(he,T,8),T+=4,A(he,T,"acTL"),T+=4,M(he,T,O.frames.length),T+=4,M(he,T,G.loop!=null?G.loop:0),T+=4,M(he,T,ne(he,T-12,12)),T+=4),O.ctype==3){for(M(he,T,3*(B=O.plte.length)),T+=4,A(he,T,"PLTE"),T+=4,ue=0;ue<B;ue++){const Me=3*ue,Ue=O.plte[ue],_t=255&Ue,at=Ue>>>8&255,yn=Ue>>>16&255;he[T+Me+0]=_t,he[T+Me+1]=at,he[T+Me+2]=yn}if(T+=3*B,M(he,T,ne(he,T-3*B-4,3*B+4)),T+=4,ae){for(M(he,T,B),T+=4,A(he,T,"tRNS"),T+=4,ue=0;ue<B;ue++)he[T+ue]=O.plte[ue]>>>24&255;T+=B,M(he,T,ne(he,T-B-4,B+4)),T+=4}}let Ee=0;for(te=0;te<O.frames.length;te++){var lt=O.frames[te];Y&&(M(he,T,26),T+=4,A(he,T,"fcTL"),T+=4,M(he,T,Ee++),T+=4,M(he,T,lt.rect.width),T+=4,M(he,T,lt.rect.height),T+=4,M(he,T,lt.rect.x),T+=4,M(he,T,lt.rect.y),T+=4,J(he,T,F[te]),T+=2,J(he,T,1e3),T+=2,he[T]=lt.dispose,T++,he[T]=lt.blend,T++,M(he,T,ne(he,T-30,30)),T+=4);const Me=lt.cimg;M(he,T,(B=Me.length)+(te==0?0:4)),T+=4;const Ue=T;A(he,T,te==0?"IDAT":"fdAT"),T+=4,te!=0&&(M(he,T,Ee++),T+=4),he.set(Me,T),T+=B,M(he,T,ne(he,Ue,T-Ue)),T+=4}return M(he,T,0),T+=4,A(he,T,"IEND"),T+=4,M(he,T,ne(he,T-4,4)),T+=4,he.buffer}function b(O,D,Z){for(let F=0;F<O.frames.length;F++){const G=O.frames[F];G.rect.width;const ne=G.rect.height,M=new Uint8Array(ne*G.bpl+ne);G.cimg=k(G.img,ne,G.bpp,G.bpl,M,D,Z)}}function v(O,D,Z,F,G){const ne=G[0],M=G[1],J=G[2],A=G[3],T=G[4],Y=G[5];let $=6,ae=8,I=255;for(var B=0;B<O.length;B++){const Pe=new Uint8Array(O[B]);for(var ue=Pe.length,te=0;te<ue;te+=4)I&=Pe[te+3]}const he=I!=255,Be=(function(ke,ze,We,yt,ct,Mt){const vt=[];for(var gt=0;gt<ke.length;gt++){const an=new Uint8Array(ke[gt]),Sn=new Uint32Array(an.buffer);var hn;let tn=0,vn=0,zt=ze,It=We,$e=yt?1:0;if(gt!=0){const ja=Mt||yt||gt==1||vt[gt-2].dispose!=0?1:2;let bn=0,Ha=1e9;for(let He=0;He<ja;He++){var mt=new Uint8Array(ke[gt-1-He]);const Na=new Uint32Array(ke[gt-1-He]);let wn=ze,xn=We,Tn=-1,Kn=-1;for(let kn=0;kn<We;kn++)for(let On=0;On<ze;On++)Sn[Xt=kn*ze+On]!=Na[Xt]&&(On<wn&&(wn=On),On>Tn&&(Tn=On),kn<xn&&(xn=kn),kn>Kn&&(Kn=kn));Tn==-1&&(wn=xn=Tn=Kn=0),ct&&((1&wn)==1&&wn--,(1&xn)==1&&xn--);const ga=(Tn-wn+1)*(Kn-xn+1);ga<Ha&&(Ha=ga,bn=He,tn=wn,vn=xn,zt=Tn-wn+1,It=Kn-xn+1)}mt=new Uint8Array(ke[gt-1-bn]),bn==1&&(vt[gt-1].dispose=2),hn=new Uint8Array(zt*It*4),a(mt,ze,We,hn,zt,It,-tn,-vn,0),$e=a(an,ze,We,hn,zt,It,-tn,-vn,3)?1:0,$e==1?_(an,ze,We,hn,{x:tn,y:vn,width:zt,height:It}):a(an,ze,We,hn,zt,It,-tn,-vn,0)}else hn=an.slice(0);vt.push({rect:{x:tn,y:vn,width:zt,height:It},img:hn,blend:$e,dispose:0})}if(yt)for(gt=0;gt<vt.length;gt++){if((Qn=vt[gt]).blend==1)continue;const an=Qn.rect,Sn=vt[gt-1].rect,tn=Math.min(an.x,Sn.x),vn=Math.min(an.y,Sn.y),zt={x:tn,y:vn,width:Math.max(an.x+an.width,Sn.x+Sn.width)-tn,height:Math.max(an.y+an.height,Sn.y+Sn.height)-vn};vt[gt-1].dispose=1,gt-1!=0&&w(ke,ze,We,vt,gt-1,zt,ct),w(ke,ze,We,vt,gt,zt,ct)}let Qt=0;if(ke.length!=1)for(var Xt=0;Xt<vt.length;Xt++){var Qn;Qt+=(Qn=vt[Xt]).rect.width*Qn.rect.height}return vt})(O,D,Z,ne,M,J),Ee={},lt=[],Me=[];if(F!=0){const Pe=[];for(te=0;te<Be.length;te++)Pe.push(Be[te].img.buffer);const ke=(function(ct){let Mt=0;for(var vt=0;vt<ct.length;vt++)Mt+=ct[vt].byteLength;const gt=new Uint8Array(Mt);let hn=0;for(vt=0;vt<ct.length;vt++){const mt=new Uint8Array(ct[vt]),Qt=mt.length;for(let Xt=0;Xt<Qt;Xt+=4){let Qn=mt[Xt],an=mt[Xt+1],Sn=mt[Xt+2];const tn=mt[Xt+3];tn==0&&(Qn=an=Sn=0),gt[hn+Xt]=Qn,gt[hn+Xt+1]=an,gt[hn+Xt+2]=Sn,gt[hn+Xt+3]=tn}hn+=Qt}return gt.buffer})(Pe),ze=R(ke,F);for(te=0;te<ze.plte.length;te++)lt.push(ze.plte[te].est.rgba);let We=0;for(te=0;te<Be.length;te++){const yt=(_t=Be[te]).img.length;var Ue=new Uint8Array(ze.inds.buffer,We>>2,yt>>2);Me.push(Ue);const ct=new Uint8Array(ze.abuf,We,yt);Y&&m(_t.img,_t.rect.width,_t.rect.height,lt,ct,Ue),_t.img.set(ct),We+=yt}}else for(B=0;B<Be.length;B++){var _t=Be[B];const Pe=new Uint32Array(_t.img.buffer);var at=_t.rect.width;for(ue=Pe.length,Ue=new Uint8Array(ue),Me.push(Ue),te=0;te<ue;te++){const ke=Pe[te];if(te!=0&&ke==Pe[te-1])Ue[te]=Ue[te-1];else if(te>at&&ke==Pe[te-at])Ue[te]=Ue[te-at];else{let ze=Ee[ke];if(ze==null&&(Ee[ke]=ze=lt.length,lt.push(ke),lt.length>=300))break;Ue[te]=ze}}}const yn=lt.length;for(yn<=256&&T==0&&(ae=yn<=2?1:yn<=4?2:yn<=16?4:8,ae=Math.max(ae,A)),B=0;B<Be.length;B++){(_t=Be[B]).rect.x,_t.rect.y,at=_t.rect.width;const Pe=_t.rect.height;let ke=_t.img;new Uint32Array(ke.buffer);let ze=4*at,We=4;if(yn<=256&&T==0){ze=Math.ceil(ae*at/8);var Fe=new Uint8Array(ze*Pe);const yt=Me[B];for(let ct=0;ct<Pe;ct++){te=ct*ze;const Mt=ct*at;if(ae==8)for(var we=0;we<at;we++)Fe[te+we]=yt[Mt+we];else if(ae==4)for(we=0;we<at;we++)Fe[te+(we>>1)]|=yt[Mt+we]<<4-4*(1&we);else if(ae==2)for(we=0;we<at;we++)Fe[te+(we>>2)]|=yt[Mt+we]<<6-2*(3&we);else if(ae==1)for(we=0;we<at;we++)Fe[te+(we>>3)]|=yt[Mt+we]<<7-1*(7&we)}ke=Fe,$=3,We=1}else if(he==0&&Be.length==1){Fe=new Uint8Array(at*Pe*3);const yt=at*Pe;for(te=0;te<yt;te++){const ct=3*te,Mt=4*te;Fe[ct]=ke[Mt],Fe[ct+1]=ke[Mt+1],Fe[ct+2]=ke[Mt+2]}ke=Fe,$=2,We=3,ze=3*at}_t.img=ke,_t.bpl=ze,_t.bpp=We}return{ctype:$,depth:ae,plte:lt,frames:Be}}function w(O,D,Z,F,G,ne,M){const J=Uint8Array,A=Uint32Array,T=new J(O[G-1]),Y=new A(O[G-1]),$=G+1<O.length?new J(O[G+1]):null,ae=new J(O[G]),I=new A(ae.buffer);let B=D,ue=Z,te=-1,he=-1;for(let Ee=0;Ee<ne.height;Ee++)for(let lt=0;lt<ne.width;lt++){const Me=ne.x+lt,Ue=ne.y+Ee,_t=Ue*D+Me,at=I[_t];at==0||F[G-1].dispose==0&&Y[_t]==at&&($==null||$[4*_t+3]!=0)||(Me<B&&(B=Me),Me>te&&(te=Me),Ue<ue&&(ue=Ue),Ue>he&&(he=Ue))}te==-1&&(B=ue=te=he=0),M&&((1&B)==1&&B--,(1&ue)==1&&ue--),ne={x:B,y:ue,width:te-B+1,height:he-ue+1};const Be=F[G];Be.rect=ne,Be.blend=1,Be.img=new Uint8Array(ne.width*ne.height*4),F[G-1].dispose==0?(a(T,D,Z,Be.img,ne.width,ne.height,-ne.x,-ne.y,0),_(ae,D,Z,Be.img,ne)):a(ae,D,Z,Be.img,ne.width,ne.height,-ne.x,-ne.y,0)}function _(O,D,Z,F,G){a(O,D,Z,F,G.width,G.height,-G.x,-G.y,2)}function k(O,D,Z,F,G,ne,M){const J=[];let A,T=[0,1,2,3,4];ne!=-1?T=[ne]:(D*F>5e5||Z==1)&&(T=[0]),M&&(A={level:0});const Y=e2;for(var $=0;$<T.length;$++){for(let B=0;B<D;B++)E(G,O,B,F,Z,T[$]);J.push(Y.deflate(G,A))}let ae,I=1e9;for($=0;$<J.length;$++)J[$].length<I&&(ae=$,I=J[$].length);return J[ae]}function E(O,D,Z,F,G,ne){const M=Z*F;let J=M+Z;if(O[J]=ne,J++,ne==0)if(F<500)for(var A=0;A<F;A++)O[J+A]=D[M+A];else O.set(new Uint8Array(D.buffer,M,F),J);else if(ne==1){for(A=0;A<G;A++)O[J+A]=D[M+A];for(A=G;A<F;A++)O[J+A]=D[M+A]-D[M+A-G]+256&255}else if(Z==0){for(A=0;A<G;A++)O[J+A]=D[M+A];if(ne==2)for(A=G;A<F;A++)O[J+A]=D[M+A];if(ne==3)for(A=G;A<F;A++)O[J+A]=D[M+A]-(D[M+A-G]>>1)+256&255;if(ne==4)for(A=G;A<F;A++)O[J+A]=D[M+A]-r(D[M+A-G],0,0)+256&255}else{if(ne==2)for(A=0;A<F;A++)O[J+A]=D[M+A]+256-D[M+A-F]&255;if(ne==3){for(A=0;A<G;A++)O[J+A]=D[M+A]+256-(D[M+A-F]>>1)&255;for(A=G;A<F;A++)O[J+A]=D[M+A]+256-(D[M+A-F]+D[M+A-G]>>1)&255}if(ne==4){for(A=0;A<G;A++)O[J+A]=D[M+A]+256-r(0,D[M+A-F],0)&255;for(A=G;A<F;A++)O[J+A]=D[M+A]+256-r(D[M+A-G],D[M+A-F],D[M+A-G-F])&255}}}function R(O,D){const Z=new Uint8Array(O),F=Z.slice(0),G=new Uint32Array(F.buffer),ne=H(F,D),M=ne[0],J=ne[1],A=Z.length,T=new Uint8Array(A>>2);let Y;if(Z.length<2e7)for(var $=0;$<A;$+=4)Y=q(M,ae=Z[$]*(1/255),I=Z[$+1]*(1/255),B=Z[$+2]*(1/255),ue=Z[$+3]*(1/255)),T[$>>2]=Y.ind,G[$>>2]=Y.est.rgba;else for($=0;$<A;$+=4){var ae=Z[$]*.00392156862745098,I=Z[$+1]*(1/255),B=Z[$+2]*(1/255),ue=Z[$+3]*(1/255);for(Y=M;Y.left;)Y=W(Y.est,ae,I,B,ue)<=0?Y.left:Y.right;T[$>>2]=Y.ind,G[$>>2]=Y.est.rgba}return{abuf:F.buffer,inds:T,plte:J}}function H(O,D,Z){Z==null&&(Z=1e-4);const F=new Uint32Array(O.buffer),G={i0:0,i1:O.length,bst:null,est:null,tdst:0,left:null,right:null};G.bst=fe(O,G.i0,G.i1),G.est=K(G.bst);const ne=[G];for(;ne.length<D;){let J=0,A=0;for(var M=0;M<ne.length;M++)ne[M].est.L>J&&(J=ne[M].est.L,A=M);if(J<Z)break;const T=ne[A],Y=L(O,F,T.i0,T.i1,T.est.e,T.est.eMq255);if(T.i0>=Y||T.i1<=Y){T.est.L=0;continue}const $={i0:T.i0,i1:Y,bst:null,est:null,tdst:0,left:null,right:null};$.bst=fe(O,$.i0,$.i1),$.est=K($.bst);const ae={i0:Y,i1:T.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ae.bst={R:[],m:[],N:T.bst.N-$.bst.N},M=0;M<16;M++)ae.bst.R[M]=T.bst.R[M]-$.bst.R[M];for(M=0;M<4;M++)ae.bst.m[M]=T.bst.m[M]-$.bst.m[M];ae.est=K(ae.bst),T.left=$,T.right=ae,ne[A]=$,ne.push(ae)}for(ne.sort(((J,A)=>A.bst.N-J.bst.N)),M=0;M<ne.length;M++)ne[M].ind=M;return[G,ne]}function q(O,D,Z,F,G){if(O.left==null)return O.tdst=(function($,ae,I,B,ue){const te=ae-$[0],he=I-$[1],Be=B-$[2],Ee=ue-$[3];return te*te+he*he+Be*Be+Ee*Ee})(O.est.q,D,Z,F,G),O;const ne=W(O.est,D,Z,F,G);let M=O.left,J=O.right;ne>0&&(M=O.right,J=O.left);const A=q(M,D,Z,F,G);if(A.tdst<=ne*ne)return A;const T=q(J,D,Z,F,G);return T.tdst<A.tdst?T:A}function W(O,D,Z,F,G){const{e:ne}=O;return ne[0]*D+ne[1]*Z+ne[2]*F+ne[3]*G-O.eMq}function L(O,D,Z,F,G,ne){for(F-=4;Z<F;){for(;z(O,Z,G)<=ne;)Z+=4;for(;z(O,F,G)>ne;)F-=4;if(Z>=F)break;const M=D[Z>>2];D[Z>>2]=D[F>>2],D[F>>2]=M,Z+=4,F-=4}for(;z(O,Z,G)>ne;)Z-=4;return Z+4}function z(O,D,Z){return O[D]*Z[0]+O[D+1]*Z[1]+O[D+2]*Z[2]+O[D+3]*Z[3]}function fe(O,D,Z){const F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G=[0,0,0,0],ne=Z-D>>2;for(let M=D;M<Z;M+=4){const J=O[M]*.00392156862745098,A=O[M+1]*(1/255),T=O[M+2]*(1/255),Y=O[M+3]*(1/255);G[0]+=J,G[1]+=A,G[2]+=T,G[3]+=Y,F[0]+=J*J,F[1]+=J*A,F[2]+=J*T,F[3]+=J*Y,F[5]+=A*A,F[6]+=A*T,F[7]+=A*Y,F[10]+=T*T,F[11]+=T*Y,F[15]+=Y*Y}return F[4]=F[1],F[8]=F[2],F[9]=F[6],F[12]=F[3],F[13]=F[7],F[14]=F[11],{R:F,m:G,N:ne}}function K(O){const{R:D}=O,{m:Z}=O,{N:F}=O,G=Z[0],ne=Z[1],M=Z[2],J=Z[3],A=F==0?0:1/F,T=[D[0]-G*G*A,D[1]-G*ne*A,D[2]-G*M*A,D[3]-G*J*A,D[4]-ne*G*A,D[5]-ne*ne*A,D[6]-ne*M*A,D[7]-ne*J*A,D[8]-M*G*A,D[9]-M*ne*A,D[10]-M*M*A,D[11]-M*J*A,D[12]-J*G*A,D[13]-J*ne*A,D[14]-J*M*A,D[15]-J*J*A],Y=T,$=X;let ae=[Math.random(),Math.random(),Math.random(),Math.random()],I=0,B=0;if(F!=0)for(let te=0;te<16&&(ae=$.multVec(Y,ae),B=Math.sqrt($.dot(ae,ae)),ae=$.sml(1/B,ae),!(te!=0&&Math.abs(B-I)<1e-9));te++)I=B;const ue=[G*A,ne*A,M*A,J*A];return{Cov:T,q:ue,e:ae,L:I,eMq255:$.dot($.sml(255,ue),ae),eMq:$.dot(ae,ue),rgba:(Math.round(255*ue[3])<<24|Math.round(255*ue[2])<<16|Math.round(255*ue[1])<<8|Math.round(255*ue[0])<<0)>>>0}}var X={multVec:(O,D)=>[O[0]*D[0]+O[1]*D[1]+O[2]*D[2]+O[3]*D[3],O[4]*D[0]+O[5]*D[1]+O[6]*D[2]+O[7]*D[3],O[8]*D[0]+O[9]*D[1]+O[10]*D[2]+O[11]*D[3],O[12]*D[0]+O[13]*D[1]+O[14]*D[2]+O[15]*D[3]],dot:(O,D)=>O[0]*D[0]+O[1]*D[1]+O[2]*D[2]+O[3]*D[3],sml:(O,D)=>[O*D[0],O*D[1],O*D[2],O*D[3]]};fr.encode=function(D,Z,F,G,ne,M,J){G==null&&(G=0),J==null&&(J=!1);const A=v(D,Z,F,G,[!1,!1,!1,0,J,!1]);return b(A,-1),y(A,Z,F,ne,M)},fr.encodeLL=function(D,Z,F,G,ne,M,J,A){const T={ctype:0+(G==1?0:2)+(ne==0?0:4),depth:M,frames:[]},Y=(G+ne)*M,$=Y*Z;for(let ae=0;ae<D.length;ae++)T.frames.push({rect:{x:0,y:0,width:Z,height:F},img:new Uint8Array(D[ae]),blend:0,dispose:1,bpp:Math.ceil(Y/8),bpl:Math.ceil($/8)});return b(T,0,!0),y(T,Z,F,J,A)},fr.encode.compress=v,fr.encode.dither=m,fr.quantize=R,fr.quantize.getKDtree=H,fr.quantize.getNearest=q})();const nv={toArrayBuffer(a,n){const r=a.width,i=a.height,l=r<<2,c=a.getContext("2d").getImageData(0,0,r,i),f=new Uint32Array(c.data.buffer),m=(32*r+31)/32<<2,y=m*i,b=122+y,v=new ArrayBuffer(b),w=new DataView(v),_=1<<20;let k,E,R,H,q=_,W=0,L=0,z=0;function fe(O){w.setUint16(L,O,!0),L+=2}function K(O){w.setUint32(L,O,!0),L+=4}function X(O){L+=O}fe(19778),K(b),X(4),K(122),K(108),K(r),K(-i>>>0),fe(1),fe(32),K(3),K(y),K(2835),K(2835),X(8),K(16711680),K(65280),K(255),K(4278190080),K(1466527264),(function O(){for(;W<i&&q>0;){for(H=122+W*m,k=0;k<l;)q--,E=f[z++],R=E>>>24,w.setUint32(H+k,E<<8|R),k+=4;W++}z<f.length?(q=_,setTimeout(O,nv._dly)):n(v)})()},toBlob(a,n){this.toArrayBuffer(a,(r=>{n(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var ka={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},t2={[ka.CHROME]:16384,[ka.FIREFOX]:11180,[ka.DESKTOP_SAFARI]:16384,[ka.IE]:8192,[ka.IOS]:4096,[ka.ETC]:8192};const om=typeof window<"u",av=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Vu=om&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),n2=(om||av)&&(Vu&&Vu.getOriginalSymbol(window,"File")||typeof File<"u"&&File),rv=(om||av)&&(Vu&&Vu.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function cm(a,n,r=Date.now()){return new Promise((i=>{const l=a.split(","),c=l[0].match(/:(.*?);/)[1],f=globalThis.atob(l[1]);let m=f.length;const y=new Uint8Array(m);for(;m--;)y[m]=f.charCodeAt(m);const b=new Blob([y],{type:c});b.name=n,b.lastModified=r,i(b)}))}function sv(a){return new Promise(((n,r)=>{const i=new rv;i.onload=()=>n(i.result),i.onerror=l=>r(l),i.readAsDataURL(a)}))}function iv(a){return new Promise(((n,r)=>{const i=new Image;i.onload=()=>n(i),i.onerror=l=>r(l),i.src=a}))}function Ei(){if(Ei.cachedResult!==void 0)return Ei.cachedResult;let a=ka.ETC;const{userAgent:n}=navigator;return/Chrom(e|ium)/i.test(n)?a=ka.CHROME:/iP(ad|od|hone)/i.test(n)&&/WebKit/i.test(n)?a=ka.IOS:/Safari/i.test(n)?a=ka.DESKTOP_SAFARI:/Firefox/i.test(n)?a=ka.FIREFOX:(/MSIE/i.test(n)||document.documentMode)&&(a=ka.IE),Ei.cachedResult=a,Ei.cachedResult}function lv(a,n){const r=Ei(),i=t2[r];let l=a,c=n,f=l*c;const m=l>c?c/l:l/c;for(;f>i*i;){const y=(i+l)/2,b=(i+c)/2;y<b?(c=b,l=b*m):(c=y*m,l=y),f=l*c}return{width:l,height:c}}function ld(a,n){let r,i;try{if(r=new OffscreenCanvas(a,n),i=r.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),i=r.getContext("2d")}return r.width=a,r.height=n,[r,i]}function ov(a,n){const{width:r,height:i}=lv(a.width,a.height),[l,c]=ld(r,i);return n&&/jpe?g/.test(n)&&(c.fillStyle="white",c.fillRect(0,0,l.width,l.height)),c.drawImage(a,0,0,l.width,l.height),l}function zu(){return zu.cachedResult!==void 0||(zu.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),zu.cachedResult}function Fu(a,n={}){return new Promise((function(r,i){let l,c;var f=function(){try{return c=ov(l,n.fileType||a.type),r([l,c])}catch(y){return i(y)}},m=function(y){try{var b=function(v){try{throw v}catch(w){return i(w)}};try{let v;return sv(a).then((function(w){try{return v=w,iv(v).then((function(_){try{return l=_,(function(){try{return f()}catch(k){return i(k)}})()}catch(k){return b(k)}}),b)}catch(_){return b(_)}}),b)}catch(v){b(v)}}catch(v){return i(v)}};try{if(zu()||[ka.DESKTOP_SAFARI,ka.MOBILE_SAFARI].includes(Ei()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(a).then((function(y){try{return l=y,f()}catch{return m()}}),m)}catch{m()}}))}function Gu(a,n,r,i,l=1){return new Promise((function(c,f){let m;if(n==="image/png"){let b,v,w;return b=a.getContext("2d"),{data:v}=b.getImageData(0,0,a.width,a.height),w=fr.encode([v.buffer],a.width,a.height,4096*l),m=new Blob([w],{type:n}),m.name=r,m.lastModified=i,y.call(this)}{let b=function(){return y.call(this)};if(n==="image/bmp")return new Promise((v=>nv.toBlob(a,v))).then((function(v){try{return m=v,m.name=r,m.lastModified=i,b.call(this)}catch(w){return f(w)}}).bind(this),f);{let v=function(){return b.call(this)};if(typeof OffscreenCanvas=="function"&&a instanceof OffscreenCanvas)return a.convertToBlob({type:n,quality:l}).then((function(w){try{return m=w,m.name=r,m.lastModified=i,v.call(this)}catch(_){return f(_)}}).bind(this),f);{let w;return w=a.toDataURL(n,l),cm(w,r,i).then((function(_){try{return m=_,v.call(this)}catch(k){return f(k)}}).bind(this),f)}}}function y(){return c(m)}}))}function Nr(a){a.width=0,a.height=0}function Ul(){return new Promise((function(a,n){let r,i,l,c;return Ul.cachedResult!==void 0?a(Ul.cachedResult):cm("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(f){try{return r=f,Fu(r).then((function(m){try{return i=m[1],Gu(i,r.type,r.name,r.lastModified).then((function(y){try{return l=y,Nr(i),Fu(l).then((function(b){try{return c=b[0],Ul.cachedResult=c.width===1&&c.height===2,a(Ul.cachedResult)}catch(v){return n(v)}}),n)}catch(b){return n(b)}}),n)}catch(y){return n(y)}}),n)}catch(m){return n(m)}}),n)}))}function cv(a){return new Promise(((n,r)=>{const i=new rv;i.onload=l=>{const c=new DataView(l.target.result);if(c.getUint16(0,!1)!=65496)return n(-2);const f=c.byteLength;let m=2;for(;m<f;){if(c.getUint16(m+2,!1)<=8)return n(-1);const y=c.getUint16(m,!1);if(m+=2,y==65505){if(c.getUint32(m+=2,!1)!=1165519206)return n(-1);const b=c.getUint16(m+=6,!1)==18761;m+=c.getUint32(m+4,b);const v=c.getUint16(m,b);m+=2;for(let w=0;w<v;w++)if(c.getUint16(m+12*w,b)==274)return n(c.getUint16(m+12*w+8,b))}else{if((65280&y)!=65280)break;m+=c.getUint16(m,!1)}}return n(-1)},i.onerror=l=>r(l),i.readAsArrayBuffer(a)}))}function uv(a,n){const{width:r}=a,{height:i}=a,{maxWidthOrHeight:l}=n;let c,f=a;return isFinite(l)&&(r>l||i>l)&&([f,c]=ld(r,i),r>i?(f.width=l,f.height=i/r*l):(f.width=r/i*l,f.height=l),c.drawImage(a,0,0,f.width,f.height),Nr(a)),f}function dv(a,n){const{width:r}=a,{height:i}=a,[l,c]=ld(r,i);switch(n>4&&n<9?(l.width=i,l.height=r):(l.width=r,l.height=i),n){case 2:c.transform(-1,0,0,1,r,0);break;case 3:c.transform(-1,0,0,-1,r,i);break;case 4:c.transform(1,0,0,-1,0,i);break;case 5:c.transform(0,1,1,0,0,0);break;case 6:c.transform(0,1,-1,0,i,0);break;case 7:c.transform(0,-1,-1,0,i,r);break;case 8:c.transform(0,-1,1,0,0,r)}return c.drawImage(a,0,0,r,i),Nr(a),l}function ty(a,n,r=0){return new Promise((function(i,l){let c,f,m,y,b,v,w,_,k,E,R,H,q,W,L,z,fe,K,X,O;function D(F=5){if(n.signal&&n.signal.aborted)throw n.signal.reason;c+=F,n.onProgress(Math.min(c,100))}function Z(F){if(n.signal&&n.signal.aborted)throw n.signal.reason;c=Math.min(Math.max(F,c),100),n.onProgress(c)}return c=r,f=n.maxIteration||10,m=1024*n.maxSizeMB*1024,D(),Fu(a,n).then((function(F){try{return[,y]=F,D(),b=uv(y,n),D(),new Promise((function(G,ne){var M;if(!(M=n.exifOrientation))return cv(a).then((function(A){try{return M=A,J.call(this)}catch(T){return ne(T)}}).bind(this),ne);function J(){return G(M)}return J.call(this)})).then((function(G){try{return v=G,D(),Ul().then((function(ne){try{return w=ne?b:dv(b,v),D(),_=n.initialQuality||1,k=n.fileType||a.type,Gu(w,k,a.name,a.lastModified,_).then((function(M){try{{let A=function(){if(f--&&(L>m||L>q)){let Y,$;return Y=O?.95*X.width:X.width,$=O?.95*X.height:X.height,[fe,K]=ld(Y,$),K.drawImage(X,0,0,Y,$),_*=k==="image/png"?.85:.95,Gu(fe,k,a.name,a.lastModified,_).then((function(ae){try{return z=ae,Nr(X),X=fe,L=z.size,Z(Math.min(99,Math.floor((W-L)/(W-m)*100))),A}catch(I){return l(I)}}),l)}return[1]},T=function(){return Nr(X),Nr(fe),Nr(b),Nr(w),Nr(y),Z(100),i(z)};if(E=M,D(),R=E.size>m,H=E.size>a.size,!R&&!H)return Z(100),i(E);var J;return q=a.size,W=E.size,L=W,X=w,O=!n.alwaysKeepResolution&&R,(J=(function(Y){for(;Y;){if(Y.then)return void Y.then(J,l);try{if(Y.pop){if(Y.length)return Y.pop()?T.call(this):Y;Y=A}else Y=Y.call(this)}catch($){return l($)}}}).bind(this))(A)}}catch(A){return l(A)}}).bind(this),l)}catch(M){return l(M)}}).bind(this),l)}catch(ne){return l(ne)}}).bind(this),l)}catch(G){return l(G)}}).bind(this),l)}))}const a2=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let vh;function r2(a,n){return new Promise(((r,i)=>{vh||(vh=(function(f){const m=[];return m.push(f),URL.createObjectURL(new Blob(m))})(a2));const l=new Worker(vh);l.addEventListener("message",(function(f){if(n.signal&&n.signal.aborted)l.terminate();else if(f.data.progress===void 0){if(f.data.error)return i(new Error(f.data.error)),void l.terminate();r(f.data.file),l.terminate()}else n.onProgress(f.data.progress)})),l.addEventListener("error",i),n.signal&&n.signal.addEventListener("abort",(()=>{i(n.signal.reason),l.terminate()})),l.postMessage({file:a,imageCompressionLibUrl:n.libURL,options:{...n,onProgress:void 0,signal:void 0}})}))}function da(a,n){return new Promise((function(r,i){let l,c,f,m,y,b;if(l={...n},f=0,{onProgress:m}=l,l.maxSizeMB=l.maxSizeMB||Number.POSITIVE_INFINITY,y=typeof l.useWebWorker!="boolean"||l.useWebWorker,delete l.useWebWorker,l.onProgress=k=>{f=k,typeof m=="function"&&m(f)},!(a instanceof Blob||a instanceof n2))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(a.type))return i(new Error("The file given is not an image"));if(b=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!y||typeof Worker!="function"||b)return ty(a,l).then((function(k){try{return c=k,_.call(this)}catch(E){return i(E)}}).bind(this),i);var v=(function(){try{return _.call(this)}catch(k){return i(k)}}).bind(this),w=function(k){try{return ty(a,l).then((function(E){try{return c=E,v()}catch(R){return i(R)}}),i)}catch(E){return i(E)}};try{return l.libURL=l.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",r2(a,l).then((function(k){try{return c=k,v()}catch{return w()}}),w)}catch{w()}function _(){try{c.name=a.name,c.lastModified=a.lastModified}catch{}try{l.preserveExif&&a.type==="image/jpeg"&&(!l.fileType||l.fileType&&l.fileType===a.type)&&(c=tv(a,c))}catch{}return r(c)}}))}da.getDataUrlFromFile=sv,da.getFilefromDataUrl=cm,da.loadImage=iv,da.drawImageInCanvas=ov,da.drawFileInCanvas=Fu,da.canvasToFile=Gu,da.getExifOrientation=cv,da.handleMaxWidthOrHeight=uv,da.followExifOrientation=dv,da.cleanupCanvasMemory=Nr,da.isAutoOrientationInBrowser=Ul,da.approximateBelowMaximumCanvasSizeOfBrowser=lv,da.copyExifWithoutOrientation=tv,da.getBrowserName=Ei,da.version="2.0.2";var s2=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],Po=(a,n)=>{var r="";for(let i=1;i<=n;i++){let l=Math.floor(a)/Math.pow(83,n-i)%83;r+=s2[Math.floor(l)]}return r},bh=a=>{let n=a/255;return n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)},wh=a=>{let n=Math.max(0,Math.min(1,a));return n<=.0031308?Math.trunc(n*12.92*255+.5):Math.trunc((1.055*Math.pow(n,.4166666666666667)-.055)*255+.5)},i2=a=>a<0?-1:1,xh=(a,n)=>i2(a)*Math.pow(Math.abs(a),n),ny=class extends Error{constructor(a){super(a),this.name="ValidationError",this.message=a}},ay=4,l2=(a,n,r,i)=>{let l=0,c=0,f=0,m=n*ay;for(let b=0;b<n;b++){let v=ay*b;for(let w=0;w<r;w++){let _=v+w*m,k=i(b,w);l+=k*bh(a[_]),c+=k*bh(a[_+1]),f+=k*bh(a[_+2])}}let y=1/(n*r);return[l*y,c*y,f*y]},o2=a=>{let n=wh(a[0]),r=wh(a[1]),i=wh(a[2]);return(n<<16)+(r<<8)+i},c2=(a,n)=>{let r=Math.floor(Math.max(0,Math.min(18,Math.floor(xh(a[0]/n,.5)*9+9.5)))),i=Math.floor(Math.max(0,Math.min(18,Math.floor(xh(a[1]/n,.5)*9+9.5)))),l=Math.floor(Math.max(0,Math.min(18,Math.floor(xh(a[2]/n,.5)*9+9.5))));return r*19*19+i*19+l},u2=(a,n,r,i,l)=>{if(i<1||i>9||l<1||l>9)throw new ny("BlurHash must have between 1 and 9 components");if(n*r*4!==a.length)throw new ny("Width and height must match the pixels array");let c=[];for(let w=0;w<l;w++)for(let _=0;_<i;_++){let k=_==0&&w==0?1:2,E=l2(a,n,r,(R,H)=>k*Math.cos(Math.PI*_*R/n)*Math.cos(Math.PI*w*H/r));c.push(E)}let f=c[0],m=c.slice(1),y="",b=i-1+(l-1)*9;y+=Po(b,1);let v;if(m.length>0){let w=Math.max(...m.map(k=>Math.max(...k))),_=Math.floor(Math.max(0,Math.min(82,Math.floor(w*166-.5))));v=(_+1)/166,y+=Po(_,1)}else v=1,y+=Po(0,1);return y+=Po(o2(f),4),m.forEach(w=>{y+=Po(c2(w,v),2)}),y},d2=u2;let $s=null;async function f2(){try{$s=await navigator.storage.getDirectory(),await $s.getDirectoryHandle("images",{create:!0}),await $s.getDirectoryHandle("videos",{create:!0}),await $s.getDirectoryHandle("audio",{create:!0}),await $s.getDirectoryHandle("documents",{create:!0}),await $s.getDirectoryHandle("thumbnails",{create:!0}),console.log("OPFS initialized successfully")}catch(a){console.error("OPFS not supported, falling back to IndexedDB:",a)}}const h2={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg"};async function m2(a){try{const n=await da(a,h2);return console.log(`Compressed image from ${a.size} to ${n.size} bytes`),n}catch(n){return console.error("Image compression failed:",n),a}}async function g2(a){return new Promise(n=>{const r=new Image,i=document.createElement("canvas"),l=i.getContext("2d");r.onload=()=>{const f=Math.round(r.height/r.width*32);i.width=32,i.height=f,l?.drawImage(r,0,0,32,f);const m=l?.getImageData(0,0,32,f);if(m){const y=d2(m.data,32,f,4,3);n(y)}else n("");URL.revokeObjectURL(r.src)},r.onerror=()=>{n(""),URL.revokeObjectURL(r.src)},r.src=URL.createObjectURL(a)})}async function p2(a,n,r){if(!$s)return console.warn("OPFS not available"),null;try{const c=await(await(await $s.getDirectoryHandle(r,{create:!0})).getFileHandle(n,{create:!0})).createWritable();return await c.write(a),await c.close(),`opfs://${r}/${n}`}catch(i){return console.error("Failed to store file in OPFS:",i),null}}async function Yu(a,n){try{if("showSaveFilePicker"in window){const c=await(await window.showSaveFilePicker({suggestedName:n,types:[{description:"Files",accept:{[a.type||"application/octet-stream"]:[`.${n.split(".").pop()||"bin"}`]}}]})).createWritable();return await c.write(a),await c.close(),!0}const r=URL.createObjectURL(a),i=document.createElement("a");return i.href=r,i.download=n,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),!0}catch(r){return console.error("Failed to save file to device:",r),!1}}async function fv(a,n,r){const i=crypto.randomUUID(),l=a.type.startsWith("image/"),c=a.type.startsWith("video/");let f=a,m="";l&&(f=await m2(a),m=await g2(a)),c&&(m=await y2(a));const y=l?"images":c?"videos":a.type.startsWith("audio/")?"audio":"documents",b=await p2(f,i,y),v={id:i,message_id:n,story_id:r,type:l?"image":c?"video":a.type.startsWith("audio/")?"audio":"document",mime_type:f.type,size:f.size,name:a.name,thumbnail:m,local_path:b||void 0,is_downloaded:!0,download_progress:100,created_at:Date.now()};return await Ae.mediaFiles.add(v),v}async function y2(a){return new Promise(n=>{const r=document.createElement("video"),i=document.createElement("canvas"),l=i.getContext("2d");r.onloadedmetadata=()=>{r.currentTime=.5},r.onseeked=()=>{i.width=200,i.height=r.videoHeight/r.videoWidth*200,l?.drawImage(r,0,0,i.width,i.height),n(i.toDataURL("image/jpeg",.7)),URL.revokeObjectURL(r.src)},r.onerror=()=>{n(""),URL.revokeObjectURL(r.src)},r.src=URL.createObjectURL(a)})}const v2=30,b2=5e3,od=5;let Qo=null,gr=navigator.onLine,qu=!1;function hv(){window.addEventListener("online",gv),window.addEventListener("offline",pv),w2(),gr&&(Oi(),cd())}function mv(){Qo&&(clearInterval(Qo),Qo=null),window.removeEventListener("online",gv),window.removeEventListener("offline",pv)}function gv(){gr=!0,console.log("Back online - starting sync"),Oi(),cd()}function pv(){gr=!1,console.log("Went offline - queuing messages")}function w2(){Qo||(Qo=setInterval(()=>{gr&&!qu&&Oi()},b2))}async function x2(a){await Ae.messages.add({...a,synced_to_server:!1,deleted_from_server:!1}),await Ae.chats.get(a.chat_id)&&await Ae.chats.update(a.chat_id,{last_message_id:a.id,last_message:a.type==="text"?"[Encrypted]":`[${a.type}]`,last_message_time:a.created_at,updated_at:Date.now()}),await uc({type:"message",payload:JSON.stringify(a),priority:10,retry_count:0,max_retries:od}),gr&&Oi()}async function Oi(){if(!(qu||!gr)){qu=!0;try{const a=await Gy();for(const n of a)try{await _2(n),await Kh(n.id)}catch(r){console.error("Sync failed for item:",n.id,r),await Yy(n.id,{retry_count:n.retry_count+1,last_error:r instanceof Error?r.message:"Unknown error"}),n.retry_count>=n.max_retries-1&&(await Kh(n.id),console.log("Removed sync item after max retries:",n.id))}}finally{qu=!1}}}async function _2(a){const n=JSON.parse(a.payload);switch(a.type){case"message":await S2(n);break;case"status_update":await j2(n);break;case"reaction":await A2(n);break;case"delete":await ud(n);break;case"typing":await C2(n);break;case"read_receipt":await vv(n);break}}async function S2(a){const n=new Date;n.setDate(n.getDate()+v2);const{error:r}=await Oe.from("pending_messages").insert({id:a.id,sender_id:a.sender_id,receiver_id:a.receiver_id,content:a.content,iv:a.iv,type:a.type,file_url:a.file_url,thumbnail:a.thumbnail,reply_to:a.reply_to,expires_at:n.toISOString(),created_at:new Date(a.created_at||Date.now()).toISOString()});if(r)throw r;await Ae.messages.update(a.id,{synced_to_server:!0,status:"sent",updated_at:Date.now()})}async function cd(){const{data:{user:a}}=await Oe.auth.getUser();if(a)try{const{data:n,error:r}=await Oe.from("pending_messages").select("*").eq("receiver_id",a.id).order("created_at",{ascending:!0});if(r){console.error("Failed to fetch pending messages:",r);return}for(const i of n||[])await Ae.messages.put({id:i.id,chat_id:i.sender_id,sender_id:i.sender_id,receiver_id:i.receiver_id,content:i.content,iv:i.iv,type:i.type,file_url:i.file_url,thumbnail:i.thumbnail,reply_to:i.reply_to,status:"delivered",synced_to_server:!0,deleted_from_server:!1,created_at:new Date(i.created_at).getTime(),updated_at:Date.now()}),await yv(i.id,i.sender_id),await ud({messageId:i.id})}catch(n){console.error("Error fetching pending messages:",n)}}async function yv(a,n){const{data:{user:r}}=await Oe.auth.getUser();if(r)try{await Oe.from("delivery_receipts").upsert({message_id:a,receiver_id:r.id,sender_id:n,status:"delivered",created_at:new Date().toISOString()},{onConflict:"message_id,receiver_id"})}catch(i){console.error("Failed to send delivery receipt:",i)}}async function k2(a,n){await Ae.messages.update(a,{status:"read",updated_at:Date.now()}),gr?await vv({messageId:a,senderId:n}):await uc({type:"read_receipt",payload:JSON.stringify({messageId:a,senderId:n}),priority:5,retry_count:0,max_retries:od})}async function vv(a){const{data:{user:n}}=await Oe.auth.getUser();n&&await Oe.from("delivery_receipts").upsert({message_id:a.messageId,receiver_id:n.id,sender_id:a.senderId,status:"read",created_at:new Date().toISOString()},{onConflict:"message_id,receiver_id"})}async function j2(a){const{data:{user:n}}=await Oe.auth.getUser();n&&await Oe.from("delivery_receipts").upsert({message_id:a.messageId,receiver_id:n.id,sender_id:a.senderId,status:a.status,created_at:new Date().toISOString()},{onConflict:"message_id,receiver_id"})}async function N2(a,n){await uc({type:"reaction",payload:JSON.stringify({messageId:a,emoji:n}),priority:5,retry_count:0,max_retries:od}),gr&&Oi()}async function A2(a){const{data:{user:n}}=await Oe.auth.getUser();n&&await Oe.from("message_reactions").upsert({message_id:a.messageId,user_id:n.id,emoji:a.emoji},{onConflict:"message_id,user_id"})}async function E2(a){await uc({type:"delete",payload:JSON.stringify({messageId:a}),priority:5,retry_count:0,max_retries:od}),gr&&Oi()}async function ud(a){await Oe.from("pending_messages").delete().eq("id",a.messageId)}async function bv(a,n){const{data:{user:r}}=await Oe.auth.getUser();if(!r)return;await Oe.channel(`typing:${a}`).send({type:"broadcast",event:"typing",payload:{userId:r.id,isTyping:n}})}async function C2(a){await bv(a.chatId,a.isTyping)}function wv(a,n){const r=Oe.channel(`user:${a}`).on("postgres_changes",{event:"*",schema:"public",table:"friend_requests",filter:`receiver_id=eq.${a}`},i=>{n.onFriendRequest?.(i.new)}).on("postgres_changes",{event:"*",schema:"public",table:"friends",filter:`user_id=eq.${a}`},i=>{n.onFriendChange?.(i.new)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"pending_messages",filter:`receiver_id=eq.${a}`},async i=>{const l=i.new,c={id:l.id,chat_id:l.sender_id,sender_id:l.sender_id,receiver_id:l.receiver_id,content:l.content,iv:l.iv,type:l.type,file_url:l.file_url,thumbnail:l.thumbnail,reply_to:l.reply_to,status:"delivered",synced_to_server:!0,deleted_from_server:!1,created_at:new Date(l.created_at).getTime(),updated_at:Date.now()};if(await Ae.messages.put(c),n.onMessage?.(c),c.file_url&&["image","video","audio","document","voice","file"].includes(c.type))try{const f="/storage/v1/object/public/chat-media/";if(c.file_url.includes(f)){const m=c.file_url.split(f)[1],b=await(await fetch(c.file_url)).blob(),v=c.type==="image"?"jpg":c.type==="video"?"mp4":c.type==="voice"||c.type==="audio"?"webm":"bin",w=new File([b],`ourdm_${c.id}.${v}`,{type:b.type||"application/octet-stream"}),_=await fv(w,c.id);_.local_path&&await Ae.messages.update(c.id,{file_url:_.local_path,local_file_id:_.id,updated_at:Date.now()}),m&&await Oe.storage.from("chat-media").remove([m])}}catch(f){console.warn("Transport media auto-cache/delete failed:",f)}await yv(l.id,l.sender_id),await ud({messageId:l.id})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"delivery_receipts",filter:`sender_id=eq.${a}`},async i=>{const l=i.new;await Ae.messages.update(l.message_id,{status:l.status,updated_at:Date.now()}),n.onStatusUpdate?.(l.message_id,l.status)}).subscribe();return()=>{r.unsubscribe()}}async function T2(){if("serviceWorker"in navigator&&"SyncManager"in window)try{await(await navigator.serviceWorker.ready).sync?.register("sync-messages"),console.log("Background sync registered")}catch(a){console.error("Background sync registration failed:",a)}}function O2(){return gr}async function R2(){if(!gr)throw new Error("Cannot sync while offline");await Oi(),await cd()}const Ho=Object.freeze(Object.defineProperty({__proto__:null,deleteMessage:E2,deleteMessageFromServer:ud,fetchPendingMessages:cd,forceSync:R2,getIsOnline:O2,initSyncService:hv,registerBackgroundSync:T2,sendMessage:x2,sendReaction:N2,sendReadReceipt:k2,sendTypingStatus:bv,stopSyncService:mv,subscribeToRealtime:wv},Symbol.toStringTag,{value:"Module"})),_h={SD:{width:640,height:480,frameRate:30},HD:{width:1280,height:720,frameRate:30},FHD:{width:1920,height:1080,frameRate:60}},ry={LOW:{sampleRate:22050,channelCount:1,echoCancellation:!0,noiseSuppression:!0},MEDIUM:{sampleRate:44100,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},HIGH:{sampleRate:48e3,channelCount:2,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}};class U2{peerConnection=null;localStream=null;remoteStream=null;callState;config;callTimer=null;onStateChange=null;onRemoteStream=null;onIncomingCall=null;ringtoneAudio=null;currentUserId=null;signalingSubscription=null;constructor(){this.callState={is_in_call:!1,call_id:null,call_type:"voice",is_muted:!1,is_video_off:!1,is_speaker_on:!1,call_duration:0,connection_state:"disconnected",ice_connection_state:"new",used_stun:!1,used_turn:!1,peer_id:null,remote_video_off:!1},this.config={stun_enabled:!0,turn_enabled:!0,video_quality:"FHD",audio_quality:"HIGH"}}async initialize(n){this.currentUserId=n,await this.setupSignalingListener()}setVideoQuality(n){this.config.video_quality=n,console.log(`Video quality set to: ${n}`)}getCallConfig(){return this.config}async setupSignalingListener(){this.currentUserId&&(this.signalingSubscription&&this.signalingSubscription.unsubscribe(),this.signalingSubscription=Oe.channel(`calls:${this.currentUserId}`).on("broadcast",{event:"incoming-call"},async n=>{const{call_id:r,caller_id:i,caller_name:l,caller_avatar:c,call_type:f,offer:m}=n.payload;this.playRingtone(f),this.onIncomingCall&&this.onIncomingCall({call_id:r,caller_id:i,caller_name:l,caller_avatar:c,call_type:f,offer:m})}).on("broadcast",{event:"call-answer"},async n=>{const{answer:r}=n.payload;this.peerConnection&&r&&await this.peerConnection.setRemoteDescription(new RTCSessionDescription(r))}).on("broadcast",{event:"ice-candidate"},async n=>{const{candidate:r}=n.payload;this.peerConnection&&r&&await this.peerConnection.addIceCandidate(new RTCIceCandidate(r))}).on("broadcast",{event:"call-ended"},()=>{this.endCall()}).on("broadcast",{event:"video-toggle"},n=>{this.callState.remote_video_off=n.payload.is_video_off,this.notifyStateChange()}).subscribe())}async getIceServers(){const n=[];if(this.config.stun_enabled&&n.push(...g_),this.config.turn_enabled)try{const r=await y_();n.push(...r)}catch{console.error("Failed to get Metered TURN servers, using static fallback")}return n}async createPeerConnection(){const r={iceServers:await this.getIceServers(),iceTransportPolicy:this.config.turn_enabled&&this.config.stun_enabled?"all":this.config.turn_enabled?"relay":"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceCandidatePoolSize:10},i=new RTCPeerConnection(r);return i.onicecandidate=l=>{if(l.candidate&&this.callState.call_id){this.sendSignal("ice-candidate",{candidate:l.candidate});const c=l.candidate.candidate.toLowerCase();c.includes("relay")?this.callState.used_turn=!0:(c.includes("srflx")||c.includes("prflx"))&&(this.callState.used_stun=!0),this.notifyStateChange()}},i.onconnectionstatechange=()=>{this.callState.connection_state=i.connectionState,this.notifyStateChange(),i.connectionState==="connected"?(this.stopRingtone(),this.startCallTimer()):(i.connectionState==="failed"||i.connectionState==="disconnected")&&this.handleConnectionFailure()},i.oniceconnectionstatechange=()=>{this.callState.ice_connection_state=i.iceConnectionState,this.notifyStateChange()},i.ontrack=l=>{l.streams&&l.streams[0]&&(this.remoteStream=l.streams[0],this.onRemoteStream&&this.onRemoteStream(this.remoteStream))},i}async startCall(n,r,i){if(this.callState.is_in_call)return!1;try{const l={audio:ry[this.config.audio_quality],video:i==="video"?{..._h[this.config.video_quality],facingMode:"user",aspectRatio:1.7777777778}:!1};this.localStream=await navigator.mediaDevices.getUserMedia(l),this.peerConnection=await this.createPeerConnection(),this.localStream.getTracks().forEach(b=>{this.peerConnection.addTrack(b,this.localStream)});const c={offerToReceiveAudio:!0,offerToReceiveVideo:i==="video"},f=await this.peerConnection.createOffer(c),m=this.optimizeSDP(f);await this.peerConnection.setLocalDescription(m);const y=`call_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return this.callState={...this.callState,is_in_call:!0,call_id:y,call_type:i,connection_state:"connecting",used_stun:!1,used_turn:!1,peer_id:n},this.notifyStateChange(),await Oe.channel(`calls:${n}`).send({type:"broadcast",event:"incoming-call",payload:{call_id:y,caller_id:this.currentUserId,caller_name:r,call_type:i,offer:this.peerConnection.localDescription}}),this.playRingbackTone(),await this.logCall(y,n,i,"outgoing"),!0}catch(l){return console.error("Failed to start call:",l),this.endCall(),!1}}async answerCall(n){try{this.stopRingtone();const r={audio:ry[this.config.audio_quality],video:n.call_type==="video"?_h[this.config.video_quality]:!1};this.localStream=await navigator.mediaDevices.getUserMedia(r),this.peerConnection=await this.createPeerConnection(),this.localStream.getTracks().forEach(c=>{this.peerConnection.addTrack(c,this.localStream)}),await this.peerConnection.setRemoteDescription(new RTCSessionDescription(n.offer));const i=await this.peerConnection.createAnswer(),l=this.optimizeSDP(i);return await this.peerConnection.setLocalDescription(l),this.callState={...this.callState,is_in_call:!0,call_type:n.call_type,connection_state:"connecting",peer_id:n.caller_id},this.notifyStateChange(),await Oe.channel(`calls:${n.caller_id}`).send({type:"broadcast",event:"call-answer",payload:{answer:this.peerConnection.localDescription}}),await this.logCall(n.call_id,n.caller_id,n.call_type,"incoming"),!0}catch(r){return console.error("Failed to answer call:",r),this.endCall(),!1}}async declineCall(n){this.stopRingtone(),await Oe.channel(`calls:${n.caller_id}`).send({type:"broadcast",event:"call-ended",payload:{reason:"declined"}})}async endCall(){this.localStream&&(this.localStream.getTracks().forEach(n=>n.stop()),this.localStream=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.stopCallTimer(),this.stopRingtone(),this.callState.call_id&&this.sendSignal("call-ended",{reason:"ended"}),this.callState={is_in_call:!1,call_id:null,call_type:"voice",is_muted:!1,is_video_off:!1,is_speaker_on:!1,call_duration:0,connection_state:"disconnected",ice_connection_state:"new",used_stun:!1,used_turn:!1,peer_id:null,remote_video_off:!1},this.notifyStateChange()}toggleMute(){if(this.localStream){const n=this.localStream.getAudioTracks()[0];n&&(n.enabled=!n.enabled,this.callState.is_muted=!n.enabled,this.notifyStateChange())}}toggleVideo(){if(this.localStream){const n=this.localStream.getVideoTracks()[0];n&&(n.enabled=!n.enabled,this.callState.is_video_off=!n.enabled,this.notifyStateChange(),this.sendSignal("video-toggle",{is_video_off:this.callState.is_video_off}))}}toggleSpeaker(){this.callState.is_speaker_on=!this.callState.is_speaker_on,this.notifyStateChange()}async switchCamera(){if(!this.localStream||this.callState.call_type!=="video")return;const n=this.localStream.getVideoTracks()[0];if(n)try{const l=(n.getSettings().facingMode||"user")==="user"?"environment":"user",f=(await navigator.mediaDevices.getUserMedia({video:{..._h[this.config.video_quality],facingMode:l}})).getVideoTracks()[0],m=this.peerConnection?.getSenders().find(y=>y.track?.kind==="video");m&&await m.replaceTrack(f),n.stop(),this.localStream.removeTrack(n),this.localStream.addTrack(f)}catch(r){console.error("Failed to switch camera:",r)}}optimizeSDP(n){let r=n.sdp||"";r=r.replace(/m=audio (\d+) UDP\/TLS\/RTP\/SAVPF (\d+)/g,(l,c,f)=>{const m=f.split(" "),y=m.indexOf("111");return y>0&&(m.splice(y,1),m.unshift("111")),`m=audio ${c} UDP/TLS/RTP/SAVPF ${m.join(" ")}`}),r.includes("maxaveragebitrate")||(r=r.replace(/(a=fmtp:111.*)/g,"$1; maxaveragebitrate=510000; stereo=1; sprop-stereo=1")),r=r.replace(/m=video (\d+) UDP\/TLS\/RTP\/SAVPF (\d+)/g,(l,c,f)=>{const m=f.split(" "),y=m.indexOf("98");return y>0&&(m.splice(y,1),m.unshift("98")),`m=video ${c} UDP/TLS/RTP/SAVPF ${m.join(" ")}`});let i=500;return this.config.video_quality==="FHD"?i=6e3:this.config.video_quality==="HD"&&(i=1500),r=r.replace(/b=AS:(\d+)/g,`b=AS:${i}`),r.includes("b=AS:")||(r=r.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:${i}\r
`)),this.config.video_quality==="FHD"&&(r=r.replace(/a=fmtp:(\d+) (.*)/g,(l,c)=>r.includes("m=video")&&c==="98"?`${l}; x-google-max-bitrate=6000; x-google-min-bitrate=2000; x-google-start-bitrate=4000`:l)),{...n,sdp:r}}async handleConnectionFailure(){this.callState.connection_state==="failed"&&!this.callState.used_turn&&this.config.turn_enabled&&console.log("Connection failed, attempting TURN fallback...")}async sendSignal(n,r){if(this.callState.peer_id)try{await Oe.channel(`calls:${this.callState.peer_id}`).send({type:"broadcast",event:n,payload:r})}catch(i){console.error(`Failed to send signal ${n}:`,i)}}playRingtone(n){try{const r=n==="video"?"/sounds/video_ringtone.mp3":"/sounds/voice_ringtone.mp3";this.ringtoneAudio=new Audio(r),this.ringtoneAudio.loop=!0,this.ringtoneAudio.volume=1,this.ringtoneAudio.play().catch(()=>{this.ringtoneAudio=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleQkhfKrt7Y9NETaN4u3fhz0ZUrG61pNdKSt/tNvDolEWN5nQ5qpyIxhbqdzNr3QiBUum4d2tdykNW7jn0plTGh1ytuDHnWIiLH+w4tOrYiAhf7bn1JpSGBlwteDElmoiLIOv3dKrYyUgebTh16ZkHyB6s+TVp2cjI3q039imZCMcdrjk0qNnIR97suDXpmMfIXy24NWmZSEhfLjg1aRlISF7tuDVpmUhIXy54NWmZSEhfLng1aVlISF8ueHVpWYiIXy64tSkZSIhfbri1KRmIiF9uuLUpWYiIX274tSkZiIhfbvi1KRmIiB9vOLUpGYiIH284tSkZiIgfbzi1KRmIiB9vOLUpGciIH284dSkZyIgfb3h1KRnIiB9veHUpGciIH294dSkZyMgfb3h1KRnIyB9vt/UpGcjIH2+39SkZyMgfb7f1KRnIyB9vt/UpGcjIH6+39SkZyMgfr7f1KRnIyB+vt/UpGcjIH6+39SkZyMgfr7f1KRoIyB+vt/UpGgjIH6+39SkaCMgfr7f1KRoIyB+vt/UpGgjIH6+39SkaCMgfr7f1KRoIyB+vt/UpGgjIH6+39SkaCMgfr7f1KRoIyB+vt/U"),this.ringtoneAudio?.play().catch(()=>{})})}catch(r){console.error("Failed to play ringtone:",r)}}playRingbackTone(){try{this.ringtoneAudio=new Audio("/sounds/ringback.mp3"),this.ringtoneAudio.loop=!0,this.ringtoneAudio.volume=.5,this.ringtoneAudio.play().catch(()=>{})}catch(n){console.error("Failed to play ringback tone:",n)}}stopRingtone(){this.ringtoneAudio&&(this.ringtoneAudio.pause(),this.ringtoneAudio.currentTime=0,this.ringtoneAudio=null)}startCallTimer(){this.callTimer=setInterval(()=>{this.callState.call_duration++,this.notifyStateChange()},1e3)}stopCallTimer(){this.callTimer&&(clearInterval(this.callTimer),this.callTimer=null)}async logCall(n,r,i,l){try{await Oe.from("call_logs").insert({call_id:n,user_id:this.currentUserId,peer_id:r,call_type:i,direction:l,status:"completed",created_at:new Date().toISOString()})}catch(c){console.error("Error logging call:",c)}}notifyStateChange(){this.onStateChange&&this.onStateChange({...this.callState})}setOnStateChange(n){this.onStateChange=n}setOnRemoteStream(n){this.onRemoteStream=n}setOnIncomingCall(n){this.onIncomingCall=n}getLocalStream(){return this.localStream}getRemoteStream(){return this.remoteStream}getCallState(){return{...this.callState}}updateConfig(n){this.config={...this.config,...n},n.video_quality&&this.peerConnection&&this.peerConnection.createOffer({iceRestart:!0})}async getCallStats(){if(!this.peerConnection)return null;const n=await this.peerConnection.getStats(),r={audio:{bytesSent:0,bytesReceived:0,packetsLost:0},video:{bytesSent:0,bytesReceived:0,packetsLost:0,frameRate:0},connection:{roundTripTime:0,availableBandwidth:0}};return n.forEach(i=>{i.type==="outbound-rtp"&&i.kind==="audio"?r.audio.bytesSent=i.bytesSent:i.type==="inbound-rtp"&&i.kind==="audio"?(r.audio.bytesReceived=i.bytesReceived,r.audio.packetsLost=i.packetsLost):i.type==="outbound-rtp"&&i.kind==="video"?(r.video.bytesSent=i.bytesSent,r.video.frameRate=i.framesPerSecond):i.type==="inbound-rtp"&&i.kind==="video"?(r.video.bytesReceived=i.bytesReceived,r.video.packetsLost=i.packetsLost):i.type==="candidate-pair"&&i.state==="succeeded"&&(r.connection.roundTripTime=i.currentRoundTripTime*1e3,r.connection.availableBandwidth=i.availableOutgoingBitrate)}),r}cleanup(){this.endCall(),this.signalingSubscription&&this.signalingSubscription.unsubscribe()}}const Hn=new U2;const xv=(...a)=>a.filter((n,r,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===r).join(" ").trim();const D2=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const M2=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,i)=>i?i.toUpperCase():r.toLowerCase());const sy=a=>{const n=M2(a);return n.charAt(0).toUpperCase()+n.slice(1)};var z2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const q2=a=>{for(const n in a)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const L2=Se.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:f,...m},y)=>Se.createElement("svg",{ref:y,...z2,width:n,height:n,stroke:a,strokeWidth:i?Number(r)*24/Number(n):r,className:xv("lucide",l),...!c&&!q2(m)&&{"aria-hidden":"true"},...m},[...f.map(([b,v])=>Se.createElement(b,v)),...Array.isArray(c)?c:[c]]));const Ye=(a,n)=>{const r=Se.forwardRef(({className:i,...l},c)=>Se.createElement(L2,{ref:c,iconNode:n,className:xv(`lucide-${D2(sy(a))}`,`lucide-${a}`,i),...l}));return r.displayName=sy(a),r};const I2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],iy=Ye("activity",I2);const B2=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Vh=Ye("archive",B2);const P2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_v=Ye("arrow-left",P2);const H2=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qu=Ye("ban",H2);const $2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ci=Ye("bell",$2);const K2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ic=Ye("camera",K2);const V2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],F2=Ye("chart-column",V2);const G2=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Fh=Ye("check-check",G2);const Y2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dd=Ye("check",Y2);const Q2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xu=Ye("chevron-left",Q2);const X2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gh=Ye("chevron-right",X2);const J2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],W2=Ye("circle-alert",J2);const Z2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ly=Ye("circle-check-big",Z2);const eS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oy=Ye("circle-question-mark",eS);const tS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xo=Ye("clock",tS);const nS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Sh=Ye("crown",nS);const aS=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Sv=Ye("database",aS);const rS=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ml=Ye("download",rS);const sS=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],kv=Ye("ellipsis-vertical",sS);const iS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ju=Ye("eye-off",iS);const lS=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ti=Ye("eye",lS);const oS=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],cS=Ye("file-text",oS);const uS=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],dS=Ye("fingerprint-pattern",uS);const fS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Jo=Ye("globe",fS);const hS=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Wo=Ye("image",hS);const mS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],cy=Ye("info",mS);const gS=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pS=Ye("key",gS);const yS=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ra=Ye("lock",yS);const vS=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bS=Ye("log-out",vS);const wS=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xS=Ye("mail",wS);const _S=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ar=Ye("message-circle",_S);const SS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],kS=Ye("mic-off",SS);const jS=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],um=Ye("mic",jS);const NS=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],uy=Ye("monitor",NS);const AS=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ES=Ye("moon",AS);const CS=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Yh=Ye("palette",CS);const TS=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],dy=Ye("paperclip",TS);const OS=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],RS=Ye("pause",OS);const US=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],kh=Ye("pen-line",US);const DS=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Qh=Ye("phone-call",DS);const MS=[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],zS=Ye("phone-incoming",MS);const qS=[["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],LS=Ye("phone-missed",qS);const IS=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],fy=Ye("phone-off",IS);const BS=[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],PS=Ye("phone-outgoing",BS);const HS=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Pa=Ye("phone",HS);const $S=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],KS=Ye("pin",$S);const VS=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],FS=Ye("play",VS);const GS=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],YS=Ye("plus",GS);const QS=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xh=Ye("refresh-cw",QS);const XS=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],hy=Ye("reply",XS);const JS=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],WS=Ye("rotate-ccw",JS);const ZS=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lc=Ye("search",ZS);const ek=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],dm=Ye("send",ek);const tk=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jh=Ye("settings",tk);const nk=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fm=Ye("shield-check",nk);const ak=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Fs=Ye("shield",ak);const rk=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Wh=Ye("smartphone",rk);const sk=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ik=Ye("smile",sk);const lk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ok=Ye("sun",lk);const ck=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ll=Ye("trash-2",ck);const uk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],my=Ye("triangle-alert",uk);const dk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Zh=Ye("type",dk);const fk=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hk=Ye("user-check",fk);const mk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],gk=Ye("user-minus",mk);const pk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],em=Ye("user-plus",pk);const yk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],jh=Ye("user-x",yk);const vk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],jv=Ye("user",vk);const bk=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zl=Ye("users",bk);const wk=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gy=Ye("video-off",wk);const xk=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Gs=Ye("video",xk);const _k=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Nv=Ye("volume-2",_k);const Sk=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],kk=Ye("volume-x",Sk);const jk=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Nk=Ye("wifi-off",jk);const Ak=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Ek=Ye("wifi",Ak);const Ck=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ys=Ye("x",Ck);const Tk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Wu=Ye("zap",Tk);function Av(a){var n,r,i="";if(typeof a=="string"||typeof a=="number")i+=a;else if(typeof a=="object")if(Array.isArray(a)){var l=a.length;for(n=0;n<l;n++)a[n]&&(r=Av(a[n]))&&(i&&(i+=" "),i+=r)}else for(r in a)a[r]&&(i&&(i+=" "),i+=r);return i}function Ok(){for(var a,n,r=0,i="",l=arguments.length;r<l;r++)(a=arguments[r])&&(n=Av(a))&&(i&&(i+=" "),i+=n);return i}const Rk=(a,n)=>{const r=new Array(a.length+n.length);for(let i=0;i<a.length;i++)r[i]=a[i];for(let i=0;i<n.length;i++)r[a.length+i]=n[i];return r},Uk=(a,n)=>({classGroupId:a,validator:n}),Ev=(a=new Map,n=null,r)=>({nextPart:a,validators:n,classGroupId:r}),Zu="-",py=[],Dk="arbitrary..",Mk=a=>{const n=qk(a),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=a;return{getClassGroupId:f=>{if(f.startsWith("[")&&f.endsWith("]"))return zk(f);const m=f.split(Zu),y=m[0]===""&&m.length>1?1:0;return Cv(m,y,n)},getConflictingClassGroupIds:(f,m)=>{if(m){const y=i[f],b=r[f];return y?b?Rk(b,y):y:b||py}return r[f]||py}}},Cv=(a,n,r)=>{if(a.length-n===0)return r.classGroupId;const l=a[n],c=r.nextPart.get(l);if(c){const b=Cv(a,n+1,c);if(b)return b}const f=r.validators;if(f===null)return;const m=n===0?a.join(Zu):a.slice(n).join(Zu),y=f.length;for(let b=0;b<y;b++){const v=f[b];if(v.validator(m))return v.classGroupId}},zk=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=a.slice(1,-1),r=n.indexOf(":"),i=n.slice(0,r);return i?Dk+i:void 0})(),qk=a=>{const{theme:n,classGroups:r}=a;return Lk(r,n)},Lk=(a,n)=>{const r=Ev();for(const i in a){const l=a[i];hm(l,r,i,n)}return r},hm=(a,n,r,i)=>{const l=a.length;for(let c=0;c<l;c++){const f=a[c];Ik(f,n,r,i)}},Ik=(a,n,r,i)=>{if(typeof a=="string"){Bk(a,n,r);return}if(typeof a=="function"){Pk(a,n,r,i);return}Hk(a,n,r,i)},Bk=(a,n,r)=>{const i=a===""?n:Tv(n,a);i.classGroupId=r},Pk=(a,n,r,i)=>{if($k(a)){hm(a(i),n,r,i);return}n.validators===null&&(n.validators=[]),n.validators.push(Uk(r,a))},Hk=(a,n,r,i)=>{const l=Object.entries(a),c=l.length;for(let f=0;f<c;f++){const[m,y]=l[f];hm(y,Tv(n,m),r,i)}},Tv=(a,n)=>{let r=a;const i=n.split(Zu),l=i.length;for(let c=0;c<l;c++){const f=i[c];let m=r.nextPart.get(f);m||(m=Ev(),r.nextPart.set(f,m)),r=m}return r},$k=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,Kk=a=>{if(a<1)return{get:()=>{},set:()=>{}};let n=0,r=Object.create(null),i=Object.create(null);const l=(c,f)=>{r[c]=f,n++,n>a&&(n=0,i=r,r=Object.create(null))};return{get(c){let f=r[c];if(f!==void 0)return f;if((f=i[c])!==void 0)return l(c,f),f},set(c,f){c in r?r[c]=f:l(c,f)}}},tm="!",yy=":",Vk=[],vy=(a,n,r,i,l)=>({modifiers:a,hasImportantModifier:n,baseClassName:r,maybePostfixModifierPosition:i,isExternal:l}),Fk=a=>{const{prefix:n,experimentalParseClassName:r}=a;let i=l=>{const c=[];let f=0,m=0,y=0,b;const v=l.length;for(let R=0;R<v;R++){const H=l[R];if(f===0&&m===0){if(H===yy){c.push(l.slice(y,R)),y=R+1;continue}if(H==="/"){b=R;continue}}H==="["?f++:H==="]"?f--:H==="("?m++:H===")"&&m--}const w=c.length===0?l:l.slice(y);let _=w,k=!1;w.endsWith(tm)?(_=w.slice(0,-1),k=!0):w.startsWith(tm)&&(_=w.slice(1),k=!0);const E=b&&b>y?b-y:void 0;return vy(c,k,_,E)};if(n){const l=n+yy,c=i;i=f=>f.startsWith(l)?c(f.slice(l.length)):vy(Vk,!1,f,void 0,!0)}if(r){const l=i;i=c=>r({className:c,parseClassName:l})}return i},Gk=a=>{const n=new Map;return a.orderSensitiveModifiers.forEach((r,i)=>{n.set(r,1e6+i)}),r=>{const i=[];let l=[];for(let c=0;c<r.length;c++){const f=r[c],m=f[0]==="[",y=n.has(f);m||y?(l.length>0&&(l.sort(),i.push(...l),l=[]),i.push(f)):l.push(f)}return l.length>0&&(l.sort(),i.push(...l)),i}},Yk=a=>({cache:Kk(a.cacheSize),parseClassName:Fk(a),sortModifiers:Gk(a),...Mk(a)}),Qk=/\s+/,Xk=(a,n)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:l,sortModifiers:c}=n,f=[],m=a.trim().split(Qk);let y="";for(let b=m.length-1;b>=0;b-=1){const v=m[b],{isExternal:w,modifiers:_,hasImportantModifier:k,baseClassName:E,maybePostfixModifierPosition:R}=r(v);if(w){y=v+(y.length>0?" "+y:y);continue}let H=!!R,q=i(H?E.substring(0,R):E);if(!q){if(!H){y=v+(y.length>0?" "+y:y);continue}if(q=i(E),!q){y=v+(y.length>0?" "+y:y);continue}H=!1}const W=_.length===0?"":_.length===1?_[0]:c(_).join(":"),L=k?W+tm:W,z=L+q;if(f.indexOf(z)>-1)continue;f.push(z);const fe=l(q,H);for(let K=0;K<fe.length;++K){const X=fe[K];f.push(L+X)}y=v+(y.length>0?" "+y:y)}return y},Jk=(...a)=>{let n=0,r,i,l="";for(;n<a.length;)(r=a[n++])&&(i=Ov(r))&&(l&&(l+=" "),l+=i);return l},Ov=a=>{if(typeof a=="string")return a;let n,r="";for(let i=0;i<a.length;i++)a[i]&&(n=Ov(a[i]))&&(r&&(r+=" "),r+=n);return r},Wk=(a,...n)=>{let r,i,l,c;const f=y=>{const b=n.reduce((v,w)=>w(v),a());return r=Yk(b),i=r.cache.get,l=r.cache.set,c=m,m(y)},m=y=>{const b=i(y);if(b)return b;const v=Xk(y,r);return l(y,v),v};return c=f,(...y)=>c(Jk(...y))},Zk=[],Bn=a=>{const n=r=>r[a]||Zk;return n.isThemeGetter=!0,n},Rv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Uv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ej=/^\d+\/\d+$/,tj=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nj=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aj=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rj=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sj=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Al=a=>ej.test(a),Et=a=>!!a&&!Number.isNaN(Number(a)),Bs=a=>!!a&&Number.isInteger(Number(a)),Nh=a=>a.endsWith("%")&&Et(a.slice(0,-1)),as=a=>tj.test(a),ij=()=>!0,lj=a=>nj.test(a)&&!aj.test(a),Dv=()=>!1,oj=a=>rj.test(a),cj=a=>sj.test(a),uj=a=>!tt(a)&&!nt(a),dj=a=>Il(a,qv,Dv),tt=a=>Rv.test(a),xi=a=>Il(a,Lv,lj),Ah=a=>Il(a,pj,Et),by=a=>Il(a,Mv,Dv),fj=a=>Il(a,zv,cj),Ou=a=>Il(a,Iv,oj),nt=a=>Uv.test(a),$o=a=>Bl(a,Lv),hj=a=>Bl(a,yj),wy=a=>Bl(a,Mv),mj=a=>Bl(a,qv),gj=a=>Bl(a,zv),Ru=a=>Bl(a,Iv,!0),Il=(a,n,r)=>{const i=Rv.exec(a);return i?i[1]?n(i[1]):r(i[2]):!1},Bl=(a,n,r=!1)=>{const i=Uv.exec(a);return i?i[1]?n(i[1]):r:!1},Mv=a=>a==="position"||a==="percentage",zv=a=>a==="image"||a==="url",qv=a=>a==="length"||a==="size"||a==="bg-size",Lv=a=>a==="length",pj=a=>a==="number",yj=a=>a==="family-name",Iv=a=>a==="shadow",vj=()=>{const a=Bn("color"),n=Bn("font"),r=Bn("text"),i=Bn("font-weight"),l=Bn("tracking"),c=Bn("leading"),f=Bn("breakpoint"),m=Bn("container"),y=Bn("spacing"),b=Bn("radius"),v=Bn("shadow"),w=Bn("inset-shadow"),_=Bn("text-shadow"),k=Bn("drop-shadow"),E=Bn("blur"),R=Bn("perspective"),H=Bn("aspect"),q=Bn("ease"),W=Bn("animate"),L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],fe=()=>[...z(),nt,tt],K=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto","contain","none"],O=()=>[nt,tt,y],D=()=>[Al,"full","auto",...O()],Z=()=>[Bs,"none","subgrid",nt,tt],F=()=>["auto",{span:["full",Bs,nt,tt]},Bs,nt,tt],G=()=>[Bs,"auto",nt,tt],ne=()=>["auto","min","max","fr",nt,tt],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],J=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...O()],T=()=>[Al,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],Y=()=>[a,nt,tt],$=()=>[...z(),wy,by,{position:[nt,tt]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",mj,dj,{size:[nt,tt]}],B=()=>[Nh,$o,xi],ue=()=>["","none","full",b,nt,tt],te=()=>["",Et,$o,xi],he=()=>["solid","dashed","dotted","double"],Be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ee=()=>[Et,Nh,wy,by],lt=()=>["","none",E,nt,tt],Me=()=>["none",Et,nt,tt],Ue=()=>["none",Et,nt,tt],_t=()=>[Et,nt,tt],at=()=>[Al,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[as],breakpoint:[as],color:[ij],container:[as],"drop-shadow":[as],ease:["in","out","in-out"],font:[uj],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[as],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[as],shadow:[as],spacing:["px",Et],text:[as],"text-shadow":[as],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Al,tt,nt,H]}],container:["container"],columns:[{columns:[Et,tt,nt,m]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:fe()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[Bs,"auto",nt,tt]}],basis:[{basis:[Al,"full","auto",m,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Et,Al,"auto","initial","none",tt]}],grow:[{grow:["",Et,nt,tt]}],shrink:[{shrink:["",Et,nt,tt]}],order:[{order:[Bs,"first","last","none",nt,tt]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:F()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:F()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ne()}],"auto-rows":[{"auto-rows":ne()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...J(),"normal"]}],"justify-self":[{"justify-self":["auto",...J()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...J(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...J(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...J(),"baseline"]}],"place-self":[{"place-self":["auto",...J()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:T()}],w:[{w:[m,"screen",...T()]}],"min-w":[{"min-w":[m,"screen","none",...T()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[f]},...T()]}],h:[{h:["screen","lh",...T()]}],"min-h":[{"min-h":["screen","lh","none",...T()]}],"max-h":[{"max-h":["screen","lh",...T()]}],"font-size":[{text:["base",r,$o,xi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,nt,Ah]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Nh,tt]}],"font-family":[{font:[hj,tt,n]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[l,nt,tt]}],"line-clamp":[{"line-clamp":[Et,"none",nt,Ah]}],leading:[{leading:[c,...O()]}],"list-image":[{"list-image":["none",nt,tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nt,tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[Et,"from-font","auto",nt,xi]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[Et,"auto",nt,tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt,tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt,tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:$()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bs,nt,tt],radial:["",nt,tt],conic:[Bs,nt,tt]},gj,fj]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:B()}],"gradient-via-pos":[{via:B()}],"gradient-to-pos":[{to:B()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Et,nt,tt]}],"outline-w":[{outline:["",Et,$o,xi]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",v,Ru,Ou]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",w,Ru,Ou]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[Et,xi]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",_,Ru,Ou]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[Et,nt,tt]}],"mix-blend":[{"mix-blend":[...Be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Et]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ee()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":Ee()}],"mask-image-t-to-pos":[{"mask-t-to":Ee()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":Ee()}],"mask-image-r-to-pos":[{"mask-r-to":Ee()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":Ee()}],"mask-image-b-to-pos":[{"mask-b-to":Ee()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":Ee()}],"mask-image-l-to-pos":[{"mask-l-to":Ee()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":Ee()}],"mask-image-x-to-pos":[{"mask-x-to":Ee()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":Ee()}],"mask-image-y-to-pos":[{"mask-y-to":Ee()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[nt,tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ee()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[Et]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ee()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:$()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nt,tt]}],filter:[{filter:["","none",nt,tt]}],blur:[{blur:lt()}],brightness:[{brightness:[Et,nt,tt]}],contrast:[{contrast:[Et,nt,tt]}],"drop-shadow":[{"drop-shadow":["","none",k,Ru,Ou]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",Et,nt,tt]}],"hue-rotate":[{"hue-rotate":[Et,nt,tt]}],invert:[{invert:["",Et,nt,tt]}],saturate:[{saturate:[Et,nt,tt]}],sepia:[{sepia:["",Et,nt,tt]}],"backdrop-filter":[{"backdrop-filter":["","none",nt,tt]}],"backdrop-blur":[{"backdrop-blur":lt()}],"backdrop-brightness":[{"backdrop-brightness":[Et,nt,tt]}],"backdrop-contrast":[{"backdrop-contrast":[Et,nt,tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Et,nt,tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Et,nt,tt]}],"backdrop-invert":[{"backdrop-invert":["",Et,nt,tt]}],"backdrop-opacity":[{"backdrop-opacity":[Et,nt,tt]}],"backdrop-saturate":[{"backdrop-saturate":[Et,nt,tt]}],"backdrop-sepia":[{"backdrop-sepia":["",Et,nt,tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nt,tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Et,"initial",nt,tt]}],ease:[{ease:["linear","initial",q,nt,tt]}],delay:[{delay:[Et,nt,tt]}],animate:[{animate:["none",W,nt,tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[R,nt,tt]}],"perspective-origin":[{"perspective-origin":fe()}],rotate:[{rotate:Me()}],"rotate-x":[{"rotate-x":Me()}],"rotate-y":[{"rotate-y":Me()}],"rotate-z":[{"rotate-z":Me()}],scale:[{scale:Ue()}],"scale-x":[{"scale-x":Ue()}],"scale-y":[{"scale-y":Ue()}],"scale-z":[{"scale-z":Ue()}],"scale-3d":["scale-3d"],skew:[{skew:_t()}],"skew-x":[{"skew-x":_t()}],"skew-y":[{"skew-y":_t()}],transform:[{transform:[nt,tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:fe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:at()}],"translate-x":[{"translate-x":at()}],"translate-y":[{"translate-y":at()}],"translate-z":[{"translate-z":at()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt,tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt,tt]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[Et,$o,xi,Ah]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},bj=Wk(vj);function Ze(...a){return bj(Ok(a))}const xy=({children:a,onClick:n,disabled:r,variant:i="primary",className:l="",type:c="button"})=>{const f="relative w-full font-bold text-sm transition-all duration-150 ease-out transform-gpu select-none",m={primary:`
      bg-gradient-to-b from-indigo-400 via-indigo-500 to-indigo-600
      text-white
      shadow-[0_6px_0_0_#4338ca,0_8px_12px_rgba(67,56,202,0.4)]
      hover:shadow-[0_4px_0_0_#4338ca,0_6px_10px_rgba(67,56,202,0.5)]
      hover:translate-y-[2px]
      active:shadow-[0_0px_0_0_#4338ca,0_2px_6px_rgba(67,56,202,0.4)]
      active:translate-y-[6px]
      rounded-2xl py-4
      border-t border-indigo-300/30
    `,secondary:`
      bg-gradient-to-b from-purple-400 via-purple-500 to-purple-600
      text-white
      shadow-[0_5px_0_0_#7c3aed,0_7px_10px_rgba(124,58,237,0.3)]
      hover:shadow-[0_3px_0_0_#7c3aed,0_5px_8px_rgba(124,58,237,0.4)]
      hover:translate-y-[2px]
      active:shadow-[0_0px_0_0_#7c3aed,0_2px_5px_rgba(124,58,237,0.3)]
      active:translate-y-[5px]
      rounded-xl py-3
      border-t border-purple-300/30
    `,google:`
      bg-gradient-to-b from-white via-gray-50 to-gray-100
      text-gray-700
      shadow-[0_5px_0_0_#d1d5db,0_7px_10px_rgba(0,0,0,0.1)]
      hover:shadow-[0_3px_0_0_#d1d5db,0_5px_8px_rgba(0,0,0,0.15)]
      hover:translate-y-[2px]
      active:shadow-[0_0px_0_0_#d1d5db,0_2px_5px_rgba(0,0,0,0.1)]
      active:translate-y-[5px]
      rounded-xl py-3.5
      border border-gray-200
    `};return u.jsx("button",{type:c,onClick:n,disabled:r,className:Ze(f,m[i],r&&"opacity-50 cursor-not-allowed translate-y-0 shadow-none",l),children:a})},Uu=({type:a,value:n,onChange:r,placeholder:i,icon:l,rightElement:c,error:f})=>{const[m,y]=Se.useState(!1);return u.jsxs("div",{className:Ze("relative group transition-all duration-200",m&&"transform scale-[1.02]"),children:[u.jsx("div",{className:Ze("absolute inset-0 rounded-xl transition-all duration-200",m?"bg-indigo-500/20 blur-md":"bg-black/20 translate-y-1")}),u.jsxs("div",{className:Ze("relative flex items-center bg-white/[0.05] border rounded-xl transition-all duration-200",m?"border-indigo-500/50 bg-white/[0.08]":f?"border-red-500/50":"border-white/10"),children:[u.jsx(l,{className:Ze("absolute left-4 w-5 h-5 transition-colors duration-200",m?"text-indigo-400":"text-white/30")}),u.jsx("input",{type:a,value:n,onChange:r,onFocus:()=>y(!0),onBlur:()=>y(!1),placeholder:i,className:"w-full pl-12 pr-12 py-4 bg-transparent text-white placeholder-white/30 outline-none text-sm font-medium"}),c&&u.jsx("div",{className:"absolute right-4",children:c})]})]})};function wj({onLogin:a,onSignup:n,onGoogleLogin:r,onAdminLogin:i,logoClickCount:l,setLogoClickCount:c}){const[f,m]=Se.useState("login"),[y,b]=Se.useState(""),[v,w]=Se.useState(""),[_,k]=Se.useState(""),[E,R]=Se.useState(""),[H,q]=Se.useState(!1),[W,L]=Se.useState(!1),[z,fe]=Se.useState(!1),[K,X]=Se.useState(!1),[O,D]=Se.useState(""),[Z,F]=Se.useState(""),[G,ne]=Se.useState(navigator.onLine),[M,J]=Se.useState(0),[A,T]=Se.useState(!1),[Y,$]=Se.useState(!1),[ae,I]=Se.useState(null);Se.useEffect(()=>{const Me=Ue=>{Ue.preventDefault(),I(Ue),$(!0)};return window.addEventListener("beforeinstallprompt",Me),()=>window.removeEventListener("beforeinstallprompt",Me)},[]),Se.useEffect(()=>{const Me=()=>ne(!0),Ue=()=>ne(!1);return window.addEventListener("online",Me),window.addEventListener("offline",Ue),()=>{window.removeEventListener("online",Me),window.removeEventListener("offline",Ue)}},[]),Se.useEffect(()=>{if(!v){J(0);return}let Me=0;v.length>=6&&(Me+=1),v.length>=8&&(Me+=1),/[a-z]/.test(v)&&/[A-Z]/.test(v)&&(Me+=1),/\d/.test(v)&&(Me+=1),/[^a-zA-Z0-9]/.test(v)&&(Me+=1),J(Me)},[v]);const B=()=>{const Me=l+1;c(Me),navigator.vibrate&&navigator.vibrate(Me>=5?[50,30,50]:10),Me>=5&&(i(),c(0))},ue=()=>{if(D(""),!y.trim())return D("Please enter your email"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y))return D("Please enter a valid email"),!1;if(!v)return D("Please enter your password"),!1;if(f==="signup"){if(!E.trim())return D("Please enter your name"),!1;if(v.length<6)return D("Password must be at least 6 characters"),!1;if(v!==_)return D("Passwords do not match"),!1;if(!A)return D("Please agree to Terms & Privacy Policy"),!1}return!0},te=async Me=>{if(Me.preventDefault(),!!ue()){D(""),F(""),fe(!0);try{f==="login"?(await a(y,v),F("Welcome back!")):(await n(y,v,E),F("Account created successfully!"))}catch(Ue){D(Ue.message||"An error occurred")}finally{fe(!1)}}},he=async()=>{if(!K){D(""),X(!0);try{await r()}catch(Me){D(Me.message||"Google sign in failed")}finally{X(!1)}}},Be=async()=>{if(ae){ae.prompt();const{outcome:Me}=await ae.userChoice;Me==="accepted"&&$(!1),I(null)}},Ee=["#ef4444","#f97316","#eab308","#84cc16","#22c55e"],lt=["Very Weak","Weak","Fair","Good","Strong"];return u.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center p-4 overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0",children:[u.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(99,102,241,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(99,102,241,0.03)_1px,transparent_1px)] bg-[size:60px_60px]"}),u.jsx("div",{className:"absolute top-0 left-0 w-[600px] h-[600px] bg-indigo-600/20 rounded-full blur-[150px] animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 right-0 w-[600px] h-[600px] bg-purple-600/20 rounded-full blur-[150px] animate-pulse",style:{animationDelay:"1s"}}),u.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-pink-600/10 rounded-full blur-[120px] animate-pulse",style:{animationDelay:"2s"}})]}),u.jsxs("div",{className:Ze("fixed top-4 left-4 z-50 px-3 py-1.5 rounded-full text-xs font-semibold flex items-center gap-2 backdrop-blur-sm",G?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:[G?u.jsx(Ek,{className:"w-3 h-3"}):u.jsx(Nk,{className:"w-3 h-3"}),G?"Online":"Offline"]}),u.jsx("div",{className:"hidden lg:block fixed top-[15%] left-[8%] animate-float",children:u.jsxs("div",{className:"p-4 bg-white/[0.03] backdrop-blur-xl rounded-2xl border border-white/10 flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center shadow-lg shadow-green-500/30",children:u.jsx(Fs,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-bold text-sm",children:"End-to-End Encrypted"}),u.jsx("p",{className:"text-white/40 text-xs",children:"Your messages are private"})]})]})}),u.jsx("div",{className:"hidden lg:block fixed top-[30%] right-[8%] animate-float",style:{animationDelay:"1s"},children:u.jsxs("div",{className:"p-4 bg-white/[0.03] backdrop-blur-xl rounded-2xl border border-white/10 flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-400 to-cyan-600 flex items-center justify-center shadow-lg shadow-blue-500/30",children:u.jsx(Gs,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-bold text-sm",children:"HD Video Calls"}),u.jsx("p",{className:"text-white/40 text-xs",children:"Crystal clear quality"})]})]})}),u.jsx("div",{className:"hidden lg:block fixed bottom-[30%] left-[8%] animate-float",style:{animationDelay:"2s"},children:u.jsxs("div",{className:"p-4 bg-white/[0.03] backdrop-blur-xl rounded-2xl border border-white/10 flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-purple-400 to-pink-600 flex items-center justify-center shadow-lg shadow-purple-500/30",children:u.jsx(zl,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-bold text-sm",children:"Group Chats"}),u.jsx("p",{className:"text-white/40 text-xs",children:"Up to 256 members"})]})]})}),u.jsx("div",{className:"hidden lg:block fixed bottom-[15%] right-[8%] animate-float",style:{animationDelay:"3s"},children:u.jsxs("div",{className:"p-4 bg-white/[0.03] backdrop-blur-xl rounded-2xl border border-white/10 flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/30",children:u.jsx(Wu,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-bold text-sm",children:"Lightning Fast"}),u.jsx("p",{className:"text-white/40 text-xs",children:"Instant message delivery"})]})]})}),u.jsx("div",{className:"relative w-full max-w-[420px] z-10",children:u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-[2.5rem] blur-xl opacity-30"}),u.jsxs("div",{className:"relative bg-gradient-to-b from-white/[0.12] to-white/[0.04] backdrop-blur-2xl rounded-[2rem] p-7 sm:p-9 border border-white/20 shadow-2xl",children:[u.jsxs("div",{className:"text-center mb-7",children:[u.jsxs("button",{onClick:B,className:"relative w-24 h-24 mx-auto mb-4 group cursor-pointer",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-indigo-500 to-purple-600 rounded-3xl blur-xl opacity-60 group-hover:opacity-80 transition-opacity"}),u.jsx("div",{className:"relative w-full h-full rounded-3xl bg-gradient-to-tr from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center shadow-[0_10px_30px_rgba(99,102,241,0.4)] transform transition-all duration-200 group-hover:scale-105 group-active:scale-95",children:u.jsx(Ar,{className:"w-12 h-12 text-white drop-shadow-lg"})}),l>0&&l<5&&u.jsx("div",{className:"absolute -bottom-2 -right-2 w-7 h-7 bg-gradient-to-br from-pink-500 to-rose-600 rounded-full flex items-center justify-center text-xs font-bold text-white shadow-lg animate-bounce",children:5-l})]}),u.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-white via-white to-white/60 bg-clip-text text-transparent tracking-tight",children:"Ourdm"}),u.jsx("p",{className:"text-white/40 text-xs font-semibold uppercase tracking-[0.2em] mt-1",children:"Private & Secure Messaging"})]}),u.jsxs("div",{className:"relative flex gap-2 p-1.5 mb-6 bg-black/30 rounded-2xl",children:[u.jsx("button",{onClick:()=>{m("login"),D(""),F("")},className:Ze("relative flex-1 py-3 rounded-xl font-bold text-sm transition-all duration-200",f==="login"?"bg-gradient-to-b from-indigo-400 to-indigo-600 text-white shadow-[0_4px_0_0_#4338ca]":"text-white/40 hover:text-white/60"),children:"Sign In"}),u.jsx("button",{onClick:()=>{m("signup"),D(""),F("")},className:Ze("relative flex-1 py-3 rounded-xl font-bold text-sm transition-all duration-200",f==="signup"?"bg-gradient-to-b from-indigo-400 to-indigo-600 text-white shadow-[0_4px_0_0_#4338ca]":"text-white/40 hover:text-white/60"),children:"Sign Up"})]}),O&&u.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-2 animate-shake",children:[u.jsx(W2,{className:"w-4 h-4 text-red-400 flex-shrink-0"}),u.jsx("p",{className:"text-red-400 text-xs font-medium",children:O})]}),Z&&u.jsxs("div",{className:"mb-4 p-3 bg-green-500/10 border border-green-500/20 rounded-xl flex items-center gap-2",children:[u.jsx(ly,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),u.jsx("p",{className:"text-green-400 text-xs font-medium",children:Z})]}),u.jsxs("form",{onSubmit:te,className:"space-y-4",children:[f==="signup"&&u.jsx(Uu,{type:"text",value:E,onChange:Me=>R(Me.target.value),placeholder:"Full Name",icon:jv}),u.jsx(Uu,{type:"email",value:y,onChange:Me=>b(Me.target.value),placeholder:"Email Address",icon:xS}),u.jsx(Uu,{type:H?"text":"password",value:v,onChange:Me=>w(Me.target.value),placeholder:"Password",icon:ra,rightElement:u.jsx("button",{type:"button",onClick:()=>q(!H),className:"text-white/30 hover:text-white/60 transition-colors",children:H?u.jsx(Ju,{className:"w-5 h-5"}):u.jsx(Ti,{className:"w-5 h-5"})})}),f==="signup"&&v&&u.jsxs("div",{className:"space-y-2 px-1",children:[u.jsx("div",{className:"flex gap-1.5",children:[...Array(5)].map((Me,Ue)=>u.jsx("div",{className:"h-1.5 flex-1 rounded-full transition-all duration-300",style:{backgroundColor:Ue<M?Ee[M-1]:"rgba(255,255,255,0.1)"}},Ue))}),u.jsxs("p",{className:"text-xs text-white/30",children:["Strength: ",u.jsx("span",{style:{color:M>0?Ee[M-1]:"inherit"},className:"font-semibold",children:M>0?lt[M-1]:"Enter password"})]})]}),f==="signup"&&u.jsx(Uu,{type:W?"text":"password",value:_,onChange:Me=>k(Me.target.value),placeholder:"Confirm Password",icon:ra,error:_.length>0&&v!==_,rightElement:u.jsx("button",{type:"button",onClick:()=>L(!W),className:"text-white/30 hover:text-white/60 transition-colors",children:W?u.jsx(Ju,{className:"w-5 h-5"}):u.jsx(Ti,{className:"w-5 h-5"})})}),f==="signup"&&u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer px-1",children:[u.jsxs("div",{className:"relative mt-0.5",children:[u.jsx("input",{type:"checkbox",checked:A,onChange:Me=>T(Me.target.checked),className:"sr-only"}),u.jsx("div",{className:Ze("w-5 h-5 rounded-md border-2 flex items-center justify-center transition-all duration-200",A?"bg-indigo-500 border-indigo-500 shadow-[0_2px_0_0_#4338ca]":"border-white/20 hover:border-white/40"),children:A&&u.jsx(ly,{className:"w-3 h-3 text-white"})})]}),u.jsxs("span",{className:"text-xs text-white/40 leading-relaxed",children:["I agree to the ",u.jsx("a",{href:"#",className:"text-indigo-400 hover:underline",children:"Terms"})," and ",u.jsx("a",{href:"#",className:"text-indigo-400 hover:underline",children:"Privacy Policy"})]})]}),u.jsx("div",{className:"pt-2",children:u.jsx(xy,{type:"submit",variant:"primary",disabled:z||!G,children:u.jsx("span",{className:"flex items-center justify-center gap-2",children:z?u.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsxs(u.Fragment,{children:[f==="login"?"Sign In Securely":"Create Account",u.jsx("span",{className:"text-lg",children:""})]})})})})]}),u.jsxs("div",{className:"relative flex items-center justify-center mt-5 mb-4",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-white/10"})}),u.jsx("span",{className:"relative px-4 text-[10px] text-white/30 font-semibold uppercase tracking-widest bg-transparent",children:"Or continue with"})]}),u.jsx(xy,{onClick:he,variant:"google",disabled:K||!G,children:u.jsx("span",{className:"flex items-center justify-center gap-3",children:K?u.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[u.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),u.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),u.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),u.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),u.jsx("span",{children:"Continue with Google"})]})})}),u.jsx("div",{className:"mt-6 grid grid-cols-3 gap-2",children:[{icon:Fs,label:"Encrypted",color:"from-green-400 to-emerald-600"},{icon:Wh,label:"PWA Ready",color:"from-blue-400 to-cyan-600"},{icon:Wu,label:"Real-time",color:"from-yellow-400 to-orange-600"}].map((Me,Ue)=>u.jsxs("div",{className:"text-center p-3 bg-white/[0.03] rounded-xl border border-white/5 hover:bg-white/[0.06] transition-colors",children:[u.jsx("div",{className:Ze("w-9 h-9 mx-auto mb-2 rounded-lg bg-gradient-to-br flex items-center justify-center shadow-lg",Me.color),children:u.jsx(Me.icon,{className:"w-4 h-4 text-white"})}),u.jsx("p",{className:"text-[10px] text-white/50 font-medium",children:Me.label})]},Ue))}),u.jsxs("div",{className:"mt-6 text-center",children:[u.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[u.jsx(fm,{className:"w-3 h-3 text-green-500"}),u.jsx("p",{className:"text-white/30 text-[10px] font-bold uppercase tracking-[0.15em]",children:"Made with  by Sameer Shah"})]}),u.jsx("p",{className:"text-white/20 text-[8px] font-medium",children:" 2025 Ourdm Privacy Systems  v3.0.0"})]})]})]})}),Y&&u.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:u.jsxs("button",{onClick:Be,className:"px-5 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full text-white text-sm font-bold shadow-lg shadow-indigo-500/30 flex items-center gap-2 hover:scale-105 active:scale-95 transition-all",children:[u.jsx(Ml,{className:"w-4 h-4"}),"Install App"]})}),u.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px); }
          50% { transform: translateY(-15px); }
        }
        
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        
        .animate-float {
          animation: float 4s ease-in-out infinite;
        }
        
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
      `})]})}const Bv=6048e5,xj=864e5,Du=43200,_y=1440,Sy=Symbol.for("constructDateFrom");function sr(a,n){return typeof a=="function"?a(n):a&&typeof a=="object"&&Sy in a?a[Sy](n):a instanceof Date?new a.constructor(n):new Date(n)}function $n(a,n){return sr(n||a,a)}function _j(a,n,r){const i=$n(a,r?.in);return isNaN(n)?sr(a,NaN):(i.setDate(i.getDate()+n),i)}let Sj={};function dc(){return Sj}function oc(a,n){const r=dc(),i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,l=$n(a,n?.in),c=l.getDay(),f=(c<i?7:0)+c-i;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}function ed(a,n){return oc(a,{...n,weekStartsOn:1})}function Pv(a,n){const r=$n(a,n?.in),i=r.getFullYear(),l=sr(r,0);l.setFullYear(i+1,0,4),l.setHours(0,0,0,0);const c=ed(l),f=sr(r,0);f.setFullYear(i,0,4),f.setHours(0,0,0,0);const m=ed(f);return r.getTime()>=c.getTime()?i+1:r.getTime()>=m.getTime()?i:i-1}function td(a){const n=$n(a),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),+a-+r}function fc(a,...n){const r=sr.bind(null,a||n.find(i=>typeof i=="object"));return n.map(r)}function nd(a,n){const r=$n(a,n?.in);return r.setHours(0,0,0,0),r}function kj(a,n,r){const[i,l]=fc(r?.in,a,n),c=nd(i),f=nd(l),m=+c-td(c),y=+f-td(f);return Math.round((m-y)/xj)}function jj(a,n){const r=Pv(a,n),i=sr(a,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),ed(i)}function Lu(a,n){const r=+$n(a)-+$n(n);return r<0?-1:r>0?1:r}function mm(a){return sr(a,Date.now())}function Hv(a,n,r){const[i,l]=fc(r?.in,a,n);return+nd(i)==+nd(l)}function Nj(a){return a instanceof Date||typeof a=="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Aj(a){return!(!Nj(a)&&typeof a!="number"||isNaN(+$n(a)))}function Ej(a,n,r){const[i,l]=fc(r?.in,a,n),c=i.getFullYear()-l.getFullYear(),f=i.getMonth()-l.getMonth();return c*12+f}function Cj(a){return n=>{const i=(a?Math[a]:Math.trunc)(n);return i===0?0:i}}function Tj(a,n){return+$n(a)-+$n(n)}function Oj(a,n){const r=$n(a,n?.in);return r.setHours(23,59,59,999),r}function Rj(a,n){const r=$n(a,n?.in),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function Uj(a,n){const r=$n(a,n?.in);return+Oj(r,n)==+Rj(r,n)}function Dj(a,n,r){const[i,l,c]=fc(r?.in,a,a,n),f=Lu(l,c),m=Math.abs(Ej(l,c));if(m<1)return 0;l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-f*m);let y=Lu(l,c)===-f;Uj(i)&&m===1&&Lu(i,c)===1&&(y=!1);const b=f*(m-+y);return b===0?0:b}function Mj(a,n,r){const i=Tj(a,n)/1e3;return Cj(r?.roundingMethod)(i)}function zj(a,n){const r=$n(a,n?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const qj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Lj=(a,n,r)=>{let i;const l=qj[a];return typeof l=="string"?i=l:n===1?i=l.one:i=l.other.replace("{{count}}",n.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function Eh(a){return(n={})=>{const r=n.width?String(n.width):a.defaultWidth;return a.formats[r]||a.formats[a.defaultWidth]}}const Ij={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pj={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hj={date:Eh({formats:Ij,defaultWidth:"full"}),time:Eh({formats:Bj,defaultWidth:"full"}),dateTime:Eh({formats:Pj,defaultWidth:"full"})},$j={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kj=(a,n,r,i)=>$j[a];function Ko(a){return(n,r)=>{const i=r?.context?String(r.context):"standalone";let l;if(i==="formatting"&&a.formattingValues){const f=a.defaultFormattingWidth||a.defaultWidth,m=r?.width?String(r.width):f;l=a.formattingValues[m]||a.formattingValues[f]}else{const f=a.defaultWidth,m=r?.width?String(r.width):a.defaultWidth;l=a.values[m]||a.values[f]}const c=a.argumentCallback?a.argumentCallback(n):n;return l[c]}}const Vj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Jj=(a,n)=>{const r=Number(a),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Wj={ordinalNumber:Jj,era:Ko({values:Vj,defaultWidth:"wide"}),quarter:Ko({values:Fj,defaultWidth:"wide",argumentCallback:a=>a-1}),month:Ko({values:Gj,defaultWidth:"wide"}),day:Ko({values:Yj,defaultWidth:"wide"}),dayPeriod:Ko({values:Qj,defaultWidth:"wide",formattingValues:Xj,defaultFormattingWidth:"wide"})};function Vo(a){return(n,r={})=>{const i=r.width,l=i&&a.matchPatterns[i]||a.matchPatterns[a.defaultMatchWidth],c=n.match(l);if(!c)return null;const f=c[0],m=i&&a.parsePatterns[i]||a.parsePatterns[a.defaultParseWidth],y=Array.isArray(m)?eN(m,w=>w.test(f)):Zj(m,w=>w.test(f));let b;b=a.valueCallback?a.valueCallback(y):y,b=r.valueCallback?r.valueCallback(b):b;const v=n.slice(f.length);return{value:b,rest:v}}}function Zj(a,n){for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&n(a[r]))return r}function eN(a,n){for(let r=0;r<a.length;r++)if(n(a[r]))return r}function tN(a){return(n,r={})=>{const i=n.match(a.matchPattern);if(!i)return null;const l=i[0],c=n.match(a.parsePattern);if(!c)return null;let f=a.valueCallback?a.valueCallback(c[0]):c[0];f=r.valueCallback?r.valueCallback(f):f;const m=n.slice(l.length);return{value:f,rest:m}}}const nN=/^(\d+)(th|st|nd|rd)?/i,aN=/\d+/i,rN={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sN={any:[/^b/i,/^(a|c)/i]},iN={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lN={any:[/1/i,/2/i,/3/i,/4/i]},oN={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cN={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uN={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dN={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fN={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hN={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mN={ordinalNumber:tN({matchPattern:nN,parsePattern:aN,valueCallback:a=>parseInt(a,10)}),era:Vo({matchPatterns:rN,defaultMatchWidth:"wide",parsePatterns:sN,defaultParseWidth:"any"}),quarter:Vo({matchPatterns:iN,defaultMatchWidth:"wide",parsePatterns:lN,defaultParseWidth:"any",valueCallback:a=>a+1}),month:Vo({matchPatterns:oN,defaultMatchWidth:"wide",parsePatterns:cN,defaultParseWidth:"any"}),day:Vo({matchPatterns:uN,defaultMatchWidth:"wide",parsePatterns:dN,defaultParseWidth:"any"}),dayPeriod:Vo({matchPatterns:fN,defaultMatchWidth:"any",parsePatterns:hN,defaultParseWidth:"any"})},$v={code:"en-US",formatDistance:Lj,formatLong:Hj,formatRelative:Kj,localize:Wj,match:mN,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gN(a,n){const r=$n(a,n?.in);return kj(r,zj(r))+1}function pN(a,n){const r=$n(a,n?.in),i=+ed(r)-+jj(r);return Math.round(i/Bv)+1}function Kv(a,n){const r=$n(a,n?.in),i=r.getFullYear(),l=dc(),c=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,f=sr(n?.in||a,0);f.setFullYear(i+1,0,c),f.setHours(0,0,0,0);const m=oc(f,n),y=sr(n?.in||a,0);y.setFullYear(i,0,c),y.setHours(0,0,0,0);const b=oc(y,n);return+r>=+m?i+1:+r>=+b?i:i-1}function yN(a,n){const r=dc(),i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=Kv(a,n),c=sr(n?.in||a,0);return c.setFullYear(l,0,i),c.setHours(0,0,0,0),oc(c,n)}function vN(a,n){const r=$n(a,n?.in),i=+oc(r,n)-+yN(r,n);return Math.round(i/Bv)+1}function Yt(a,n){const r=a<0?"-":"",i=Math.abs(a).toString().padStart(n,"0");return r+i}const Ps={y(a,n){const r=a.getFullYear(),i=r>0?r:1-r;return Yt(n==="yy"?i%100:i,n.length)},M(a,n){const r=a.getMonth();return n==="M"?String(r+1):Yt(r+1,2)},d(a,n){return Yt(a.getDate(),n.length)},a(a,n){const r=a.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(a,n){return Yt(a.getHours()%12||12,n.length)},H(a,n){return Yt(a.getHours(),n.length)},m(a,n){return Yt(a.getMinutes(),n.length)},s(a,n){return Yt(a.getSeconds(),n.length)},S(a,n){const r=n.length,i=a.getMilliseconds(),l=Math.trunc(i*Math.pow(10,r-3));return Yt(l,n.length)}},El={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ky={G:function(a,n,r){const i=a.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(a,n,r){if(n==="yo"){const i=a.getFullYear(),l=i>0?i:1-i;return r.ordinalNumber(l,{unit:"year"})}return Ps.y(a,n)},Y:function(a,n,r,i){const l=Kv(a,i),c=l>0?l:1-l;if(n==="YY"){const f=c%100;return Yt(f,2)}return n==="Yo"?r.ordinalNumber(c,{unit:"year"}):Yt(c,n.length)},R:function(a,n){const r=Pv(a);return Yt(r,n.length)},u:function(a,n){const r=a.getFullYear();return Yt(r,n.length)},Q:function(a,n,r){const i=Math.ceil((a.getMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return Yt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(a,n,r){const i=Math.ceil((a.getMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return Yt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(a,n,r){const i=a.getMonth();switch(n){case"M":case"MM":return Ps.M(a,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(a,n,r){const i=a.getMonth();switch(n){case"L":return String(i+1);case"LL":return Yt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(a,n,r,i){const l=vN(a,i);return n==="wo"?r.ordinalNumber(l,{unit:"week"}):Yt(l,n.length)},I:function(a,n,r){const i=pN(a);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):Yt(i,n.length)},d:function(a,n,r){return n==="do"?r.ordinalNumber(a.getDate(),{unit:"date"}):Ps.d(a,n)},D:function(a,n,r){const i=gN(a);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Yt(i,n.length)},E:function(a,n,r){const i=a.getDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(a,n,r,i){const l=a.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return Yt(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(a,n,r,i){const l=a.getDay(),c=(l-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return Yt(c,n.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(a,n,r){const i=a.getDay(),l=i===0?7:i;switch(n){case"i":return String(l);case"ii":return Yt(l,n.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(a,n,r){const l=a.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(a,n,r){const i=a.getHours();let l;switch(i===12?l=El.noon:i===0?l=El.midnight:l=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(a,n,r){const i=a.getHours();let l;switch(i>=17?l=El.evening:i>=12?l=El.afternoon:i>=4?l=El.morning:l=El.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(a,n,r){if(n==="ho"){let i=a.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Ps.h(a,n)},H:function(a,n,r){return n==="Ho"?r.ordinalNumber(a.getHours(),{unit:"hour"}):Ps.H(a,n)},K:function(a,n,r){const i=a.getHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Yt(i,n.length)},k:function(a,n,r){let i=a.getHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):Yt(i,n.length)},m:function(a,n,r){return n==="mo"?r.ordinalNumber(a.getMinutes(),{unit:"minute"}):Ps.m(a,n)},s:function(a,n,r){return n==="so"?r.ordinalNumber(a.getSeconds(),{unit:"second"}):Ps.s(a,n)},S:function(a,n){return Ps.S(a,n)},X:function(a,n,r){const i=a.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return Ny(i);case"XXXX":case"XX":return ki(i);case"XXXXX":case"XXX":default:return ki(i,":")}},x:function(a,n,r){const i=a.getTimezoneOffset();switch(n){case"x":return Ny(i);case"xxxx":case"xx":return ki(i);case"xxxxx":case"xxx":default:return ki(i,":")}},O:function(a,n,r){const i=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+jy(i,":");case"OOOO":default:return"GMT"+ki(i,":")}},z:function(a,n,r){const i=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+jy(i,":");case"zzzz":default:return"GMT"+ki(i,":")}},t:function(a,n,r){const i=Math.trunc(+a/1e3);return Yt(i,n.length)},T:function(a,n,r){return Yt(+a,n.length)}};function jy(a,n=""){const r=a>0?"-":"+",i=Math.abs(a),l=Math.trunc(i/60),c=i%60;return c===0?r+String(l):r+String(l)+n+Yt(c,2)}function Ny(a,n){return a%60===0?(a>0?"-":"+")+Yt(Math.abs(a)/60,2):ki(a,n)}function ki(a,n=""){const r=a>0?"-":"+",i=Math.abs(a),l=Yt(Math.trunc(i/60),2),c=Yt(i%60,2);return r+l+n+c}const Ay=(a,n)=>{switch(a){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Vv=(a,n)=>{switch(a){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},bN=(a,n)=>{const r=a.match(/(P+)(p+)?/)||[],i=r[1],l=r[2];if(!l)return Ay(a,n);let c;switch(i){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;case"PPPP":default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",Ay(i,n)).replace("{{time}}",Vv(l,n))},wN={p:Vv,P:bN},xN=/^D+$/,_N=/^Y+$/,SN=["D","DD","YY","YYYY"];function kN(a){return xN.test(a)}function jN(a){return _N.test(a)}function NN(a,n,r){const i=AN(a,n,r);if(console.warn(i),SN.includes(a))throw new RangeError(i)}function AN(a,n,r){const i=a[0]==="Y"?"years":"days of the month";return`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${n}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const EN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,TN=/^'([^]*?)'?$/,ON=/''/g,RN=/[a-zA-Z]/;function is(a,n,r){const i=dc(),l=i.locale??$v,c=i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,f=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,m=$n(a,r?.in);if(!Aj(m))throw new RangeError("Invalid time value");let y=n.match(CN).map(v=>{const w=v[0];if(w==="p"||w==="P"){const _=wN[w];return _(v,l.formatLong)}return v}).join("").match(EN).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:UN(v)};if(ky[w])return{isToken:!0,value:v};if(w.match(RN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});l.localize.preprocessor&&(y=l.localize.preprocessor(m,y));const b={firstWeekContainsDate:c,weekStartsOn:f,locale:l};return y.map(v=>{if(!v.isToken)return v.value;const w=v.value;(jN(w)||kN(w))&&NN(w,n,String(a));const _=ky[w[0]];return _(m,w,l.localize,b)}).join("")}function UN(a){const n=a.match(TN);return n?n[1].replace(ON,"'"):a}function DN(a,n,r){const i=dc(),l=r?.locale??i.locale??$v,c=2520,f=Lu(a,n);if(isNaN(f))throw new RangeError("Invalid time value");const m=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:f}),[y,b]=fc(r?.in,...f>0?[n,a]:[a,n]),v=Mj(b,y),w=(td(b)-td(y))/1e3,_=Math.round((v-w)/60);let k;if(_<2)return r?.includeSeconds?v<5?l.formatDistance("lessThanXSeconds",5,m):v<10?l.formatDistance("lessThanXSeconds",10,m):v<20?l.formatDistance("lessThanXSeconds",20,m):v<40?l.formatDistance("halfAMinute",0,m):v<60?l.formatDistance("lessThanXMinutes",1,m):l.formatDistance("xMinutes",1,m):_===0?l.formatDistance("lessThanXMinutes",1,m):l.formatDistance("xMinutes",_,m);if(_<45)return l.formatDistance("xMinutes",_,m);if(_<90)return l.formatDistance("aboutXHours",1,m);if(_<_y){const E=Math.round(_/60);return l.formatDistance("aboutXHours",E,m)}else{if(_<c)return l.formatDistance("xDays",1,m);if(_<Du){const E=Math.round(_/_y);return l.formatDistance("xDays",E,m)}else if(_<Du*2)return k=Math.round(_/Du),l.formatDistance("aboutXMonths",k,m)}if(k=Dj(b,y),k<12){const E=Math.round(_/Du);return l.formatDistance("xMonths",E,m)}else{const E=k%12,R=Math.trunc(k/12);return E<3?l.formatDistance("aboutXYears",R,m):E<9?l.formatDistance("overXYears",R,m):l.formatDistance("almostXYears",R+1,m)}}function Ey(a,n){return DN(a,mm(a),n)}function Fv(a,n){return Hv(sr(a,a),mm(a))}function MN(a,n,r){return _j(a,-1,r)}function Gv(a,n){return Hv(sr(a,a),MN(mm(a)))}function zN({onSelectChat:a,onLongPress:n}){const{chats:r,lockedChats:i,hiddenChats:l,showHiddenChats:c,archivedChats:f,pinnedChats:m,mutedChats:y,profile:b,toggleChatArchive:v,toggleChatMute:w,setChats:_}=rr(),[k,E]=Se.useState(""),R=Se.useRef(null),H=Se.useRef(!1),[q,W]=Se.useState({}),z=[...r.filter(F=>{const G=l.includes(F.id),ne=f.includes(F.id),M=F.user.display_name.toLowerCase().includes(k.toLowerCase())||F.user.username.toLowerCase().includes(k.toLowerCase());return c?G&&M:!G&&!ne&&M})].sort((F,G)=>{const ne=m.includes(F.id),M=m.includes(G.id);if(ne&&!M)return-1;if(!ne&&M)return 1;const J=F.last_message?.created_at?new Date(F.last_message.created_at).getTime():0;return(G.last_message?.created_at?new Date(G.last_message.created_at).getTime():0)-J}),fe=(F,G)=>{H.current=!1,R.current=setTimeout(()=>{H.current=!0,n(F,G)},500)},K=F=>{R.current&&(clearTimeout(R.current),R.current=null),H.current||a(F)},X=()=>{R.current&&(clearTimeout(R.current),R.current=null)},O=(F,G)=>{const M=G.touches[0].clientX,J=T=>{const Y=T.touches[0].clientX,$=M-Y,ae=Math.max(-100,Math.min(100,$/200*100));W(I=>({...I,[F]:ae}))},A=()=>{const T=q[F]||0;Math.abs(T)>50&&(T<-50?v(F):T>50&&(f.includes(F)?_(r.filter(Y=>Y.id!==F)):w(F))),W(Y=>({...Y,[F]:0})),document.removeEventListener("touchmove",J),document.removeEventListener("touchend",A)};document.addEventListener("touchmove",J),document.addEventListener("touchend",A)},D=F=>{const G=new Date(F);return Fv(G)?is(G,"HH:mm"):Gv(G)?"Yesterday":is(G,"dd/MM/yy")},Z=F=>{if(i.includes(F.id))return u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(ra,{className:"w-3 h-3"})," Chat locked"]});if(F.is_typing)return u.jsx("span",{className:"text-indigo-500 italic",children:"typing..."});if(!F.last_message)return u.jsx("span",{className:"text-gray-400",children:"No messages yet"});if(F.last_message.is_deleted)return u.jsx("span",{className:"italic text-gray-400",children:"Message deleted"});const G=F.last_message.sender_id===b?.id;let ne="",M=null;switch(F.last_message.type){case"image":M=u.jsx(Wo,{className:"w-4 h-4"}),ne="Photo";break;case"video":M=u.jsx(Gs,{className:"w-4 h-4"}),ne="Video";break;case"audio":M=u.jsx(um,{className:"w-4 h-4"}),ne="Voice message";break;case"document":M=u.jsx(cS,{className:"w-4 h-4"}),ne="Document";break;default:ne="Message"}return u.jsxs("span",{className:"flex items-center gap-1.5",children:[G&&u.jsx("span",{className:Ze("flex-shrink-0",F.last_message.status==="read"?"text-blue-500":"text-gray-400"),children:F.last_message.status==="sent"?u.jsx(dd,{className:"w-4 h-4"}):u.jsx(Fh,{className:"w-4 h-4"})}),M&&u.jsx("span",{className:"flex-shrink-0 text-gray-400",children:M}),u.jsx("span",{className:"truncate",children:ne})]})};return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx("div",{className:"px-4 py-4 flex-shrink-0",children:u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-2xl opacity-0 group-hover:opacity-10 transition-opacity blur-xl"}),u.jsx(lc,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-hover:text-indigo-500 transition-colors z-10"}),u.jsx("input",{type:"text",placeholder:"Search chats or start new one...",value:k,onChange:F=>E(F.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-100 dark:bg-slate-800 rounded-2xl focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-base placeholder-gray-400 dark:placeholder-gray-500 border border-transparent focus:border-indigo-200 dark:focus:border-indigo-800 transition-all group-hover:bg-white dark:group-hover:bg-slate-700 shadow-sm hover:shadow-md"}),k&&u.jsx("button",{onClick:()=>E(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full bg-gray-200 dark:bg-slate-600 hover:bg-gray-300 dark:hover:bg-slate-500 transition-colors",children:u.jsx(Ys,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"})})]})}),u.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:[z.map(F=>{const G=m.includes(F.id),ne=y.includes(F.id),M=i.includes(F.id);return u.jsxs("div",{onContextMenu:J=>{J.preventDefault(),n(F,J)},onTouchStart:J=>{fe(F,J),O(F.id,J)},onTouchEnd:()=>K(F),onTouchMove:X,onClick:()=>a(F),className:Ze("flex items-center gap-4 px-4 py-4 mx-3 my-2 cursor-pointer rounded-3xl transition-all duration-200 group relative overflow-hidden","bg-white dark:bg-slate-800 shadow-lg border border-transparent hover:border-indigo-200 dark:hover:border-slate-700","active:scale-[0.98] active:shadow-xl hover:shadow-xl hover:bg-gradient-to-r hover:from-white hover:to-indigo-50 dark:hover:from-slate-800 dark:hover:to-slate-700/50"),style:{transform:`translateX(${q[F.id]||0}px)`},children:[q[F.id]&&Math.abs(q[F.id])>20&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-red-500 text-white px-3 py-2 rounded-full shadow-lg z-20",children:f.includes(F.id)?u.jsxs(u.Fragment,{children:[u.jsx(Ll,{className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-medium",children:"Delete"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ci,{className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-medium",children:"Mute"})]})}),u.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2 bg-blue-500 text-white px-3 py-2 rounded-full shadow-lg z-20",children:[u.jsx(Vh,{className:"w-4 h-4"}),u.jsx("span",{className:"text-xs font-medium",children:"Archive"})]})]}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-3xl"}),u.jsx("div",{className:"relative flex-shrink-0",children:u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:F.user.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${F.user.username}`,alt:"",className:"w-16 h-16 rounded-2xl object-cover bg-gray-100 dark:bg-slate-700 border-2 border-white dark:border-slate-600 shadow-md group-hover:shadow-lg transition-shadow"}),F.user.is_online&&u.jsx("div",{className:"absolute bottom-0 right-0 w-5 h-5 bg-green-500 rounded-full border-3 border-white dark:border-slate-800 shadow-md animate-pulse"}),M&&u.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center shadow-lg border-2 border-white dark:border-slate-800",children:u.jsx(ra,{className:"w-3.5 h-3.5 text-white"})})]})}),u.jsxs("div",{className:"flex-1 min-w-0 relative",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[G&&u.jsx("div",{className:"p-1 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:u.jsx(KS,{className:"w-3.5 h-3.5 text-indigo-600 dark:text-indigo-400 rotate-45"})}),u.jsx("h3",{className:"font-bold text-lg truncate dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:F.user.display_name})]}),F.last_message&&u.jsx("span",{className:Ze("text-xs flex-shrink-0 ml-2 font-medium px-2 py-1 rounded-full",F.unread_count&&F.unread_count>0?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-slate-700"),children:D(String(F.last_message.created_at))})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 truncate flex-1 font-medium",children:Z(F)}),u.jsxs("div",{className:"flex items-center gap-2 ml-3 flex-shrink-0",children:[ne&&u.jsx("div",{className:"w-6 h-6 bg-gray-100 dark:bg-slate-700 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-gray-400 text-xs",children:""})}),F.unread_count!==void 0&&F.unread_count>0&&u.jsx("span",{className:"min-w-[24px] h-[24px] px-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-lg animate-bounce",children:F.unread_count>99?"99+":F.unread_count})]})]})]})]},F.id)}),z.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center py-24 px-6",children:[u.jsxs("div",{className:"relative w-24 h-24 rounded-3xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30 flex items-center justify-center mb-6 shadow-xl",children:[u.jsx(Ar,{className:"w-12 h-12 text-indigo-400 dark:text-indigo-500"}),u.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-pink-400 to-purple-400 rounded-full flex items-center justify-center shadow-lg",children:u.jsx("span",{className:"text-white text-lg",children:""})})]}),u.jsx("h3",{className:"text-2xl font-bold text-gray-700 dark:text-gray-200 mb-3 text-center",children:k?"No chats found":c?"No hidden chats":"No chats yet"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm leading-relaxed max-w-xs",children:k?"Try adjusting your search terms or filters":c?"Your hidden chats will appear here for privacy":"Start connecting! Search for friends and begin amazing conversations"}),!k&&!c&&u.jsxs("div",{className:"mt-8 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 dark:text-gray-500",children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),u.jsx("span",{children:"Online users ready to connect"})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 dark:text-gray-500",children:[u.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),u.jsx("span",{children:"End-to-end encrypted messaging"})]})]})]})]})]})}const fd="AES-GCM",Yv=256;async function qN(){return await crypto.subtle.generateKey({name:fd,length:Yv},!0,["encrypt","decrypt"])}async function LN(a){return await crypto.subtle.exportKey("jwk",a)}async function IN(a){return await crypto.subtle.importKey("jwk",a,{name:fd,length:Yv},!0,["encrypt","decrypt"])}async function BN(a,n){const i=new TextEncoder().encode(a),l=crypto.getRandomValues(new Uint8Array(12)),c=await crypto.subtle.encrypt({name:fd,iv:l},n,i);return{ciphertext:btoa(String.fromCharCode(...new Uint8Array(c))),iv:btoa(String.fromCharCode(...l))}}async function PN(a,n,r){try{const i=Uint8Array.from(atob(a),m=>m.charCodeAt(0)),l=Uint8Array.from(atob(n),m=>m.charCodeAt(0)),c=await crypto.subtle.decrypt({name:fd,iv:l},r,i);return new TextDecoder().decode(c)}catch{return"[Decryption failed]"}}async function HN(a){const n=localStorage.getItem("ourdm_encryption_key");if(n)return await IN(JSON.parse(n));const r=await qN(),i=await LN(r);return localStorage.setItem("ourdm_encryption_key",JSON.stringify(i)),r}const $N=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function KN({chat:a,onBack:n,onCall:r,onOpenMenu:i}){const{messages:l,addMessage:c,updateMessage:f,profile:m,typingUsers:y,adminSettings:b,lockedChats:v}=rr(),[w,_]=Se.useState(""),[k,E]=Se.useState(!1),[R,H]=Se.useState(!1),[q,W]=Se.useState(null),[L,z]=Se.useState(null),[fe,K]=Se.useState({}),[X,O]=Se.useState(null),[D,Z]=Se.useState(!1),[F,G]=Se.useState(0),[ne,M]=Se.useState(!1),J=Se.useRef(null),A=Se.useRef(null),T=Se.useRef(null),Y=Se.useRef(null);Se.useEffect(()=>{if("visualViewport"in window&&window.visualViewport){const ke=window.visualViewport,ze=()=>{const We=window.innerHeight,yt=ke.height,ct=We-yt;ct>100?(G(ct),setTimeout(()=>{J.current?.scrollIntoView({behavior:"smooth"})},100)):G(0)};return ke.addEventListener("resize",ze),ke.addEventListener("scroll",ze),()=>{ke.removeEventListener("resize",ze),ke.removeEventListener("scroll",ze)}}const Fe=()=>{M(!0),setTimeout(()=>{J.current?.scrollIntoView({behavior:"smooth"})},300)},we=()=>{M(!1)},Pe=Y.current;if(Pe)return Pe.addEventListener("focus",Fe),Pe.addEventListener("blur",we),()=>{Pe.removeEventListener("focus",Fe),Pe.removeEventListener("blur",we)}},[]);const $=l[a.id]||[],ae=v.includes(a.id),I=y[a.id];Se.useEffect(()=>{HN().then(O)},[]),Se.useEffect(()=>{(async()=>{if(!X)return;const we={};for(const Pe of $)if(Pe.is_deleted)we[Pe.id]="[Message deleted]";else if(Pe.content&&Pe.iv)try{we[Pe.id]=await PN(Pe.content,Pe.iv,X)}catch{we[Pe.id]=Pe.content}K(we)})()},[$,X]),Se.useEffect(()=>{J.current?.scrollIntoView({behavior:"smooth"})},[$.length]);const B=Se.useRef(null),ue=Se.useRef(0),te=Fe=>{_(Fe);const we=Date.now();we-ue.current>1500&&(ss(()=>Promise.resolve().then(()=>Ho),void 0,import.meta.url).then(Pe=>Pe.sendTypingStatus(a.id,!0)),ue.current=we),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{ss(()=>Promise.resolve().then(()=>Ho),void 0,import.meta.url).then(Pe=>Pe.sendTypingStatus(a.id,!1)),ue.current=0},2500)},he=async()=>{if(!w.trim()||!X||!m)return;B.current&&clearTimeout(B.current),ss(()=>Promise.resolve().then(()=>Ho),void 0,import.meta.url).then(Pe=>Pe.sendTypingStatus(a.id,!1));const Fe=await BN(w.trim(),X),we={id:crypto.randomUUID(),chat_id:a.id,sender_id:m.id,receiver_id:a.user.id,content:Fe.ciphertext,iv:Fe.iv,type:"text",status:"pending",reply_to:q?.id,created_at:Date.now()};c(a.id,we),_(""),W(null),E(!1)},Be=async Fe=>{const we=Fe.target.files?.[0];if(!we||!m||!X)return;const Pe=b.max_file_size_mb*1024*1024;if(we.size>Pe){alert(`File too large. Max size: ${b.max_file_size_mb}MB`);return}const ke=await fv(we),ze=we.type.startsWith("image/")?"image":we.type.startsWith("video/")?"video":we.type.startsWith("audio/")?"audio":"document",We={id:crypto.randomUUID(),chat_id:a.id,sender_id:m.id,receiver_id:a.user.id,content:"",iv:"",type:ze,file_url:ke.local_path||URL.createObjectURL(we),thumbnail:ke.thumbnail,status:"pending",created_at:Date.now()};c(a.id,We),H(!1),A.current&&(A.current.value="")},Ee=async(Fe,we)=>{f(a.id,Fe,{reactions:{...$.find(Pe=>Pe.id===Fe)?.reactions||{},[m?.id||""]:[we]}}),ss(()=>Promise.resolve().then(()=>Ho),void 0,import.meta.url).then(Pe=>Pe.sendReaction(Fe,we)),z(null)},lt=async Fe=>{f(a.id,Fe,{is_deleted:!0,deleted_for_everyone:!0}),ss(()=>Promise.resolve().then(()=>Ho),void 0,import.meta.url).then(we=>we.deleteMessageFromServer({messageId:Fe})),z(null)},Me=async Fe=>{f(a.id,Fe,{is_deleted:!0}),z(null)},Ue=async Fe=>{if(Fe.file_url)try{const Pe=await(await fetch(Fe.file_url)).blob();if(await Yu(Pe,`ourdm_${Fe.type}_${Date.now()}.${Fe.type==="image"?"jpg":Fe.type==="video"?"mp4":"file"}`))try{const ze="/storage/v1/object/public/chat-media/";if(Fe.file_url.includes(ze)){const We=Fe.file_url.split(ze)[1];We&&await Oe.storage.from("chat-media").remove([We])}}catch(ze){console.warn("Failed to delete remote media after save:",ze)}}catch(we){console.error("Download failed:",we)}},_t=Fe=>{try{return is(new Date(Fe),"HH:mm")}catch{return"--:--"}},at=Fe=>{switch(Fe){case"pending":return u.jsx("div",{className:"w-3 h-3 border border-current rounded-full animate-pulse"});case"sent":return u.jsx(dd,{className:"w-4 h-4"});case"delivered":return u.jsx(Fh,{className:"w-4 h-4"});case"read":return u.jsx(Fh,{className:"w-4 h-4 text-blue-400"})}},yn=Fe=>{const we=[];let Pe="";return Fe.forEach(ke=>{const ze=is(new Date(ke.created_at),"yyyy-MM-dd");ze!==Pe?(Pe=ze,we.push({date:ze,messages:[ke]})):we[we.length-1].messages.push(ke)}),we};return u.jsxs("div",{className:"flex flex-col h-full bg-gray-100 dark:bg-slate-900",style:{paddingBottom:F>0?`${F}px`:void 0,transition:"padding-bottom 0.2s ease-out"},children:[u.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-3 flex items-center gap-3 safe-area-top flex-shrink-0",children:[u.jsx("button",{onClick:n,className:"p-2 -ml-2 hover:bg-white/10 rounded-full",children:u.jsx(_v,{className:"w-6 h-6"})}),u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:a.user.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.user.username}`,alt:"",className:"w-10 h-10 rounded-full object-cover"}),a.user.is_online&&u.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-indigo-600"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold truncate",children:a.user.display_name}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(fm,{className:"w-3 h-3 text-white/70"}),u.jsx("p",{className:"text-sm text-white/70",children:I?"typing...":a.user.is_online?"Online":"Offline"})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[b.voice_calls_enabled&&u.jsx("button",{onClick:()=>r("voice"),className:"p-2 hover:bg-white/10 rounded-full",children:u.jsx(Pa,{className:"w-5 h-5"})}),b.video_calls_enabled&&u.jsx("button",{onClick:()=>r("video"),className:"p-2 hover:bg-white/10 rounded-full",children:u.jsx(Gs,{className:"w-5 h-5"})}),u.jsx("button",{onClick:i,className:"p-2 hover:bg-white/10 rounded-full",children:u.jsx(kv,{className:"w-5 h-5"})})]})]}),u.jsxs("div",{ref:T,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u.jsx("div",{className:"flex justify-center my-4",children:u.jsxs("div",{className:"px-4 py-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30 rounded-xl flex items-center gap-2 max-w-xs transition-opacity hover:opacity-100 opacity-80 shadow-sm",children:[u.jsx(ra,{className:"w-3.5 h-3.5 text-yellow-600 dark:text-yellow-500"}),u.jsx("p",{className:"text-[10px] text-yellow-700 dark:text-yellow-400 leading-tight font-medium",children:"Messages and calls are end-to-end encrypted. No one outside of this chat, not even Ourdm, can read or listen to them."})]})}),yn($).map(({date:Fe,messages:we})=>u.jsxs("div",{children:[u.jsx("div",{className:"flex items-center justify-center my-4",children:u.jsx("span",{className:"px-3 py-1 bg-white/80 dark:bg-slate-800 rounded-full text-xs text-gray-500 dark:text-gray-400 shadow-sm",children:is(new Date(Fe),"MMMM d, yyyy")})}),u.jsx("div",{className:"space-y-2",children:we.map((Pe,ke)=>{const ze=Pe.sender_id===m?.id,We=!ze&&(ke===0||we[ke-1]?.sender_id===m?.id);return u.jsxs("div",{className:Ze("flex items-end gap-2",ze?"justify-end":"justify-start"),children:[!ze&&We&&u.jsx("img",{src:a.user.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.user.username}`,alt:"",className:"w-8 h-8 rounded-full flex-shrink-0"}),!ze&&!We&&u.jsx("div",{className:"w-8"}),u.jsxs("div",{onClick:()=>z(Pe),className:Ze("max-w-[75%] rounded-2xl p-3 cursor-pointer transition-transform active:scale-95",ze?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-br-md":"bg-white dark:bg-slate-800 shadow-sm dark:text-white rounded-bl-md"),children:[Pe.reply_to&&u.jsx("div",{className:Ze("text-xs mb-2 p-2 rounded-lg",ze?"bg-white/20":"bg-gray-100 dark:bg-slate-700"),children:u.jsx("p",{className:"opacity-70",children:"Reply to message"})}),Pe.type==="text"?u.jsx("p",{className:"break-words whitespace-pre-wrap",children:fe[Pe.id]||"Decrypting..."}):Pe.type==="image"?u.jsxs("div",{className:"relative",children:[Pe.thumbnail&&u.jsx("div",{className:"absolute inset-0 bg-cover bg-center blur-xl scale-110",style:{backgroundImage:`url(${Pe.thumbnail})`}}),u.jsx("img",{src:Pe.file_url,alt:"",className:"rounded-lg max-w-full relative z-10",loading:"lazy"})]}):Pe.type==="video"?u.jsx("video",{src:Pe.file_url,controls:!0,className:"rounded-lg max-w-full",poster:Pe.thumbnail}):u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-slate-700 rounded-lg flex items-center justify-center",children:""}),u.jsx("span",{children:"File"})]}),u.jsxs("div",{className:Ze("flex items-center justify-end gap-1 mt-1",ze?"text-white/70":"text-gray-400"),children:[u.jsx("span",{className:"text-xs",children:_t(Pe.created_at)}),ze&&at(Pe.status)]}),Pe.reactions&&Object.keys(Pe.reactions).length>0&&u.jsx("div",{className:"flex gap-1 mt-1 -mb-1",children:Object.values(Pe.reactions).map((yt,ct)=>u.jsx("span",{className:"text-sm bg-white/20 rounded-full px-1",children:yt},ct))})]})]},Pe.id)})})]},Fe)),I&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("img",{src:a.user.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.user.username}`,alt:"",className:"w-8 h-8 rounded-full"}),u.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-3 shadow-sm",children:u.jsxs("div",{className:"flex gap-1",children:[u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),u.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]}),u.jsx("div",{ref:J})]}),q&&u.jsxs("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800 border-t dark:border-slate-700 flex items-center gap-2",children:[u.jsx(hy,{className:"w-4 h-4 text-gray-500"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("p",{className:"text-xs text-indigo-500 font-medium",children:["Reply to ",q.sender_id===m?.id?"yourself":a.user.display_name]}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:fe[q.id]||"[Media]"})]}),u.jsx("button",{onClick:()=>W(null),className:"p-1",children:u.jsx(Ys,{className:"w-4 h-4 text-gray-500"})})]}),u.jsxs("div",{className:Ze("p-4 bg-white dark:bg-slate-800 border-t dark:border-slate-700 flex-shrink-0 transition-all duration-200",F>0?"fixed bottom-0 left-0 right-0 z-40":"safe-area-bottom",ne&&F===0&&"pb-6"),children:[u.jsxs("div",{className:"flex items-end gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>H(!R),className:"p-2 text-gray-500 hover:text-indigo-600 transition-colors",children:u.jsx(dy,{className:"w-6 h-6"})}),R&&u.jsxs("div",{className:"absolute bottom-full left-0 mb-2 bg-white dark:bg-slate-700 rounded-xl shadow-lg py-2 min-w-[160px]",children:[u.jsxs("button",{onClick:()=>{A.current?.click(),A.current?.setAttribute("accept","image/*")},className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-slate-600",children:[u.jsx(Wo,{className:"w-5 h-5 text-indigo-500"}),u.jsx("span",{className:"dark:text-white",children:"Photo"})]}),u.jsxs("button",{onClick:()=>{A.current?.click(),A.current?.setAttribute("accept","video/*")},className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-slate-600",children:[u.jsx(ic,{className:"w-5 h-5 text-purple-500"}),u.jsx("span",{className:"dark:text-white",children:"Video"})]}),u.jsxs("button",{onClick:()=>{A.current?.click(),A.current?.setAttribute("accept","*/*")},className:"w-full px-4 py-2 flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-slate-600",children:[u.jsx(dy,{className:"w-5 h-5 text-gray-500"}),u.jsx("span",{className:"dark:text-white",children:"Document"})]})]})]}),u.jsx("input",{ref:A,type:"file",className:"hidden",onChange:Be}),u.jsx("button",{onClick:()=>E(!k),className:"p-2 text-gray-500 hover:text-indigo-600 transition-colors",children:u.jsx(ik,{className:"w-6 h-6"})}),u.jsx("div",{className:"flex-1 relative",children:u.jsx("input",{ref:Y,type:"text",value:w,onChange:Fe=>te(Fe.target.value),onKeyPress:Fe=>Fe.key==="Enter"&&!Fe.shiftKey&&he(),onFocus:()=>M(!0),onBlur:()=>M(!1),placeholder:ae?" Chat is locked":"Type a message...",disabled:ae,maxLength:b.max_message_length,className:"w-full px-4 py-2.5 bg-gray-100 dark:bg-slate-700 dark:text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 text-base border border-transparent focus:border-indigo-500/30 transition-all",style:{fontSize:"16px"}})}),w.trim()?u.jsx("button",{onClick:he,className:"p-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-xl shadow-lg shadow-indigo-500/20 active:scale-95 transition-all",children:u.jsx(dm,{className:"w-5 h-5"})}):u.jsx("button",{onTouchStart:()=>Z(!0),onTouchEnd:()=>Z(!1),className:Ze("p-3 rounded-xl transition-all",D?"bg-red-500 text-white scale-110 shadow-lg shadow-red-500/30":"bg-gray-100 dark:bg-slate-700 text-gray-500"),children:u.jsx(um,{className:"w-5 h-5"})})]}),k&&u.jsx("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-slate-700 rounded-xl",children:u.jsx("div",{className:"grid grid-cols-8 gap-2",children:$N.map(Fe=>u.jsx("button",{onClick:()=>{_(we=>we+Fe)},className:"text-2xl p-1 hover:bg-gray-200 dark:hover:bg-slate-600 rounded transition-colors",children:Fe},Fe))})})]}),L&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",onClick:()=>z(null),children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl w-full max-w-lg p-6 animate-slide-up",onClick:Fe=>Fe.stopPropagation(),children:[u.jsx("div",{className:"flex justify-center gap-4 mb-6",children:["","","","","",""].map(Fe=>u.jsx("button",{onClick:()=>Ee(L.id,Fe),className:"text-3xl p-2 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:Fe},Fe))}),u.jsxs("div",{className:"space-y-1",children:[u.jsxs("button",{onClick:()=>{W(L),z(null)},className:"w-full p-4 text-left rounded-xl hover:bg-gray-100 dark:hover:bg-slate-700 flex items-center gap-3",children:[u.jsx(hy,{className:"w-5 h-5"}),u.jsx("span",{className:"dark:text-white",children:"Reply"})]}),u.jsxs("button",{onClick:async()=>{if(L){if(L.type==="text"){const Fe=fe[L.id],we=new Blob([Fe||""],{type:"text/plain"});await Yu(we,`message_${L.id.substring(0,8)}.txt`)}else await Ue(L);z(null)}},className:"w-full p-4 text-left rounded-xl hover:bg-gray-100 dark:hover:bg-slate-700 flex items-center gap-3",children:[u.jsx(Ml,{className:"w-5 h-5"}),u.jsx("span",{className:"dark:text-white",children:"Save to Device"})]}),L.sender_id===m?.id&&u.jsxs("button",{onClick:()=>lt(L.id),className:"w-full p-4 text-left rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-3 text-red-500",children:[u.jsx(Ys,{className:"w-5 h-5"}),u.jsx("span",{children:"Delete for Everyone"})]}),u.jsxs("button",{onClick:()=>Me(L.id),className:"w-full p-4 text-left rounded-xl hover:bg-gray-100 dark:hover:bg-slate-700 flex items-center gap-3",children:[u.jsx(Ll,{className:"w-5 h-5 text-gray-500"}),u.jsx("span",{className:"dark:text-white",children:"Delete for Me"})]})]}),u.jsx("button",{onClick:()=>z(null),className:"w-full mt-4 p-4 border dark:border-slate-600 rounded-xl font-medium dark:text-white",children:"Cancel"})]})})]})}function VN(){const{activeCall:a,setActiveCall:n,profile:r,addCallLog:i}=rr(),[l,c]=Se.useState(Hn.getCallState()),[f,m]=Se.useState(0),y=Se.useRef(null),b=Se.useRef(null);Se.useEffect(()=>{if(!a)return;Hn.setOnStateChange(z=>{c(z),m(z.call_duration),(z.connection_state==="failed"||z.connection_state==="disconnected")&&_()}),Hn.setOnRemoteStream(z=>{b.current&&(b.current.srcObject=z)}),!a.isIncoming&&!l.is_in_call&&Hn.startCall(a.remoteUser.id,a.remoteUser.display_name,a.type);const W=()=>{const z=Hn.getLocalStream();y.current&&z&&(y.current.srcObject=z)};W();const L=setInterval(W,500);return()=>{clearInterval(L),Hn.cleanup()}},[]);const v=async()=>{a?.isIncoming&&a.incomingOffer&&await Hn.answerCall({call_id:a.id,caller_id:a.remoteUser.id,caller_name:a.remoteUser.display_name,caller_avatar:a.remoteUser.avatar_url,call_type:a.type,offer:a.incomingOffer})},w=async()=>{a?.isIncoming&&a.incomingOffer&&await Hn.declineCall({call_id:a.id,caller_id:a.remoteUser.id,caller_name:a.remoteUser.display_name,caller_avatar:a.remoteUser.avatar_url,call_type:a.type,offer:a.incomingOffer}),_()},_=()=>{const W=Hn.getCallState().call_duration;a&&r&&i({id:a.id,caller_id:a.isIncoming?a.remoteUser.id:r.id,receiver_id:a.isIncoming?r.id:a.remoteUser.id,type:a.type,status:W>5?"answered":"missed",duration:W>0?W:void 0,created_at:new Date().toISOString(),caller:a.isIncoming?a.remoteUser:r,receiver:a.isIncoming?r:a.remoteUser}),Hn.endCall(),n(null)},k=(W=10)=>{navigator.vibrate&&navigator.vibrate(W)},E=W=>{const L=Math.floor(W/60),z=W%60;return`${L.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`};if(!a)return null;const R=a.remoteUser,H=l.connection_state==="connected",q=a.isIncoming&&l.connection_state==="disconnected"&&!l.is_in_call;return u.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 z-50 flex flex-col",children:[a.type==="video"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"absolute inset-0 bg-slate-900",children:[u.jsx("video",{ref:b,autoPlay:!0,playsInline:!0,className:Ze("w-full h-full object-cover",l.remote_video_off&&"hidden")}),l.remote_video_off&&u.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-slate-900/40 backdrop-blur-3xl",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 animate-pulse scale-110"}),u.jsx("img",{src:R.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${R.username}`,alt:"",className:"w-48 h-48 rounded-full object-cover border-8 border-white/10 relative z-10"})]}),u.jsx("h3",{className:"text-white text-xl font-bold mt-6",children:R.display_name}),u.jsx("p",{className:"text-white/60 text-sm",children:"Camera is off"})]})]}),u.jsxs("div",{className:"absolute top-12 right-4 w-32 h-44 rounded-2xl overflow-hidden border-2 border-white/30 shadow-2xl safe-area-top z-40 bg-slate-800 ring-4 ring-black/20",children:[u.jsx("video",{ref:y,autoPlay:!0,playsInline:!0,muted:!0,className:Ze("w-full h-full object-cover mirror",l.is_video_off&&"hidden")}),l.is_video_off&&u.jsx("div",{className:"w-full h-full bg-slate-800 flex items-center justify-center",children:u.jsx("div",{className:"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center",children:u.jsx(gy,{className:"w-6 h-6 text-white/50"})})}),u.jsx("div",{className:"absolute bottom-2 left-2 bg-black/40 backdrop-blur-md px-2 py-0.5 rounded-lg text-[10px] text-white/80 font-bold border border-white/10",children:"You"})]}),u.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-black/80 via-black/40 to-transparent pointer-events-none"}),u.jsx("div",{className:"absolute inset-x-0 top-0 h-40 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"})]}):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center safe-area-top",children:[u.jsxs("div",{className:"relative mb-8",children:[!H&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"absolute inset-0 rounded-full bg-white/10 animate-ping scale-150"}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-white/5 animate-ping scale-125",style:{animationDelay:"0.3s"}})]}),H&&u.jsx("div",{className:"absolute inset-0 rounded-full ring-4 ring-green-500/50 scale-110"}),u.jsx("img",{src:R.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${R.username}`,alt:"",className:"w-40 h-40 rounded-full object-cover relative z-10 border-4 border-white/20"})]}),u.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:R.display_name}),u.jsxs("p",{className:"text-white/60 text-sm mb-2",children:["@",R.username]}),u.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-full px-5 py-2 mt-2",children:[u.jsx(Pa,{className:"w-4 h-4 text-white/70"}),u.jsx("span",{className:"text-white text-sm font-medium",children:H?E(f):q?"Incoming call...":"Calling..."})]})]}),a.type==="video"&&u.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 safe-area-top flex items-center justify-between z-50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>{const W=l.connection_state==="connected"?Hn.getCallConfig().video_quality==="SD"?"HD":Hn.getCallConfig().video_quality==="HD"?"FHD":"SD":"FHD";Hn.setVideoQuality(W),k(20)},className:"px-3 py-1 rounded-lg bg-white/10 backdrop-blur-md text-[10px] font-bold text-white border border-white/20 active:scale-90",children:[Hn.getCallConfig().video_quality," MODE"]}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-white font-bold text-lg",children:R.display_name}),u.jsx("p",{className:"text-white/70 text-sm",children:H?E(f):q?"Incoming call...":"Connecting..."})]})]}),u.jsx("div",{className:Ze("px-3 py-1 rounded-full text-xs font-medium",H?"bg-green-500/30 text-green-300":"bg-yellow-500/30 text-yellow-300"),children:H?" Connected":q?" Incoming":" Connecting"})]}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 safe-area-bottom",children:q?u.jsxs("div",{className:"flex justify-center items-center gap-12",children:[u.jsxs("button",{onClick:w,className:"group flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500 text-white flex items-center justify-center group-hover:bg-red-600 transition-all shadow-lg shadow-red-500/40 active:scale-90",children:u.jsx(fy,{className:"w-8 h-8"})}),u.jsx("span",{className:"text-white text-xs font-medium",children:"Decline"})]}),u.jsxs("button",{onClick:v,className:"group flex flex-col items-center gap-2",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 text-white flex items-center justify-center group-hover:bg-green-600 transition-all shadow-lg shadow-green-500/40 animate-bounce active:scale-90",children:u.jsx(Qh,{className:"w-8 h-8"})}),u.jsx("span",{className:"text-white text-xs font-medium",children:"Answer"})]})]}):u.jsxs("div",{className:"flex justify-center items-center gap-5",children:[u.jsxs("button",{onClick:()=>{k(10),Hn.toggleMute()},className:Ze("w-16 h-16 rounded-full flex flex-col items-center justify-center transition-all active:scale-90 relative overflow-hidden",l.is_muted?"bg-red-500 text-white shadow-lg shadow-red-500/40 ring-4 ring-red-500/20":"bg-white/10 backdrop-blur-xl text-white hover:bg-white/20 border border-white/20"),children:[l.is_muted?u.jsx(kS,{className:"w-7 h-7"}):u.jsx(um,{className:"w-7 h-7"}),u.jsx("span",{className:"text-[10px] font-bold mt-1 opacity-60",children:"Mute"})]}),u.jsx("button",{onClick:()=>{k(50),_()},className:"w-20 h-20 rounded-full bg-rose-600 text-white flex items-center justify-center hover:bg-rose-700 transition-all shadow-2xl shadow-rose-600/50 active:scale-95 ring-8 ring-rose-600/10",children:u.jsx(fy,{className:"w-9 h-9"})}),a.type==="video"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{k(10),Hn.toggleVideo()},className:Ze("w-16 h-16 rounded-full flex flex-col items-center justify-center transition-all active:scale-90",l.is_video_off?"bg-red-500 text-white shadow-lg shadow-red-500/40 ring-4 ring-red-500/20":"bg-white/10 backdrop-blur-xl text-white hover:bg-white/20 border border-white/20"),children:[l.is_video_off?u.jsx(gy,{className:"w-7 h-7"}):u.jsx(Gs,{className:"w-7 h-7"}),u.jsx("span",{className:"text-[10px] font-bold mt-1 opacity-60",children:"Camera"})]}),u.jsxs("button",{onClick:()=>{k(20),Hn.switchCamera()},className:"w-16 h-16 rounded-full bg-white/10 backdrop-blur-xl text-white flex flex-col items-center justify-center hover:bg-white/20 transition-all active:scale-90 border border-white/20",children:[u.jsx(WS,{className:"w-7 h-7"}),u.jsx("span",{className:"text-[10px] font-bold mt-1 opacity-60",children:"Flip"})]})]})]})})]})}function FN({onBack:a}){const{profile:n,allUsers:r,adminSettings:i,setAdminSettings:l,updateUser:c,broadcasts:f,addBroadcast:m,callLogs:y,chats:b}=rr(),[v,w]=Se.useState("dashboard"),[_,k]=Se.useState(null),[E,R]=Se.useState(""),[H,q]=Se.useState(""),[W,L]=Se.useState("info"),[z,fe]=Se.useState(""),K={totalUsers:r.length,onlineUsers:r.filter(M=>M.is_online).length,totalChats:b.length,totalCalls:y.length,suspendedUsers:r.filter(M=>M.is_suspended).length,adminUsers:r.filter(M=>M.is_admin).length},X=async M=>{const J=!i[M];l({[M]:J});try{await Oe.from("admin_settings").upsert({key:M,value:JSON.stringify(J),updated_by:n?.id})}catch(A){console.error("Failed to update setting:",A)}},O=async(M,J)=>{l({[M]:J});try{await Oe.from("admin_settings").upsert({key:M,value:JSON.stringify(J),updated_by:n?.id})}catch(A){console.error("Failed to update setting:",A)}},D=async(M,J)=>{c(M,{is_suspended:J});try{await Oe.from("profiles").update({is_suspended:J}).eq("id",M)}catch(A){console.error("Failed to update user:",A)}k(null)},Z=async(M,J)=>{c(M,{is_admin:J});try{await Oe.from("profiles").update({is_admin:J}).eq("id",M)}catch(A){console.error("Failed to update user:",A)}k(null)},F=async M=>{if(confirm("Are you sure you want to delete this user? This cannot be undone.")){try{await Oe.from("profiles").delete().eq("id",M),rr.setState(J=>({allUsers:J.allUsers.filter(A=>A.id!==M)}))}catch(J){console.error("Failed to delete user:",J)}k(null)}},G=async()=>{if(!E.trim()||!H.trim()||!n)return;const M={id:crypto.randomUUID(),admin_id:n.id,title:E,message:H,type:W,read_by:[],created_at:new Date().toISOString()};m(M);try{await Oe.from("broadcasts").insert(M)}catch(J){console.error("Failed to send broadcast:",J)}R(""),q(""),L("info")},ne=r.filter(M=>M.display_name.toLowerCase().includes(z.toLowerCase())||M.username.toLowerCase().includes(z.toLowerCase())||M.email.toLowerCase().includes(z.toLowerCase()));return u.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-slate-900",children:[u.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-4 safe-area-top",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:a,className:"p-2 -ml-2 hover:bg-white/10 rounded-full",children:u.jsx(_v,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold",children:"Admin Panel"}),u.jsx("p",{className:"text-sm text-white/70",children:"Manage Ourdm"})]})]})}),u.jsx("div",{className:"flex bg-white dark:bg-slate-800 border-b dark:border-slate-700 overflow-x-auto",children:[{id:"dashboard",icon:F2,label:"Dashboard"},{id:"users",icon:zl,label:"Users"},{id:"settings",icon:Jh,label:"Settings"},{id:"broadcast",icon:Ci,label:"Broadcast"}].map(({id:M,icon:J,label:A})=>u.jsxs("button",{onClick:()=>w(M),className:Ze("flex-1 min-w-[80px] py-3 flex flex-col items-center gap-1 transition-colors",v===M?"text-orange-500 border-b-2 border-orange-500":"text-gray-500"),children:[u.jsx(J,{className:"w-5 h-5"}),u.jsx("span",{className:"text-xs",children:A})]},M))}),u.jsxs("div",{className:"p-4 pb-20",children:[v==="dashboard"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-4 text-white",children:[u.jsx(zl,{className:"w-8 h-8 mb-2 opacity-80"}),u.jsx("h3",{className:"text-3xl font-bold",children:K.totalUsers}),u.jsx("p",{className:"text-white/70",children:"Total Users"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white",children:[u.jsx(iy,{className:"w-8 h-8 mb-2 opacity-80"}),u.jsx("h3",{className:"text-3xl font-bold",children:K.onlineUsers}),u.jsx("p",{className:"text-white/70",children:"Online Now"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-4 text-white",children:[u.jsx(Ar,{className:"w-8 h-8 mb-2 opacity-80"}),u.jsx("h3",{className:"text-3xl font-bold",children:K.totalChats}),u.jsx("p",{className:"text-white/70",children:"Active Chats"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-rose-600 rounded-2xl p-4 text-white",children:[u.jsx(Pa,{className:"w-8 h-8 mb-2 opacity-80"}),u.jsx("h3",{className:"text-3xl font-bold",children:K.totalCalls}),u.jsx("p",{className:"text-white/70",children:"Total Calls"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4",children:[u.jsxs("h3",{className:"font-bold mb-4 dark:text-white flex items-center gap-2",children:[u.jsx(Sv,{className:"w-5 h-5"}),"System Status"]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Server Status"}),u.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded-full text-xs font-medium",children:"Online"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Database"}),u.jsx("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded-full text-xs font-medium",children:"Connected"})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Admin Users"}),u.jsx("span",{className:"font-medium dark:text-white",children:K.adminUsers})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Suspended Users"}),u.jsx("span",{className:"font-medium text-red-500",children:K.suspendedUsers})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4",children:[u.jsxs("h3",{className:"font-bold mb-4 dark:text-white flex items-center gap-2",children:[u.jsx(Jo,{className:"w-5 h-5"}),"Recent Broadcasts"]}),f.length===0?u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No broadcasts yet"}):u.jsx("div",{className:"space-y-2",children:f.slice(0,3).map(M=>u.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:Ze("w-2 h-2 rounded-full",M.type==="urgent"?"bg-red-500":M.type==="warning"?"bg-yellow-500":"bg-blue-500")}),u.jsx("span",{className:"font-medium dark:text-white text-sm",children:M.title})]}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:M.message})]},M.id))})]})]}),v==="users"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("input",{type:"text",placeholder:"Search users...",value:z,onChange:M=>fe(M.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-800 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 dark:text-white"}),u.jsx("div",{className:"space-y-2",children:ne.map(M=>u.jsxs("div",{onClick:()=>k(M),className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-xl cursor-pointer hover:shadow-md transition-shadow",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:M.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${M.username}`,alt:"",className:"w-12 h-12 rounded-full"}),M.is_online&&u.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-slate-800"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"font-semibold dark:text-white truncate",children:M.display_name}),M.is_admin&&u.jsx(Sh,{className:"w-4 h-4 text-yellow-500"}),M.is_suspended&&u.jsx(Qu,{className:"w-4 h-4 text-red-500"})]}),u.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",M.username,"  ",M.email]})]})]},M.id))})]}),v==="settings"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4",children:[u.jsx("h3",{className:"font-bold mb-4 dark:text-white",children:"Feature Toggles"}),u.jsx("div",{className:"space-y-4",children:[{key:"voice_calls_enabled",label:"Voice Calls",icon:Pa},{key:"video_calls_enabled",label:"Video Calls",icon:Pa},{key:"stun_enabled",label:"STUN Servers",icon:Jo},{key:"turn_enabled",label:"TURN Servers",icon:Jo},{key:"stories_enabled",label:"Stories",icon:iy},{key:"registration_enabled",label:"New Registrations",icon:hk},{key:"maintenance_mode",label:"Maintenance Mode",icon:Jh}].map(({key:M,label:J,icon:A})=>u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(A,{className:"w-5 h-5 text-gray-500"}),u.jsx("span",{className:"dark:text-white",children:J})]}),u.jsx("button",{onClick:()=>X(M),className:Ze("w-12 h-6 rounded-full transition-colors relative",i[M]?"bg-green-500":"bg-gray-300"),children:u.jsx("div",{className:Ze("w-5 h-5 bg-white rounded-full absolute top-0.5 transition-transform shadow",i[M]?"right-0.5":"left-0.5")})})]},M))})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4",children:[u.jsx("h3",{className:"font-bold mb-4 dark:text-white",children:"Limits"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max File Size (MB)"}),u.jsx("input",{type:"number",value:i.max_file_size_mb,onChange:M=>O("max_file_size_mb",parseInt(M.target.value)||25),className:"w-full mt-1 px-4 py-2 border dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max Message Length"}),u.jsx("input",{type:"number",value:i.max_message_length,onChange:M=>O("max_message_length",parseInt(M.target.value)||5e3),className:"w-full mt-1 px-4 py-2 border dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Max Friends per User"}),u.jsx("input",{type:"number",value:i.max_friends,onChange:M=>O("max_friends",parseInt(M.target.value)||500),className:"w-full mt-1 px-4 py-2 border dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Disappearing Messages (hours, 0 = disabled)"}),u.jsx("input",{type:"number",value:i.disappearing_messages_hours,onChange:M=>O("disappearing_messages_hours",parseInt(M.target.value)||0),className:"w-full mt-1 px-4 py-2 border dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white"})]})]})]})]}),v==="broadcast"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4",children:[u.jsx("h3",{className:"font-bold mb-4 dark:text-white",children:"Send Announcement"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Type"}),u.jsx("div",{className:"flex gap-2 mt-1",children:["info","warning","urgent"].map(M=>u.jsx("button",{onClick:()=>L(M),className:Ze("flex-1 py-2 rounded-xl capitalize transition-colors",W===M?M==="urgent"?"bg-red-500 text-white":M==="warning"?"bg-yellow-500 text-white":"bg-blue-500 text-white":"bg-gray-100 dark:bg-slate-700 dark:text-white"),children:M},M))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Title"}),u.jsx("input",{type:"text",value:E,onChange:M=>R(M.target.value),placeholder:"Announcement title",className:"w-full mt-1 px-4 py-2 border dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Message"}),u.jsx("textarea",{value:H,onChange:M=>q(M.target.value),placeholder:"Your message to all users...",rows:4,className:"w-full mt-1 px-4 py-2 border dark:border-slate-600 rounded-xl dark:bg-slate-700 dark:text-white resize-none"})]}),u.jsxs("button",{onClick:G,disabled:!E.trim()||!H.trim(),className:"w-full py-3 bg-orange-500 text-white rounded-xl font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:[u.jsx(dm,{className:"w-5 h-5"}),"Send to All Users"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4",children:[u.jsx("h3",{className:"font-bold mb-4 dark:text-white",children:"Previous Broadcasts"}),f.length===0?u.jsx("p",{className:"text-gray-500 text-center py-4",children:"No broadcasts yet"}):u.jsx("div",{className:"space-y-3",children:f.map(M=>u.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:"font-medium dark:text-white",children:M.title}),u.jsx("span",{className:Ze("text-xs px-2 py-0.5 rounded-full",M.type==="urgent"?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":M.type==="warning"?"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"),children:M.type})]}),u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:M.message}),u.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Read by ",M.read_by.length," users"]})]},M.id))})]})]})]}),_&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end justify-center",onClick:()=>k(null),children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl w-full max-w-lg p-6 animate-slide-up",onClick:M=>M.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsx("img",{src:_.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${_.username}`,alt:"",className:"w-16 h-16 rounded-full"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h3",{className:"text-xl font-bold dark:text-white",children:_.display_name}),_.is_admin&&u.jsx(Sh,{className:"w-5 h-5 text-yellow-500"})]}),u.jsxs("p",{className:"text-gray-500",children:["@",_.username]}),u.jsx("p",{className:"text-sm text-gray-400",children:_.email})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>Z(_.id,!_.is_admin),className:"w-full p-4 flex items-center gap-3 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-700",children:[u.jsx(Sh,{className:"w-5 h-5 text-yellow-500"}),u.jsx("span",{className:"dark:text-white",children:_.is_admin?"Remove Admin":"Make Admin"})]}),u.jsxs("button",{onClick:()=>D(_.id,!_.is_suspended),className:"w-full p-4 flex items-center gap-3 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-700",children:[u.jsx(Qu,{className:Ze("w-5 h-5",_.is_suspended?"text-green-500":"text-red-500")}),u.jsx("span",{className:"dark:text-white",children:_.is_suspended?"Unsuspend User":"Suspend User"})]}),u.jsxs("button",{onClick:()=>F(_.id),className:"w-full p-4 flex items-center gap-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500",children:[u.jsx(Ll,{className:"w-5 h-5"}),u.jsx("span",{children:"Delete User Permanently"})]})]}),u.jsx("button",{onClick:()=>k(null),className:"w-full mt-4 py-3 border dark:border-slate-600 rounded-xl dark:text-white",children:"Close"})]})})]})}const nm=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)","linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)","linear-gradient(135deg, #6a11cb 0%, #2575fc 100%)","linear-gradient(135deg, #ff6b6b 0%, #feca57 100%)","linear-gradient(135deg, #48c6ef 0%, #6f86d6 100%)","#1a1a2e","#16213e","#0f3460","#e94560","#533483","#1e5128","#191a19","#2d4059"],am=[{name:"Default",style:"font-sans"},{name:"Serif",style:"font-serif"},{name:"Mono",style:"font-mono"},{name:"Bold",style:"font-sans font-black"},{name:"Italic",style:"font-serif italic"}];class GN{currentUserId=null;setCurrentUser(n){this.currentUserId=n}async createTextStory(n,r,i="#ffffff",l="font-sans",c="everyone",f=[]){if(!this.currentUserId)return null;try{const{data:m}=await Oe.from("profiles").select("display_name, avatar_url").eq("id",this.currentUserId).single(),y=crypto.randomUUID(),b=new Date,v=new Date(b.getTime()+1440*60*1e3),{error:w}=await Oe.from("stories").insert({id:y,user_id:this.currentUserId,type:"text",content:n,background_color:r,text_color:i,font_style:l,duration:5,privacy:c,except_users:f,created_at:b.toISOString(),expires_at:v.toISOString()});if(w)throw w;return{id:y,od_id:y,user_id:this.currentUserId,user_name:m?.display_name||"User",user_avatar:m?.avatar_url||"",type:"text",content:n,background_color:r,text_color:i,font_style:l,duration:5,view_count:0,viewers:[],reactions:[],created_at:b.getTime(),expires_at:v.getTime(),is_viewed:!0,is_muted:!1,privacy:c,except_users:f}}catch(m){return console.error("Error creating text story:",m),null}}async createMediaStory(n,r,i,l="everyone",c=[]){if(!this.currentUserId)return null;try{const{data:f}=await Oe.from("profiles").select("display_name, avatar_url").eq("id",this.currentUserId).single();let m=n;r==="image"&&n.size>1024*1024&&(m=await this.compressImage(n));const y=r==="image"?await this.generateThumbnail(n):void 0,b=`stories/${this.currentUserId}/${Date.now()}_${n.name}`,{error:v}=await Oe.storage.from("media").upload(b,m);if(v)throw v;const{data:w}=Oe.storage.from("media").getPublicUrl(b),_=crypto.randomUUID(),k=new Date,E=new Date(k.getTime()+1440*60*1e3),{error:R}=await Oe.from("stories").insert({id:_,user_id:this.currentUserId,type:r,content:w.publicUrl,thumbnail:y,caption:i,duration:r==="video"?15:5,privacy:l,except_users:c,media_path:b,created_at:k.toISOString(),expires_at:E.toISOString()});if(R)throw R;return{id:_,od_id:_,user_id:this.currentUserId,user_name:f?.display_name||"User",user_avatar:f?.avatar_url||"",type:r,content:w.publicUrl,thumbnail:y,caption:i,duration:r==="video"?15:5,view_count:0,viewers:[],reactions:[],created_at:k.getTime(),expires_at:E.getTime(),is_viewed:!0,is_muted:!1,privacy:l,except_users:c,media_path:b}}catch(f){return console.error("Error creating media story:",f),null}}async viewStory(n){if(this.currentUserId)try{const{data:r}=await Oe.from("profiles").select("display_name, avatar_url").eq("id",this.currentUserId).single(),{data:i}=await Oe.from("story_views").select("id").eq("story_id",n).eq("viewer_id",this.currentUserId).single();i||await Oe.from("story_views").insert({id:crypto.randomUUID(),story_id:n,viewer_id:this.currentUserId,viewer_name:r?.display_name||"User",viewer_avatar:r?.avatar_url||"",viewed_at:new Date().toISOString()})}catch(r){console.error("Error viewing story:",r)}}async reactToStory(n,r){if(this.currentUserId)try{const{data:i}=await Oe.from("profiles").select("display_name").eq("id",this.currentUserId).single();await Oe.from("story_reactions").delete().eq("story_id",n).eq("user_id",this.currentUserId),await Oe.from("story_reactions").insert({id:crypto.randomUUID(),story_id:n,user_id:this.currentUserId,user_name:i?.display_name||"User",reaction:r,created_at:new Date().toISOString()})}catch(i){console.error("Error reacting to story:",i)}}async replyToStory(n,r,i){if(this.currentUserId)try{await Oe.from("pending_messages").insert({id:crypto.randomUUID(),sender_id:this.currentUserId,receiver_id:r,content:i,type:"story_reply",metadata:JSON.stringify({storyId:n}),created_at:new Date().toISOString()})}catch(l){console.error("Error replying to story:",l)}}async getStoriesFeed(){if(!this.currentUserId)return[];try{await this.cleanupExpiredStories();const n=new Date(Date.now()-1440*60*1e3).toISOString(),{data:r,error:i}=await Oe.from("stories").select(`
          *,
          profiles:user_id (display_name, avatar_url),
          story_views (id, viewer_id, viewer_name, viewer_avatar, viewed_at),
          story_reactions (user_id, user_name, reaction, created_at)
        `).gte("created_at",n).order("created_at",{ascending:!1});if(i)throw i;const l=new Map;for(const f of r||[]){if(f.privacy==="except"&&f.except_users?.includes(this.currentUserId))continue;const m=f.user_id;l.has(m)||l.set(m,{od_id:m,user_id:m,user_name:f.profiles?.display_name||"User",user_avatar:f.profiles?.avatar_url||"",stories:[],has_unviewed:!1,last_updated:new Date(f.created_at).getTime()});const y=l.get(m),b=f.story_views?.some(v=>v.viewer_id===this.currentUserId)||!1;y.stories.push({id:f.id,od_id:f.id,user_id:f.user_id,user_name:f.profiles?.display_name||"User",user_avatar:f.profiles?.avatar_url||"",type:f.type,content:f.content,thumbnail:f.thumbnail,background_color:f.background_color,text_color:f.text_color,font_style:f.font_style,caption:f.caption,duration:f.duration||5,view_count:f.story_views?.length||0,viewers:(f.story_views||[]).map(v=>({id:v.id,od_id:v.id,od_idx:v.viewer_id,user_id:v.viewer_id,user_name:v.viewer_name,user_avatar:v.viewer_avatar,viewed_at:new Date(v.viewed_at).getTime(),reaction:f.story_reactions?.find(w=>w.user_id===v.viewer_id)?.reaction})),reactions:(f.story_reactions||[]).map(v=>({user_id:v.user_id,user_name:v.user_name,reaction:v.reaction,created_at:new Date(v.created_at).getTime()})),created_at:new Date(f.created_at).getTime(),expires_at:new Date(f.expires_at).getTime(),is_viewed:b,is_muted:!1,privacy:f.privacy,except_users:f.except_users,media_path:f.media_path}),b||(y.has_unviewed=!0)}const c=Array.from(l.values());return c.sort((f,m)=>f.user_id===this.currentUserId?-1:m.user_id===this.currentUserId?1:f.has_unviewed&&!m.has_unviewed?-1:!f.has_unviewed&&m.has_unviewed?1:m.last_updated-f.last_updated),c}catch(n){return console.error("Error fetching stories feed:",n),[]}}async getMyStories(){if(!this.currentUserId)return[];try{const n=new Date(Date.now()-864e5).toISOString(),{data:r,error:i}=await Oe.from("stories").select(`
          *,
          story_views (id, viewer_id, viewer_name, viewer_avatar, viewed_at),
          story_reactions (user_id, user_name, reaction, created_at)
        `).eq("user_id",this.currentUserId).gte("created_at",n).order("created_at",{ascending:!1});if(i)throw i;return(r||[]).map(l=>({id:l.id,od_id:l.id,user_id:l.user_id,user_name:"You",user_avatar:"",type:l.type,content:l.content,thumbnail:l.thumbnail,background_color:l.background_color,text_color:l.text_color,font_style:l.font_style,caption:l.caption,duration:l.duration||5,view_count:l.story_views?.length||0,viewers:(l.story_views||[]).map(c=>({id:c.id,od_id:c.id,od_idx:c.viewer_id,user_id:c.viewer_id,user_name:c.viewer_name,user_avatar:c.viewer_avatar,viewed_at:new Date(c.viewed_at).getTime(),reaction:l.story_reactions?.find(f=>f.user_id===c.viewer_id)?.reaction})),reactions:(l.story_reactions||[]).map(c=>({user_id:c.user_id,user_name:c.user_name,reaction:c.reaction,created_at:new Date(c.created_at).getTime()})),created_at:new Date(l.created_at).getTime(),expires_at:new Date(l.expires_at).getTime(),is_viewed:!0,is_muted:!1,privacy:l.privacy,except_users:l.except_users,media_path:l.media_path}))}catch(n){return console.error("Error fetching my stories:",n),[]}}async getStoryViewers(n){try{const{data:r,error:i}=await Oe.from("story_views").select("*").eq("story_id",n).order("viewed_at",{ascending:!1});if(i)throw i;return(r||[]).map(l=>({id:l.id,od_id:l.id,od_idx:l.viewer_id,user_id:l.viewer_id,user_name:l.viewer_name,user_avatar:l.viewer_avatar,viewed_at:new Date(l.viewed_at).getTime(),reaction:l.reaction}))}catch(r){return console.error("Error fetching story viewers:",r),[]}}async deleteStory(n){if(!this.currentUserId)return!1;try{const{data:r}=await Oe.from("stories").select("media_path, user_id").eq("id",n).single();return!r||r.user_id!==this.currentUserId?!1:(r.media_path&&await Oe.storage.from("media").remove([r.media_path]),await Oe.from("story_views").delete().eq("story_id",n),await Oe.from("story_reactions").delete().eq("story_id",n),await Oe.from("stories").delete().eq("id",n),!0)}catch(r){return console.error("Error deleting story:",r),!1}}async muteUserStories(n,r){if(this.currentUserId)try{r?await Oe.from("muted_stories").upsert({id:`${this.currentUserId}_${n}`,user_id:this.currentUserId,muted_user_id:n,created_at:new Date().toISOString()}):await Oe.from("muted_stories").delete().eq("user_id",this.currentUserId).eq("muted_user_id",n)}catch(i){console.error("Error muting stories:",i)}}async cleanupExpiredStories(){try{const n=new Date().toISOString(),{data:r}=await Oe.from("stories").select("id, media_path").lt("expires_at",n);if(r&&r.length>0){const i=r.map(c=>c.id),l=r.map(c=>c.media_path).filter(Boolean);l.length>0&&await Oe.storage.from("media").remove(l),await Oe.from("story_views").delete().in("story_id",i),await Oe.from("story_reactions").delete().in("story_id",i),await Oe.from("stories").delete().in("id",i),console.log(` Cleaned up ${i.length} expired stories`)}}catch(n){console.error("Auto-cleanup error:",n)}}async compressImage(n){return new Promise(r=>{const i=document.createElement("canvas"),l=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:m,height:y}=c;m>y&&m>1080?(y=y*1080/m,m=1080):y>1080&&(m=m*1080/y,y=1080),i.width=m,i.height=y,l?.drawImage(c,0,0,m,y),i.toBlob(b=>{r(b?new File([b],n.name,{type:"image/jpeg"}):n)},"image/jpeg",.8)},c.src=URL.createObjectURL(n)})}async generateThumbnail(n){return new Promise(r=>{const i=document.createElement("canvas"),l=i.getContext("2d"),c=new Image;c.onload=()=>{i.width=20,i.height=20,l?.drawImage(c,0,0,20,20),r(i.toDataURL("image/jpeg",.1))},c.src=URL.createObjectURL(n)})}async updateProfilePicture(n){if(!this.currentUserId)return null;try{const{data:r}=await Oe.from("profiles").select("avatar_url, avatar_path").eq("id",this.currentUserId).single();r?.avatar_path&&await Oe.storage.from("media").remove([r.avatar_path]);const i=await this.compressImage(n),l=`avatars/${this.currentUserId}/${Date.now()}.jpg`,{error:c}=await Oe.storage.from("media").upload(l,i);if(c)throw c;const{data:f}=Oe.storage.from("media").getPublicUrl(l);return await Oe.from("profiles").update({avatar_url:f.publicUrl,avatar_path:l,updated_at:new Date().toISOString()}).eq("id",this.currentUserId),f.publicUrl}catch(r){return console.error("Error updating profile picture:",r),null}}async removeProfilePicture(){if(!this.currentUserId)return!1;try{const{data:n}=await Oe.from("profiles").select("avatar_path").eq("id",this.currentUserId).single();return n?.avatar_path&&await Oe.storage.from("media").remove([n.avatar_path]),await Oe.from("profiles").update({avatar_url:null,avatar_path:null,updated_at:new Date().toISOString()}).eq("id",this.currentUserId),!0}catch(n){return console.error("Error removing profile picture:",n),!1}}}const ar=new GN,YN=Object.freeze(Object.defineProperty({__proto__:null,STORY_BACKGROUNDS:nm,STORY_FONTS:am,StoryService:ar,default:ar},Symbol.toStringTag,{value:"Module"}));function QN({currentUserId:a,userAvatar:n,userName:r}){const[i,l]=Se.useState([]),[c,f]=Se.useState([]),[m,y]=Se.useState(null),[b,v]=Se.useState(0),[w,_]=Se.useState(!1),[k,E]=Se.useState(!1),[R,H]=Se.useState(!1),[q,W]=Se.useState(!1),[L,z]=Se.useState(0),[fe,K]=Se.useState(""),[X,O]=Se.useState(!0),D=Se.useRef(null),Z=Se.useRef(null);Se.useEffect(()=>{ar.setCurrentUser(a),F()},[a]);const F=async()=>{O(!0);const[B,ue]=await Promise.all([ar.getStoriesFeed(),ar.getMyStories()]);l(B),f(ue),O(!1)},G=B=>{z(0),D.current&&clearInterval(D.current);const ue=Date.now();D.current=setInterval(()=>{if(R)return;const he=(Date.now()-ue)/(B*1e3)*100;he>=100?(clearInterval(D.current),J()):z(he)},50)},ne=async(B,ue=0)=>{y(B),v(ue),z(0),E(!1),K("");const te=B.stories[ue];te&&!te.is_viewed&&await ar.viewStory(te.id),G(te?.duration||5)},M=()=>{D.current&&clearInterval(D.current),y(null),v(0),z(0),F()},J=()=>{if(m)if(b<m.stories.length-1){const B=b+1;v(B),z(0);const ue=m.stories[B];ue.is_viewed||ar.viewStory(ue.id),G(ue.duration)}else{const B=i.findIndex(ue=>ue.user_id===m.user_id);B<i.length-1?ne(i[B+1],0):M()}},A=()=>{if(m)if(b>0){const B=b-1;v(B),z(0),G(m.stories[B].duration)}else{const B=i.findIndex(ue=>ue.user_id===m.user_id);if(B>0){const ue=i[B-1];ne(ue,ue.stories.length-1)}}},T=async B=>{if(!m)return;const ue=m.stories[b];await ar.reactToStory(ue.id,B)},Y=async()=>{if(!m||!fe.trim())return;const B=m.stories[b];await ar.replyToStory(B.id,m.user_id,fe),K("")},$=async B=>{if(await ar.deleteStory(B),F(),m){const ue=m.stories.filter(te=>te.id!==B);ue.length===0?M():(y({...m,stories:ue}),b>=ue.length&&v(ue.length-1))}},ae=B=>{const ue=B instanceof Date?B.getTime():B,te=Math.floor((Date.now()-ue)/1e3);return te<60?"Just now":te<3600?`${Math.floor(te/60)}m ago`:`${Math.floor(te/3600)}h ago`},I=m?.stories[b];return u.jsxs("div",{className:"h-full bg-gray-100 dark:bg-gray-900",children:[!m&&u.jsxs("div",{className:"p-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Status"}),u.jsx("div",{className:"mb-6",children:u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-800 rounded-xl cursor-pointer",onClick:()=>c.length>0?ne({od_id:a,user_id:a,user_name:"My Status",user_avatar:n,stories:c,has_unviewed:!1,last_updated:Date.now()}):_(!0),children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:`w-14 h-14 rounded-full overflow-hidden ${c.length>0?"ring-2 ring-green-500 ring-offset-2":""}`,children:n?u.jsx("img",{src:n,alt:"My Status",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold",children:r.charAt(0)})}),u.jsx("button",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center text-white",onClick:B=>{B.stopPropagation(),_(!0)},children:u.jsx(YS,{className:"w-4 h-4"})})]}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:"My Status"}),u.jsx("p",{className:"text-sm text-gray-500",children:c.length>0?`${c.length} updates  Tap to view`:"Tap to add status update"})]})]})}),i.filter(B=>B.user_id!==a&&B.has_unviewed).length>0&&u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2 px-1",children:"Recent updates"}),i.filter(B=>B.user_id!==a&&B.has_unviewed).map(B=>u.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-white dark:hover:bg-gray-800 rounded-xl cursor-pointer transition-colors",onClick:()=>ne(B),children:[u.jsx("div",{className:"relative",children:u.jsx("div",{className:"w-14 h-14 rounded-full ring-2 ring-green-500 ring-offset-2 overflow-hidden",children:B.user_avatar?u.jsx("img",{src:B.user_avatar,alt:B.user_name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-xl font-bold",children:B.user_name.charAt(0)})})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:B.user_name}),u.jsxs("p",{className:"text-sm text-gray-500",children:[B.stories.length," update",B.stories.length>1?"s":"","  ",ae(B.last_updated)]})]})]},B.user_id))]}),i.filter(B=>B.user_id!==a&&!B.has_unviewed).length>0&&u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2 px-1",children:"Viewed updates"}),i.filter(B=>B.user_id!==a&&!B.has_unviewed).map(B=>u.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-white dark:hover:bg-gray-800 rounded-xl cursor-pointer transition-colors",onClick:()=>ne(B),children:[u.jsx("div",{className:"w-14 h-14 rounded-full ring-2 ring-gray-300 ring-offset-2 overflow-hidden",children:B.user_avatar?u.jsx("img",{src:B.user_avatar,alt:B.user_name,className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-400 to-gray-500 flex items-center justify-center text-white text-xl font-bold",children:B.user_name.charAt(0)})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:B.user_name}),u.jsx("p",{className:"text-sm text-gray-500",children:ae(B.last_updated)})]})]},B.user_id))]}),X&&u.jsx("div",{className:"flex justify-center py-8",children:u.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"})})]}),m&&I&&u.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[u.jsx("div",{className:"absolute top-0 left-0 right-0 flex gap-1 p-2 z-10",children:m.stories.map((B,ue)=>u.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-white transition-all duration-100",style:{width:ue<b?"100%":ue===b?`${L}%`:"0%"}})},B.id))}),u.jsxs("div",{className:"absolute top-6 left-0 right-0 flex items-center justify-between px-4 z-10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{onClick:M,className:"text-white",children:u.jsx(Ys,{className:"w-6 h-6"})}),u.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:m.user_avatar?u.jsx("img",{src:m.user_avatar,alt:"",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:m.user_name.charAt(0)})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-white font-semibold",children:m.user_name}),u.jsx("p",{className:"text-white/70 text-xs",children:ae(I.created_at)})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[I.type==="video"&&u.jsx("button",{onClick:()=>W(!q),className:"text-white",children:q?u.jsx(kk,{className:"w-6 h-6"}):u.jsx(Nv,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>H(!R),className:"text-white",children:R?u.jsx(FS,{className:"w-6 h-6"}):u.jsx(RS,{className:"w-6 h-6"})}),u.jsx("button",{onClick:async()=>{try{if(I.type==="text"){const B=new Blob([I.content],{type:"text/plain"});await Yu(B,`story_${I.id.substring(0,8)}.txt`)}else{const ue=await(await fetch(I.content)).blob();await Yu(ue,`story_${I.id.substring(0,8)}.${I.type==="video"?"mp4":"jpg"}`)}}catch(B){console.error("Save failed:",B)}},className:"text-white",children:u.jsx(Ml,{className:"w-6 h-6"})}),I.user_id===a&&u.jsx("button",{onClick:()=>$(I.id),className:"text-white",children:u.jsx(Ll,{className:"w-6 h-6"})}),u.jsx("button",{className:"text-white",children:u.jsx(kv,{className:"w-6 h-6"})})]})]}),u.jsxs("div",{className:"flex-1 flex items-center justify-center relative",onClick:B=>{const ue=B.currentTarget.getBoundingClientRect(),te=B.clientX-ue.left;te<ue.width/3?A():te>ue.width*2/3?J():H(!R)},children:[u.jsx("button",{className:"absolute left-0 top-0 bottom-0 w-1/3 z-10",onClick:B=>{B.stopPropagation(),A()},children:u.jsx(Xu,{className:"w-8 h-8 text-white/50 absolute left-4 top-1/2 -translate-y-1/2"})}),u.jsx("button",{className:"absolute right-0 top-0 bottom-0 w-1/3 z-10",onClick:B=>{B.stopPropagation(),J()},children:u.jsx(Gh,{className:"w-8 h-8 text-white/50 absolute right-4 top-1/2 -translate-y-1/2"})}),I.type==="text"&&u.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",style:{background:I.background_color},children:u.jsx("p",{className:`text-white text-2xl text-center ${I.font_style}`,style:{color:I.text_color},children:I.content})}),I.type==="image"&&u.jsx("img",{src:I.content,alt:"",className:"max-w-full max-h-full object-contain"}),I.type==="video"&&u.jsx("video",{ref:Z,src:I.content,className:"max-w-full max-h-full object-contain",autoPlay:!0,muted:q,playsInline:!0}),I.caption&&u.jsx("div",{className:"absolute bottom-24 left-0 right-0 text-center px-8",children:u.jsx("p",{className:"text-white text-lg bg-black/50 px-4 py-2 rounded-lg inline-block",children:I.caption})})]}),u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 z-10",children:[I.user_id===a&&u.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 text-white mb-4",children:[u.jsx(Ti,{className:"w-5 h-5"}),u.jsxs("span",{children:[I.view_count," views"]})]}),I.user_id!==a&&u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:fe,onChange:B=>K(B.target.value),placeholder:"Reply...",className:"flex-1 bg-white/20 text-white placeholder-white/50 px-4 py-3 rounded-full outline-none"}),u.jsx("button",{onClick:Y,className:"text-white p-2",children:u.jsx(dm,{className:"w-6 h-6"})}),u.jsx("div",{className:"flex gap-1",children:["","","","","",""].map(B=>u.jsx("button",{onClick:()=>T(B),className:"text-2xl hover:scale-125 transition-transform",children:B},B))})]})]})]}),k&&I&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full rounded-t-3xl max-h-[70vh] overflow-y-auto",children:[u.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Views"}),u.jsx("button",{onClick:()=>E(!1),className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center",children:u.jsx(Ys,{className:"w-6 h-6 text-gray-500"})})]}),u.jsxs("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:[I.view_count," people have viewed this update"]})]}),u.jsx("div",{className:"p-2 space-y-1",children:I.viewers.length>0?I.viewers.map(B=>u.jsxs("div",{className:"flex items-center gap-4 p-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-2xl transition-colors",children:[u.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden border-2 border-green-500/20",children:B.user_avatar?u.jsx("img",{src:B.user_avatar,alt:"",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold",children:B.user_name.charAt(0)})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-bold text-gray-900 dark:text-white truncate",children:B.user_name}),u.jsx("p",{className:"text-xs text-gray-500",children:ae(B.viewed_at)})]}),B.reaction&&u.jsx("div",{className:"w-10 h-10 bg-white dark:bg-gray-700 shadow-sm rounded-full flex items-center justify-center text-xl",children:B.reaction})]},B.id)):u.jsxs("div",{className:"py-12 text-center",children:[u.jsx(Ti,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"No views yet"})]})})]})}),w&&u.jsx(XN,{onClose:()=>_(!1),onCreated:()=>{_(!1),F()}})]})}function XN({onClose:a,onCreated:n}){const[r,i]=Se.useState("text"),[l,c]=Se.useState(""),[f,m]=Se.useState(nm[0]),[y]=Se.useState("#ffffff"),[b,v]=Se.useState(am[0].style),[w,_]=Se.useState(null),[k,E]=Se.useState(""),[R,H]=Se.useState(""),[q,W]=Se.useState("everyone"),[L,z]=Se.useState(!1),fe=Se.useRef(null),K=O=>{const D=O.target.files?.[0];D&&(_(D),E(URL.createObjectURL(D)),i("media"))},X=async()=>{z(!0);try{if(r==="text"&&l.trim())await ar.createTextStory(l,f,y,b,q);else if(r==="media"&&w){const O=w.type.startsWith("video/")?"video":"image";await ar.createMediaStory(w,O,R,q)}n()}catch(O){console.error("Error creating story:",O)}finally{z(!1)}};return u.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4",children:[u.jsx("button",{onClick:a,className:"text-white",children:u.jsx(Ys,{className:"w-6 h-6"})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("div",{className:"relative group",children:u.jsxs("select",{value:q,onChange:O=>W(O.target.value),className:"bg-white/20 text-white text-xs font-bold px-3 py-2 rounded-full outline-none appearance-none cursor-pointer",children:[u.jsx("option",{value:"everyone",className:"text-black",children:"Everyone"}),u.jsx("option",{value:"contacts",className:"text-black",children:"Contacts Only"})]})}),u.jsx("button",{onClick:()=>i("text"),className:`px-4 py-2 rounded-full ${r==="text"?"bg-white text-black":"bg-white/20 text-white"}`,children:u.jsx(Zh,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>fe.current?.click(),className:`px-4 py-2 rounded-full ${r==="media"?"bg-white text-black":"bg-white/20 text-white"}`,children:u.jsx(ic,{className:"w-5 h-5"})})]}),u.jsx("button",{onClick:X,disabled:L||r==="text"&&!l.trim()||r==="media"&&!w,className:"bg-green-500 text-white px-6 py-2 rounded-full font-semibold disabled:opacity-50",children:L?"Posting...":"Post"})]}),u.jsx("input",{ref:fe,type:"file",accept:"image/*,video/*",className:"hidden",onChange:K}),u.jsxs("div",{className:"flex-1 flex flex-col",children:[r==="text"&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex-1 flex items-center justify-center p-8",style:{background:f},children:u.jsx("textarea",{value:l,onChange:O=>c(O.target.value),placeholder:"Type a status...",className:`w-full text-center text-2xl bg-transparent outline-none resize-none ${b}`,style:{color:y},rows:5})}),u.jsxs("div",{className:"p-4 bg-black",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx(Yh,{className:"w-5 h-5 text-white"}),u.jsx("span",{className:"text-white text-sm",children:"Background"})]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:nm.map((O,D)=>u.jsx("button",{onClick:()=>m(O),className:`w-10 h-10 rounded-full flex-shrink-0 ${f===O?"ring-2 ring-white ring-offset-2 ring-offset-black":""}`,style:{background:O}},D))}),u.jsxs("div",{className:"flex items-center gap-3 mt-4 mb-3",children:[u.jsx(Zh,{className:"w-5 h-5 text-white"}),u.jsx("span",{className:"text-white text-sm",children:"Font"})]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:am.map((O,D)=>u.jsx("button",{onClick:()=>v(O.style),className:`px-4 py-2 rounded-full flex-shrink-0 ${O.style} ${b===O.style?"bg-white text-black":"bg-white/20 text-white"}`,children:O.name},D))})]})]}),r==="media"&&w&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"flex-1 flex items-center justify-center bg-black",children:w.type.startsWith("video/")?u.jsx("video",{src:k,className:"max-w-full max-h-full",controls:!0}):u.jsx("img",{src:k,alt:"",className:"max-w-full max-h-full object-contain"})}),u.jsx("div",{className:"p-4 bg-black",children:u.jsx("input",{type:"text",value:R,onChange:O=>H(O.target.value),placeholder:"Add a caption...",className:"w-full bg-white/20 text-white placeholder-white/50 px-4 py-3 rounded-full outline-none"})})]}),r==="media"&&!w&&u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>fe.current?.click(),children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center",children:u.jsx(ic,{className:"w-10 h-10 text-white"})}),u.jsx("p",{className:"text-white text-lg",children:"Tap to select photo or video"})]})]})]})}class JN{currentUserId=null;setCurrentUser(n){n&&(console.log("FriendService: Setting current user to",n),this.currentUserId=n)}getCurrentUser(){return this.currentUserId}async sendFriendRequestByUsername(n,r){if(!this.currentUserId)return{success:!1,error:"Not logged in"};const i=n.trim().replace(/^@/,"").toLowerCase();if(!i)return{success:!1,error:"Username is required"};try{const{data:l,error:c}=await Oe.from("profiles").select("id, username").ilike("username",i).maybeSingle();return c?(console.error("Send friend request by username: profile lookup error:",c),{success:!1,error:"Failed to find user"}):l?.id?await this.sendFriendRequest(l.id,r):{success:!1,error:"No user found with this username"}}catch(l){return console.error("Send friend request by username error:",l),{success:!1,error:"Failed to send request"}}}async sendFriendRequest(n,r){if(!this.currentUserId)return{success:!1,error:"Not logged in"};console.log(`FriendService: Sending request from ${this.currentUserId} to ${n}`);try{if(n===this.currentUserId)return console.warn("FriendService: Attempted to send request to self"),{success:!1,error:"Cannot add yourself as friend"};if(await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(w=>w.friendId===n).first())return{success:!1,error:"Already friends"};if(await Ae.blockedUsers.where("odm_userId").equals(this.currentUserId).filter(w=>w.blocked_user_id===n).first())return{success:!1,error:"User is blocked. Unblock first."};if(await Ae.friendRequests.where("sender_id").equals(this.currentUserId).filter(w=>w.receiver_id===n&&w.status==="pending").first())return{success:!1,error:"Request already sent"};const f=await Ae.friendRequests.where("sender_id").equals(n).filter(w=>w.receiver_id===this.currentUserId&&w.status==="pending").first();if(f)return console.log("FriendService: Found mutual request, auto-accepting"),await this.acceptFriendRequest(f.id);const m=await this.getMutualFriendsCount(n),y=await Ae.contacts.get(this.currentUserId),b=`fr_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,v={id:b,sender_id:this.currentUserId,from_user_name:y?.display_name||"Unknown",from_user_avatar:y?.avatar_url||"",from_user_odm:y?.odm||"",receiver_id:n,message:r||null,status:"pending",created_at:Date.now(),mutual_friends_count:m};if(await Ae.friendRequests.add(v),Oe){console.log("FriendService: Syncing request to Supabase",{sender_id:this.currentUserId,receiver_id:n});const{error:w}=await Oe.from("friend_requests").insert({id:b,sender_id:this.currentUserId,receiver_id:n,message:r||null,status:"pending",created_at:new Date().toISOString()});if(w)throw console.error("FriendService: Supabase insert error:",w),w}return{success:!0}}catch(i){return console.error("Send friend request error:",i),{success:!1,error:"Failed to send request"}}}async acceptFriendRequest(n){try{const r=await Ae.friendRequests.get(n);if(!r)return{success:!1,error:"Request not found"};if(r.status!=="pending")return{success:!1,error:"Request already processed"};await Ae.friendRequests.update(n,{status:"accepted"});const i=await Ae.contacts.get(r.sender_id),l=await Ae.contacts.get(r.receiver_id),c=Date.now();return await Ae.friends.bulkAdd([{id:`f_${r.sender_id}_${r.receiver_id}`,odm_odm_userId:r.sender_id,friendId:r.receiver_id,display_name:l?.display_name||"Unknown",avatar:l?.avatar_url||"",odm:l?.odm||"",bio:l?.bio||"",is_online:!1,last_seen:null,friendship_date:c,is_best_friend:!1,is_close_friend:!1,is_muted:!1,nickname:null,private_note:null,mutual_friends_count:0},{id:`f_${r.receiver_id}_${r.sender_id}`,odm_odm_userId:r.receiver_id,friendId:r.sender_id,display_name:i?.display_name||"Unknown",avatar:i?.avatar_url||"",odm:i?.odm||"",bio:i?.bio||"",is_online:!1,last_seen:null,friendship_date:c,is_best_friend:!1,is_close_friend:!1,is_muted:!1,nickname:null,private_note:null,mutual_friends_count:0}]).catch(f=>console.warn("Dexie friendship add warning:",f)),Oe&&await Oe.from("friend_requests").update({status:"accepted"}).eq("id",n),{success:!0}}catch(r){return console.error("Accept friend request error:",r),{success:!1,error:"Failed to accept request"}}}async declineFriendRequest(n){try{return await Ae.friendRequests.get(n)?(await Ae.friendRequests.update(n,{status:"declined"}),Oe&&await Oe.from("friend_requests").update({status:"declined"}).eq("id",n),{success:!0}):{success:!1,error:"Request not found"}}catch(r){return console.error("Decline friend request error:",r),{success:!1,error:"Failed to decline request"}}}async cancelFriendRequest(n){try{const r=await Ae.friendRequests.get(n);return r?r.sender_id!==this.currentUserId?{success:!1,error:"Cannot cancel this request"}:(await Ae.friendRequests.update(n,{status:"cancelled"}),Oe&&await Oe.from("friend_requests").update({status:"cancelled"}).eq("id",n),{success:!0}):{success:!1,error:"Request not found"}}catch(r){return console.error("Cancel friend request error:",r),{success:!1,error:"Failed to cancel request"}}}async getFriends(n){if(!this.currentUserId)return[];try{let r=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).toArray();if(n?.filterBy)switch(n.filterBy){case"online":r=r.filter(i=>i.is_online);break;case"best_friends":r=r.filter(i=>i.is_best_friend);break;case"close_friends":r=r.filter(i=>i.is_close_friend);break}if(n?.search){const i=n.search.toLowerCase();r=r.filter(l=>l.display_name?.toLowerCase().includes(i)||l.odm?.toLowerCase().includes(i)||l.nickname?.toLowerCase().includes(i))}if(n?.sortBy)switch(n.sortBy){case"name":r.sort((i,l)=>(i.display_name||"").localeCompare(l.display_name||""));break;case"recent":r.sort((i,l)=>{const c=i.last_seen||0;return(l.last_seen||0)-c});break;case"online":r.sort((i,l)=>i.is_online&&!l.is_online?-1:!i.is_online&&l.is_online?1:0);break;case"friendship_date":r.sort((i,l)=>(l.friendship_date||0)-(i.friendship_date||0));break}return r.sort((i,l)=>i.is_best_friend&&!l.is_best_friend?-1:!i.is_best_friend&&l.is_best_friend?1:0),r}catch(r){return console.error("Get friends error:",r),[]}}async removeFriend(n){if(!this.currentUserId)return{success:!1,error:"Not logged in"};try{return await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(r=>r.friendId===n).delete(),await Ae.friends.where("odm_odm_userId").equals(n).filter(r=>r.friendId===this.currentUserId).delete(),Oe&&await Oe.from("friendships").delete().or(`and(user_id.eq.${this.currentUserId},friend_id.eq.${n}),and(user_id.eq.${n},friend_id.eq.${this.currentUserId})`),{success:!0}}catch(r){return console.error("Remove friend error:",r),{success:!1,error:"Failed to remove friend"}}}async toggleBestFriend(n){if(!this.currentUserId)return!1;try{const r=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(i=>i.friendId===n).first();if(r){const i=!r.is_best_friend;return await Ae.friends.update(r.id,{is_best_friend:i}),i}return!1}catch(r){return console.error("Toggle best friend error:",r),!1}}async toggleCloseFriend(n){if(!this.currentUserId)return!1;try{const r=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(i=>i.friendId===n).first();if(r){const i=!r.is_close_friend;return await Ae.friends.update(r.id,{is_close_friend:i}),i}return!1}catch(r){return console.error("Toggle close friend error:",r),!1}}async setFriendNickname(n,r){if(!this.currentUserId)return!1;try{const i=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(l=>l.friendId===n).first();return i?(await Ae.friends.update(i.id,{nickname:r}),!0):!1}catch(i){return console.error("Set friend nickname error:",i),!1}}async setPrivateNote(n,r){if(!this.currentUserId)return!1;try{const i=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(l=>l.friendId===n).first();return i?(await Ae.friends.update(i.id,{private_note:r}),!0):!1}catch(i){return console.error("Set private note error:",i),!1}}async toggleMuteFriend(n){if(!this.currentUserId)return!1;try{const r=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(i=>i.friendId===n).first();if(r){const i=!r.is_muted;return await Ae.friends.update(r.id,{is_muted:i}),i}return!1}catch(r){return console.error("Toggle mute friend error:",r),!1}}async blockUser(n,r){if(!this.currentUserId)return{success:!1,error:"Not logged in"};try{if(await Ae.blockedUsers.where("odm_userId").equals(this.currentUserId).filter(c=>c.blocked_user_id===n).first())return{success:!1,error:"Already blocked"};const l=await Ae.contacts.get(n);return await Ae.blockedUsers.add({id:`block_${this.currentUserId}_${n}`,odm_userId:this.currentUserId,blocked_user_id:n,user_name:l?.display_name||"Unknown",user_avatar:l?.avatar_url||"",blocked_at:Date.now(),reason:r||null}),await this.removeFriend(n),await Ae.friendRequests.where("sender_id").equals(this.currentUserId).filter(c=>c.receiver_id===n&&c.status==="pending").modify({status:"cancelled"}),await Ae.friendRequests.where("sender_id").equals(n).filter(c=>c.receiver_id===this.currentUserId&&c.status==="pending").modify({status:"declined"}),Oe&&await Oe.from("blocked_users").insert({user_id:this.currentUserId,blocked_user_id:n,reason:r||null,blocked_at:new Date().toISOString()}),{success:!0}}catch(i){return console.error("Block user error:",i),{success:!1,error:"Failed to block user"}}}async unblockUser(n){if(!this.currentUserId)return{success:!1,error:"Not logged in"};try{return await Ae.blockedUsers.where("odm_userId").equals(this.currentUserId).filter(r=>r.blocked_user_id===n).delete(),Oe&&await Oe.from("blocked_users").delete().eq("user_id",this.currentUserId).eq("blocked_user_id",n),{success:!0}}catch(r){return console.error("Unblock user error:",r),{success:!1,error:"Failed to unblock user"}}}async getBlockedUsers(){if(!this.currentUserId)return[];try{return await Ae.blockedUsers.where("odm_userId").equals(this.currentUserId).toArray()}catch(n){return console.error("Get blocked users error:",n),[]}}async isBlocked(n){if(!this.currentUserId)return!1;try{return!!await Ae.blockedUsers.where("odm_userId").equals(this.currentUserId).filter(i=>i.blocked_user_id===n).first()}catch{return!1}}async isBlockedBy(n){if(!this.currentUserId)return!1;try{return!!await Ae.blockedUsers.where("odm_userId").equals(n).filter(i=>i.blocked_user_id===this.currentUserId).first()}catch{return!1}}async getMutualFriendsCount(n){if(!this.currentUserId)return 0;try{const r=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).toArray(),i=await Ae.friends.where("odm_odm_userId").equals(n).toArray(),l=new Set(r.map(f=>f.friendId));return i.filter(f=>l.has(f.friendId)).length}catch{return 0}}async getMutualFriends(n){if(!this.currentUserId)return[];try{const r=await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).toArray(),i=await Ae.friends.where("odm_odm_userId").equals(n).toArray(),l=new Set(i.map(f=>f.friendId));return r.filter(f=>l.has(f.friendId))}catch{return[]}}async searchUsers(n,r){if(!this.currentUserId||!n.trim())return[];try{const i=r?.limit||20,l=n.toLowerCase().trim();let c=await Ae.contacts.filter(m=>m.id!==this.currentUserId&&((m.display_name||"").toLowerCase().includes(l)||(m.odm||"").toLowerCase().includes(l)||(m.email||"").toLowerCase().includes(l))).limit(i).toArray();if(Oe&&c.length<i){const{data:m}=await Oe.from("profiles").select("id, display_name, odm, avatar_url").or(`display_name.ilike.%${n}%,odm.ilike.%${n}%`).neq("id",this.currentUserId).limit(i-c.length);if(m)for(const y of m)c.find(b=>b.id===y.id)||c.push({id:y.id,display_name:y.display_name,odm:y.odm,avatar_url:y.avatar_url,email:""})}return(await Promise.all(c.map(async m=>{const y=!!await Ae.friends.where("odm_odm_userId").equals(this.currentUserId).filter(E=>E.friendId===m.id).first(),b=await Ae.friendRequests.where("sender_id").equals(this.currentUserId).filter(E=>E.receiver_id===m.id&&E.status==="pending").first(),v=await Ae.friendRequests.where("sender_id").equals(m.id).filter(E=>E.receiver_id===this.currentUserId&&E.status==="pending").first(),w=!!(b||v),_=await this.isBlocked(m.id);if(r?.excludeFriends&&y||r?.excludeBlocked&&_)return null;const k=await this.getMutualFriendsCount(m.id);return{id:m.id,display_name:m.display_name||"Unknown",odm:m.odm||"",avatar:m.avatar_url||m.avatar||"",isFriend:y,isPending:w,mutual_friends_count:k}}))).filter(m=>m!==null)}catch(i){return console.error("Search users error:",i),[]}}async getPrivacySettings(){if(!this.currentUserId)return this.getDefaultPrivacySettings();try{const n=await Ae.settings.get(`privacy_${this.currentUserId}`);if(n?.value){const r=typeof n.value=="string"?JSON.parse(n.value):n.value;return{...this.getDefaultPrivacySettings(),...r}}return this.getDefaultPrivacySettings()}catch{return this.getDefaultPrivacySettings()}}getDefaultPrivacySettings(){return{last_seen_visibility:"everyone",profile_photo_visibility:"everyone",bio_visibility:"everyone",online_status_visibility:"everyone",story_visibility:"friends",can_receive_requests_from:"everyone",show_mutual_friends:!0,allow_friend_suggestions:!0}}async updatePrivacySettings(n){if(!this.currentUserId)return!1;try{const i={...await this.getPrivacySettings(),...n};return await Ae.settings.put({id:`privacy_${this.currentUserId}`,key:"privacy",value:i}),Oe&&await Oe.from("user_settings").upsert({user_id:this.currentUserId,privacy_settings:i}),!0}catch(r){return console.error("Update privacy settings error:",r),!1}}async getIncomingRequests(){if(!this.currentUserId)return[];try{return await Ae.friendRequests.where("receiver_id").equals(this.currentUserId).filter(r=>r.status==="pending").reverse().toArray()}catch(n){return console.error("Get incoming requests error:",n),[]}}async getOutgoingRequests(){if(!this.currentUserId)return[];try{return await Ae.friendRequests.where("sender_id").equals(this.currentUserId).filter(r=>r.status==="pending").reverse().toArray()}catch(n){return console.error("Get outgoing requests error:",n),[]}}async getRequestsCount(){if(!this.currentUserId)return 0;try{return await Ae.friendRequests.where("receiver_id").equals(this.currentUserId).filter(n=>n.status==="pending").count()}catch{return 0}}}const Ks=new JN;function WN({onStartChat:a}){const{profile:n,friends:r,friendRequests:i,blockedUsers:l,setFriendRequests:c,addFriend:f,removeFriend:m,blockUser:y,unblockUser:b,allUsers:v,setActiveCall:w,adminSettings:_,hiddenChats:k,showHiddenChats:E}=rr(),[R,H]=Se.useState("friends"),[q,W]=Se.useState(""),[L,z]=Se.useState(null),[fe,K]=Se.useState(new Set),X=($,ae)=>{const I=ae.trim().toLowerCase();if(!I)return!0;const B=`${$.id} ${$.display_name} ${$.username}`.toLowerCase();return I.split(/\s+/).filter(Boolean).every(te=>B.includes(te))},O=r.filter($=>k.includes($.id)&&!E?!1:X($,q)),D=v.filter($=>$.id!==n?.id&&!r.some(ae=>ae.id===$.id)&&!l.includes($.id)&&X($,q)),Z=async $=>{try{const ae=await Ks.acceptFriendRequest($.id);ae.success?($.sender&&f($.sender),c(i.filter(I=>I.id!==$.id))):alert(ae.error)}catch(ae){console.error("Failed to accept request:",ae)}},F=async $=>{try{(await Ks.declineFriendRequest($.id)).success&&c(i.filter(I=>I.id!==$.id))}catch(ae){console.error("Failed to decline request:",ae)}},G=async $=>{if($.id===n?.id){alert("You cannot send a friend request to yourself.");return}if(!fe.has($.id)){K(ae=>new Set(ae).add($.id));try{const ae=await Ks.sendFriendRequestByUsername($.username);ae.success||alert(ae.error)}catch(ae){console.error("Failed to send request:",ae)}finally{K(ae=>{const I=new Set(ae);return I.delete($.id),I})}}},ne=async $=>{if(confirm("Remove this friend?"))try{const ae=await Ks.removeFriend($);ae.success?(m($),z(null)):alert(ae.error||"Failed to remove friend")}catch(ae){console.error("Failed to remove friend:",ae)}},M=async $=>{if(confirm("Block this user? They will not be able to message you."))try{const ae=await Ks.blockUser($);ae.success?(y($),z(null)):alert(ae.error||"Failed to block user")}catch(ae){console.error("Failed to block user:",ae)}},J=async $=>{try{const ae=await Ks.unblockUser($);ae.success?b($):alert(ae.error||"Failed to unblock user")}catch(ae){console.error("Failed to unblock user:",ae)}},A=$=>{if(!_.calls_enabled){alert("Calls are currently disabled by the admin.");return}w({id:crypto.randomUUID(),type:"voice",status:"calling",remoteUser:$,startTime:new Date().toISOString()}),z(null)},T=$=>{if(!_.calls_enabled){alert("Calls are currently disabled by the admin.");return}w({id:crypto.randomUUID(),type:"video",status:"calling",remoteUser:$,startTime:new Date().toISOString()}),z(null)},Y=v.filter($=>l.includes($.id));return u.jsxs("div",{className:"flex flex-col h-full",children:[u.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:u.jsxs("div",{className:"relative",children:[u.jsx(lc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search friends...",value:q,onChange:$=>W($.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-100 dark:bg-slate-800 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:text-white text-sm"})]})}),u.jsx("div",{className:"flex bg-white dark:bg-slate-900 border-b dark:border-slate-800 p-2 gap-2 overflow-x-auto scrollbar-hide",children:[{id:"friends",label:"Friends",count:r.length},{id:"requests",label:"Requests",count:i.length},{id:"discover",label:"Discover"},{id:"blocked",label:"Blocked",count:l.length}].map(({id:$,label:ae,count:I})=>u.jsxs("button",{onClick:()=>H($),className:Ze("flex-1 min-w-[90px] py-2.5 px-4 text-xs font-bold transition-all rounded-xl border-2 flex items-center justify-center gap-1.5 whitespace-nowrap",R===$?"bg-indigo-600 border-indigo-600 text-white shadow-lg shadow-indigo-500/20 scale-105 z-10":"bg-transparent border-gray-100 dark:border-slate-800 text-gray-500 hover:border-gray-200 dark:hover:border-slate-700"),children:[ae,I!==void 0&&I>0&&u.jsx("span",{className:Ze("px-1.5 py-0.5 text-[10px] rounded-full",R===$?"bg-white text-indigo-600":"bg-gray-200 dark:bg-slate-700 text-gray-600"),children:I})]},$))}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[R==="friends"&&u.jsx("div",{className:"p-4 space-y-2",children:O.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center mx-auto mb-4",children:u.jsx(zl,{className:"w-10 h-10 text-indigo-300 dark:text-indigo-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:q?"No friends found":"No friends yet"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4 text-sm",children:q?"Try a different search":"Discover people to add as friends"}),!q&&u.jsx("button",{onClick:()=>H("discover"),className:"px-6 py-2.5 bg-indigo-600 text-white rounded-full text-sm font-medium",children:"Discover People"})]}):O.map($=>u.jsxs("div",{onClick:()=>z($),className:Ze("flex items-center gap-3 p-4 mx-2 my-1 cursor-pointer rounded-2xl active:scale-[0.98] transition-all","bg-white dark:bg-slate-900 premium-card shadow-sm border border-transparent hover:border-indigo-100 dark:hover:border-slate-800"),children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:$.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${$.username}`,alt:"",className:"w-14 h-14 rounded-full object-cover border-2 border-gray-100 dark:border-slate-800"}),$.is_online&&u.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-slate-900"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-bold dark:text-white truncate",children:$.display_name}),u.jsx("p",{className:"text-sm truncate",children:$.is_online?u.jsx("span",{className:"text-green-500 font-medium",children:"Online"}):$.last_seen?u.jsx("span",{className:"text-gray-400",children:Ey(new Date($.last_seen),{addSuffix:!0})}):u.jsx("span",{className:"text-gray-400",children:"Offline"})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[_.calls_enabled&&u.jsx("button",{onClick:ae=>{ae.stopPropagation(),A($)},className:"p-3 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 rounded-xl",children:u.jsx(Pa,{className:"w-4 h-4"})}),u.jsx("button",{onClick:ae=>{ae.stopPropagation(),a($)},className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded-xl",children:u.jsx(Ar,{className:"w-4 h-4"})})]})]},$.id))}),R==="requests"&&u.jsx("div",{className:"p-4 space-y-3",children:i.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-50 dark:bg-slate-800 flex items-center justify-center mx-auto mb-4",children:u.jsx(Xo,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"No pending requests"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Friend requests will appear here"})]}):u.jsxs(u.Fragment,{children:[u.jsxs("p",{className:"text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase px-1",children:[i.length," pending request",i.length!==1?"s":""]}),i.map($=>u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[u.jsx("img",{src:$.sender?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${$.sender_id}`,alt:"",className:"w-14 h-14 rounded-full object-cover flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold dark:text-white truncate",children:$.sender?.display_name||"Unknown"}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",$.sender?.username,"  ",Ey(new Date($.created_at),{addSuffix:!0})]}),$.message&&u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 italic",children:['"',$.message,'"']})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>F($),className:"flex-1 py-2.5 bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-gray-300 rounded-xl text-sm font-medium flex items-center justify-center gap-1.5 active:scale-95 transition-transform",children:[u.jsx(Ys,{className:"w-4 h-4"}),"Decline"]}),u.jsxs("button",{onClick:()=>Z($),className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-1.5 active:scale-95 transition-transform",children:[u.jsx(dd,{className:"w-4 h-4"}),"Accept"]})]})]},$.id))]})}),R==="discover"&&u.jsx("div",{className:"p-4 space-y-2",children:D.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-50 dark:bg-slate-800 flex items-center justify-center mx-auto mb-4",children:u.jsx(lc,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"No users found"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Try searching for someone by name or username"})]}):D.map($=>u.jsxs("div",{className:"flex items-center gap-3 p-4 mx-2 my-1 bg-white dark:bg-slate-900 premium-card shadow-sm border border-transparent hover:border-indigo-100 dark:hover:border-slate-800 rounded-2xl",children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:$.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${$.username}`,alt:"",className:"w-14 h-14 rounded-full object-cover"}),$.is_online&&u.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-slate-900"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold dark:text-white truncate",children:$.display_name}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",$.username]}),$.bio&&u.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate mt-0.5",children:$.bio})]}),u.jsx("button",{onClick:()=>G($),disabled:fe.has($.id),className:Ze("p-2.5 rounded-full transition-all active:scale-95 shadow-sm",fe.has($.id)?"bg-gray-100 dark:bg-slate-700 text-gray-400":"bg-indigo-600 text-white hover:bg-indigo-700"),children:fe.has($.id)?u.jsx(Xo,{className:"w-5 h-5"}):u.jsx(em,{className:"w-5 h-5"})})]},$.id))}),R==="blocked"&&u.jsx("div",{className:"p-4 space-y-2",children:Y.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-50 dark:bg-slate-800 flex items-center justify-center mx-auto mb-4",children:u.jsx(fm,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"No blocked users"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Blocked users will appear here"})]}):Y.map($=>u.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white dark:bg-slate-800 rounded-2xl shadow-sm",children:[u.jsx("img",{src:$.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${$.username}`,alt:"",className:"w-14 h-14 rounded-full grayscale opacity-60 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold dark:text-white truncate",children:$.display_name}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",$.username]})]}),u.jsx("button",{onClick:()=>J($.id),className:"px-4 py-2 text-sm bg-gray-100 dark:bg-slate-700 dark:text-white rounded-full font-medium active:scale-95 transition-transform",children:"Unblock"})]},$.id))})]}),L&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center",onClick:()=>z(null),children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl w-full max-w-lg p-6 animate-slide-up",onClick:$=>$.stopPropagation(),children:[u.jsx("div",{className:"bottom-sheet-handle mb-4"}),u.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:L.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${L.username}`,alt:"",className:"w-20 h-20 rounded-full object-cover"}),L.is_online&&u.jsx("div",{className:"absolute bottom-1 right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-slate-800"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"text-xl font-bold dark:text-white truncate",children:L.display_name}),u.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["@",L.username]}),L.bio&&u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 line-clamp-2",children:L.bio}),u.jsx("p",{className:"text-xs mt-1",children:L.is_online?u.jsx("span",{className:"text-green-500 font-medium",children:" Online"}):u.jsx("span",{className:"text-gray-400",children:"Offline"})})]})]}),u.jsxs("div",{className:"flex gap-3 mb-5",children:[u.jsxs("button",{onClick:()=>{a(L),z(null)},className:"flex-1 py-3 bg-indigo-600 text-white rounded-2xl flex items-center justify-center gap-2 font-medium active:scale-95 transition-transform",children:[u.jsx(Ar,{className:"w-5 h-5"}),"Message"]}),_.calls_enabled&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>A(L),className:"py-3 px-4 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-2xl flex items-center justify-center active:scale-95 transition-transform",title:"Voice Call",children:u.jsx(Pa,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>T(L),className:"py-3 px-4 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-2xl flex items-center justify-center active:scale-95 transition-transform",title:"Video Call",children:u.jsx(Gs,{className:"w-5 h-5"})})]})]}),u.jsxs("div",{className:"space-y-1 border-t dark:border-slate-700 pt-4",children:[u.jsxs("button",{onClick:()=>ne(L.id),className:"w-full p-3.5 flex items-center gap-3 rounded-xl hover:bg-orange-50 dark:hover:bg-orange-900/10 active:scale-[0.98] transition-all",children:[u.jsx("div",{className:"w-9 h-9 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:u.jsx(gk,{className:"w-4 h-4 text-orange-500"})}),u.jsx("span",{className:"font-medium dark:text-white",children:"Remove Friend"})]}),u.jsxs("button",{onClick:()=>M(L.id),className:"w-full p-3.5 flex items-center gap-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/10 active:scale-[0.98] transition-all",children:[u.jsx("div",{className:"w-9 h-9 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:u.jsx(Qu,{className:"w-4 h-4 text-red-500"})}),u.jsx("span",{className:"font-medium text-red-500",children:"Block User"})]})]}),u.jsx("button",{onClick:()=>z(null),className:"w-full mt-3 py-3 border dark:border-slate-600 rounded-2xl dark:text-white font-medium active:scale-95 transition-transform",children:"Close"})]})})]})}function ZN({onStartCall:a}){const{callLogs:n,friends:r,setActiveCall:i,adminSettings:l,profile:c}=rr(),[f,m]=Se.useState(!1),[y,b]=Se.useState(""),v=n.reduce((L,z)=>{const fe=is(new Date(z.created_at),"yyyy-MM-dd");return L[fe]||(L[fe]=[]),L[fe].push(z),L},{}),w=Object.keys(v).sort((L,z)=>z.localeCompare(L)),_=L=>{if(!L)return"";const z=Math.floor(L/60),fe=L%60;return`${z}:${fe.toString().padStart(2,"0")}`},k=L=>{const z=new Date(L);return Fv(z)?"Today":Gv(z)?"Yesterday":is(z,"MMMM d, yyyy")},E=(L,z)=>{if(!l.calls_enabled){alert("Calls are currently disabled.");return}a?a(L,z):i({id:crypto.randomUUID(),type:z,status:"calling",remoteUser:L,startTime:new Date().toISOString()}),m(!1)},R=r.filter(L=>L.display_name.toLowerCase().includes(y.toLowerCase())||L.username.toLowerCase().includes(y.toLowerCase())),H=L=>{const z=L.caller_id===c?.id;return L.status==="missed"?u.jsx(LS,{className:"w-4 h-4 text-red-500"}):z?u.jsx(PS,{className:"w-4 h-4 text-indigo-500"}):u.jsx(zS,{className:"w-4 h-4 text-green-500"})},q=L=>{const z=L.caller_id===c?.id;return L.status==="missed"?"Missed":L.status==="declined"?"Declined":z?"Outgoing":"Incoming"},W=L=>L.caller_id===c?.id?L.receiver:L.caller;return u.jsxs("div",{className:"flex flex-col h-full",children:[f&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end justify-center",onClick:()=>m(!1),children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl w-full max-w-lg p-6 animate-slide-up",onClick:L=>L.stopPropagation(),children:[u.jsx("div",{className:"bottom-sheet-handle mb-4"}),u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-bold dark:text-white",children:"New Call"}),u.jsx("button",{onClick:()=>m(!1),className:"p-2 rounded-full bg-gray-100 dark:bg-slate-700",children:u.jsx(Ys,{className:"w-5 h-5 dark:text-white"})})]}),u.jsx("input",{type:"text",placeholder:"Search friends...",value:y,onChange:L=>b(L.target.value),className:"w-full px-4 py-2.5 bg-gray-100 dark:bg-slate-700 rounded-xl mb-4 dark:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm"}),u.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:R.length===0?u.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm",children:y?"No friends found":"Add friends to start calling"}):R.map(L=>u.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-slate-700",children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:L.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${L.username}`,alt:"",className:"w-12 h-12 rounded-full object-cover"}),L.is_online&&u.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-slate-800"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-semibold dark:text-white truncate",children:L.display_name}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:L.is_online?u.jsx("span",{className:"text-green-500",children:"Online"}):"Offline"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>E(L,"voice"),className:"p-2.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-full active:scale-90 transition-transform",title:"Voice Call",children:u.jsx(Pa,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>E(L,"video"),className:"p-2.5 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full active:scale-90 transition-transform",title:"Video Call",children:u.jsx(Gs,{className:"w-4 h-4"})})]})]},L.id))})]})}),l.calls_enabled&&u.jsx("div",{className:"px-4 py-3 flex justify-end border-b dark:border-slate-700",children:u.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-full text-sm font-medium active:scale-95 transition-transform",children:[u.jsx(Qh,{className:"w-4 h-4"}),"New Call"]})}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:n.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-20 px-6",children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-100 dark:bg-slate-800 flex items-center justify-center mb-5",children:u.jsx(Pa,{className:"w-12 h-12 text-gray-300 dark:text-gray-600"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-600 dark:text-gray-300 mb-2",children:"No calls yet"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm mb-6",children:"Your call history will appear here"}),l.calls_enabled&&u.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-full font-medium",children:[u.jsx(Qh,{className:"w-5 h-5"}),"Start a Call"]})]}):u.jsx("div",{children:w.map(L=>u.jsxs("div",{children:[u.jsx("div",{className:"px-4 py-2 bg-gray-50 dark:bg-slate-800/50",children:u.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:k(L)})}),v[L].map(z=>{const fe=W(z),K=z.status==="missed";return u.jsxs("div",{className:Ze("flex items-center gap-3 px-4 py-4 mx-2 my-1 rounded-2xl transition-all","bg-white dark:bg-slate-900 premium-card shadow-sm border border-transparent hover:border-indigo-100 dark:hover:border-slate-800","active:scale-[0.98]"),children:[u.jsxs("div",{className:"relative flex-shrink-0",children:[u.jsx("img",{src:fe?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${fe?.username||"user"}`,alt:"",className:"w-14 h-14 rounded-full object-cover border-2 border-gray-100 dark:border-slate-800"}),u.jsx("div",{className:Ze("absolute -bottom-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center border-2 border-white dark:border-slate-900",z.type==="video"?"bg-blue-500 shadow-blue-500/50":"bg-green-500 shadow-green-500/50","shadow-sm"),children:z.type==="video"?u.jsx(Gs,{className:"w-3 h-3 text-white"}):u.jsx(Pa,{className:"w-3 h-3 text-white"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:Ze("font-bold truncate",K?"text-red-500":"dark:text-white"),children:fe?.display_name||"Unknown"}),u.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[H(z),u.jsxs("span",{className:Ze("text-sm font-medium",K?"text-red-400":"text-gray-500 dark:text-gray-400"),children:[q(z),z.duration&&z.duration>0&&u.jsxs("span",{className:"ml-1 opacity-60",children:[" ",_(z.duration)]})]})]})]}),u.jsxs("div",{className:"flex flex-col items-end gap-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 flex items-center gap-1 uppercase tracking-tighter",children:is(new Date(z.created_at),"HH:mm")}),l.calls_enabled&&fe&&u.jsxs("div",{className:"flex gap-1.5",children:[u.jsx("button",{onClick:()=>E(fe,"voice"),className:"p-2.5 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 rounded-xl active:scale-90 transition-transform",title:"Call back",children:u.jsx(Pa,{className:"w-4 h-4"})}),z.type==="video"&&u.jsx("button",{onClick:()=>E(fe,"video"),className:"p-2.5 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-xl active:scale-90 transition-transform",title:"Video call back",children:u.jsx(Gs,{className:"w-4 h-4"})})]})]})]},z.id)})]},L))})})]})}function e4(){const{profile:a,theme:n,setTheme:r,appLockPin:i,setAppLockPin:l,isAdmin:c,setActiveTab:f,blockedUsers:m,setIsAuthenticated:y,hiddenChats:b,lockedChats:v,notificationSettings:w,setNotificationSettings:_,privacySettings:k,setPrivacySettings:E,storageSettings:R,setStorageSettings:H,accessibilitySettings:q,setAccessibilitySettings:W}=rr(),[L,z]=Se.useState("main"),[fe,K]=Se.useState(!1),[X,O]=Se.useState(a?.display_name||""),[D,Z]=Se.useState(a?.username||""),[F,G]=Se.useState(a?.bio||""),[ne,M]=Se.useState(!1),[J,A]=Se.useState(""),[T,Y]=Se.useState(""),[$,ae]=Se.useState("enter"),[I,B]=Se.useState(""),[ue,te]=Se.useState(!1),[he,Be]=Se.useState(null);Se.useEffect(()=>{L==="storage"&&Wy().then(Be)},[L]);const Ee=(ke=10)=>{q.hapticFeedback&&navigator.vibrate&&navigator.vibrate(ke)},lt=async()=>{if(!a)return;te(!0),Ee(10);const ze=(We=>We.trim().replace(/^@/,"").toLowerCase())(D);try{if(!ze){alert("Username is required");return}if(ze.length<3||ze.length>20){alert("Username must be 3-20 characters");return}if(!/^[a-z0-9_]+$/.test(ze)){alert("Username can only contain lowercase letters, numbers, and underscores");return}const{data:We,error:yt}=await Oe.from("profiles").select("id").ilike("username",ze).neq("id",a.id).maybeSingle();if(yt)throw yt;if(We?.id){alert("Username already taken. Choose a different one.");return}const{error:ct}=await Oe.from("profiles").update({display_name:X,username:ze,bio:F,updated_at:new Date().toISOString()}).eq("id",a.id);if(ct)throw ct;rr.setState({profile:{...a,display_name:X,username:ze,bio:F}}),K(!1),Ee(10)}catch(We){console.error("Save error:",We),alert("Failed to save profile")}finally{te(!1)}},Me=()=>{if($==="enter"){if(J.length!==4){B("PIN must be 4 digits");return}ae("confirm"),B("")}else{if(T!==J){B("PINs do not match"),Y("");return}l(J),M(!1),A(""),Y(""),ae("enter"),Ee(10)}},Ue=()=>{confirm("Remove app lock PIN?")&&(l(null),Ee(10))},_t=async ke=>{const ze=ke.target.files?.[0];if(!(!ze||!a)){ze.size>5*1024*1024&&alert("Photo is too large. It will be compressed automatically."),te(!0);try{const{StoryService:We}=await ss(async()=>{const{StoryService:ct}=await Promise.resolve().then(()=>YN);return{StoryService:ct}},void 0,import.meta.url);We.setCurrentUser(a.id);const yt=await We.updateProfilePicture(ze);yt?(rr.setState({profile:{...a,avatar_url:yt}}),Ee(10)):alert("Failed to update profile picture")}catch(We){console.error("Avatar update error:",We),alert("Error updating photo")}finally{te(!1)}}},at=async()=>{if(confirm("Are you sure you want to logout?"))try{await Oe.auth.signOut(),y(!1),Ee(10)}catch(ke){console.error("Logout error:",ke)}},yn=async()=>{if(confirm("This will delete all your local data including messages and media. This cannot be undone. Continue?"))try{te(!0),await Zy(),localStorage.clear(),Ee(20),alert("Application reset successfully. Logging out."),window.location.reload()}catch(ke){console.error("Clear data error:",ke),alert("Failed to reset application")}finally{te(!1)}},Fe=ke=>{if(ke===0)return"0 B";const ze=1024,We=["B","KB","MB","GB"],yt=Math.floor(Math.log(ke)/Math.log(ze));return parseFloat((ke/Math.pow(ze,yt)).toFixed(1))+" "+We[yt]};console.log(Fe);const we=({icon:ke,label:ze,value:We,onClick:yt,danger:ct=!1,badge:Mt,toggle:vt,onToggle:gt})=>u.jsxs("button",{onClick:()=>{Ee(),gt!==void 0&&vt!==void 0?gt(!vt):yt&&yt()},className:Ze("w-full flex items-center gap-4 px-4 py-4 transition-colors","active:bg-gray-50 dark:active:bg-slate-800",ct&&"text-red-500"),children:[u.jsx("div",{className:Ze("w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",ct?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-slate-800"),children:u.jsx(ke,{className:Ze("w-5 h-5",ct?"text-red-500":"text-gray-600 dark:text-gray-400")})}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("span",{className:Ze("font-medium",ct?"text-red-500":"dark:text-white"),children:ze}),We&&u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:We})]}),Mt!==void 0&&Mt>0&&u.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:Mt}),vt!==void 0?u.jsx("div",{className:Ze("w-12 h-7 rounded-full transition-colors relative",vt?"bg-indigo-500":"bg-gray-300 dark:bg-slate-600"),children:u.jsx("div",{className:Ze("absolute top-0.5 w-6 h-6 bg-white rounded-full shadow transition-transform",vt?"translate-x-5":"translate-x-0.5")})}):!ct&&u.jsx(Gh,{className:"w-5 h-5 text-gray-400"})]}),Pe=({title:ke,onBack:ze})=>u.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-900 z-10 px-4 py-4 border-b dark:border-slate-800 flex items-center gap-4",children:[u.jsx("button",{onClick:()=>{Ee(),ze()},className:"p-2 -ml-2 rounded-full active:bg-gray-100 dark:active:bg-slate-800",children:u.jsx(Gh,{className:"w-6 h-6 rotate-180 dark:text-white"})}),u.jsx("h2",{className:"text-xl font-bold dark:text-white",children:ke})]});return L==="main"?u.jsxs("div",{className:"min-h-full",children:[u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"bg-indigo-600 premium-card p-6 text-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-3xl"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-500/20 rounded-full -ml-12 -mb-12 blur-2xl"}),u.jsxs("div",{className:"relative z-10 flex items-center gap-5",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("img",{src:a?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.username||"user"}`,alt:"",className:"w-20 h-20 rounded-2xl border-2 border-white/30 object-cover shadow-lg group-hover:scale-105 transition-transform"}),u.jsx("input",{type:"file",id:"avatar-upload-main",className:"hidden",accept:"image/*",onChange:_t}),u.jsx("button",{onClick:()=>document.getElementById("avatar-upload-main")?.click(),className:"absolute -bottom-1 -right-1 w-8 h-8 bg-white text-indigo-600 rounded-xl flex items-center justify-center shadow-lg active:scale-90 transition-transform",children:u.jsx(ic,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h2",{className:"text-xl font-black truncate tracking-tight",children:a?.display_name||"User"}),u.jsx("div",{className:"flex items-center gap-1.5 opacity-80 mt-0.5",children:u.jsxs("span",{className:"text-sm font-bold",children:["@",a?.username||"username"]})}),a?.bio&&u.jsx("p",{className:"text-white/70 text-xs mt-2 line-clamp-1 font-medium",children:a.bio})]}),u.jsx("button",{onClick:()=>z("account"),className:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-xl flex items-center justify-center transition-colors",title:"Edit Account",children:u.jsx(kh,{className:"w-5 h-5"})})]})]})}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 px-4 mb-4",children:[u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 text-center premium-card shadow-sm border border-transparent",children:[u.jsx("p",{className:"text-2xl font-black text-indigo-600",children:v.length}),u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Locked"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 text-center premium-card shadow-sm border border-transparent",children:[u.jsx("p",{className:"text-2xl font-black text-purple-600",children:b.length}),u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Hidden"})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 text-center premium-card shadow-sm border border-transparent",children:[u.jsx("p",{className:"text-2xl font-black text-orange-500",children:m.length}),u.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Blocked"})]})]}),u.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-t-3xl",children:[u.jsxs("div",{className:"border-b dark:border-slate-800",children:[u.jsx(we,{icon:jv,label:"Account",value:"Edit profile, username, bio",onClick:()=>z("account")}),u.jsx(we,{icon:ra,label:"Privacy",value:"Last seen, profile photo, status",onClick:()=>z("privacy")}),u.jsx(we,{icon:Fs,label:"Security",value:"App lock, fingerprint",onClick:()=>z("security")})]}),u.jsxs("div",{className:"border-b dark:border-slate-800",children:[u.jsx(we,{icon:Ci,label:"Notifications",value:"Message, group, call alerts",onClick:()=>z("notifications")}),u.jsx(we,{icon:Sv,label:"Storage & Data",value:"Manage storage, auto-download",onClick:()=>z("storage")}),u.jsx(we,{icon:Yh,label:"Appearance",value:"Theme, chat wallpaper",onClick:()=>z("appearance")})]}),u.jsxs("div",{className:"border-b dark:border-slate-800",children:[u.jsx(we,{icon:jh,label:"Blocked Users",value:`${m.length} blocked`,onClick:()=>z("blocked")}),u.jsx(we,{icon:Ml,label:"Download App",value:"Get OurDM for Android & Desktop",onClick:()=>{Ee(10);const ke=new CustomEvent("pwa-install-prompt");window.dispatchEvent(ke)}}),u.jsx(we,{icon:uy,label:"Accessibility",value:"Text size, haptics, motion",onClick:()=>z("accessibility")}),u.jsx(we,{icon:oy,label:"Help",value:"FAQ, contact us",onClick:()=>z("help")}),u.jsx(we,{icon:cy,label:"About",value:"Ourdm v3.0.1",onClick:()=>z("about")})]}),c&&u.jsx("div",{className:"border-b dark:border-slate-800",children:u.jsx(we,{icon:Fs,label:"Admin Panel",value:"Manage users, settings",onClick:()=>f("admin")})}),u.jsx("div",{className:"py-4",children:u.jsx(we,{icon:bS,label:"Logout",danger:!0,onClick:at})})]})]}):L==="account"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Account",onBack:()=>z("main")}),u.jsxs("div",{className:"p-4",children:[u.jsx("div",{className:"flex flex-col items-center mb-6",children:u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:a?.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a?.username}`,alt:"",className:"w-28 h-28 rounded-full object-cover border-4 border-gray-200 dark:border-slate-700"}),u.jsx("input",{type:"file",id:"avatar-upload-account",className:"hidden",accept:"image/*",onChange:_t}),u.jsx("button",{onClick:()=>document.getElementById("avatar-upload-account")?.click(),className:"absolute bottom-0 right-0 w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:u.jsx(ic,{className:"w-5 h-5 text-white"})})]})}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Display Name"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:"text",value:X,onChange:ke=>O(ke.target.value),disabled:!fe,className:"w-full px-4 py-3 bg-gray-100 dark:bg-slate-800 rounded-xl dark:text-white disabled:opacity-60"}),fe&&u.jsx(kh,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Username"}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),u.jsx("input",{type:"text",value:D,onChange:ke=>Z(ke.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),disabled:!fe,className:"w-full pl-8 pr-4 py-3 bg-gray-100 dark:bg-slate-800 rounded-xl dark:text-white disabled:opacity-60"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Bio"}),u.jsx("textarea",{value:F,onChange:ke=>G(ke.target.value.slice(0,150)),disabled:!fe,rows:3,className:"w-full px-4 py-3 bg-gray-100 dark:bg-slate-800 rounded-xl dark:text-white disabled:opacity-60 resize-none",placeholder:"Write something about yourself..."}),fe&&u.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[F.length,"/150"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Email"}),u.jsx("input",{type:"email",value:a?.email||"",disabled:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-slate-800 rounded-xl dark:text-white opacity-60"})]}),u.jsx("div",{className:"pt-6 border-t dark:border-slate-800",children:u.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl p-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Jo,{className:"w-5 h-5 text-indigo-500"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold dark:text-white",children:"Cloud Sync"}),u.jsx("p",{className:"text-[10px] text-gray-500",children:"Settings synced with database"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),u.jsx("span",{className:"text-[10px] font-bold text-green-500 uppercase",children:"Active"})]})]})})]}),u.jsx("div",{className:"mt-6 flex gap-3",children:fe?u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>{K(!1),O(a?.display_name||""),Z(a?.username||""),G(a?.bio||"")},className:"flex-1 py-3 bg-gray-100 dark:bg-slate-800 rounded-xl font-medium dark:text-white",children:"Cancel"}),u.jsx("button",{onClick:lt,disabled:ue,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-medium flex items-center justify-center gap-2",children:ue?u.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):u.jsxs(u.Fragment,{children:[u.jsx(dd,{className:"w-5 h-5"}),"Save"]})})]}):u.jsxs("button",{onClick:()=>K(!0),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-medium flex items-center justify-center gap-2",children:[u.jsx(kh,{className:"w-5 h-5"}),"Edit Profile"]})})]})]}):L==="privacy"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Privacy",onBack:()=>z("main")}),u.jsxs("div",{className:"py-2",children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Who can see my personal info"}),u.jsx(we,{icon:Xo,label:"Last Seen",value:k.lastSeen==="everyone"?"Everyone":k.lastSeen==="contacts"?"My Contacts":"Nobody",onClick:()=>{const ke=["everyone","contacts","nobody"],ze=ke.indexOf(k.lastSeen);E({lastSeen:ke[(ze+1)%3]}),Ee(10)}}),u.jsx(we,{icon:Wo,label:"Profile Photo",value:k.profilePhoto==="everyone"?"Everyone":k.profilePhoto==="contacts"?"My Contacts":"Nobody",onClick:()=>{const ke=["everyone","contacts","nobody"],ze=ke.indexOf(k.profilePhoto);E({profilePhoto:ke[(ze+1)%3]}),Ee(10)}}),u.jsx(we,{icon:Jo,label:"Online Status",value:k.onlineStatus==="everyone"?"Everyone":k.onlineStatus==="contacts"?"My Contacts":"Nobody",onClick:()=>{const ke=["everyone","contacts","nobody"],ze=ke.indexOf(k.onlineStatus);E({onlineStatus:ke[(ze+1)%3]}),Ee(10)}}),u.jsx(we,{icon:Xo,label:"Story Privacy",value:k.stories==="everyone"?"Everyone":"My Contacts",onClick:()=>{E({stories:k.stories==="everyone"?"contacts":"everyone"}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Messages"}),u.jsx(we,{icon:Ti,label:"Read Receipts",value:"Blue ticks when you read messages",toggle:k.readReceipts,onToggle:ke=>{E({readReceipts:ke}),Ee(10)}}),u.jsx(we,{icon:Ar,label:"Typing Indicator",value:"Show when you're typing",toggle:k.typingIndicator,onToggle:ke=>{E({typingIndicator:ke}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Blocked"}),u.jsx(we,{icon:jh,label:"Blocked Users",value:`${m.length} contacts blocked`,onClick:()=>z("blocked")})]})]}):L==="security"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Security",onBack:()=>z("main")}),u.jsxs("div",{className:"py-2",children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"App Lock"}),u.jsx(we,{icon:ra,label:"App Lock",value:i?"Enabled":"Disabled",toggle:!!i,onToggle:ke=>{ke?M(!0):Ue()}}),i&&u.jsxs(u.Fragment,{children:[u.jsx(we,{icon:pS,label:"Change PIN",value:"Change your app lock PIN",onClick:()=>M(!0)}),u.jsx(we,{icon:dS,label:"Biometric Unlock",value:"Use fingerprint or face",toggle:q.highContrast,onToggle:ke=>{W({highContrast:ke}),Ee(10)}}),u.jsx(we,{icon:Xo,label:"Auto-Lock",value:"Instant"}),u.jsx(we,{icon:Fs,label:"Screen Security",value:"Block screenshots & previews",toggle:q.reduceMotion,onToggle:ke=>{W({reduceMotion:ke}),Ee(10)}})]}),u.jsx("div",{className:"h-4"}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Chats"}),u.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:u.jsx(ra,{className:"w-5 h-5 text-indigo-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium dark:text-white",children:"Locked Chats"}),u.jsxs("p",{className:"text-sm text-gray-500",children:[v.length," chats locked"]})]})]}),u.jsxs("div",{className:"px-4 py-4 flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:u.jsx(Ju,{className:"w-5 h-5 text-purple-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium dark:text-white",children:"Hidden Chats"}),u.jsxs("p",{className:"text-sm text-gray-500",children:[b.length," chats hidden"]})]})]})]}),ne&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 w-full max-w-sm",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center",children:u.jsx(ra,{className:"w-8 h-8 text-indigo-500"})}),u.jsx("h3",{className:"text-xl font-bold text-center mb-2 dark:text-white",children:$==="enter"?"Set PIN":"Confirm PIN"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:$==="enter"?"Enter a 4-digit PIN":"Re-enter your PIN to confirm"}),u.jsx("div",{className:"flex justify-center gap-4 mb-4",children:[0,1,2,3].map(ke=>u.jsx("div",{className:Ze("w-4 h-4 rounded-full transition-all",($==="enter"?J:T).length>ke?"bg-indigo-500 scale-110":"bg-gray-200 dark:bg-slate-600")},ke))}),I&&u.jsx("p",{className:"text-red-500 text-sm text-center mb-4",children:I}),u.jsx("input",{type:"password",inputMode:"numeric",maxLength:4,value:$==="enter"?J:T,onChange:ke=>{const ze=ke.target.value.replace(/\D/g,"");$==="enter"?A(ze):Y(ze),B("")},className:"w-full text-center text-3xl tracking-[1em] bg-gray-50 dark:bg-slate-700 border-2 border-gray-200 dark:border-slate-600 rounded-2xl p-4 mb-6 dark:text-white focus:outline-none focus:border-indigo-500",placeholder:"",autoFocus:!0}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{M(!1),A(""),Y(""),ae("enter"),B("")},className:"flex-1 py-3 bg-gray-100 dark:bg-slate-700 rounded-xl font-medium dark:text-white",children:"Cancel"}),u.jsx("button",{onClick:Me,disabled:($==="enter"?J:T).length!==4,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-medium disabled:opacity-50",children:$==="enter"?"Next":"Set PIN"})]})]})})]}):L==="notifications"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Notifications",onBack:()=>z("main")}),u.jsxs("div",{className:"py-2",children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Messages"}),u.jsx(we,{icon:Ci,label:"Message Notifications",value:"Show notifications for new messages",toggle:w.enabled,onToggle:ke=>{_({enabled:ke}),Ee(10)}}),u.jsx(we,{icon:Nv,label:"Message Sound",value:"Play sound for messages",toggle:w.sound,onToggle:ke=>{_({sound:ke}),Ee(10)}}),u.jsx(we,{icon:Wh,label:"Vibrate",value:"Vibrate for messages",toggle:w.vibrate,onToggle:ke=>{_({vibrate:ke}),Ee(10)}}),u.jsx(we,{icon:Ti,label:"Show Preview",value:"Show message content in notification",toggle:w.preview,onToggle:ke=>{_({preview:ke}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Groups"}),u.jsx(we,{icon:zl,label:"Group Notifications",value:"Notifications for group messages",toggle:w.groupEnabled,onToggle:ke=>{_({groupEnabled:ke}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Calls"}),u.jsx(we,{icon:Pa,label:"Call Ringtone",value:"Default ringtone"}),u.jsx(we,{icon:Ci,label:"Call Notifications",value:"Vibrate and ring for calls",toggle:w.callEnabled,onToggle:ke=>{_({callEnabled:ke}),Ee(10)}})]})]}):L==="storage"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Storage & Data",onBack:()=>z("main")}),u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"bg-gray-100 dark:bg-slate-800 rounded-2xl p-4 mb-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("span",{className:"font-medium dark:text-white",children:"Storage Used"}),u.jsx("span",{className:"text-sm text-gray-500",children:he?Fe(he.estimatedSize):"Calculating..."})]}),u.jsx("div",{className:"h-2 bg-gray-200 dark:bg-slate-700 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all duration-500",style:{width:he?`${Math.min(100,he.estimatedSize/(1024*1024*50)*100)}%`:"0%"}})}),u.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500",children:[u.jsxs("span",{children:["Messages: ",he?.messagesCount||0]}),u.jsxs("span",{children:["Chats: ",he?.chatsCount||0]}),u.jsxs("span",{children:["Media: ",he?.mediaFilesCount||0]})]})]})}),u.jsxs("div",{className:"py-2",children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Auto-Download"}),u.jsx(we,{icon:Wo,label:"Photos",value:R.autoDownloadPhotos==="always"?"Always":R.autoDownloadPhotos==="wifi"?"WiFi only":"Never",onClick:()=>{const ke=["always","wifi","never"],ze=ke.indexOf(R.autoDownloadPhotos);H({autoDownloadPhotos:ke[(ze+1)%3]}),Ee(10)}}),u.jsx(we,{icon:Wh,label:"Videos",value:R.autoDownloadVideos==="always"?"Always":R.autoDownloadVideos==="wifi"?"WiFi only":"Never",onClick:()=>{const ke=["always","wifi","never"],ze=ke.indexOf(R.autoDownloadVideos);H({autoDownloadVideos:ke[(ze+1)%3]}),Ee(10)}}),u.jsx(we,{icon:Ml,label:"Documents",value:R.autoDownloadDocs==="always"?"Always":R.autoDownloadDocs==="wifi"?"WiFi only":"Never",onClick:()=>{const ke=["always","wifi","never"],ze=ke.indexOf(R.autoDownloadDocs);H({autoDownloadDocs:ke[(ze+1)%3]}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Media Quality"}),u.jsx(we,{icon:Wu,label:"Upload Quality",value:R.uploadQuality==="original"?"Original (Larger size)":R.uploadQuality==="standard"?"Standard (Recommended)":"Low (Smaller size)",onClick:()=>{const ke=["original","standard","low"],ze=ke.indexOf(R.uploadQuality);H({uploadQuality:ke[(ze+1)%3]}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Manage Storage"}),u.jsx(we,{icon:Xh,label:"Optimize Cloud Storage",value:"Free up Supabase storage space",onClick:async()=>{Ee(10);const{MessageService:ke}=await ss(async()=>{const{MessageService:ze}=await Promise.resolve().then(()=>Xv);return{MessageService:ze}},void 0,import.meta.url);await ke.cleanupServerStorage(),alert("Cloud storage optimized. Old media removed from server.")}}),u.jsx(we,{icon:Ll,label:"Clear Cache",value:"Free up space by clearing cache",onClick:()=>{confirm("Clear all cached data?")&&(caches.keys().then(ke=>{ke.forEach(ze=>caches.delete(ze))}),Ee(10),alert("Cache cleared."))}}),u.jsx(we,{icon:my,label:"Reset Application",value:"Delete all data and logout",danger:!0,onClick:yn}),u.jsx(we,{icon:my,label:"Clear All Data",value:"Delete all messages and media",danger:!0,onClick:yn})]})]}):L==="appearance"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Appearance",onBack:()=>z("main")}),u.jsxs("div",{className:"py-2",children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Theme"}),u.jsx("div",{className:"px-4 py-4",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:()=>{Ee(),r("light")},className:Ze("flex-1 p-4 rounded-2xl border-2 transition-all",n==="light"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-slate-700"),children:[u.jsx(ok,{className:Ze("w-8 h-8 mx-auto mb-2",n==="light"?"text-indigo-500":"text-gray-400")}),u.jsx("p",{className:Ze("text-sm font-medium text-center",n==="light"?"text-indigo-600":"dark:text-white"),children:"Light"})]}),u.jsxs("button",{onClick:()=>{Ee(),r("dark")},className:Ze("flex-1 p-4 rounded-2xl border-2 transition-all",n==="dark"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30":"border-gray-200 dark:border-slate-700"),children:[u.jsx(ES,{className:Ze("w-8 h-8 mx-auto mb-2",n==="dark"?"text-indigo-500":"text-gray-400")}),u.jsx("p",{className:Ze("text-sm font-medium text-center",n==="dark"?"text-indigo-600":"dark:text-white"),children:"Dark"})]})]})}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Chat"}),u.jsx(we,{icon:Wo,label:"Chat Wallpaper",value:"Default Galaxy",onClick:()=>{const ke=document.createElement("input");ke.type="file",ke.accept="image/*",ke.onchange=ze=>{const We=ze.target.files?.[0];if(We){const yt=new FileReader;yt.onloadend=()=>{rr.setState(ct=>({chatWallpapers:{...ct.chatWallpapers,default:yt.result}})),alert("Wallpaper updated!")},yt.readAsDataURL(We)}},ke.click(),Ee(10)}}),u.jsx(we,{icon:Yh,label:"Accent Color",value:"Indigo (Adaptive)",onClick:()=>{Ee(10),alert("Accent color adapts to your theme automatically.")}})]})]}):L==="blocked"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Blocked Users",onBack:()=>z("main")}),m.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-6",children:[u.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 dark:bg-slate-800 flex items-center justify-center mb-4",children:u.jsx(jh,{className:"w-10 h-10 text-gray-300 dark:text-gray-600"})}),u.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"No blocked users"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm",children:"Users you block will appear here"})]}):u.jsx("div",{className:"py-2",children:m.map(ke=>u.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 border-b dark:border-slate-800",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 dark:bg-slate-700"}),u.jsx("div",{className:"flex-1",children:u.jsxs("p",{className:"font-medium dark:text-white",children:["User ",ke.slice(0,8)]})}),u.jsx("button",{className:"px-4 py-2 text-red-500 text-sm font-medium",children:"Unblock"})]},ke))})]}):L==="accessibility"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Accessibility",onBack:()=>z("main")}),u.jsxs("div",{className:"py-2",children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Display & Motion"}),u.jsx(we,{icon:Zh,label:"Text Size",value:`${q.fontSize}%`,onClick:()=>{const ke=[80,100,120,140],ze=ke.indexOf(q.fontSize);W({fontSize:ke[(ze+1)%4]}),Ee(10)}}),u.jsx(we,{icon:uy,label:"Reduce Motion",value:"Minimize animations and effects",toggle:q.reduceMotion,onToggle:ke=>{W({reduceMotion:ke}),Ee(10)}}),u.jsx("div",{className:"h-4"}),u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase",children:"Feedback"}),u.jsx(we,{icon:Wu,label:"Haptic Feedback",value:"Vibrate on touch and interactions",toggle:q.hapticFeedback,onToggle:ke=>{W({hapticFeedback:ke}),Ee(10)}})]})]}):L==="help"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"Help",onBack:()=>z("main")}),u.jsxs("div",{className:"py-2",children:[u.jsx(we,{icon:oy,label:"FAQ",value:"Frequently asked questions"}),u.jsx(we,{icon:Ar,label:"Contact Us",value:"Get help from our team"}),u.jsx(we,{icon:cy,label:"Terms of Service",value:"Read our terms"}),u.jsx(we,{icon:Fs,label:"Privacy Policy",value:"How we protect your data"})]})]}):L==="about"?u.jsxs("div",{className:"min-h-full bg-white dark:bg-slate-900",children:[u.jsx(Pe,{title:"About",onBack:()=>z("main")}),u.jsxs("div",{className:"p-6 text-center",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-3xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-xl",children:u.jsx(Ar,{className:"w-12 h-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold dark:text-white mb-1",children:"Ourdm"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Private & Secure Messaging"}),u.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Version 3.0.0"}),u.jsx("div",{className:"bg-gray-100 dark:bg-slate-800 rounded-2xl p-4 text-left mb-4",children:u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed",children:"Ourdm is a production-ready, end-to-end encrypted messaging platform with voice/video calls, stories, and group chats."})}),u.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Made with  by Sameer Shah"}),u.jsx("p",{className:"text-xs text-gray-400",children:" 2025 Ourdm Privacy Systems"})]})]}):null}function t4({isLoading:a,progress:n=0,message:r="Loading...",onComplete:i}){const[l,c]=Se.useState(0),[f,m]=Se.useState(!1);return Se.useEffect(()=>{a&&(m(!1),c(0))},[a]),Se.useEffect(()=>{const y=setTimeout(()=>{l<n?c(b=>Math.min(b+1,n)):l>n&&c(b=>Math.max(b-1,n))},20);return()=>clearTimeout(y)},[l,n]),Se.useEffect(()=>{n===100&&l===100&&!f&&(m(!0),setTimeout(()=>{i?.()},500))},[n,l,f,i]),a?u.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse"}),u.jsx("div",{className:"absolute top-1/2 right-0 w-80 h-80 bg-white/10 rounded-full blur-3xl animate-pulse delay-1000"}),u.jsx("div",{className:"absolute bottom-0 left-1/2 w-72 h-72 bg-white/10 rounded-full blur-3xl animate-pulse delay-500"})]}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center space-y-8 p-8",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-24 h-24 rounded-3xl bg-white/20 backdrop-blur-sm flex items-center justify-center border-2 border-white/30 shadow-2xl",children:u.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-xl animate-pulse"})})}),u.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-pink-400 to-purple-400 rounded-full flex items-center justify-center shadow-lg animate-bounce",children:u.jsx("span",{className:"text-white text-lg",children:""})})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-6xl font-bold text-white mb-2 tabular-nums",children:[l,"%"]}),u.jsx("div",{className:"text-white/80 text-lg font-medium",children:r})]}),u.jsxs("div",{className:"w-80 max-w-full",children:[u.jsx("div",{className:"relative h-3 bg-white/20 rounded-full overflow-hidden backdrop-blur-sm",children:u.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-white to-white/80 rounded-full transition-all duration-300 ease-out shadow-lg",style:{width:`${l}%`},children:u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})}),u.jsx("div",{className:"flex justify-between mt-4 px-2",children:[0,25,50,75,100].map(y=>u.jsx("div",{className:Ze("w-2 h-2 rounded-full transition-all duration-300",l>=y?"bg-white shadow-lg scale-125":"bg-white/30")},y))})]}),u.jsx("div",{className:"flex space-x-2",children:[0,1,2].map(y=>u.jsx("div",{className:Ze("w-3 h-3 bg-white rounded-full transition-all duration-300",f?"scale-0":"animate-bounce"),style:{animationDelay:`${y*150}ms`}},y))}),f&&u.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[u.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full animate-ping"}),u.jsx("div",{className:"absolute w-24 h-24 bg-white/30 rounded-full animate-ping delay-100"}),u.jsx("div",{className:"absolute w-16 h-16 bg-white/40 rounded-full animate-ping delay-200"})]})]}),u.jsx("div",{className:"absolute bottom-8 left-0 right-0 text-center",children:u.jsx("p",{className:"text-white/60 text-sm",children:"OurDM v3.0.0  Secure Messaging"})})]}):null}function n4(a={}){const{duration:n=3e3,steps:r=100,autoIncrement:i=!0}=a,[l,c]=Se.useState(0),[f,m]=Se.useState(!1),[y,b]=Se.useState("Loading..."),v=Se.useCallback(R=>{m(!0),c(0),b(R||"Loading...")},[]),w=Se.useCallback((R,H)=>{c(Math.min(100,Math.max(0,R))),H&&b(H)},[]),_=Se.useCallback((R=1,H)=>{c(q=>Math.min(100,q+R)),H&&b(H)},[]),k=Se.useCallback(()=>{c(100),b("Complete!"),setTimeout(()=>{m(!1),c(0),b("Loading...")},500)},[]),E=Se.useCallback(()=>{c(0),m(!1),b("Loading...")},[]);return Se.useEffect(()=>{if(!i||!f||l>=100)return;const R=setInterval(()=>{c(H=>{const q=H+100/r;return q>=100?(k(),100):q})},n/r);return()=>clearInterval(R)},[i,f,l,r,n,k]),{progress:l,isLoading:f,message:y,start:v,updateProgress:w,increment:_,complete:k,reset:E}}const na=[];for(let a=0;a<256;++a)na.push((a+256).toString(16).slice(1));function a4(a,n=0){return(na[a[n+0]]+na[a[n+1]]+na[a[n+2]]+na[a[n+3]]+"-"+na[a[n+4]]+na[a[n+5]]+"-"+na[a[n+6]]+na[a[n+7]]+"-"+na[a[n+8]]+na[a[n+9]]+"-"+na[a[n+10]]+na[a[n+11]]+na[a[n+12]]+na[a[n+13]]+na[a[n+14]]+na[a[n+15]]).toLowerCase()}let Ch;const r4=new Uint8Array(16);function s4(){if(!Ch){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ch=crypto.getRandomValues.bind(crypto)}return Ch(r4)}const i4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cy={randomUUID:i4};function l4(a,n,r){a=a||{};const i=a.random??a.rng?.()??s4();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,a4(i)}function Iu(a,n,r){return Cy.randomUUID&&!a?Cy.randomUUID():l4(a)}const o4="3.0.0",Qv=()=>({vibrate:(n=10)=>{"vibrate"in navigator&&navigator.vibrate(n)}});function Th({value:a,onChange:n,onComplete:r,disabled:i=!1,onPasswordReset:l,onDataReset:c,showResetOptions:f}){const{vibrate:m}=Qv(),y=v=>{if(i)return;m(5);const w=a+v;n(w),w.length===4&&r&&setTimeout(()=>r(w),100)},b=()=>{i||(m(5),n(a.slice(0,-1)))};return u.jsxs("div",{className:"flex flex-col gap-8 max-w-xs mx-auto",children:[u.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3,4,5,6,7,8,9,"",0,"del"].map((v,w)=>u.jsx("button",{onClick:()=>{v==="del"?b():v!==""&&y(String(v))},disabled:i||v==="",className:Ze("h-16 w-16 mx-auto rounded-full flex items-center justify-center text-2xl font-medium transition-all touch-active",v===""?"opacity-0":"bg-white/10 hover:bg-white/20 active:scale-90",i&&"opacity-50"),children:v==="del"?u.jsx(Xu,{className:"w-6 h-6"}):u.jsx("span",{className:"text-white",children:v})},w))}),f&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:l,className:"text-white/40 text-sm font-medium hover:text-white/60 transition-colors mt-2",children:"Unlock with Password"}),u.jsx("button",{onClick:c,className:"text-white/20 text-[10px] font-medium hover:text-white/40 transition-colors",children:"Clear Hidden/Locked Chats"})]})]})}function c4(){const a=rr(),{profile:n,isAuthenticated:r,isAdmin:i,activeTab:l,setActiveTab:c,chats:f,setChats:m,activeChat:y,setActiveChat:b,activeCall:v,setActiveCall:w,friends:_,setFriends:k,appLockPin:E,isAppLocked:R,setIsAppLocked:H,theme:q,showInstallPrompt:W,setShowInstallPrompt:L,adminSettings:z,lockedChats:fe,hiddenChats:K,pinnedChats:X,mutedChats:O,toggleChatLock:D,toggleChatHide:Z,toggleChatPin:F,toggleChatMute:G,toggleChatArchive:ne,setAppLockPin:M,setCallLogs:J,setStories:A,allUsers:T,setAllUsers:Y,friendRequests:$,setFriendRequests:ae,broadcasts:I,setBroadcasts:B,markBroadcastRead:ue,blockedUsers:te,addMessage:he,setIsOnline:Be,isOnline:Ee,isSyncing:lt,archivedChats:Me,showHiddenChats:Ue,setShowHiddenChats:_t,blockUser:at,unblockUser:yn}=a,Fe=Se.useRef(null),{vibrate:we}=Qv(),{progress:Pe,isLoading:ke,message:ze,updateProgress:We,complete:yt,reset:ct}=n4({duration:3e3,steps:50,autoIncrement:!1}),[Mt,vt]=Se.useState(""),[gt,hn]=Se.useState(!1),[mt,Qt]=Se.useState(null),[Xt,Qn]=Se.useState({x:0,y:0}),[an,Sn]=Se.useState(null),[tn,vn]=Se.useState(""),[zt,It]=Se.useState(!1),[$e,ja]=Se.useState(null),[bn,Ha]=Se.useState(null),[He,Na]=Se.useState(!1),[wn,xn]=Se.useState(0),[Tn,Kn]=Se.useState(!1),[ga,kn]=Se.useState(""),[On,sa]=Se.useState(0),[pa,pr]=Se.useState(null),[Pt,rn]=Se.useState(""),[Qs,Aa]=Se.useState(!1),[Er,Cr]=Se.useState(0),[$a,Vt]=Se.useState(!1),[mn,Xn]=Se.useState(""),Ea=Se.useRef(0),Pl=Se.useRef(0),ya=Se.useRef(null);Se.useEffect(()=>{We(5,"Starting app..."),Xs();const je=()=>{Be(!0),n&&Oe.from("profiles").update({is_online:!0}).eq("id",n.id)},Qe=()=>{Be(!1),n&&Oe.from("profiles").update({is_online:!1,last_seen:new Date().toISOString()}).eq("id",n.id)},st=()=>{if(n){const $t=document.visibilityState==="visible";Oe.from("profiles").update({is_online:$t,last_seen:$t?void 0:new Date().toISOString()}).eq("id",n.id)}};window.addEventListener("online",je),window.addEventListener("offline",Qe),document.addEventListener("visibilitychange",st);const sn=()=>{y?(b(null),window.history.pushState(null,"")):mt?Qt(null):zt?It(!1):l!=="chats"&&c("chats")};return window.addEventListener("popstate",sn),()=>{window.removeEventListener("online",je),window.removeEventListener("offline",Qe),window.removeEventListener("popstate",sn),document.removeEventListener("visibilitychange",st),mv(),Fe.current&&(Fe.current(),Fe.current=null)}},[y,mt,zt]),Se.useEffect(()=>{document.documentElement.classList.toggle("dark",q==="dark")},[q]),Se.useEffect(()=>{const je=st=>{st.preventDefault(),ja(st),L(!0)},Qe=()=>{$e?($e.prompt(),$e.userChoice.then(st=>{st.outcome==="accepted"&&console.log("User accepted the A2HS prompt"),ja(null),L(!1)})):alert("App is already installed or your browser doesn't support installation.")};return window.addEventListener("beforeinstallprompt",je),window.addEventListener("pwa-install-prompt",Qe),()=>{window.removeEventListener("beforeinstallprompt",je),window.removeEventListener("pwa-install-prompt",Qe)}},[L]),Se.useEffect(()=>{if(n&&I.length>0){const je=I.find(Qe=>!Qe.read_by.includes(n.id));je&&Ha(je)}},[I,n]),Se.useEffect(()=>{if(pa){const je=setInterval(()=>{Date.now()>=pa&&(pr(null),sa(0))},1e3);return()=>clearInterval(je)}},[pa]);const Xs=async()=>{try{We(10,"Initializing database..."),await ev(),We(20,"Setting up media storage..."),await f2(),We(30,"Requesting storage permissions..."),await lm(),E&&H(!0),We(40,"Checking authentication...");const{data:{session:je}}=await Oe.auth.getSession();if(je?.user){We(50,"Loading user profile..."),a.setUser(je.user);const Qe=()=>{const bt=je.user.email?.split("@")[0]||"user",Ln=je.user.id.slice(0,6);return`${bt}_${Ln}`.replace(/[^a-zA-Z0-9_]/g,"").toLowerCase()},{data:st,error:sn}=await Oe.from("profiles").select("*").eq("id",je.user.id).maybeSingle();sn&&console.error("Profile fetch error:",sn);let $t=st;if(!$t){const bt=je.user.user_metadata?.display_name||je.user.user_metadata?.full_name||je.user.email?.split("@")[0]||"User",Ln={id:je.user.id,email:je.user.email||"",display_name:bt,username:Qe(),avatar_url:je.user.user_metadata?.avatar_url||null,bio:null,is_online:!0,last_seen:new Date().toISOString(),is_admin:!1,is_suspended:!1,created_at:new Date().toISOString()},{data:kt,error:_n}=await Oe.from("profiles").insert(Ln).select("*").maybeSingle();_n?console.error("Profile create error:",_n):$t=kt}$t&&(We(60,"Setting up profile..."),a.setProfile($t),a.setIsAdmin($t.is_admin||!1),a.setIsAuthenticated(!0),We(70,"Updating online status..."),await Oe.from("profiles").update({is_online:!0}).eq("id",je.user.id),We(75,"Initializing friend service..."),Ks.setCurrentUser(je.user.id),We(80,"Starting sync service..."),hv(),Hn.initialize(je.user.id),ss(()=>Promise.resolve().then(()=>Xv),void 0,import.meta.url).then(bt=>bt.MessageService.cleanupServerStorage()),We(85,"Setting up real-time updates..."),Fe.current=wv(je.user.id,{onMessage:bt=>{he(bt.chat_id,{id:bt.id,chat_id:bt.chat_id,sender_id:bt.sender_id,receiver_id:bt.receiver_id||"",content:bt.content,iv:bt.iv||"",type:bt.type,file_url:bt.file_url,thumbnail:bt.thumbnail,reply_to:bt.reply_to,status:bt.status||"sent",created_at:typeof bt.created_at=="number"?bt.created_at:Date.now()})},onFriendRequest:()=>{ir()},onFriendChange:()=>{ir()},onPresenceUpdate:(bt,Ln)=>{a.updateUser(bt,{is_online:Ln==="online",last_seen:new Date().toISOString()})}}),We(90,"Configuring call service..."),Hn.setOnIncomingCall(bt=>{w({id:bt.call_id,remoteUser:{id:bt.caller_id,display_name:bt.caller_name,avatar_url:bt.caller_avatar,username:bt.caller_name.toLowerCase()},type:bt.call_type,isIncoming:!0,status:"incoming",incomingOffer:bt.offer}),c("calls")}),We(95,"Loading user data..."),await ia($t))}We(100,"Ready!"),setTimeout(yt,500)}catch(je){console.error("Init error:",je),We(0,"Initialization failed"),setTimeout(ct,2e3)}},ia=async je=>{if(je?.id)try{const{data:Qe}=await Oe.from("friends").select("friend:profiles!friends_friend_id_fkey(*)").eq("user_id",je.id).eq("status","accepted");Qe&&k(Qe.map(_n=>_n.friend));const{data:st}=await Oe.from("friend_requests").select("*, sender:profiles!sender_id(*)").eq("receiver_id",je.id).eq("status","pending");st&&ae(st.map(_n=>({..._n,sender_id:_n.sender_id,receiver_id:_n.receiver_id,sender:_n.sender})));const{data:sn}=await Oe.from("admin_settings").select("*");if(sn){const _n={};sn.forEach(gn=>{const Fa=gn.key;let yr=gn.value;if(typeof gn.value=="string")try{yr=JSON.parse(gn.value)}catch{yr=gn.value}_n[Fa]=yr}),a.setAdminSettings(_n)}const{data:$t}=await Oe.from("broadcasts").select("*").order("created_at",{ascending:!1}).limit(10);$t&&B($t);const{data:bt}=await Oe.from("stories").select("*, user:profiles(*)").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});bt&&A(bt);const{data:Ln}=await Oe.from("call_logs").select("*, caller:profiles!call_logs_caller_id_fkey(*), receiver:profiles!call_logs_receiver_id_fkey(*)").or(`caller_id.eq.${je.id},receiver_id.eq.${je.id}`).order("created_at",{ascending:!1}).limit(50);Ln&&J(Ln);const{data:kt}=await Oe.from("profiles").select("*").order("created_at",{ascending:!1});kt&&Y(kt)}catch(Qe){console.error("Load data error:",Qe)}},ir=async()=>{n&&await ia(n)},Ka=async()=>{if($e){await $e.prompt();const{outcome:je}=await $e.userChoice;console.log("Install outcome:",je),L(!1),ja(null)}},Ht=je=>{if(pa&&Date.now()<pa){const Qe=Math.ceil((pa-Date.now())/1e3);kn(`Try again in ${Qe}s`),we([50,50,50]);return}if(je===E)we(10),H(!1),vt(""),kn(""),sa(0);else{we([100,50,100]);const Qe=On+1;sa(Qe),vt(""),Qe>=5?(pr(Date.now()+3e4),kn("Locked for 30 seconds")):kn(`Wrong PIN (${5-Qe} left)`)}},fa=je=>{if(je===E&&an){we(10);const Qe=f.find(st=>st.id===an);Qe&&b(Qe),Sn(null),vt(""),kn("")}else we([100,50,100]),kn("Wrong PIN"),vt("")},Vn=je=>{je===E?(we(10),_t(!0),Aa(!1),rn("")):(we([100,50,100]),kn("Wrong PIN"),rn(""))},on=async()=>{const je=prompt(` Verification Required: 
Enter your Account Password to reset PIN and unlock all chats:`);if(je&&n?.email){we(10);const{error:Qe}=await Oe.auth.signInWithPassword({email:n.email,password:je});Qe?(alert(" Incorrect Password"),we([100,50,100])):confirm(` Unlock System? 

PIN will be cleared. This will NOT delete messages, just reset your lock settings.`)&&(M(null),H(!1),_t(!0),alert(" System Unlocked. You can set a new PIN in settings."))}},Ca=()=>{we(20),confirm(` Reset Hidden & Locked Data? 

This will DELETE all messages and chats that were hidden or locked. This cannot be undone. 

Continue?`)&&ss(()=>Promise.resolve().then(()=>X_),void 0,import.meta.url).then(async je=>{const Qe=[...K,...fe];for(const st of Qe)await je.db.messages.where("chatId").equals(st).delete(),await je.db.chats.delete(st);m(f.filter(st=>!Qe.includes(st.id))),M(null),H(!1),alert(" Hidden & Locked data cleared.")})},Tr=je=>{we(5),fe.includes(je.id)?Sn(je.id):(b(je),a.clearUnreadCount(je.id),window.history.pushState({chat:je.id},""))},Ta=(je,Qe)=>{we(20);const st=Qe.currentTarget.getBoundingClientRect();Qn({x:Math.min(st.left,window.innerWidth-240),y:Math.min(st.top,window.innerHeight-320)}),Qt(je)},Oa=je=>{if(y){if(je==="voice"&&!z.voice_calls_enabled){alert("Voice calls are disabled by admin");return}if(je==="video"&&!z.video_calls_enabled){alert("Video calls are disabled by admin");return}we(10),w({id:Iu(),remoteUser:y.user,type:je,isIncoming:!1,status:"calling"})}},Va=je=>{if(te.includes(je.id)){alert("You have blocked this user");return}we(5);const Qe=f.find(st=>st.id===je.id);if(Qe){if(K.includes(Qe.id)&&!Ue){if(E){Aa(!0);return}Z(Qe.id)}b(Qe)}else{const st={id:je.id,order_id:je.id,user:je,unread_count:0};m([st,...f]),b(st)}It(!1),c("chats"),window.history.pushState({chat:je.id},"")},Js=je=>{ya.current?.scrollTop===0&&(Ea.current=je.touches[0].clientY),Pl.current=je.touches[0].clientX},Or=je=>{if(Ea.current>0&&ya.current?.scrollTop===0){const Qe=je.touches[0].clientY-Ea.current;Qe>0&&Qe<150&&xn(Qe)}},Ri=async()=>{if(wn>80){we(10),Na(!0);try{await ir()}finally{Na(!1)}}xn(0),Ea.current=0};if(ke)return u.jsx(t4,{isLoading:ke,progress:Pe,message:ze,onComplete:()=>{}});if(R&&E){const je=pa&&Date.now()<pa;return u.jsxs("div",{className:"h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex flex-col items-center justify-center p-6 safe-area-top safe-area-bottom",children:[u.jsx("div",{className:"w-20 h-20 mb-8 rounded-full bg-white/10 flex items-center justify-center",children:u.jsx(ra,{className:"w-10 h-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"App Locked"}),u.jsx("p",{className:"text-white/60 mb-8",children:"Enter your PIN to unlock"}),u.jsx("div",{className:"flex justify-center gap-4 mb-8",children:[0,1,2,3].map(Qe=>u.jsx("div",{className:Ze("w-4 h-4 rounded-full transition-all duration-200",Mt.length>Qe?"bg-white scale-110":"bg-white/30",ga&&"animate-shake")},Qe))}),ga&&u.jsx("p",{className:"text-red-400 text-sm mb-6 animate-fade-in",children:ga}),u.jsx(Th,{value:Mt,onChange:vt,onComplete:Ht,disabled:!!je,showResetOptions:!0,onPasswordReset:on,onDataReset:Ca}),u.jsxs("p",{className:"text-white/30 text-sm mt-12",children:["Ourdm v",o4]})]})}if(!r){const je=async($t,bt)=>{const{data:Ln,error:kt}=await Oe.auth.signInWithPassword({email:$t,password:bt});if(kt)throw kt;Ln.user&&(a.setUser(Ln.user),a.setIsAuthenticated(!0),await ir())},Qe=async($t,bt,Ln)=>{const{data:kt,error:_n}=await Oe.auth.signUp({email:$t,password:bt,options:{data:{display_name:Ln}}});if(_n)throw _n;kt.user&&(a.setUser(kt.user),a.setIsAuthenticated(!0))},st=async()=>{const{error:$t}=await Oe.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});if($t)throw $t},sn=()=>{Vt(!0)};return $a?u.jsx("div",{className:"min-h-screen bg-[#050816] flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white/[0.05] backdrop-blur-[25px] rounded-3xl p-8 w-full max-w-sm border border-white/20",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-tr from-yellow-500 to-orange-600 flex items-center justify-center",children:u.jsx(Fs,{className:"w-8 h-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-white",children:"Admin Access"}),u.jsx("p",{className:"text-white/40 text-sm mt-1",children:"Enter admin password"})]}),u.jsx("input",{type:"password",value:mn,onChange:$t=>Xn($t.target.value),placeholder:"Password",className:"w-full px-4 py-4 bg-black/30 border border-white/10 rounded-xl text-white placeholder-white/20 outline-none focus:ring-4 focus:ring-yellow-500/20 mb-4"}),u.jsx("button",{onClick:async()=>{mn==="3745"?await st():(alert(" Access Denied: Incorrect Admin Token"),we(100))},className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-orange-600 text-white rounded-xl font-bold mb-3 shadow-lg shadow-yellow-500/20 active:scale-95 transition-all",children:"Verify System Access"}),u.jsx("button",{onClick:()=>Vt(!1),className:"w-full py-3 text-white/50",children:"Back to Login"})]})}):u.jsx(wj,{onLogin:je,onSignup:Qe,onGoogleLogin:st,onAdminLogin:sn,logoClickCount:Er,setLogoClickCount:Cr})}if(v)return u.jsx(VN,{});if(an)return u.jsxs("div",{className:"h-screen bg-slate-100 dark:bg-slate-900 flex flex-col items-center justify-center p-6 safe-area-top safe-area-bottom",children:[u.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center",children:u.jsx(ra,{className:"w-10 h-10 text-indigo-500"})}),u.jsx("h3",{className:"text-xl font-bold mb-2 dark:text-white",children:"Chat Locked"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8",children:"Enter PIN to unlock"}),u.jsx("div",{className:"flex justify-center gap-4 mb-6",children:[0,1,2,3].map(je=>u.jsx("div",{className:Ze("w-4 h-4 rounded-full transition-all",Mt.length>je?"bg-indigo-500 scale-110":"bg-gray-300 dark:bg-slate-600")},je))}),ga&&u.jsx("p",{className:"text-red-500 text-sm mb-4",children:ga}),u.jsx(Th,{value:Mt,onChange:vt,onComplete:fa,showResetOptions:!0,onPasswordReset:on,onDataReset:Ca}),u.jsx("button",{onClick:()=>{Sn(null),vt(""),kn("")},className:"px-8 py-3 text-gray-500 dark:text-gray-400 font-medium",children:"Cancel"})]});if(y)return u.jsxs(u.Fragment,{children:[u.jsx(KN,{chat:y,onBack:()=>{b(null),window.history.back()},onCall:Oa,onOpenMenu:()=>Qt(y)}),mt&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>Qt(null),children:u.jsxs("div",{className:"absolute bg-white dark:bg-slate-800 rounded-2xl shadow-2xl py-2 min-w-[240px] animate-scale-in overflow-hidden",style:{left:Math.min(Xt.x,window.innerWidth-260),top:Math.min(Xt.y,window.innerHeight-400)},onClick:je=>je.stopPropagation(),children:[u.jsx("div",{className:"bottom-sheet-handle"}),[{icon:fe.includes(mt.id)?u.jsx(ra,{className:"w-5 h-5"}):u.jsx(ra,{className:"w-5 h-5"}),label:fe.includes(mt.id)?"Unlock Chat":"Lock Chat",color:"text-indigo-500",action:()=>{D(mt.id),Qt(null)}},{icon:K.includes(mt.id)?u.jsx(Ti,{className:"w-5 h-5"}):u.jsx(Ju,{className:"w-5 h-5"}),label:K.includes(mt.id)?"Unhide Chat":"Hide Chat",color:"text-purple-500",action:()=>{Z(mt.id),b(null),Qt(null)}},{icon:u.jsx("span",{className:"text-lg",children:""}),label:X.includes(mt.id)?"Unpin Chat":"Pin Chat",color:"",action:()=>{F(mt.id),Qt(null)}},{icon:u.jsx("span",{className:"text-lg",children:""}),label:O.includes(mt.id)?"Unmute":"Mute",color:"",action:()=>{G(mt.id),Qt(null)}},{icon:u.jsx(Vh,{className:"w-5 h-5"}),label:Me.includes(mt.id)?"Unarchive":"Archive",color:"text-orange-500",action:()=>{ne(mt.id),b(null),Qt(null)}},{icon:u.jsx(ra,{className:"w-5 h-5"}),label:fe.includes(mt.id)?"Unlock Chat":"Lock Chat",color:"text-indigo-500",action:()=>{D(mt.id),Qt(null)}},{icon:u.jsx(Qu,{className:"w-5 h-5"}),label:te.includes(mt.id)?"Unblock":"Block",color:"text-red-500",action:()=>{te.includes(mt.id)?yn(mt.id):at(mt.id),Qt(null)}}].map((je,Qe)=>u.jsxs("button",{onClick:()=>{we(5),je.action()},className:"w-full px-5 py-4 flex items-center gap-4 active:bg-gray-100 dark:active:bg-slate-700 transition-colors",children:[u.jsx("span",{className:je.color,children:je.icon}),u.jsx("span",{className:"dark:text-white font-medium",children:je.label})]},Qe)),u.jsx("div",{className:"border-t dark:border-slate-700 my-1"}),u.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this chat and all messages?")&&(m(f.filter(je=>je.id!==mt.id)),we(20)),Qt(null)},className:"w-full px-5 py-4 flex items-center gap-4 active:bg-red-50 dark:active:bg-red-900/20 text-red-500",children:[u.jsx(Ll,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Delete Chat"})]})]})})]});if(l==="admin"&&i)return u.jsx(FN,{onBack:()=>c("settings")});const St=()=>{if(Tn)return"Archived";if(Ue)return"Hidden Chats";switch(l){case"chats":return"OurDM";case"stories":return"Stories";case"friends":return"Friends";case"calls":return"Calls";case"settings":return"Settings";default:return"OurDM"}};return u.jsxs("div",{className:Ze("h-screen flex flex-col overflow-hidden",q==="dark"?"bg-slate-900 text-white":"bg-gray-50"),children:[u.jsxs("header",{className:"bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 text-white flex-shrink-0 safe-area-top relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-10",children:[u.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white rounded-full blur-3xl"}),u.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white rounded-full blur-2xl"}),u.jsx("div",{className:"absolute bottom-0 left-1/2 w-40 h-40 bg-white rounded-full blur-3xl"})]}),u.jsxs("div",{className:"relative px-4 py-4 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[Tn||Ue?u.jsx("button",{onClick:()=>{Kn(!1),_t(!1)},className:"p-2 -ml-2 rounded-full active:bg-white/20 backdrop-blur-sm transition-all",children:u.jsx(Xu,{className:"w-6 h-6"})}):u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center border border-white/30 shadow-lg",children:u.jsx(Ar,{className:"w-6 h-6"})}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse"})]}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:St()}),u.jsx("p",{className:"text-xs text-white/80 flex items-center gap-2 font-medium",children:Ee?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),lt?"Syncing...":"Connected"]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),"Offline"]})})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[(W||$e)&&u.jsxs("button",{onClick:Ka,className:"px-4 py-2 bg-white text-indigo-600 rounded-2xl text-sm font-bold flex items-center gap-2 active:scale-95 transition-all shadow-xl animate-bounce",children:[u.jsx(Ml,{className:"w-4 h-4"}),u.jsx("span",{children:"Install"})]}),u.jsx("button",{onClick:()=>{we(5),It(!0)},className:"p-3 rounded-2xl active:bg-white/20 backdrop-blur-sm touch-target transition-all hover:scale-105",children:u.jsx(lc,{className:"w-5 h-5"})}),i&&u.jsx("button",{onClick:()=>{we(5),c("admin")},className:"p-2 bg-yellow-400 text-yellow-900 rounded-2xl touch-target shadow-lg hover:scale-105 transition-all",children:u.jsx(Fs,{className:"w-5 h-5"})})]})]})]}),$.length>0&&l==="chats"&&!Tn&&!Ue&&u.jsxs("div",{className:"px-4 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 border-b border-indigo-100 dark:border-indigo-800/50 flex items-center gap-4 flex-shrink-0 relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 opacity-5",children:[u.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-indigo-500 rounded-full blur-2xl"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-purple-500 rounded-full blur-xl"})]}),u.jsx("div",{className:"relative w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg",children:u.jsx(Ci,{className:"w-6 h-6 text-white animate-bounce"})}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsxs("p",{className:"text-indigo-900 dark:text-indigo-100 font-bold text-sm",children:[$.length," friend request",$.length>1?"s":""]}),u.jsx("p",{className:"text-indigo-600 dark:text-indigo-300 text-xs",children:"Tap to view and respond"})]}),u.jsxs("button",{onClick:()=>{we(5),c("friends")},className:"relative px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-bold rounded-2xl shadow-lg active:scale-95 transition-all hover:shadow-xl",children:["View",u.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white opacity-0 hover:opacity-20 transition-opacity"})]})]}),wn>0&&l==="chats"&&u.jsxs("div",{className:"flex items-center justify-center bg-gradient-to-b from-indigo-50 to-purple-50 dark:from-slate-800 dark:to-slate-700 overflow-hidden transition-all flex-shrink-0 relative",style:{height:Math.min(wn*.6,80)},children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/5 to-purple-500/5 animate-pulse"}),u.jsxs("div",{className:"relative flex items-center gap-3",children:[u.jsx(Xh,{className:Ze("w-7 h-7 text-indigo-600 dark:text-indigo-400 transition-all drop-shadow-md",wn>80?"animate-spin":""),style:{transform:`rotate(${wn*3}deg)`}}),wn>80&&u.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-bold text-sm animate-fade-in",children:"Release to refresh"})]})]}),u.jsxs("div",{ref:ya,className:"flex-1 overflow-y-auto overflow-x-hidden scrollbar-hide",onTouchStart:Js,onTouchMove:Or,onTouchEnd:Ri,children:[He&&u.jsxs("div",{className:"flex items-center justify-center py-4 bg-gray-100 dark:bg-slate-800",children:[u.jsx(Xh,{className:"w-6 h-6 text-indigo-600 animate-spin"}),u.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Refreshing..."})]}),l==="chats"&&u.jsxs("div",{className:"pb-24",children:[!Tn&&!Ue&&u.jsxs("div",{className:"flex gap-3 px-4 py-4 overflow-x-auto scrollbar-hide",children:[Me.length>0&&u.jsxs("button",{onClick:()=>{we(5),Kn(!0)},className:"flex items-center gap-3 px-5 py-3 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl whitespace-nowrap shadow-md hover:shadow-lg transition-all group active:scale-95",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-xl flex items-center justify-center shadow-sm",children:u.jsx(Vh,{className:"w-4 h-4 text-white"})}),u.jsxs("div",{className:"text-left",children:[u.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-200 block",children:[Me.length," Archived"]}),u.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"View archived chats"})]})]}),K.length>0&&E&&u.jsxs("button",{onClick:()=>{we(5),Ue?_t(!1):Aa(!0)},className:"flex items-center gap-3 px-5 py-3 bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-900/30 dark:to-purple-800/50 rounded-2xl whitespace-nowrap shadow-md hover:shadow-lg transition-all group active:scale-95",children:[u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-purple-700 rounded-xl flex items-center justify-center shadow-sm",children:u.jsx(ra,{className:"w-4 h-4 text-white"})}),u.jsxs("div",{className:"text-left",children:[u.jsxs("span",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 block",children:[K.length," Hidden"]}),u.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Private chats"})]})]})]}),u.jsx(zN,{onSelectChat:Tr,onLongPress:Ta})]}),l==="stories"&&z.stories_enabled&&u.jsx("div",{className:"pb-24",children:u.jsx(QN,{currentUserId:n?.id||"",userAvatar:n?.avatar_url||"",userName:n?.display_name||"User"})}),l==="friends"&&u.jsx("div",{className:"pb-24",children:u.jsx(WN,{onStartChat:Va})}),l==="calls"&&u.jsx("div",{className:"pb-24",children:u.jsx(ZN,{onStartCall:(je,Qe)=>{const st={id:je.id,order_id:je.id,user:je,unread_count:0};b(st),Oa(Qe)}})}),l==="settings"&&u.jsx("div",{className:"pb-24",children:u.jsx(e4,{})})]}),l==="chats"&&!Tn&&!Ue&&u.jsxs("button",{onClick:()=>{we(5),It(!0)},className:"fixed bottom-24 right-6 w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full flex items-center justify-center shadow-2xl hover:shadow-3xl active:scale-95 transition-all z-30 group",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-full animate-ping opacity-20"}),u.jsx(em,{className:"w-7 h-7 text-white relative z-10 group-hover:rotate-12 transition-transform"}),u.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-indigo-400/20 to-purple-400/20 opacity-0 group-hover:opacity-100 transition-opacity"})]}),u.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-t dark:border-slate-800 safe-area-bottom shadow-[0_-2px_15px_rgba(0,0,0,0.05)]",children:u.jsx("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto px-4",children:[{id:"chats",icon:Ar,label:"Chats",badge:f.reduce((je,Qe)=>je+(Qe.unread_count||0),0)},{id:"friends",icon:zl,label:"Friends",badge:$.length},{id:"calls",icon:Pa,label:"Calls"},{id:"settings",icon:Jh,label:"Settings"}].map(({id:je,icon:Qe,label:st,badge:sn})=>u.jsxs("button",{onClick:()=>{we(5),c(je)},className:Ze("flex flex-col items-center justify-center min-w-[64px] h-full rounded-xl transition-all relative",l===je?"text-indigo-600 dark:text-indigo-400":"text-gray-500 dark:text-gray-400"),children:[l===je&&u.jsx("div",{className:"absolute inset-x-1 inset-y-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-xl animate-scale-in"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsxs("div",{className:"relative",children:[u.jsx(Qe,{className:Ze("w-6 h-6 transition-transform",l===je&&"scale-110")}),sn!==void 0&&sn>0&&u.jsx("span",{className:"absolute -top-1.5 -right-2.5 min-w-[18px] h-[18px] px-1 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border-2 border-white dark:border-slate-900 badge-pulse",children:sn>99?"99+":sn})]}),u.jsx("span",{className:Ze("text-[10px] mt-1 font-bold",l===je?"opacity-100":"opacity-70"),children:st})]})]},je))})}),zt&&u.jsxs("div",{className:"fixed inset-0 bg-white dark:bg-slate-900 z-50 flex flex-col animate-slide-in-right",children:[u.jsxs("div",{className:"px-4 py-3 flex items-center gap-3 border-b dark:border-slate-700 safe-area-top",children:[u.jsx("button",{onClick:()=>{we(5),It(!1),vn("")},className:"p-2 rounded-full active:bg-gray-100 dark:active:bg-slate-800",children:u.jsx(Xu,{className:"w-6 h-6 dark:text-white"})}),u.jsx("input",{type:"text",placeholder:"Search users...",value:tn,onChange:je=>vn(je.target.value),className:"flex-1 px-4 py-3 bg-gray-100 dark:bg-slate-800 rounded-full focus:outline-none dark:text-white text-base",autoFocus:!0})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto",children:[T.filter(je=>{const Qe=tn.trim().toLowerCase();if(!Qe)return!0;const st=`${je.id} ${je.display_name} ${je.username}`.toLowerCase();return Qe.split(/\s+/).filter(Boolean).every($t=>st.includes($t))}).filter(je=>je.id!==n?.id&&!te.includes(je.id)).map(je=>u.jsxs("div",{onClick:()=>Va(je),className:"flex items-center gap-4 p-4 active:bg-gray-50 dark:active:bg-slate-800 cursor-pointer border-b dark:border-slate-800",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:je.avatar_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${je.username}`,alt:"",className:"w-14 h-14 rounded-full object-cover"}),je.is_online&&u.jsx("div",{className:"online-indicator"})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold dark:text-white truncate",children:je.display_name}),u.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["@",je.username]})]}),_.some(Qe=>Qe.id===je.id)?u.jsx("span",{className:"text-xs text-green-500 font-medium bg-green-50 dark:bg-green-900/30 px-3 py-1 rounded-full",children:"Friend"}):u.jsx("button",{onClick:async Qe=>{Qe.stopPropagation();const st=await Ks.sendFriendRequestByUsername(je.username);st.success?alert("Friend request sent"):alert(st.error||"Failed to send friend request")},className:"p-3 bg-indigo-600 text-white rounded-full active:bg-indigo-700",children:u.jsx(em,{className:"w-5 h-5"})})]},je.id)),tn&&T.filter(je=>{const Qe=tn.trim().toLowerCase(),st=`${je.id} ${je.display_name} ${je.username}`.toLowerCase();return Qe.split(/\s+/).filter(Boolean).every($t=>st.includes($t))}).length===0&&u.jsxs("div",{className:"p-8 text-center",children:[u.jsx(lc,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),u.jsx("p",{className:"text-gray-500",children:"No users found"}),u.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try a different search term"})]})]})]}),gt&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 w-full max-w-sm animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center",children:u.jsx(ra,{className:"w-8 h-8 text-indigo-500"})}),u.jsx("h3",{className:"text-xl font-bold text-center mb-2 dark:text-white",children:"Set App Lock PIN"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:"Create a 4-digit PIN to secure your app"}),u.jsx("div",{className:"flex justify-center gap-4 mb-6",children:[0,1,2,3].map(je=>u.jsx("div",{className:Ze("w-4 h-4 rounded-full transition-all",Mt.length>je?"bg-indigo-500 scale-110":"bg-gray-200 dark:bg-slate-600")},je))}),u.jsx("input",{type:"password",inputMode:"numeric",maxLength:4,value:Mt,onChange:je=>vt(je.target.value.replace(/\D/g,"")),className:"w-full text-center text-3xl tracking-[1em] bg-gray-50 dark:bg-slate-700 border-2 border-gray-200 dark:border-slate-600 rounded-2xl p-4 mb-6 dark:text-white focus:outline-none focus:border-indigo-500",placeholder:"",autoFocus:!0}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{hn(!1),vt("")},className:"flex-1 py-4 bg-gray-100 dark:bg-slate-700 rounded-2xl font-medium dark:text-white active:scale-[0.98]",children:"Cancel"}),u.jsx("button",{onClick:()=>{Mt.length===4&&(we(10),M(Mt),vt(""),hn(!1))},disabled:Mt.length!==4,className:"flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-medium disabled:opacity-50 active:scale-[0.98]",children:"Set PIN"})]})]})}),bn&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl sm:rounded-3xl p-6 w-full max-w-sm animate-slide-up",children:[u.jsx("div",{className:"bottom-sheet-handle sm:hidden"}),u.jsx("div",{className:Ze("w-14 h-14 rounded-2xl flex items-center justify-center mb-4",bn.type==="urgent"?"bg-red-100 dark:bg-red-900/30":bn.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"),children:u.jsx(Ci,{className:Ze("w-7 h-7",bn.type==="urgent"?"text-red-600":bn.type==="warning"?"text-yellow-600":"text-blue-600")})}),u.jsx("h3",{className:"text-xl font-bold mb-2 dark:text-white",children:bn.title}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 whitespace-pre-wrap leading-relaxed",children:bn.message}),u.jsx("p",{className:"text-xs text-gray-400 mb-6",children:is(new Date(bn.created_at),"MMM d, yyyy  HH:mm")}),u.jsx("button",{onClick:()=>{we(5),ue(bn.id),Ha(null)},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-medium active:scale-[0.98]",children:"Got it"})]})}),Qs&&u.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 w-full max-w-sm animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center",children:u.jsx(ra,{className:"w-8 h-8 text-purple-500"})}),u.jsx("h3",{className:"text-xl font-bold text-center mb-2 dark:text-white",children:"Hidden Chats"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6",children:"Enter PIN to view hidden chats"}),u.jsx("div",{className:"flex justify-center gap-4 mb-4",children:[0,1,2,3].map(je=>u.jsx("div",{className:Ze("w-4 h-4 rounded-full transition-all",Pt.length>je?"bg-purple-500 scale-110":"bg-gray-200 dark:bg-slate-600")},je))}),ga&&u.jsx("p",{className:"text-red-500 text-sm text-center mb-4 animate-shake",children:ga}),u.jsx(Th,{value:Pt,onChange:rn,onComplete:Vn,showResetOptions:!0,onPasswordReset:on,onDataReset:Ca}),u.jsx("button",{onClick:()=>{Aa(!1),rn(""),kn("")},className:"w-full py-4 bg-gray-100 dark:bg-slate-700 rounded-2xl font-medium dark:text-white active:scale-[0.98]",children:"Cancel"})]})})]})}"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const a=await navigator.serviceWorker.register("/sw.js");if(console.log("SW registered:",a.scope),navigator.storage&&navigator.storage.persist){const n=await navigator.storage.persist();console.log("Storage persisted:",n)}if("Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),"periodicSync"in a)try{await a.periodicSync.register("check-messages",{minInterval:60*1e3})}catch{console.log("Periodic sync not supported")}}catch(a){console.error("SW registration failed:",a)}});window.addEventListener("online",()=>{document.body.classList.remove("offline"),console.log("Back online")});window.addEventListener("offline",()=>{document.body.classList.add("offline"),console.log("Gone offline")});kw.createRoot(document.getElementById("root")).render(u.jsx(Se.StrictMode,{children:u.jsx(c4,{})}));class u4{async sendMessage(n,r,i,l,c="text",f){const m=Date.now(),y={id:Iu(),chat_id:n,sender_id:r,receiver_id:i,content:l,type:c,status:"pending",created_at:m,reactions:{},...f},b={id:y.id,chat_id:y.chat_id,sender_id:y.sender_id,receiver_id:y.receiver_id,content:y.content,iv:"",type:y.type,file_url:y.file_url,thumbnail:y.thumbnail,reply_to:y.reply_to?JSON.stringify(y.reply_to):void 0,forwarded_from:y.forwarded_from,status:y.status,reactions:y.reactions,is_deleted:y.is_deleted,deleted_for_everyone:y.deleted_for_everyone,edited_at:y.edited_at,expires_at:y.expires_at,synced_to_server:!1,deleted_from_server:!1,created_at:y.created_at,updated_at:m};await Ae.messages.add(b);try{await Oe.from("pending_messages").insert({id:y.id,sender_id:y.sender_id,receiver_id:y.receiver_id,content:y.content,type:y.type,reply_to:y.reply_to,forwarded_from:y.forwarded_from,file_url:y.file_url,thumbnail:y.thumbnail,scheduled_for:y.scheduled_for?new Date(y.scheduled_for).toISOString():null,expires_at:y.expires_at?new Date(y.expires_at).toISOString():null}),y.status="sent",await Si(y.id,{status:"sent",synced_to_server:!0})}catch(v){console.error("Error sending message:",v)}return y}async replyToMessage(n,r,i,l,c){return this.sendMessage(n,r,i,l,"text",{reply_to:{id:c.id,content:c.content.substring(0,100),senderName:c.sender_id,type:c.type}})}async forwardMessage(n,r,i,l){return this.sendMessage(r,l,i,n.content,n.type,{file_url:n.file_url,thumbnail:n.thumbnail,location:n.location,contact:n.contact,forwarded_from:n.sender_id})}async getMessages(n,r=50,i){return(await Ae.messages.where("chat_id").equals(n).reverse().limit(r).toArray()).filter(m=>m.is_deleted&&!m.deleted_for_everyone?!0:!(i&&(m.created_at??0)>=i)).reverse().map(this.dbToMessage)}async searchMessages(n,r){return(await Ae.messages.where("chat_id").equals(n).toArray()).filter(c=>!(c.is_deleted??!1)&&c.content.toLowerCase().includes(r.toLowerCase())).map(this.dbToMessage)}async addReaction(n,r,i){const l=await Ae.messages.get(n);if(!l)throw new Error("Message not found");const c=l.reactions||{};for(const f in c){const m=c[f].indexOf(r);m>-1&&(c[f].splice(m,1),c[f].length===0&&delete c[f])}c[i]||(c[i]=[]),c[i].includes(r)||c[i].push(r),await Si(n,{reactions:c}),await Oe.from("message_reactions").upsert({message_id:n,user_id:r,emoji:i})}async removeReaction(n,r){const i=await Ae.messages.get(n);if(!i)throw new Error("Message not found");const l=i.reactions||{};for(const c in l){const f=l[c].indexOf(r);f>-1&&(l[c].splice(f,1),l[c].length===0&&delete l[c])}await Si(n,{reactions:l}),await Oe.from("message_reactions").delete().eq("message_id",n).eq("user_id",r)}async editMessage(n,r,i){const l=await Ae.messages.get(n);if(!l)throw new Error("Message not found");if(l.sender_id!==r)throw new Error("Cannot edit others messages");if(l.type!=="text")throw new Error("Can only edit text messages");const c=900*1e3;if(Date.now()-l.created_at>c)throw new Error("Edit window expired");await Si(n,{content:i,edited_at:Date.now()}),await Oe.from("pending_messages").update({content:i,is_edited:!0,edited_at:new Date().toISOString()}).eq("id",n)}async deleteMessageAction(n,r,i){const l=await Ae.messages.get(n);if(!l)throw new Error("Message not found");if(i==="everyone"){if(l.sender_id!==r)throw new Error("Can only delete your own messages for everyone");const c=3600*1e3;if(Date.now()-(l.created_at||0)>c)throw new Error("Delete window expired");await $h(n,!0),await Oe.from("pending_messages").update({is_deleted:!0,content:"This message was deleted"}).eq("id",n)}else await $h(n,!1)}async starMessage(n){if(!await Ae.messages.get(n))throw new Error("Message not found");const i=await this.getStarredMessageIds();i.includes(n)||(i.push(n),localStorage.setItem("starred_messages",JSON.stringify(i)))}async unstarMessage(n){const i=(await this.getStarredMessageIds()).filter(l=>l!==n);localStorage.setItem("starred_messages",JSON.stringify(i))}async getStarredMessageIds(){const n=localStorage.getItem("starred_messages");return n?JSON.parse(n):[]}async getStarredMessages(){const n=await this.getStarredMessageIds(),r=[];for(const i of n){const l=await Ae.messages.get(i);if(l&&!l.is_deleted){const c=this.dbToMessage(l);c.is_starred=!0,r.push(c)}}return r}async pinMessage(n,r){const i=this.getPinnedMessageIds(n);!i.includes(r)&&i.length<3&&(i.push(r),localStorage.setItem(`pinned_messages_${n}`,JSON.stringify(i)))}async unpinMessage(n,r){const l=this.getPinnedMessageIds(n).filter(c=>c!==r);localStorage.setItem(`pinned_messages_${n}`,JSON.stringify(l))}getPinnedMessageIds(n){const r=localStorage.getItem(`pinned_messages_${n}`);return r?JSON.parse(r):[]}async getPinnedMessages(n){const r=this.getPinnedMessageIds(n),i=[];for(const l of r){const c=await Ae.messages.get(l);if(c&&!(c.is_deleted??!1)){const f=this.dbToMessage(c);f.is_pinned=!0,i.push(f)}}return i}async scheduleMessage(n,r,i,l,c){return this.sendMessage(n,r,i,l,"text",{is_scheduled:!0,scheduled_for:c,status:"pending"})}async setDisappearingMessages(n,r){localStorage.setItem(`disappearing_${n}`,r?r.toString():"")}getDisappearingDuration(n){const r=localStorage.getItem(`disappearing_${n}`);return r?parseInt(r):null}async clearChat(n,r=!1){if(r){const i=await Ae.messages.where("chat_id").equals(n).toArray();for(const l of i)await this.deleteMessageAction(l.id,l.sender_id,"everyone")}else await Ae.messages.where("chat_id").equals(n).delete()}async exportChat(n){const r=await this.getMessages(n,1e4);let i="";for(const l of r){const c=new Date(l.created_at).toLocaleString(),f=l.sender_id;i+=`[${c}] ${f}: ${l.content}
`}return i}async markAsDelivered(n){for(const r of n)await Si(r,{status:"delivered"});await Oe.from("delivery_receipts").insert(n.map(r=>({id:Iu(),message_id:r,status:"delivered"})))}async markAsRead(n,r){const i=await Ae.messages.where("chat_id").equals(n).filter(l=>l.sender_id!==r&&l.status!=="read").toArray();for(const l of i)await Si(l.id,{status:"read"});await Oe.from("pending_messages").update({status:"read"}).eq("chat_id",n).neq("sender_id",r),i.length>0&&(await Oe.from("pending_messages").delete().in("id",i.map(l=>l.id)),await Oe.from("delivery_receipts").insert(i.map(l=>({id:Iu(),message_id:l.id,status:"read"}))))}async sendVoiceMessage(n,r,i,l,c){const f=`voice_${Date.now()}.webm`,{data:m}=await Oe.storage.from("chat-media").upload(`voice/${r}/${f}`,l),y=m?.path?Oe.storage.from("chat-media").getPublicUrl(m.path).data.publicUrl:"";return this.sendMessage(n,r,i," Voice message","voice",{file_url:y,duration:c})}async sendLocation(n,r,i,l,c,f,m){return this.sendMessage(n,r,i," Location","location",{location:{latitude:l,longitude:c,name:f,address:m}})}async sendContact(n,r,i,l,c,f){return this.sendMessage(n,r,i,` ${l}`,"contact",{contact:{name:l,phone:c,email:f}})}dbToMessage(n){return{id:n.id,chat_id:n.chat_id,sender_id:n.sender_id,receiver_id:n.receiver_id||"",content:n.content,type:n.type,status:n.status,created_at:n.created_at||Date.now(),reply_to:n.reply_to?JSON.parse(n.reply_to):void 0,forwarded_from:n.forwarded_from,reactions:n.reactions,is_edited:!!n.edited_at,edited_at:n.edited_at,is_deleted:n.is_deleted,deleted_for_everyone:n.deleted_for_everyone,file_url:n.file_url,thumbnail:n.thumbnail,expires_at:n.expires_at}}async cleanupServerStorage(){try{const{data:n}=await Oe.from("pending_messages").select("id, file_url").not("file_url","is",null).lt("created_at",new Date(Date.now()-864e5).toISOString());if(n&&n.length>0){for(const r of n)if(r.file_url){const l=new URL(r.file_url).pathname.split("/storage/v1/object/public/chat-media/")[1];l&&(await Oe.storage.from("chat-media").remove([l]),await Oe.from("pending_messages").update({file_url:null}).eq("id",r.id))}console.log(` Storage Cleanup: Removed ${n.length} old media files from server.`)}}catch(n){console.error("Storage cleanup failed:",n)}}}const d4=new u4,Xv=Object.freeze(Object.defineProperty({__proto__:null,MessageService:d4},Symbol.toStringTag,{value:"Module"}));</script>
    <style rel="stylesheet" crossorigin>@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-pan-x:initial;--tw-pan-y:initial;--tw-pinch-zoom:initial;--tw-space-y-reverse:0;--tw-space-x-reverse:0;--tw-divide-x-reverse:0;--tw-border-style:solid;--tw-divide-y-reverse:0;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-ordinal:initial;--tw-slashed-zero:initial;--tw-numeric-figure:initial;--tw-numeric-spacing:initial;--tw-numeric-fraction:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-serif:ui-serif,Georgia,Cambria,"Times New Roman",Times,serif;--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-50:oklch(97.1% .013 17.38);--color-red-100:oklch(93.6% .032 17.717);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-900:oklch(39.6% .141 25.723);--color-orange-50:oklch(98% .016 73.684);--color-orange-100:oklch(95.4% .038 75.164);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-orange-600:oklch(64.6% .222 41.116);--color-orange-700:oklch(55.3% .195 38.402);--color-orange-900:oklch(40.8% .123 38.172);--color-yellow-50:oklch(98.7% .026 102.212);--color-yellow-100:oklch(97.3% .071 103.193);--color-yellow-300:oklch(90.5% .182 98.111);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-yellow-600:oklch(68.1% .162 75.834);--color-yellow-700:oklch(55.4% .135 66.442);--color-yellow-900:oklch(42.1% .095 57.708);--color-green-50:oklch(98.2% .018 155.826);--color-green-100:oklch(96.2% .044 156.743);--color-green-300:oklch(87.1% .15 154.449);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-green-900:oklch(39.3% .095 152.535);--color-emerald-600:oklch(59.6% .145 163.225);--color-cyan-400:oklch(78.9% .154 211.53);--color-cyan-500:oklch(71.5% .143 215.221);--color-cyan-600:oklch(60.9% .126 221.723);--color-cyan-700:oklch(52% .105 223.128);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-300:oklch(80.9% .105 251.813);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-900:oklch(37.9% .146 265.522);--color-indigo-50:oklch(96.2% .018 272.314);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-200:oklch(87% .065 274.039);--color-indigo-300:oklch(78.5% .115 274.713);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-indigo-800:oklch(39.8% .195 277.366);--color-indigo-900:oklch(35.9% .144 278.697);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-300:oklch(82.7% .119 306.383);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-purple-700:oklch(49.6% .265 301.924);--color-purple-800:oklch(43.8% .218 303.724);--color-purple-900:oklch(38.1% .176 304.987);--color-pink-400:oklch(71.8% .202 349.761);--color-pink-500:oklch(65.6% .241 354.308);--color-pink-600:oklch(59.2% .249 .584);--color-pink-800:oklch(45.9% .187 3.815);--color-rose-600:oklch(58.6% .253 17.585);--color-rose-700:oklch(51.4% .222 16.935);--color-slate-100:oklch(96.8% .007 247.896);--color-slate-500:oklch(55.4% .046 257.417);--color-slate-600:oklch(44.6% .043 257.281);--color-slate-700:oklch(37.2% .044 257.287);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-sm:24rem;--container-md:28rem;--container-lg:32rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--text-5xl:3rem;--text-5xl--line-height:1;--text-6xl:3.75rem;--text-6xl--line-height:1;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-black:900;--tracking-tighter:-.05em;--tracking-tight:-.025em;--tracking-wide:.025em;--tracking-wider:.05em;--tracking-widest:.1em;--leading-tight:1.25;--leading-relaxed:1.625;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--radius-3xl:1.5rem;--drop-shadow-md:0 3px 3px #0000001f;--drop-shadow-lg:0 4px 4px #00000026;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-ping:ping 1s cubic-bezier(0,0,.2,1)infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--animate-bounce:bounce 1s infinite;--blur-sm:8px;--blur-md:12px;--blur-lg:16px;--blur-xl:24px;--blur-2xl:40px;--blur-3xl:64px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}}@layer components;@layer utilities{.pointer-events-none{pointer-events:none}.collapse{visibility:collapse}.invisible{visibility:hidden}.visible{visibility:visible}.sr-only{clip-path:inset(50%);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}.not-sr-only{clip-path:none;white-space:normal;width:auto;height:auto;margin:0;padding:0;position:static;overflow:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.-inset-1{inset:calc(var(--spacing)*-1)}.inset-0{inset:calc(var(--spacing)*0)}.inset-x-0{inset-inline:calc(var(--spacing)*0)}.inset-x-1{inset-inline:calc(var(--spacing)*1)}.inset-y-0{inset-block:calc(var(--spacing)*0)}.inset-y-2{inset-block:calc(var(--spacing)*2)}.-top-1{top:calc(var(--spacing)*-1)}.-top-1\.5{top:calc(var(--spacing)*-1.5)}.-top-2{top:calc(var(--spacing)*-2)}.top-0{top:calc(var(--spacing)*0)}.top-0\.5{top:calc(var(--spacing)*.5)}.top-1{top:calc(var(--spacing)*1)}.top-1\/2{top:50%}.top-4{top:calc(var(--spacing)*4)}.top-6{top:calc(var(--spacing)*6)}.top-12{top:calc(var(--spacing)*12)}.top-16{top:calc(var(--spacing)*16)}.top-\[15\%\]{top:15%}.top-\[30\%\]{top:30%}.-right-0{right:calc(var(--spacing)*0)}.-right-1{right:calc(var(--spacing)*-1)}.-right-2{right:calc(var(--spacing)*-2)}.-right-2\.5{right:calc(var(--spacing)*-2.5)}.right-0{right:calc(var(--spacing)*0)}.right-0\.5{right:calc(var(--spacing)*.5)}.right-1{right:calc(var(--spacing)*1)}.right-3{right:calc(var(--spacing)*3)}.right-4{right:calc(var(--spacing)*4)}.right-6{right:calc(var(--spacing)*6)}.right-\[8\%\]{right:8%}.-bottom-0{bottom:calc(var(--spacing)*0)}.-bottom-1{bottom:calc(var(--spacing)*-1)}.-bottom-2{bottom:calc(var(--spacing)*-2)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-1{bottom:calc(var(--spacing)*1)}.bottom-2{bottom:calc(var(--spacing)*2)}.bottom-6{bottom:calc(var(--spacing)*6)}.bottom-8{bottom:calc(var(--spacing)*8)}.bottom-24{bottom:calc(var(--spacing)*24)}.bottom-\[15\%\]{bottom:15%}.bottom-\[30\%\]{bottom:30%}.bottom-full{bottom:100%}.left-0{left:calc(var(--spacing)*0)}.left-0\.5{left:calc(var(--spacing)*.5)}.left-1{left:calc(var(--spacing)*1)}.left-1\/2{left:50%}.left-2{left:calc(var(--spacing)*2)}.left-3{left:calc(var(--spacing)*3)}.left-4{left:calc(var(--spacing)*4)}.left-\[8\%\]{left:8%}.isolate{isolation:isolate}.isolation-auto{isolation:auto}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.mx-2{margin-inline:calc(var(--spacing)*2)}.mx-3{margin-inline:calc(var(--spacing)*3)}.mx-auto{margin-inline:auto}.my-1{margin-block:calc(var(--spacing)*1)}.my-2{margin-block:calc(var(--spacing)*2)}.my-4{margin-block:calc(var(--spacing)*4)}.-mt-16{margin-top:calc(var(--spacing)*-16)}.mt-0{margin-top:calc(var(--spacing)*0)}.mt-0\.5{margin-top:calc(var(--spacing)*.5)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-5{margin-top:calc(var(--spacing)*5)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-8{margin-top:calc(var(--spacing)*8)}.mt-12{margin-top:calc(var(--spacing)*12)}.-mr-16{margin-right:calc(var(--spacing)*-16)}.mr-4{margin-right:calc(var(--spacing)*4)}.-mb-1{margin-bottom:calc(var(--spacing)*-1)}.-mb-12{margin-bottom:calc(var(--spacing)*-12)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-7{margin-bottom:calc(var(--spacing)*7)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.-ml-2{margin-left:calc(var(--spacing)*-2)}.-ml-12{margin-left:calc(var(--spacing)*-12)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-3{margin-left:calc(var(--spacing)*3)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-10{margin-left:calc(var(--spacing)*10)}.line-clamp-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.line-clamp-2{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}.block{display:block}.contents{display:contents}.flex{display:flex}.flow-root{display:flow-root}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.inline-grid{display:inline-grid}.inline-table{display:inline-table}.list-item{display:list-item}.table{display:table}.table-caption{display:table-caption}.table-cell{display:table-cell}.table-column{display:table-column}.table-column-group{display:table-column-group}.table-footer-group{display:table-footer-group}.table-header-group{display:table-header-group}.table-row{display:table-row}.table-row-group{display:table-row-group}.h-1{height:calc(var(--spacing)*1)}.h-1\.5{height:calc(var(--spacing)*1.5)}.h-1\/2{height:50%}.h-2{height:calc(var(--spacing)*2)}.h-3{height:calc(var(--spacing)*3)}.h-3\.5{height:calc(var(--spacing)*3.5)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-9{height:calc(var(--spacing)*9)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-14{height:calc(var(--spacing)*14)}.h-16{height:calc(var(--spacing)*16)}.h-18{height:calc(var(--spacing)*18)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-28{height:calc(var(--spacing)*28)}.h-32{height:calc(var(--spacing)*32)}.h-40{height:calc(var(--spacing)*40)}.h-44{height:calc(var(--spacing)*44)}.h-48{height:calc(var(--spacing)*48)}.h-64{height:calc(var(--spacing)*64)}.h-72{height:calc(var(--spacing)*72)}.h-80{height:calc(var(--spacing)*80)}.h-96{height:calc(var(--spacing)*96)}.h-\[18px\]{height:18px}.h-\[24px\]{height:24px}.h-\[400px\]{height:400px}.h-\[600px\]{height:600px}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-80{max-height:calc(var(--spacing)*80)}.max-h-96{max-height:calc(var(--spacing)*96)}.max-h-\[70vh\]{max-height:70vh}.max-h-\[80vh\]{max-height:80vh}.max-h-full{max-height:100%}.min-h-full{min-height:100%}.min-h-screen{min-height:100vh}.w-1{width:calc(var(--spacing)*1)}.w-1\/3{width:33.3333%}.w-2{width:calc(var(--spacing)*2)}.w-3{width:calc(var(--spacing)*3)}.w-3\.5{width:calc(var(--spacing)*3.5)}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-7{width:calc(var(--spacing)*7)}.w-8{width:calc(var(--spacing)*8)}.w-9{width:calc(var(--spacing)*9)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-14{width:calc(var(--spacing)*14)}.w-16{width:calc(var(--spacing)*16)}.w-18{width:calc(var(--spacing)*18)}.w-20{width:calc(var(--spacing)*20)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-32{width:calc(var(--spacing)*32)}.w-40{width:calc(var(--spacing)*40)}.w-48{width:calc(var(--spacing)*48)}.w-72{width:calc(var(--spacing)*72)}.w-80{width:calc(var(--spacing)*80)}.w-96{width:calc(var(--spacing)*96)}.w-\[400px\]{width:400px}.w-\[600px\]{width:600px}.w-full{width:100%}.max-w-\[75\%\]{max-width:75%}.max-w-\[80\%\]{max-width:80%}.max-w-\[280px\]{max-width:280px}.max-w-\[420px\]{max-width:420px}.max-w-full{max-width:100%}.max-w-lg{max-width:var(--container-lg)}.max-w-md{max-width:var(--container-md)}.max-w-sm{max-width:var(--container-sm)}.max-w-xs{max-width:var(--container-xs)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\[18px\]{min-width:18px}.min-w-\[24px\]{min-width:24px}.min-w-\[64px\]{min-width:64px}.min-w-\[80px\]{min-width:80px}.min-w-\[90px\]{min-width:90px}.min-w-\[160px\]{min-width:160px}.min-w-\[240px\]{min-width:240px}.flex-1{flex:1}.flex-shrink-0{flex-shrink:0}.shrink{flex-shrink:1}.grow{flex-grow:1}.border-collapse{border-collapse:collapse}.-translate-x-1{--tw-translate-x:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-1\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0\.5{--tw-translate-x:calc(var(--spacing)*.5);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-1{--tw-translate-x:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-5{--tw-translate-x:calc(var(--spacing)*5);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-6{--tw-translate-x:calc(var(--spacing)*6);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-0{--tw-translate-y:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-1{--tw-translate-y:calc(var(--spacing)*1);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-none{translate:none}.scale-0{--tw-scale-x:0%;--tw-scale-y:0%;--tw-scale-z:0%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-105{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-110{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-125{--tw-scale-x:125%;--tw-scale-y:125%;--tw-scale-z:125%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-150{--tw-scale-x:150%;--tw-scale-y:150%;--tw-scale-z:150%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-3d{scale:var(--tw-scale-x)var(--tw-scale-y)var(--tw-scale-z)}.scale-\[1\.02\]{scale:1.02}.rotate-45{rotate:45deg}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.transform-gpu{transform:translateZ(0)var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-bounce{animation:var(--animate-bounce)}.animate-ping{animation:var(--animate-ping)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.touch-pinch-zoom{--tw-pinch-zoom:pinch-zoom;touch-action:var(--tw-pan-x,)var(--tw-pan-y,)var(--tw-pinch-zoom,)}.resize{resize:both}.resize-none{resize:none}.appearance-none{appearance:none}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-8{grid-template-columns:repeat(8,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-row-reverse{flex-direction:row-reverse}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.justify-around{justify-content:space-around}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-5{gap:calc(var(--spacing)*5)}.gap-8{gap:calc(var(--spacing)*8)}.gap-12{gap:calc(var(--spacing)*12)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-8>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*8)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-reverse>:not(:last-child)){--tw-space-y-reverse:1}:where(.space-x-2>:not(:last-child)){--tw-space-x-reverse:0;margin-inline-start:calc(calc(var(--spacing)*2)*var(--tw-space-x-reverse));margin-inline-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-x-reverse)))}:where(.space-x-reverse>:not(:last-child)){--tw-space-x-reverse:1}:where(.divide-x>:not(:last-child)){--tw-divide-x-reverse:0;border-inline-style:var(--tw-border-style);border-inline-start-width:calc(1px*var(--tw-divide-x-reverse));border-inline-end-width:calc(1px*calc(1 - var(--tw-divide-x-reverse)))}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-y-reverse>:not(:last-child)){--tw-divide-y-reverse:1}:where(.divide-gray-200>:not(:last-child)){border-color:var(--color-gray-200)}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-3xl{border-radius:var(--radius-3xl)}.rounded-\[2\.5rem\]{border-radius:2.5rem}.rounded-\[2rem\]{border-radius:2rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-s{border-start-start-radius:.25rem;border-end-start-radius:.25rem}.rounded-ss{border-start-start-radius:.25rem}.rounded-e{border-start-end-radius:.25rem;border-end-end-radius:.25rem}.rounded-se{border-start-end-radius:.25rem}.rounded-ee{border-end-end-radius:.25rem}.rounded-es{border-end-start-radius:.25rem}.rounded-t{border-top-left-radius:.25rem;border-top-right-radius:.25rem}.rounded-t-2xl{border-top-left-radius:var(--radius-2xl);border-top-right-radius:var(--radius-2xl)}.rounded-t-3xl{border-top-left-radius:var(--radius-3xl);border-top-right-radius:var(--radius-3xl)}.rounded-l{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.rounded-tl{border-top-left-radius:.25rem}.rounded-r{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.rounded-tr{border-top-right-radius:.25rem}.rounded-b{border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.rounded-br{border-bottom-right-radius:.25rem}.rounded-br-md{border-bottom-right-radius:var(--radius-md)}.rounded-bl{border-bottom-left-radius:.25rem}.rounded-bl-md{border-bottom-left-radius:var(--radius-md)}.border{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-3{border-style:var(--tw-border-style);border-width:3px}.border-4{border-style:var(--tw-border-style);border-width:4px}.border-8{border-style:var(--tw-border-style);border-width:8px}.border-x{border-inline-style:var(--tw-border-style);border-inline-width:1px}.border-y{border-block-style:var(--tw-border-style);border-block-width:1px}.border-s{border-inline-start-style:var(--tw-border-style);border-inline-start-width:1px}.border-e{border-inline-end-style:var(--tw-border-style);border-inline-end-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-l-4{border-left-style:var(--tw-border-style);border-left-width:4px}.border-blue-500{border-color:var(--color-blue-500)}.border-current{border-color:currentColor}.border-cyan-500{border-color:var(--color-cyan-500)}.border-cyan-600{border-color:var(--color-cyan-600)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-300{border-color:var(--color-gray-300)}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-800{border-color:var(--color-gray-800)}.border-green-500{border-color:var(--color-green-500)}.border-green-500\/20{border-color:#00c75833}@supports (color:color-mix(in lab,red,red)){.border-green-500\/20{border-color:color-mix(in oklab,var(--color-green-500)20%,transparent)}}.border-green-500\/30{border-color:#00c7584d}@supports (color:color-mix(in lab,red,red)){.border-green-500\/30{border-color:color-mix(in oklab,var(--color-green-500)30%,transparent)}}.border-indigo-100{border-color:var(--color-indigo-100)}.border-indigo-300{border-color:var(--color-indigo-300)}.border-indigo-300\/30{border-color:#a4b3ff4d}@supports (color:color-mix(in lab,red,red)){.border-indigo-300\/30{border-color:color-mix(in oklab,var(--color-indigo-300)30%,transparent)}}.border-indigo-500{border-color:var(--color-indigo-500)}.border-indigo-500\/50{border-color:#625fff80}@supports (color:color-mix(in lab,red,red)){.border-indigo-500\/50{border-color:color-mix(in oklab,var(--color-indigo-500)50%,transparent)}}.border-indigo-600{border-color:var(--color-indigo-600)}.border-orange-500{border-color:var(--color-orange-500)}.border-purple-300{border-color:var(--color-purple-300)}.border-purple-300\/30{border-color:#d9b3ff4d}@supports (color:color-mix(in lab,red,red)){.border-purple-300\/30{border-color:color-mix(in oklab,var(--color-purple-300)30%,transparent)}}.border-purple-500{border-color:var(--color-purple-500)}.border-red-500{border-color:var(--color-red-500)}.border-red-500\/20{border-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.border-red-500\/20{border-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.border-red-500\/30{border-color:#fb2c364d}@supports (color:color-mix(in lab,red,red)){.border-red-500\/30{border-color:color-mix(in oklab,var(--color-red-500)30%,transparent)}}.border-red-500\/50{border-color:#fb2c3680}@supports (color:color-mix(in lab,red,red)){.border-red-500\/50{border-color:color-mix(in oklab,var(--color-red-500)50%,transparent)}}.border-transparent{border-color:#0000}.border-white{border-color:var(--color-white)}.border-white\/5{border-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.border-white\/5{border-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.border-white\/10{border-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.border-white\/10{border-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.border-white\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.border-white\/30{border-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.border-white\/30{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.border-white\/50{border-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.border-white\/50{border-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.border-yellow-100{border-color:var(--color-yellow-100)}.border-t-gray-600{border-top-color:var(--color-gray-600)}.border-t-transparent{border-top-color:#0000}.border-t-white{border-top-color:var(--color-white)}.bg-\[\#0a0a0f\]{background-color:#0a0a0f}.bg-\[\#050816\]{background-color:#050816}.bg-black{background-color:var(--color-black)}.bg-black\/20{background-color:#0003}@supports (color:color-mix(in lab,red,red)){.bg-black\/20{background-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.bg-black\/30{background-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.bg-black\/30{background-color:color-mix(in oklab,var(--color-black)30%,transparent)}}.bg-black\/40{background-color:#0006}@supports (color:color-mix(in lab,red,red)){.bg-black\/40{background-color:color-mix(in oklab,var(--color-black)40%,transparent)}}.bg-black\/50{background-color:#00000080}@supports (color:color-mix(in lab,red,red)){.bg-black\/50{background-color:color-mix(in oklab,var(--color-black)50%,transparent)}}.bg-black\/60{background-color:#0009}@supports (color:color-mix(in lab,red,red)){.bg-black\/60{background-color:color-mix(in oklab,var(--color-black)60%,transparent)}}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-blue-400{background-color:var(--color-blue-400)}.bg-blue-500{background-color:var(--color-blue-500)}.bg-cyan-500{background-color:var(--color-cyan-500)}.bg-cyan-600{background-color:var(--color-cyan-600)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-200\/50{background-color:#e5e7eb80}@supports (color:color-mix(in lab,red,red)){.bg-gray-200\/50{background-color:color-mix(in oklab,var(--color-gray-200)50%,transparent)}}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-gray-600{background-color:var(--color-gray-600)}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-50{background-color:var(--color-green-50)}.bg-green-100{background-color:var(--color-green-100)}.bg-green-400{background-color:var(--color-green-400)}.bg-green-500{background-color:var(--color-green-500)}.bg-green-500\/10{background-color:#00c7581a}@supports (color:color-mix(in lab,red,red)){.bg-green-500\/10{background-color:color-mix(in oklab,var(--color-green-500)10%,transparent)}}.bg-green-500\/20{background-color:#00c75833}@supports (color:color-mix(in lab,red,red)){.bg-green-500\/20{background-color:color-mix(in oklab,var(--color-green-500)20%,transparent)}}.bg-green-500\/30{background-color:#00c7584d}@supports (color:color-mix(in lab,red,red)){.bg-green-500\/30{background-color:color-mix(in oklab,var(--color-green-500)30%,transparent)}}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-50{background-color:var(--color-indigo-50)}.bg-indigo-100{background-color:var(--color-indigo-100)}.bg-indigo-500{background-color:var(--color-indigo-500)}.bg-indigo-500\/20{background-color:#625fff33}@supports (color:color-mix(in lab,red,red)){.bg-indigo-500\/20{background-color:color-mix(in oklab,var(--color-indigo-500)20%,transparent)}}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-indigo-600\/20{background-color:#4f39f633}@supports (color:color-mix(in lab,red,red)){.bg-indigo-600\/20{background-color:color-mix(in oklab,var(--color-indigo-600)20%,transparent)}}.bg-orange-100{background-color:var(--color-orange-100)}.bg-orange-500{background-color:var(--color-orange-500)}.bg-orange-600{background-color:var(--color-orange-600)}.bg-pink-600{background-color:var(--color-pink-600)}.bg-pink-600\/10{background-color:#e300761a}@supports (color:color-mix(in lab,red,red)){.bg-pink-600\/10{background-color:color-mix(in oklab,var(--color-pink-600)10%,transparent)}}.bg-purple-50{background-color:var(--color-purple-50)}.bg-purple-100{background-color:var(--color-purple-100)}.bg-purple-500{background-color:var(--color-purple-500)}.bg-purple-500\/20{background-color:#ac4bff33}@supports (color:color-mix(in lab,red,red)){.bg-purple-500\/20{background-color:color-mix(in oklab,var(--color-purple-500)20%,transparent)}}.bg-purple-600{background-color:var(--color-purple-600)}.bg-purple-600\/20{background-color:#9810fa33}@supports (color:color-mix(in lab,red,red)){.bg-purple-600\/20{background-color:color-mix(in oklab,var(--color-purple-600)20%,transparent)}}.bg-purple-600\/50{background-color:#9810fa80}@supports (color:color-mix(in lab,red,red)){.bg-purple-600\/50{background-color:color-mix(in oklab,var(--color-purple-600)50%,transparent)}}.bg-red-100{background-color:var(--color-red-100)}.bg-red-400{background-color:var(--color-red-400)}.bg-red-500{background-color:var(--color-red-500)}.bg-red-500\/10{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/10{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.bg-red-500\/20{background-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.bg-red-500\/20{background-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.bg-red-600{background-color:var(--color-red-600)}.bg-red-900{background-color:var(--color-red-900)}.bg-rose-600{background-color:var(--color-rose-600)}.bg-slate-100{background-color:var(--color-slate-100)}.bg-slate-800{background-color:var(--color-slate-800)}.bg-slate-900{background-color:var(--color-slate-900)}.bg-slate-900\/40{background-color:#0f172b66}@supports (color:color-mix(in lab,red,red)){.bg-slate-900\/40{background-color:color-mix(in oklab,var(--color-slate-900)40%,transparent)}}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--color-white)}.bg-white\/5{background-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.bg-white\/5{background-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.bg-white\/10{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.bg-white\/10{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.bg-white\/20{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.bg-white\/20{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-white\/30{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.bg-white\/30{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.bg-white\/40{background-color:#fff6}@supports (color:color-mix(in lab,red,red)){.bg-white\/40{background-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.bg-white\/80{background-color:#fffc}@supports (color:color-mix(in lab,red,red)){.bg-white\/80{background-color:color-mix(in oklab,var(--color-white)80%,transparent)}}.bg-white\/\[0\.03\]{background-color:#ffffff08}@supports (color:color-mix(in lab,red,red)){.bg-white\/\[0\.03\]{background-color:color-mix(in oklab,var(--color-white)3%,transparent)}}.bg-white\/\[0\.05\]{background-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.bg-white\/\[0\.05\]{background-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.bg-white\/\[0\.08\]{background-color:#ffffff14}@supports (color:color-mix(in lab,red,red)){.bg-white\/\[0\.08\]{background-color:color-mix(in oklab,var(--color-white)8%,transparent)}}.bg-yellow-50{background-color:var(--color-yellow-50)}.bg-yellow-100{background-color:var(--color-yellow-100)}.bg-yellow-400{background-color:var(--color-yellow-400)}.bg-yellow-500{background-color:var(--color-yellow-500)}.bg-yellow-500\/30{background-color:#edb2004d}@supports (color:color-mix(in lab,red,red)){.bg-yellow-500\/30{background-color:color-mix(in oklab,var(--color-yellow-500)30%,transparent)}}.bg-gradient-to-b{--tw-gradient-position:to bottom in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-t{--tw-gradient-position:to top in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-tr{--tw-gradient-position:to top right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-\[linear-gradient\(rgba\(99\,102\,241\,0\.03\)_1px\,transparent_1px\)\,linear-gradient\(90deg\,rgba\(99\,102\,241\,0\.03\)_1px\,transparent_1px\)\]{background-image:linear-gradient(#6366f108 1px,#0000 1px),linear-gradient(90deg,#6366f108 1px,#0000 1px)}.from-black{--tw-gradient-from:var(--color-black);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-black\/50{--tw-gradient-from:#00000080}@supports (color:color-mix(in lab,red,red)){.from-black\/50{--tw-gradient-from:color-mix(in oklab,var(--color-black)50%,transparent)}}.from-black\/50{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-black\/60{--tw-gradient-from:#0009}@supports (color:color-mix(in lab,red,red)){.from-black\/60{--tw-gradient-from:color-mix(in oklab,var(--color-black)60%,transparent)}}.from-black\/60{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-black\/80{--tw-gradient-from:#000c}@supports (color:color-mix(in lab,red,red)){.from-black\/80{--tw-gradient-from:color-mix(in oklab,var(--color-black)80%,transparent)}}.from-black\/80{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-400{--tw-gradient-from:var(--color-blue-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-500{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-cyan-500{--tw-gradient-from:var(--color-cyan-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-gray-100{--tw-gradient-from:var(--color-gray-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-gray-400{--tw-gradient-from:var(--color-gray-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-gray-800{--tw-gradient-from:var(--color-gray-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-400{--tw-gradient-from:var(--color-green-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-green-500{--tw-gradient-from:var(--color-green-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-50{--tw-gradient-from:var(--color-indigo-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-100{--tw-gradient-from:var(--color-indigo-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-400{--tw-gradient-from:var(--color-indigo-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-400\/20{--tw-gradient-from:#7d87ff33}@supports (color:color-mix(in lab,red,red)){.from-indigo-400\/20{--tw-gradient-from:color-mix(in oklab,var(--color-indigo-400)20%,transparent)}}.from-indigo-400\/20{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-500{--tw-gradient-from:var(--color-indigo-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-500\/5{--tw-gradient-from:#625fff0d}@supports (color:color-mix(in lab,red,red)){.from-indigo-500\/5{--tw-gradient-from:color-mix(in oklab,var(--color-indigo-500)5%,transparent)}}.from-indigo-500\/5{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-600{--tw-gradient-from:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-indigo-900{--tw-gradient-from:var(--color-indigo-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-orange-400{--tw-gradient-from:var(--color-orange-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-orange-500{--tw-gradient-from:var(--color-orange-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-pink-400{--tw-gradient-from:var(--color-pink-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-pink-500{--tw-gradient-from:var(--color-pink-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-100{--tw-gradient-from:var(--color-purple-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-400{--tw-gradient-from:var(--color-purple-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-purple-500{--tw-gradient-from:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-red-500{--tw-gradient-from:var(--color-red-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-slate-900{--tw-gradient-from:var(--color-slate-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-transparent{--tw-gradient-from:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-white{--tw-gradient-from:var(--color-white);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-white\/\[0\.12\]{--tw-gradient-from:#ffffff1f}@supports (color:color-mix(in lab,red,red)){.from-white\/\[0\.12\]{--tw-gradient-from:color-mix(in oklab,var(--color-white)12%,transparent)}}.from-white\/\[0\.12\]{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-yellow-400{--tw-gradient-from:var(--color-yellow-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-yellow-500{--tw-gradient-from:var(--color-yellow-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.via-black{--tw-gradient-via:var(--color-black);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-black\/40{--tw-gradient-via:#0006}@supports (color:color-mix(in lab,red,red)){.via-black\/40{--tw-gradient-via:color-mix(in oklab,var(--color-black)40%,transparent)}}.via-black\/40{--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-gray-50{--tw-gradient-via:var(--color-gray-50);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-indigo-500{--tw-gradient-via:var(--color-indigo-500);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-500{--tw-gradient-via:var(--color-purple-500);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-600{--tw-gradient-via:var(--color-purple-600);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-purple-900{--tw-gradient-via:var(--color-purple-900);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-white{--tw-gradient-via:var(--color-white);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-white\/30{--tw-gradient-via:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.via-white\/30{--tw-gradient-via:color-mix(in oklab,var(--color-white)30%,transparent)}}.via-white\/30{--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.to-blue-600{--tw-gradient-to:var(--color-blue-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-cyan-600{--tw-gradient-to:var(--color-cyan-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-emerald-600{--tw-gradient-to:var(--color-emerald-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-100{--tw-gradient-to:var(--color-gray-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-200{--tw-gradient-to:var(--color-gray-200);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-500{--tw-gradient-to:var(--color-gray-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-600{--tw-gradient-to:var(--color-gray-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-gray-900{--tw-gradient-to:var(--color-gray-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-green-600{--tw-gradient-to:var(--color-green-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-indigo-600{--tw-gradient-to:var(--color-indigo-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-500{--tw-gradient-to:var(--color-orange-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-orange-600{--tw-gradient-to:var(--color-orange-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-pink-500{--tw-gradient-to:var(--color-pink-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-pink-600{--tw-gradient-to:var(--color-pink-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-pink-800{--tw-gradient-to:var(--color-pink-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-50{--tw-gradient-to:var(--color-purple-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-100{--tw-gradient-to:var(--color-purple-100);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-200{--tw-gradient-to:var(--color-purple-200);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-400{--tw-gradient-to:var(--color-purple-400);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-400\/20{--tw-gradient-to:#c07eff33}@supports (color:color-mix(in lab,red,red)){.to-purple-400\/20{--tw-gradient-to:color-mix(in oklab,var(--color-purple-400)20%,transparent)}}.to-purple-400\/20{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500{--tw-gradient-to:var(--color-purple-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500\/5{--tw-gradient-to:#ac4bff0d}@supports (color:color-mix(in lab,red,red)){.to-purple-500\/5{--tw-gradient-to:color-mix(in oklab,var(--color-purple-500)5%,transparent)}}.to-purple-500\/5{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-600{--tw-gradient-to:var(--color-purple-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-700{--tw-gradient-to:var(--color-purple-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-red-600{--tw-gradient-to:var(--color-red-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-rose-600{--tw-gradient-to:var(--color-rose-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-slate-900{--tw-gradient-to:var(--color-slate-900);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-transparent{--tw-gradient-to:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-white{--tw-gradient-to:var(--color-white);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-white\/60{--tw-gradient-to:#fff9}@supports (color:color-mix(in lab,red,red)){.to-white\/60{--tw-gradient-to:color-mix(in oklab,var(--color-white)60%,transparent)}}.to-white\/60{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-white\/80{--tw-gradient-to:#fffc}@supports (color:color-mix(in lab,red,red)){.to-white\/80{--tw-gradient-to:color-mix(in oklab,var(--color-white)80%,transparent)}}.to-white\/80{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-white\/\[0\.04\]{--tw-gradient-to:#ffffff0a}@supports (color:color-mix(in lab,red,red)){.to-white\/\[0\.04\]{--tw-gradient-to:color-mix(in oklab,var(--color-white)4%,transparent)}}.to-white\/\[0\.04\]{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.bg-\[size\:60px_60px\]{background-size:60px 60px}.bg-cover{background-size:cover}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.bg-center{background-position:50%}.bg-repeat{background-repeat:repeat}.mask-no-clip{-webkit-mask-clip:no-clip;mask-clip:no-clip}.mask-repeat{-webkit-mask-repeat:repeat;mask-repeat:repeat}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.p-1{padding:calc(var(--spacing)*1)}.p-1\.5{padding:calc(var(--spacing)*1.5)}.p-2{padding:calc(var(--spacing)*2)}.p-2\.5{padding:calc(var(--spacing)*2.5)}.p-3{padding:calc(var(--spacing)*3)}.p-3\.5{padding:calc(var(--spacing)*3.5)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.p-7{padding:calc(var(--spacing)*7)}.p-8{padding:calc(var(--spacing)*8)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-5{padding-inline:calc(var(--spacing)*5)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.py-0{padding-block:calc(var(--spacing)*0)}.py-0\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-3\.5{padding-block:calc(var(--spacing)*3.5)}.py-4{padding-block:calc(var(--spacing)*4)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.py-16{padding-block:calc(var(--spacing)*16)}.py-20{padding-block:calc(var(--spacing)*20)}.py-24{padding-block:calc(var(--spacing)*24)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-6{padding-top:calc(var(--spacing)*6)}.pr-4{padding-right:calc(var(--spacing)*4)}.pr-12{padding-right:calc(var(--spacing)*12)}.pb-1{padding-bottom:calc(var(--spacing)*1)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-4{padding-bottom:calc(var(--spacing)*4)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pb-20{padding-bottom:calc(var(--spacing)*20)}.pb-24{padding-bottom:calc(var(--spacing)*24)}.pl-8{padding-left:calc(var(--spacing)*8)}.pl-10{padding-left:calc(var(--spacing)*10)}.pl-12{padding-left:calc(var(--spacing)*12)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:var(--font-sans)}.font-serif{font-family:var(--font-serif)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.text-5xl{font-size:var(--text-5xl);line-height:var(--tw-leading,var(--text-5xl--line-height))}.text-6xl{font-size:var(--text-6xl);line-height:var(--tw-leading,var(--text-6xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\[8px\]{font-size:8px}.text-\[10px\]{font-size:10px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-black{--tw-font-weight:var(--font-weight-black);font-weight:var(--font-weight-black)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-\[0\.2em\]{--tw-tracking:.2em;letter-spacing:.2em}.tracking-\[0\.15em\]{--tw-tracking:.15em;letter-spacing:.15em}.tracking-\[1em\]{--tw-tracking:1em;letter-spacing:1em}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.tracking-tighter{--tw-tracking:var(--tracking-tighter);letter-spacing:var(--tracking-tighter)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.tracking-widest{--tw-tracking:var(--tracking-widest);letter-spacing:var(--tracking-widest)}.text-wrap{text-wrap:wrap}.break-words{overflow-wrap:break-word}.text-clip{text-overflow:clip}.text-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-black{color:var(--color-black)}.text-blue-300{color:var(--color-blue-300)}.text-blue-400{color:var(--color-blue-400)}.text-blue-500{color:var(--color-blue-500)}.text-blue-600{color:var(--color-blue-600)}.text-cyan-400{color:var(--color-cyan-400)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-900{color:var(--color-gray-900)}.text-green-300{color:var(--color-green-300)}.text-green-400{color:var(--color-green-400)}.text-green-500{color:var(--color-green-500)}.text-green-600{color:var(--color-green-600)}.text-indigo-300{color:var(--color-indigo-300)}.text-indigo-400{color:var(--color-indigo-400)}.text-indigo-500{color:var(--color-indigo-500)}.text-indigo-600{color:var(--color-indigo-600)}.text-indigo-700{color:var(--color-indigo-700)}.text-indigo-900{color:var(--color-indigo-900)}.text-orange-400{color:var(--color-orange-400)}.text-orange-500{color:var(--color-orange-500)}.text-orange-600{color:var(--color-orange-600)}.text-purple-400{color:var(--color-purple-400)}.text-purple-500{color:var(--color-purple-500)}.text-purple-600{color:var(--color-purple-600)}.text-purple-700{color:var(--color-purple-700)}.text-red-400{color:var(--color-red-400)}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-red-700{color:var(--color-red-700)}.text-transparent{color:#0000}.text-white{color:var(--color-white)}.text-white\/20{color:#fff3}@supports (color:color-mix(in lab,red,red)){.text-white\/20{color:color-mix(in oklab,var(--color-white)20%,transparent)}}.text-white\/30{color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.text-white\/30{color:color-mix(in oklab,var(--color-white)30%,transparent)}}.text-white\/40{color:#fff6}@supports (color:color-mix(in lab,red,red)){.text-white\/40{color:color-mix(in oklab,var(--color-white)40%,transparent)}}.text-white\/50{color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.text-white\/50{color:color-mix(in oklab,var(--color-white)50%,transparent)}}.text-white\/60{color:#fff9}@supports (color:color-mix(in lab,red,red)){.text-white\/60{color:color-mix(in oklab,var(--color-white)60%,transparent)}}.text-white\/70{color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.text-white\/70{color:color-mix(in oklab,var(--color-white)70%,transparent)}}.text-white\/80{color:#fffc}@supports (color:color-mix(in lab,red,red)){.text-white\/80{color:color-mix(in oklab,var(--color-white)80%,transparent)}}.text-yellow-300{color:var(--color-yellow-300)}.text-yellow-400{color:var(--color-yellow-400)}.text-yellow-500{color:var(--color-yellow-500)}.text-yellow-600{color:var(--color-yellow-600)}.text-yellow-700{color:var(--color-yellow-700)}.text-yellow-900{color:var(--color-yellow-900)}.capitalize{text-transform:capitalize}.lowercase{text-transform:lowercase}.normal-case{text-transform:none}.uppercase{text-transform:uppercase}.italic{font-style:italic}.not-italic{font-style:normal}.diagonal-fractions{--tw-numeric-fraction:diagonal-fractions;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.lining-nums{--tw-numeric-figure:lining-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.oldstyle-nums{--tw-numeric-figure:oldstyle-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.ordinal{--tw-ordinal:ordinal;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.proportional-nums{--tw-numeric-spacing:proportional-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.slashed-zero{--tw-slashed-zero:slashed-zero;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.stacked-fractions{--tw-numeric-fraction:stacked-fractions;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.normal-nums{font-variant-numeric:normal}.line-through{text-decoration-line:line-through}.no-underline{text-decoration-line:none}.overline{text-decoration-line:overline}.underline{text-decoration-line:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.subpixel-antialiased{-webkit-font-smoothing:auto;-moz-osx-font-smoothing:auto}.placeholder-gray-400::placeholder{color:var(--color-gray-400)}.placeholder-white::placeholder{color:var(--color-white)}.placeholder-white\/20::placeholder{color:#fff3}@supports (color:color-mix(in lab,red,red)){.placeholder-white\/20::placeholder{color:color-mix(in oklab,var(--color-white)20%,transparent)}}.placeholder-white\/30::placeholder{color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.placeholder-white\/30::placeholder{color:color-mix(in oklab,var(--color-white)30%,transparent)}}.placeholder-white\/50::placeholder{color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.placeholder-white\/50::placeholder{color:color-mix(in oklab,var(--color-white)50%,transparent)}}.opacity-0{opacity:0}.opacity-5{opacity:.05}.opacity-10{opacity:.1}.opacity-20{opacity:.2}.opacity-30{opacity:.3}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-75{opacity:.75}.opacity-80{opacity:.8}.opacity-100{opacity:1}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_-2px_15px_rgba\(0\,0\,0\,0\.05\)\]{--tw-shadow:0 -2px 15px var(--tw-shadow-color,#0000000d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_2px_0_0_\#4338ca\]{--tw-shadow:0 2px 0 0 var(--tw-shadow-color,#4338ca);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_4px_0_0_\#4338ca\]{--tw-shadow:0 4px 0 0 var(--tw-shadow-color,#4338ca);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_5px_0_0_\#7c3aed\,0_7px_10px_rgba\(124\,58\,237\,0\.3\)\]{--tw-shadow:0 5px 0 0 var(--tw-shadow-color,#7c3aed),0 7px 10px var(--tw-shadow-color,#7c3aed4d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_5px_0_0_\#d1d5db\,0_7px_10px_rgba\(0\,0\,0\,0\.1\)\]{--tw-shadow:0 5px 0 0 var(--tw-shadow-color,#d1d5db),0 7px 10px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_6px_0_0_\#4338ca\,0_8px_12px_rgba\(67\,56\,202\,0\.4\)\]{--tw-shadow:0 6px 0 0 var(--tw-shadow-color,#4338ca),0 8px 12px var(--tw-shadow-color,#4338ca66);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\[0_10px_30px_rgba\(99\,102\,241\,0\.4\)\]{--tw-shadow:0 10px 30px var(--tw-shadow-color,#6366f166);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-none{--tw-shadow:0 0 #0000;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-4{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(4px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-8{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(8px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.inset-ring{--tw-inset-ring-shadow:inset 0 0 0 1px var(--tw-inset-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-blue-500{--tw-shadow-color:oklch(62.3% .214 259.815)}@supports (color:color-mix(in lab,red,red)){.shadow-blue-500{--tw-shadow-color:color-mix(in oklab,var(--color-blue-500)var(--tw-shadow-alpha),transparent)}}.shadow-blue-500\/30{--tw-shadow-color:#3080ff4d}@supports (color:color-mix(in lab,red,red)){.shadow-blue-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-blue-500\/50{--tw-shadow-color:#3080ff80}@supports (color:color-mix(in lab,red,red)){.shadow-blue-500\/50{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-500)50%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-green-500{--tw-shadow-color:oklch(72.3% .219 149.579)}@supports (color:color-mix(in lab,red,red)){.shadow-green-500{--tw-shadow-color:color-mix(in oklab,var(--color-green-500)var(--tw-shadow-alpha),transparent)}}.shadow-green-500\/30{--tw-shadow-color:#00c7584d}@supports (color:color-mix(in lab,red,red)){.shadow-green-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-green-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-green-500\/40{--tw-shadow-color:#00c75866}@supports (color:color-mix(in lab,red,red)){.shadow-green-500\/40{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-green-500)40%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-green-500\/50{--tw-shadow-color:#00c75880}@supports (color:color-mix(in lab,red,red)){.shadow-green-500\/50{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-green-500)50%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-indigo-500{--tw-shadow-color:oklch(58.5% .233 277.117)}@supports (color:color-mix(in lab,red,red)){.shadow-indigo-500{--tw-shadow-color:color-mix(in oklab,var(--color-indigo-500)var(--tw-shadow-alpha),transparent)}}.shadow-indigo-500\/20{--tw-shadow-color:#625fff33}@supports (color:color-mix(in lab,red,red)){.shadow-indigo-500\/20{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-indigo-500)20%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-indigo-500\/30{--tw-shadow-color:#625fff4d}@supports (color:color-mix(in lab,red,red)){.shadow-indigo-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-indigo-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-orange-500{--tw-shadow-color:oklch(70.5% .213 47.604)}@supports (color:color-mix(in lab,red,red)){.shadow-orange-500{--tw-shadow-color:color-mix(in oklab,var(--color-orange-500)var(--tw-shadow-alpha),transparent)}}.shadow-orange-500\/30{--tw-shadow-color:#fe6e004d}@supports (color:color-mix(in lab,red,red)){.shadow-orange-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-orange-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-purple-500{--tw-shadow-color:oklch(62.7% .265 303.9)}@supports (color:color-mix(in lab,red,red)){.shadow-purple-500{--tw-shadow-color:color-mix(in oklab,var(--color-purple-500)var(--tw-shadow-alpha),transparent)}}.shadow-purple-500\/30{--tw-shadow-color:#ac4bff4d}@supports (color:color-mix(in lab,red,red)){.shadow-purple-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-purple-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-red-500{--tw-shadow-color:oklch(63.7% .237 25.331)}@supports (color:color-mix(in lab,red,red)){.shadow-red-500{--tw-shadow-color:color-mix(in oklab,var(--color-red-500)var(--tw-shadow-alpha),transparent)}}.shadow-red-500\/30{--tw-shadow-color:#fb2c364d}@supports (color:color-mix(in lab,red,red)){.shadow-red-500\/30{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-red-500)30%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-red-500\/40{--tw-shadow-color:#fb2c3666}@supports (color:color-mix(in lab,red,red)){.shadow-red-500\/40{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-red-500)40%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-rose-600{--tw-shadow-color:oklch(58.6% .253 17.585)}@supports (color:color-mix(in lab,red,red)){.shadow-rose-600{--tw-shadow-color:color-mix(in oklab,var(--color-rose-600)var(--tw-shadow-alpha),transparent)}}.shadow-rose-600\/50{--tw-shadow-color:#e7004480}@supports (color:color-mix(in lab,red,red)){.shadow-rose-600\/50{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-rose-600)50%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-yellow-500{--tw-shadow-color:oklch(79.5% .184 86.047)}@supports (color:color-mix(in lab,red,red)){.shadow-yellow-500{--tw-shadow-color:color-mix(in oklab,var(--color-yellow-500)var(--tw-shadow-alpha),transparent)}}.shadow-yellow-500\/20{--tw-shadow-color:#edb20033}@supports (color:color-mix(in lab,red,red)){.shadow-yellow-500\/20{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-yellow-500)20%,transparent)var(--tw-shadow-alpha),transparent)}}.ring-black{--tw-ring-color:var(--color-black)}.ring-black\/20{--tw-ring-color:#0003}@supports (color:color-mix(in lab,red,red)){.ring-black\/20{--tw-ring-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.ring-gray-300{--tw-ring-color:var(--color-gray-300)}.ring-green-500{--tw-ring-color:var(--color-green-500)}.ring-green-500\/50{--tw-ring-color:#00c75880}@supports (color:color-mix(in lab,red,red)){.ring-green-500\/50{--tw-ring-color:color-mix(in oklab,var(--color-green-500)50%,transparent)}}.ring-red-500{--tw-ring-color:var(--color-red-500)}.ring-red-500\/20{--tw-ring-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.ring-red-500\/20{--tw-ring-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.ring-rose-600{--tw-ring-color:var(--color-rose-600)}.ring-rose-600\/10{--tw-ring-color:#e700441a}@supports (color:color-mix(in lab,red,red)){.ring-rose-600\/10{--tw-ring-color:color-mix(in oklab,var(--color-rose-600)10%,transparent)}}.ring-white{--tw-ring-color:var(--color-white)}.ring-offset-2{--tw-ring-offset-width:2px;--tw-ring-offset-shadow:var(--tw-ring-inset,)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color)}.ring-offset-black{--tw-ring-offset-color:var(--color-black)}.blur{--tw-blur:blur(8px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-2xl{--tw-blur:blur(var(--blur-2xl));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-3xl{--tw-blur:blur(var(--blur-3xl));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-\[120px\]{--tw-blur:blur(120px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-\[150px\]{--tw-blur:blur(150px);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-md{--tw-blur:blur(var(--blur-md));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.blur-xl{--tw-blur:blur(var(--blur-xl));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow{--tw-drop-shadow-size:drop-shadow(0 1px 2px var(--tw-drop-shadow-color,#0000001a))drop-shadow(0 1px 1px var(--tw-drop-shadow-color,#0000000f));--tw-drop-shadow:drop-shadow(0 1px 2px #0000001a)drop-shadow(0 1px 1px #0000000f);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-lg{--tw-drop-shadow-size:drop-shadow(0 4px 4px var(--tw-drop-shadow-color,#00000026));--tw-drop-shadow:drop-shadow(var(--drop-shadow-lg));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-md{--tw-drop-shadow-size:drop-shadow(0 3px 3px var(--tw-drop-shadow-color,#0000001f));--tw-drop-shadow:drop-shadow(var(--drop-shadow-md));filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.grayscale{--tw-grayscale:grayscale(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-2xl{--tw-backdrop-blur:blur(var(--blur-2xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-3xl{--tw-backdrop-blur:blur(var(--blur-3xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-\[25px\]{--tw-backdrop-blur:blur(25px);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-lg{--tw-backdrop-blur:blur(var(--blur-lg));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-md{--tw-backdrop-blur:blur(var(--blur-md));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-xl{--tw-backdrop-blur:blur(var(--blur-xl));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-grayscale{--tw-backdrop-grayscale:grayscale(100%);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-invert{--tw-backdrop-invert:invert(100%);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-sepia{--tw-backdrop-sepia:sepia(100%);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-shadow{transition-property:box-shadow;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.delay-100{transition-delay:.1s}.delay-200{transition-delay:.2s}.delay-500{transition-delay:.5s}.delay-1000{transition-delay:1s}.duration-100{--tw-duration:.1s;transition-duration:.1s}.duration-150{--tw-duration:.15s;transition-duration:.15s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-500{--tw-duration:.5s;transition-duration:.5s}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}:where(.divide-x-reverse>:not(:last-child)){--tw-divide-x-reverse:1}.ring-inset{--tw-ring-inset:inset}@media(hover:hover){.group-hover\:scale-105:is(:where(.group):hover *){--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.group-hover\:rotate-12:is(:where(.group):hover *){rotate:12deg}.group-hover\:bg-green-600:is(:where(.group):hover *){background-color:var(--color-green-600)}.group-hover\:bg-red-600:is(:where(.group):hover *){background-color:var(--color-red-600)}.group-hover\:bg-white:is(:where(.group):hover *){background-color:var(--color-white)}.group-hover\:text-indigo-500:is(:where(.group):hover *){color:var(--color-indigo-500)}.group-hover\:text-indigo-600:is(:where(.group):hover *){color:var(--color-indigo-600)}.group-hover\:opacity-10:is(:where(.group):hover *){opacity:.1}.group-hover\:opacity-80:is(:where(.group):hover *){opacity:.8}.group-hover\:opacity-100:is(:where(.group):hover *){opacity:1}.group-hover\:shadow-lg:is(:where(.group):hover *){--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.group-active\:scale-95:is(:where(.group):active *){--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.last\:border-0:last-child{border-style:var(--tw-border-style);border-width:0}@media(hover:hover){.hover\:translate-y-\[2px\]:hover{--tw-translate-y:2px;translate:var(--tw-translate-x)var(--tw-translate-y)}.hover\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:scale-125:hover{--tw-scale-x:125%;--tw-scale-y:125%;--tw-scale-z:125%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\:border-gray-200:hover{border-color:var(--color-gray-200)}.hover\:border-indigo-100:hover{border-color:var(--color-indigo-100)}.hover\:border-indigo-200:hover{border-color:var(--color-indigo-200)}.hover\:border-white\/40:hover{border-color:#fff6}@supports (color:color-mix(in lab,red,red)){.hover\:border-white\/40:hover{border-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.hover\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\:bg-gray-300:hover{background-color:var(--color-gray-300)}.hover\:bg-gray-300\/50:hover{background-color:#d1d5dc80}@supports (color:color-mix(in lab,red,red)){.hover\:bg-gray-300\/50:hover{background-color:color-mix(in oklab,var(--color-gray-300)50%,transparent)}}.hover\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\:bg-orange-50:hover{background-color:var(--color-orange-50)}.hover\:bg-purple-600:hover{background-color:var(--color-purple-600)}.hover\:bg-red-50:hover{background-color:var(--color-red-50)}.hover\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\:bg-rose-700:hover{background-color:var(--color-rose-700)}.hover\:bg-white:hover{background-color:var(--color-white)}.hover\:bg-white\/10:hover{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/10:hover{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.hover\:bg-white\/20:hover{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/20:hover{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\:bg-white\/30:hover{background-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/30:hover{background-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.hover\:bg-white\/\[0\.06\]:hover{background-color:#ffffff0f}@supports (color:color-mix(in lab,red,red)){.hover\:bg-white\/\[0\.06\]:hover{background-color:color-mix(in oklab,var(--color-white)6%,transparent)}}.hover\:bg-gradient-to-r:hover{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.hover\:from-white:hover{--tw-gradient-from:var(--color-white);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:to-indigo-50:hover{--tw-gradient-to:var(--color-indigo-50);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\:text-indigo-600:hover{color:var(--color-indigo-600)}.hover\:text-purple-700:hover{color:var(--color-purple-700)}.hover\:text-white\/40:hover{color:#fff6}@supports (color:color-mix(in lab,red,red)){.hover\:text-white\/40:hover{color:color-mix(in oklab,var(--color-white)40%,transparent)}}.hover\:text-white\/60:hover{color:#fff9}@supports (color:color-mix(in lab,red,red)){.hover\:text-white\/60:hover{color:color-mix(in oklab,var(--color-white)60%,transparent)}}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-20:hover{opacity:.2}.hover\:opacity-100:hover{opacity:1}.hover\:shadow-\[0_3px_0_0_\#7c3aed\,0_5px_8px_rgba\(124\,58\,237\,0\.4\)\]:hover{--tw-shadow:0 3px 0 0 var(--tw-shadow-color,#7c3aed),0 5px 8px var(--tw-shadow-color,#7c3aed66);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:shadow-\[0_3px_0_0_\#d1d5db\,0_5px_8px_rgba\(0\,0\,0\,0\.15\)\]:hover{--tw-shadow:0 3px 0 0 var(--tw-shadow-color,#d1d5db),0 5px 8px var(--tw-shadow-color,#00000026);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:shadow-\[0_4px_0_0_\#4338ca\,0_6px_10px_rgba\(67\,56\,202\,0\.5\)\]:hover{--tw-shadow:0 4px 0 0 var(--tw-shadow-color,#4338ca),0 6px 10px var(--tw-shadow-color,#4338ca80);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:shadow-lg:hover{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:shadow-md:hover{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}}.focus\:border-indigo-200:focus{border-color:var(--color-indigo-200)}.focus\:border-indigo-500:focus{border-color:var(--color-indigo-500)}.focus\:border-indigo-500\/30:focus{border-color:#625fff4d}@supports (color:color-mix(in lab,red,red)){.focus\:border-indigo-500\/30:focus{border-color:color-mix(in oklab,var(--color-indigo-500)30%,transparent)}}.focus\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-4:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(4px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\:ring-indigo-500:focus{--tw-ring-color:var(--color-indigo-500)}.focus\:ring-orange-500:focus{--tw-ring-color:var(--color-orange-500)}.focus\:ring-purple-500:focus{--tw-ring-color:var(--color-purple-500)}.focus\:ring-yellow-500\/20:focus{--tw-ring-color:#edb20033}@supports (color:color-mix(in lab,red,red)){.focus\:ring-yellow-500\/20:focus{--tw-ring-color:color-mix(in oklab,var(--color-yellow-500)20%,transparent)}}.focus\:outline-none:focus{--tw-outline-style:none;outline-style:none}.active\:translate-y-\[5px\]:active{--tw-translate-y:5px;translate:var(--tw-translate-x)var(--tw-translate-y)}.active\:translate-y-\[6px\]:active{--tw-translate-y:6px;translate:var(--tw-translate-x)var(--tw-translate-y)}.active\:scale-90:active{--tw-scale-x:90%;--tw-scale-y:90%;--tw-scale-z:90%;scale:var(--tw-scale-x)var(--tw-scale-y)}.active\:scale-95:active{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.active\:scale-\[0\.98\]:active{scale:.98}.active\:bg-gray-50:active{background-color:var(--color-gray-50)}.active\:bg-gray-100:active{background-color:var(--color-gray-100)}.active\:bg-indigo-700:active{background-color:var(--color-indigo-700)}.active\:bg-red-50:active{background-color:var(--color-red-50)}.active\:bg-white\/20:active{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.active\:bg-white\/20:active{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.active\:shadow-\[0_0px_0_0_\#7c3aed\,0_2px_5px_rgba\(124\,58\,237\,0\.3\)\]:active{--tw-shadow:0 0px 0 0 var(--tw-shadow-color,#7c3aed),0 2px 5px var(--tw-shadow-color,#7c3aed4d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.active\:shadow-\[0_0px_0_0_\#4338ca\,0_2px_6px_rgba\(67\,56\,202\,0\.4\)\]:active{--tw-shadow:0 0px 0 0 var(--tw-shadow-color,#4338ca),0 2px 6px var(--tw-shadow-color,#4338ca66);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.active\:shadow-\[0_0px_0_0_\#d1d5db\,0_2px_5px_rgba\(0\,0\,0\,0\.1\)\]:active{--tw-shadow:0 0px 0 0 var(--tw-shadow-color,#d1d5db),0 2px 5px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.active\:shadow-xl:active{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:bg-gray-300:disabled{background-color:var(--color-gray-300)}.disabled\:opacity-50:disabled{opacity:.5}.disabled\:opacity-60:disabled{opacity:.6}@media(min-width:40rem){.sm\:hidden{display:none}.sm\:items-center{align-items:center}.sm\:rounded-3xl{border-radius:var(--radius-3xl)}.sm\:p-9{padding:calc(var(--spacing)*9)}}@media(min-width:64rem){.lg\:block{display:block}}@media(prefers-color-scheme:dark){:where(.dark\:divide-gray-700>:not(:last-child)){border-color:var(--color-gray-700)}.dark\:border-gray-600{border-color:var(--color-gray-600)}.dark\:border-gray-700{border-color:var(--color-gray-700)}.dark\:border-indigo-800\/50{border-color:#372aac80}@supports (color:color-mix(in lab,red,red)){.dark\:border-indigo-800\/50{border-color:color-mix(in oklab,var(--color-indigo-800)50%,transparent)}}.dark\:border-slate-600{border-color:var(--color-slate-600)}.dark\:border-slate-700{border-color:var(--color-slate-700)}.dark\:border-slate-800{border-color:var(--color-slate-800)}.dark\:border-slate-900{border-color:var(--color-slate-900)}.dark\:border-yellow-900\/30{border-color:#733e0a4d}@supports (color:color-mix(in lab,red,red)){.dark\:border-yellow-900\/30{border-color:color-mix(in oklab,var(--color-yellow-900)30%,transparent)}}.dark\:bg-blue-900\/20{background-color:#1c398e33}@supports (color:color-mix(in lab,red,red)){.dark\:bg-blue-900\/20{background-color:color-mix(in oklab,var(--color-blue-900)20%,transparent)}}.dark\:bg-blue-900\/30{background-color:#1c398e4d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-blue-900\/30{background-color:color-mix(in oklab,var(--color-blue-900)30%,transparent)}}.dark\:bg-gray-600{background-color:var(--color-gray-600)}.dark\:bg-gray-700{background-color:var(--color-gray-700)}.dark\:bg-gray-700\/50{background-color:#36415380}@supports (color:color-mix(in lab,red,red)){.dark\:bg-gray-700\/50{background-color:color-mix(in oklab,var(--color-gray-700)50%,transparent)}}.dark\:bg-gray-800{background-color:var(--color-gray-800)}.dark\:bg-gray-900{background-color:var(--color-gray-900)}.dark\:bg-green-900{background-color:var(--color-green-900)}.dark\:bg-green-900\/20{background-color:#0d542b33}@supports (color:color-mix(in lab,red,red)){.dark\:bg-green-900\/20{background-color:color-mix(in oklab,var(--color-green-900)20%,transparent)}}.dark\:bg-green-900\/30{background-color:#0d542b4d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-green-900\/30{background-color:color-mix(in oklab,var(--color-green-900)30%,transparent)}}.dark\:bg-indigo-900\/20{background-color:#312c8533}@supports (color:color-mix(in lab,red,red)){.dark\:bg-indigo-900\/20{background-color:color-mix(in oklab,var(--color-indigo-900)20%,transparent)}}.dark\:bg-indigo-900\/30{background-color:#312c854d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-indigo-900\/30{background-color:color-mix(in oklab,var(--color-indigo-900)30%,transparent)}}.dark\:bg-indigo-900\/50{background-color:#312c8580}@supports (color:color-mix(in lab,red,red)){.dark\:bg-indigo-900\/50{background-color:color-mix(in oklab,var(--color-indigo-900)50%,transparent)}}.dark\:bg-orange-900\/30{background-color:#7e2a0c4d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-orange-900\/30{background-color:color-mix(in oklab,var(--color-orange-900)30%,transparent)}}.dark\:bg-purple-900\/30{background-color:#59168b4d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-purple-900\/30{background-color:color-mix(in oklab,var(--color-purple-900)30%,transparent)}}.dark\:bg-purple-900\/50{background-color:#59168b80}@supports (color:color-mix(in lab,red,red)){.dark\:bg-purple-900\/50{background-color:color-mix(in oklab,var(--color-purple-900)50%,transparent)}}.dark\:bg-red-900\/30{background-color:#82181a4d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-red-900\/30{background-color:color-mix(in oklab,var(--color-red-900)30%,transparent)}}.dark\:bg-slate-600{background-color:var(--color-slate-600)}.dark\:bg-slate-700{background-color:var(--color-slate-700)}.dark\:bg-slate-800{background-color:var(--color-slate-800)}.dark\:bg-slate-800\/50{background-color:#1d293d80}@supports (color:color-mix(in lab,red,red)){.dark\:bg-slate-800\/50{background-color:color-mix(in oklab,var(--color-slate-800)50%,transparent)}}.dark\:bg-slate-900{background-color:var(--color-slate-900)}.dark\:bg-slate-900\/80{background-color:#0f172bcc}@supports (color:color-mix(in lab,red,red)){.dark\:bg-slate-900\/80{background-color:color-mix(in oklab,var(--color-slate-900)80%,transparent)}}.dark\:bg-yellow-900\/20{background-color:#733e0a33}@supports (color:color-mix(in lab,red,red)){.dark\:bg-yellow-900\/20{background-color:color-mix(in oklab,var(--color-yellow-900)20%,transparent)}}.dark\:bg-yellow-900\/30{background-color:#733e0a4d}@supports (color:color-mix(in lab,red,red)){.dark\:bg-yellow-900\/30{background-color:color-mix(in oklab,var(--color-yellow-900)30%,transparent)}}.dark\:from-indigo-900\/20{--tw-gradient-from:#312c8533}@supports (color:color-mix(in lab,red,red)){.dark\:from-indigo-900\/20{--tw-gradient-from:color-mix(in oklab,var(--color-indigo-900)20%,transparent)}}.dark\:from-indigo-900\/20{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:from-indigo-900\/30{--tw-gradient-from:#312c854d}@supports (color:color-mix(in lab,red,red)){.dark\:from-indigo-900\/30{--tw-gradient-from:color-mix(in oklab,var(--color-indigo-900)30%,transparent)}}.dark\:from-indigo-900\/30{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:from-purple-900\/30{--tw-gradient-from:#59168b4d}@supports (color:color-mix(in lab,red,red)){.dark\:from-purple-900\/30{--tw-gradient-from:color-mix(in oklab,var(--color-purple-900)30%,transparent)}}.dark\:from-purple-900\/30{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:from-slate-800{--tw-gradient-from:var(--color-slate-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:to-purple-800\/50{--tw-gradient-to:#6e11b080}@supports (color:color-mix(in lab,red,red)){.dark\:to-purple-800\/50{--tw-gradient-to:color-mix(in oklab,var(--color-purple-800)50%,transparent)}}.dark\:to-purple-800\/50{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:to-purple-900\/20{--tw-gradient-to:#59168b33}@supports (color:color-mix(in lab,red,red)){.dark\:to-purple-900\/20{--tw-gradient-to:color-mix(in oklab,var(--color-purple-900)20%,transparent)}}.dark\:to-purple-900\/20{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:to-purple-900\/30{--tw-gradient-to:#59168b4d}@supports (color:color-mix(in lab,red,red)){.dark\:to-purple-900\/30{--tw-gradient-to:color-mix(in oklab,var(--color-purple-900)30%,transparent)}}.dark\:to-purple-900\/30{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:to-slate-700{--tw-gradient-to:var(--color-slate-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:text-blue-400{color:var(--color-blue-400)}.dark\:text-gray-200{color:var(--color-gray-200)}.dark\:text-gray-300{color:var(--color-gray-300)}.dark\:text-gray-400{color:var(--color-gray-400)}.dark\:text-gray-500{color:var(--color-gray-500)}.dark\:text-gray-600{color:var(--color-gray-600)}.dark\:text-green-400{color:var(--color-green-400)}.dark\:text-indigo-100{color:var(--color-indigo-100)}.dark\:text-indigo-300{color:var(--color-indigo-300)}.dark\:text-indigo-400{color:var(--color-indigo-400)}.dark\:text-indigo-500{color:var(--color-indigo-500)}.dark\:text-indigo-600{color:var(--color-indigo-600)}.dark\:text-purple-300{color:var(--color-purple-300)}.dark\:text-purple-400{color:var(--color-purple-400)}.dark\:text-red-400{color:var(--color-red-400)}.dark\:text-white{color:var(--color-white)}.dark\:text-yellow-300{color:var(--color-yellow-300)}.dark\:text-yellow-400{color:var(--color-yellow-400)}.dark\:text-yellow-500{color:var(--color-yellow-500)}.dark\:placeholder-gray-500::placeholder{color:var(--color-gray-500)}@media(hover:hover){.dark\:group-hover\:bg-slate-700:is(:where(.group):hover *){background-color:var(--color-slate-700)}.dark\:group-hover\:text-indigo-400:is(:where(.group):hover *){color:var(--color-indigo-400)}.dark\:hover\:border-slate-700:hover{border-color:var(--color-slate-700)}.dark\:hover\:border-slate-800:hover{border-color:var(--color-slate-800)}.dark\:hover\:bg-gray-600:hover{background-color:var(--color-gray-600)}.dark\:hover\:bg-gray-700:hover{background-color:var(--color-gray-700)}.dark\:hover\:bg-gray-700\/50:hover{background-color:#36415380}@supports (color:color-mix(in lab,red,red)){.dark\:hover\:bg-gray-700\/50:hover{background-color:color-mix(in oklab,var(--color-gray-700)50%,transparent)}}.dark\:hover\:bg-gray-800:hover{background-color:var(--color-gray-800)}.dark\:hover\:bg-orange-900\/10:hover{background-color:#7e2a0c1a}@supports (color:color-mix(in lab,red,red)){.dark\:hover\:bg-orange-900\/10:hover{background-color:color-mix(in oklab,var(--color-orange-900)10%,transparent)}}.dark\:hover\:bg-red-900\/10:hover{background-color:#82181a1a}@supports (color:color-mix(in lab,red,red)){.dark\:hover\:bg-red-900\/10:hover{background-color:color-mix(in oklab,var(--color-red-900)10%,transparent)}}.dark\:hover\:bg-red-900\/20:hover{background-color:#82181a33}@supports (color:color-mix(in lab,red,red)){.dark\:hover\:bg-red-900\/20:hover{background-color:color-mix(in oklab,var(--color-red-900)20%,transparent)}}.dark\:hover\:bg-slate-500:hover{background-color:var(--color-slate-500)}.dark\:hover\:bg-slate-600:hover{background-color:var(--color-slate-600)}.dark\:hover\:bg-slate-700:hover{background-color:var(--color-slate-700)}.dark\:hover\:from-slate-800:hover{--tw-gradient-from:var(--color-slate-800);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.dark\:hover\:to-slate-700\/50:hover{--tw-gradient-to:#31415880}@supports (color:color-mix(in lab,red,red)){.dark\:hover\:to-slate-700\/50:hover{--tw-gradient-to:color-mix(in oklab,var(--color-slate-700)50%,transparent)}}.dark\:hover\:to-slate-700\/50:hover{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}}.dark\:focus\:border-indigo-800:focus{border-color:var(--color-indigo-800)}.dark\:active\:bg-red-900\/20:active{background-color:#82181a33}@supports (color:color-mix(in lab,red,red)){.dark\:active\:bg-red-900\/20:active{background-color:color-mix(in oklab,var(--color-red-900)20%,transparent)}}.dark\:active\:bg-slate-700:active{background-color:var(--color-slate-700)}.dark\:active\:bg-slate-800:active{background-color:var(--color-slate-800)}}}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@keyframes fade-in{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes scale-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes slide-in-right{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes slide-in-left{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}@keyframes bounce-in{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes pulse-glow{0%,to{box-shadow:0 0 20px #6366f180}50%{box-shadow:0 0 40px #6366f1cc}}.animate-shimmer{animation:1.5s infinite shimmer}.animate-slide-in-left{animation:.3s ease-out slide-in-left}.animate-bounce-in{animation:.5s ease-out bounce-in}.animate-ping{animation:1s cubic-bezier(0,0,.2,1) infinite ping}.animate-pulse-glow{animation:2s ease-in-out infinite pulse-glow}@media(hover:hover){.touch-active:hover{transform:scale(.95)}}@media(hover:none){.touch-active:active{transform:scale(.95)}}.safe-area-left{padding-left:env(safe-area-inset-left)}.safe-area-right{padding-right:env(safe-area-inset-right)}.loading-dots{gap:4px;display:flex}.loading-dots div{background:currentColor;border-radius:50%;width:8px;height:8px;animation:1.4s ease-in-out infinite both bounce}.loading-dots div:first-child{animation-delay:-.32s}.loading-dots div:nth-child(2){animation-delay:-.16s}@keyframes bounce{0%,to{animation-timing-function:cubic-bezier(.8,0,1,1);transform:translateY(-25%)}50%{animation-timing-function:cubic-bezier(0,0,.2,1);transform:none}}:root{--safe-area-top:env(safe-area-inset-top,0px);--safe-area-bottom:env(safe-area-inset-bottom,0px);--safe-area-left:env(safe-area-inset-left,0px);--safe-area-right:env(safe-area-inset-right,0px);--primary:#4345e9;--primary-glow:#6366f166;--secondary:#f43f5e;--accent:#8b5cf6;--success:#10b981;--warning:#f59e0b;--error:#ef4444;--bg-light:#f8fafc;--bg-dark:#0f172a;--card-light:#fffc;--card-dark:#1e293bb3;--text-primary-light:#1e293b;--text-secondary-light:#64748b;--text-primary-dark:#f8fafc;--text-secondary-dark:#94a3b8}*{-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;box-sizing:border-box;touch-action:manipulation;transition:background-color .2s,border-color .2s}input,textarea{-webkit-user-select:text;user-select:text;font-size:16px!important}html{-webkit-text-size-adjust:100%;width:100%;height:100%;position:fixed;overflow:hidden}body{overscroll-behavior:none;-webkit-overflow-scrolling:touch;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:var(--bg-light);width:100%;height:100%;color:var(--text-primary-light);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;position:fixed;overflow:hidden}#root{width:100%;height:100%;overflow:hidden}body.offline:before{content:"You are offline";top:var(--safe-area-top);background:var(--error);color:#fff;text-align:center;z-index:99999;padding:8px;font-size:13px;font-weight:600;position:fixed;left:0;right:0;box-shadow:0 2px 10px #0000001a}.safe-area-top{padding-top:max(16px,var(--safe-area-top))}.safe-area-bottom{padding-bottom:max(16px,calc(var(--safe-area-bottom) + 12px))}.touch-target{justify-content:center;align-items:center;min-width:48px;min-height:48px;display:flex}.touch-active:active{opacity:.8;transition:transform .1s cubic-bezier(.32,.72,0,1);transform:scale(.96)}::-webkit-scrollbar{width:2px;height:2px}::-webkit-scrollbar-thumb{background:#0000001a;border-radius:10px}::-webkit-scrollbar-thumb:hover{background:#00000040}.dark ::-webkit-scrollbar-thumb{background:#ffffff26}.scrollbar-hide{-ms-overflow-style:none;scrollbar-width:none}.scrollbar-hide::-webkit-scrollbar{display:none}.dark{color-scheme:dark}.dark body{background-color:var(--bg-dark);color:var(--text-primary-dark)}@keyframes slideUp{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}@keyframes slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes slideInRight{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes slideOutRight{0%{transform:translate(0)}to{transform:translate(100%)}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes pulse{50%{opacity:.5}}@keyframes spin{to{transform:rotate(360deg)}}@keyframes shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.animate-slide-up{animation:.3s cubic-bezier(.32,.72,0,1) slideUp}.animate-slide-down{animation:.3s cubic-bezier(.32,.72,0,1) slideDown}.animate-slide-in-right{animation:.3s cubic-bezier(.32,.72,0,1) slideInRight}.animate-fade-in{animation:.2s ease-out fadeIn}.animate-scale-in{animation:.2s cubic-bezier(.32,.72,0,1) scaleIn}.animate-pulse{animation:2s cubic-bezier(.4,0,.6,1) infinite pulse}.animate-bounce{animation:1s infinite bounce}.animate-spin{animation:1s linear infinite spin}.animate-shake{animation:.5s ease-in-out shake}@keyframes messageIn{0%{opacity:0;transform:scale(.85)translateY(10px)}to{opacity:1;transform:scale(1)translateY(0)}}.message-bubble{animation:.25s cubic-bezier(.32,.72,0,1) messageIn}@keyframes typingDot{0%,60%,to{opacity:.5;transform:translateY(0)}30%{opacity:1;transform:translateY(-4px)}}.typing-dot{animation:1.4s ease-in-out infinite typingDot}.typing-dot:nth-child(2){animation-delay:.2s}.typing-dot:nth-child(3){animation-delay:.4s}@keyframes ripple{to{opacity:0;transform:scale(4)}}.ripple{position:relative;overflow:hidden}.ripple:after{content:"";opacity:0;transform-origin:50%;background:#fff6;border-radius:100%;width:5px;height:5px;position:absolute;top:50%;left:50%;transform:scale(1)translate(-50%,-50%)}.ripple:active:after{opacity:.4;transition:all;animation:.5s ease-out ripple;transform:scale(0)}.glass{background:var(--card-light);-webkit-backdrop-filter:blur(20px)saturate(180%);border:1px solid #ffffff4d}.dark .glass{background:var(--card-dark);border:1px solid #ffffff0d}.gradient-primary{background:linear-gradient(135deg,#6366f1,#a855f7)}.gradient-secondary{background:linear-gradient(135deg,#f43f5e,#fb923c)}.premium-card{background:var(--card-light);border:1px solid #fff6;border-radius:24px;box-shadow:0 4px 20px #00000008}.dark .premium-card{background:var(--card-dark);border:1px solid #ffffff0d;box-shadow:0 4px 20px #0003}.premium-shadow{box-shadow:0 10px 40px -10px #6366f133}.dark .premium-shadow{box-shadow:0 10px 40px -10px #00000080}.chat-wallpaper{background-color:#ece5dd;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.dark .chat-wallpaper{background-color:#0b141a;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.02'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.pull-indicator{transition:transform .2s cubic-bezier(.32,.72,0,1)}.skeleton{background:linear-gradient(90deg,#0000000f 25%,#0000001f,#0000000f 75%) 0 0/200% 100%;animation:1.5s infinite shimmer}.dark .skeleton{background:linear-gradient(90deg,#ffffff0f 25%,#ffffff1f,#ffffff0f 75%) 0 0/200% 100%}.bottom-sheet-handle{background:#80808066;border-radius:2px;width:36px;height:4px;margin:8px auto 4px}.online-indicator{background:#22c55e;border:2px solid #fff;border-radius:50%;width:12px;height:12px;position:absolute;bottom:0;right:0}.dark .online-indicator{border-color:#1e293b}.badge-pulse{animation:2s infinite pulse}input:-webkit-autofill{transition:background-color 5000s ease-in-out;-webkit-text-fill-color:inherit!important;-webkit-box-shadow:inset 0 0 0 30px #fff!important}input:-webkit-autofill:hover{transition:background-color 5000s ease-in-out;-webkit-text-fill-color:inherit!important;-webkit-box-shadow:inset 0 0 0 30px #fff!important}input:-webkit-autofill:focus{transition:background-color 5000s ease-in-out;-webkit-text-fill-color:inherit!important;-webkit-box-shadow:inset 0 0 0 30px #fff!important}input:-webkit-autofill:active{transition:background-color 5000s ease-in-out;-webkit-text-fill-color:inherit!important;-webkit-box-shadow:inset 0 0 0 30px #fff!important}.dark input:-webkit-autofill{-webkit-text-fill-color:white!important;-webkit-box-shadow:inset 0 0 0 30px #1e293b!important}.dark input:-webkit-autofill:hover{-webkit-text-fill-color:white!important;-webkit-box-shadow:inset 0 0 0 30px #1e293b!important}.dark input:-webkit-autofill:focus{-webkit-text-fill-color:white!important;-webkit-box-shadow:inset 0 0 0 30px #1e293b!important}.dark input:-webkit-autofill:active{-webkit-text-fill-color:white!important;-webkit-box-shadow:inset 0 0 0 30px #1e293b!important}::selection{background:#6366f14d}:focus{outline:none}:focus-visible{outline-offset:2px;outline:2px solid #6366f1}.swipe-action-left{transition:transform .3s cubic-bezier(.32,.72,0,1);transform:translate(0)}.swipe-action-left.swiped{transform:translate(80px)}.swipe-action-right{transition:transform .3s cubic-bezier(.32,.72,0,1);transform:translate(0)}.swipe-action-right.swiped{transform:translate(-80px)}.long-press-highlight{transition:background-color .15s}.long-press-highlight:active{background-color:#0000000d}.dark .long-press-highlight:active{background-color:#ffffff0d}.img-loading{filter:blur(10px);transition:filter .3s}.img-loaded{filter:blur()}.modal-backdrop{-webkit-backdrop-filter:blur(4px);background:#00000080}@supports (height:100dvh){html,body,#root{height:100dvh}}@media(max-height:500px){.keyboard-visible .bottom-nav{display:none}}.chat-input-container{z-index:50;background:inherit;transition:transform .2s ease-out;position:relative}.chat-view-container{flex-direction:column;height:100%;display:flex;overflow:hidden}.chat-messages-container{-webkit-overflow-scrolling:touch;overscroll-behavior:contain;flex:1;overflow:hidden auto}@supports (-webkit-touch-callout:none){body{position:fixed;overflow:hidden}input[type=text],input[type=email],input[type=password],textarea{transform:translateZ(0);font-size:16px!important}}@media(orientation:landscape)and (max-height:500px){.safe-area-bottom{padding-bottom:8px}}@media print{body{background:#fff!important}.no-print{display:none!important}}@media(prefers-contrast:high){.glass{background:#fff}.dark .glass{background:#000}}@media(prefers-reduced-motion:reduce){*,:before,:after{transition-duration:.01ms!important;animation-duration:.01ms!important;animation-iteration-count:1!important}}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-pan-x{syntax:"*";inherits:false}@property --tw-pan-y{syntax:"*";inherits:false}@property --tw-pinch-zoom{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-space-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-divide-x-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-divide-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-ordinal{syntax:"*";inherits:false}@property --tw-slashed-zero{syntax:"*";inherits:false}@property --tw-numeric-figure{syntax:"*";inherits:false}@property --tw-numeric-spacing{syntax:"*";inherits:false}@property --tw-numeric-fraction{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}</style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
